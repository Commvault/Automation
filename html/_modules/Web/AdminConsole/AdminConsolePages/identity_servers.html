

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Web.AdminConsole.AdminConsolePages.identity_servers &mdash; Commvault Automation 11.20 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> Commvault Automation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"></div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Commvault Automation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../index.html">Module code</a> &raquo;</li>
        
      <li>Web.AdminConsole.AdminConsolePages.identity_servers</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for Web.AdminConsole.AdminConsolePages.identity_servers</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This module provides the function or operations that can be performed on the</span>
<span class="sd">Companies page on the AdminConsole</span>

<span class="sd">Class:</span>

<span class="sd">    IdentityServers() -&gt; AdminConsoleBase() -&gt; object()</span>

<span class="sd">Functions:</span>

<span class="sd">_init_()                -- initialize the class object identity serveres page</span>
<span class="sd">click_add_saml_app()    -- clicks the add saml app link</span>
<span class="sd">click_saml_tab()        -- selects the SAML tab in add domain dialog box</span>
<span class="sd">set_application_name()   -- fills the application name field with the given application name</span>
<span class="sd">set_smtp()               -- fills the SMTP field with the given value</span>
<span class="sd">upload_idp_metadata()   -- uploads the idp metadata file</span>
<span class="sd">set_webconsole_url()    -- fills the webconsole_url field with the specified URL</span>
<span class="sd">set_company_for_app() -- fills the company field with given value</span>
<span class="sd">upload_jks_file()       -- uploads the keystore file</span>
<span class="sd">set_alias_name()     -- fills the alias name field with the given value</span>
<span class="sd">set_keystore_password() --sets the keystore password field with given value</span>
<span class="sd">set_key_password()    --sets the key password field with given value</span>
<span class="sd">save_saml_app()        --clicks the save button in add saml app</span>
<span class="sd">select_identity_server()    --clicks on the given saml app link</span>
<span class="sd">add_saml_app()       -- adds saml app</span>


<span class="sd">Class:</span>
<span class="sd">    Domains</span>

<span class="sd">Functions:</span>

<span class="sd">__init__()                      -- initialize the class object identity serveres page</span>
<span class="sd">__click_ad_tab()                -- selects the AD tab in add domain dialog box</span>
<span class="sd">__enable_proxy_client()         -- Checks the enable proxy client checkbox</span>
<span class="sd">__disable_proxy_client()        -- Un-checks the enable proxy client checkbox</span>
<span class="sd">__return_elements()             -- Returns elements for the given xpath</span>
<span class="sd">__get_text_from_element_obj()   -- Returns text from the give element object</span>
<span class="sd">get_domains_list()              -- Returns list of domains</span>
<span class="sd">add_domain()                    -- adds a new domain to the admin console</span>
<span class="sd">delete_domain()                 -- delete the domain with the specified name</span>
<span class="sd">get_domains_list()              -- returns list of all domains displayed on the page</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">Web.AdminConsole.Components.table</span> <span class="kn">import</span> <span class="n">Table</span>
<span class="kn">from</span> <span class="nn">Web.AdminConsole.Components.panel</span> <span class="kn">import</span> <span class="n">ModalPanel</span><span class="p">,</span> <span class="n">DropDown</span>
<span class="kn">from</span> <span class="nn">Web.AdminConsole.Components.dialog</span> <span class="kn">import</span> <span class="n">TransferOwnership</span>
<span class="kn">from</span> <span class="nn">Web.Common.page_object</span> <span class="kn">import</span> <span class="n">WebAction</span><span class="p">,</span> <span class="n">PageService</span>


<div class="viewcode-block" id="IdentityServers"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.AdminConsolePages.html#Web.AdminConsole.AdminConsolePages.identity_servers.IdentityServers">[docs]</a><span class="k">class</span> <span class="nc">IdentityServers</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class provides the operations performed on Identity servers Page of adminconsole</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">admin_console</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__driver</span> <span class="o">=</span> <span class="n">admin_console</span><span class="o">.</span><span class="n">driver</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span> <span class="o">=</span> <span class="n">admin_console</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__navigator</span> <span class="o">=</span> <span class="n">admin_console</span><span class="o">.</span><span class="n">navigator</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">log</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__drop_down</span> <span class="o">=</span> <span class="n">DropDown</span><span class="p">(</span><span class="n">admin_console</span><span class="p">)</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">click_add_saml_app</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        clicks the add saml app link</span>
<span class="sd">        Args    :    None</span>
<span class="sd">        Returns :    None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">span_elem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s2">&quot;//span[@class=&#39;k-link k-menu-link&#39;]&quot;</span><span class="p">)</span>
        <span class="n">span_elem</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s2">&quot;//a[contains(text(),</span><span class="se">\</span>
<span class="s2">            &#39;&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">props</span><span class="p">[</span><span class="s1">&#39;label.add&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;&#39;)]&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">click_saml_tab</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        selects the SAML tab in add domain dialog box</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s2">&quot;//div[@ng-click=&#39;authenticationChoice=2&#39;]&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">set_application_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        fills the application name field with the given application name</span>
<span class="sd">        Args:</span>
<span class="sd">        app_name    (str):name of the SAML app to edit</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">fill_form_by_id</span><span class="p">(</span><span class="s2">&quot;name2&quot;</span><span class="p">,</span> <span class="n">app_name</span><span class="p">)</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">upload_idp_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idp_metadata_path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        uploads the idp metadata file</span>
<span class="sd">        Args:</span>
<span class="sd">        idp_metadata_path    (str):path of idp metadata file</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__driver</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s2">&quot;IDPMetadata&quot;</span><span class="p">)</span>\
            <span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="n">idp_metadata_path</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">set_smtp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">smtp_addr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        fills the SMTP field with the specified value</span>
<span class="sd">        Args:</span>
<span class="sd">        smtp_addr    (str):smtp address of the redirect rule</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">fill_form_by_id</span><span class="p">(</span><span class="s2">&quot;SMTPAddressForDummyDomain&quot;</span><span class="p">,</span> <span class="n">smtp_addr</span><span class="p">)</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">set_webconsole_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">webconsole_url</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        fills the webconsole url field with the specified URL</span>
<span class="sd">        Args:</span>
<span class="sd">        webconsole_url    (str):url of webconsole to set</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">fill_form_by_id</span><span class="p">(</span><span class="s2">&quot;webConsoleUrl&quot;</span><span class="p">,</span> <span class="n">webconsole_url</span><span class="p">)</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">set_company_for_app</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">company_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        fills the company name field with given value</span>
<span class="sd">        Args:</span>
<span class="sd">        company_name    (str):name of the company to set on app</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__drop_down</span><span class="o">.</span><span class="n">select_drop_down_values</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="n">company_name</span><span class="p">])</span>


    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">upload_jks_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">jks_file_path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        uploads the keystore file</span>
<span class="sd">        Args:</span>
<span class="sd">        jks_file_path    (str):path of the jks file to upload</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__driver</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s2">&quot;SPMetadata&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="n">jks_file_path</span><span class="p">)</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">set_alias_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        fills the alias name field with the given value</span>
<span class="sd">        Args:</span>
<span class="sd">        alias_name    (str):sets the given alias name for keystore file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">fill_form_by_id</span><span class="p">(</span><span class="s2">&quot;aliasName&quot;</span><span class="p">,</span> <span class="n">alias_name</span><span class="p">)</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">set_keystore_password</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keystore_password</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        fills the keystore password field with the given value</span>
<span class="sd">        Args:</span>
<span class="sd">        keystore_password    (str):sets the given keystore_password</span>
<span class="sd">                                 for keystore file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">fill_form_by_id</span><span class="p">(</span><span class="s2">&quot;keyStorePassword&quot;</span><span class="p">,</span> <span class="n">keystore_password</span><span class="p">)</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">set_key_password</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key_password</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fills the key password field with the given value</span>
<span class="sd">        Args:</span>
<span class="sd">        alias_name    (str):sets the given key password</span>
<span class="sd">                             for keystore file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">fill_form_by_id</span><span class="p">(</span><span class="s2">&quot;keyPassword&quot;</span><span class="p">,</span> <span class="n">key_password</span><span class="p">)</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">save_saml_app</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        clicks the save button in add saml app</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">submit_form</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;addAppForm&#39;</span><span class="p">)</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">select_identity_server</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_name</span><span class="p">,</span> <span class="n">app_type</span> <span class="o">=</span><span class="s2">&quot;SAML&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        selects the given app with search box</span>
<span class="sd">        Args:</span>
<span class="sd">        app_name    (str):app name to select</span>
<span class="sd">        type        (str):AD/SAML</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">access_link</span><span class="p">(</span><span class="n">app_name</span><span class="p">)</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">add_saml_app</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_name</span><span class="p">,</span> <span class="n">idp_metadata_path</span><span class="p">,</span> <span class="n">smtp_address</span><span class="p">,</span>
                     <span class="n">webconsole_url</span><span class="p">,</span> <span class="n">enable_company</span><span class="p">,</span>
                     <span class="n">company_name</span><span class="p">,</span> <span class="n">jks_file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">alias_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">keystore_password</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">key_password</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">auto_generate_key</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds the saml app with the specified inputs in the arguments.</span>
<span class="sd">        Args:</span>
<span class="sd">        app_name            (str)    : name of SAML app</span>
<span class="sd">        idp_metadata_path    (str)    :IDP metadata file path</span>
<span class="sd">        webconsole_url        (str)   :webconsole url to edit</span>
<span class="sd">        enable_company        (bool)    :True if created for company</span>
<span class="sd">        company_name            (str)    :name of company to be added</span>
<span class="sd">        jks_file_path        (str)    :keystore file path</span>
<span class="sd">        key_password        (str)     : key password for the</span>
<span class="sd">                                         .jks file</span>
<span class="sd">        keystore_password    (str)    :keystore password for</span>
<span class="sd">                                        the .jks file</span>
<span class="sd">        alias_name            (str)    :alias name for</span>
<span class="sd">                                        the .jks file</span>
<span class="sd">        auto_generate_key    (bool)    :True if key is auto generated</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">click_add_saml_app</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">wait_for_completion</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">click_saml_tab</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_application_name</span><span class="p">(</span><span class="n">app_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">upload_idp_metadata</span><span class="p">(</span><span class="n">idp_metadata_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_smtp</span><span class="p">(</span><span class="n">smtp_address</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_webconsole_url</span><span class="p">(</span><span class="n">webconsole_url</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">enable_company</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_company_for_app</span><span class="p">(</span><span class="n">company_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">auto_generate_key</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">toggle_disable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">props</span><span class="p">[</span><span class="s1">&#39;label.autoGenerateKey&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">upload_jks_file</span><span class="p">(</span><span class="n">jks_file_path</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_alias_name</span><span class="p">(</span><span class="n">alias_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_keystore_password</span><span class="p">(</span><span class="n">keystore_password</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_key_password</span><span class="p">(</span><span class="n">key_password</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">toggle_enable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">props</span><span class="p">[</span><span class="s1">&#39;label.autoGenerateKey&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_saml_app</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">check_error_message</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="Domains"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.AdminConsolePages.html#Web.AdminConsole.AdminConsolePages.identity_servers.Domains">[docs]</a><span class="k">class</span> <span class="nc">Domains</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">admin_console</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__driver</span> <span class="o">=</span> <span class="n">admin_console</span><span class="o">.</span><span class="n">driver</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span> <span class="o">=</span> <span class="n">admin_console</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__modal_panel</span> <span class="o">=</span> <span class="n">ModalPanel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__transfer_ownership</span> <span class="o">=</span> <span class="n">TransferOwnership</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__drop_down</span> <span class="o">=</span> <span class="n">DropDown</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="p">)</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">__click_ad_tab</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        selects the AD tab in add domain dialog box</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span>
            <span class="s2">&quot;//div[@ng-click=&#39;authenticationChoice=1&#39;]&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">enable_proxy_client</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks the proxy client checkbox&quot;&quot;&quot;</span>
        <span class="n">hidden_checkbox_xpath</span> <span class="o">=</span> <span class="s2">&quot;//input[@id=&#39;accessADProxy&#39;]&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="n">hidden_checkbox_xpath</span><span class="p">)</span><span class="o">.</span><span class="n">is_selected</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">hidden_checkbox_xpath</span><span class="si">}</span><span class="s2">/../label&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">disable_proxy_client</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Unchecks the proxy client checkbox&quot;&quot;&quot;</span>
        <span class="n">hidden_checkbox_xpath</span> <span class="o">=</span> <span class="s2">&quot;//input[@id=&#39;accessADProxy&#39;]&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="n">hidden_checkbox_xpath</span><span class="p">)</span><span class="o">.</span><span class="n">is_selected</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">hidden_checkbox_xpath</span><span class="si">}</span><span class="s2">/../label&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">return_elements</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xpath</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns elements&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__driver</span><span class="o">.</span><span class="n">find_elements_by_xpath</span><span class="p">(</span><span class="n">xpath</span><span class="p">)</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">get_text_from_element_obj</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elem</span><span class="p">,</span> <span class="n">xpath</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns text from element object&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">elem</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="n">xpath</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">get_domains_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Method to get domains list&quot;&quot;&quot;</span>
        <span class="n">domain_names</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">elems</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">return_elements</span><span class="p">(</span>
            <span class="s2">&quot;//div[@class=&#39;k-grid-content k-auto-scrollable&#39;]//tbody/tr&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">elems</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_text_from_element_obj</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="s2">&quot;./td[2]/span&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="s1">&#39;AD&#39;</span><span class="p">:</span>
                <span class="n">domain_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_text_from_element_obj</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="s2">&quot;./td[1]/span/a&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
                <span class="n">domain_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">domain_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">domain_names</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">add_domain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                   <span class="n">domain_name</span><span class="p">,</span>
                   <span class="n">netbios_name</span><span class="p">,</span>
                   <span class="n">username</span><span class="p">,</span>
                   <span class="n">password</span><span class="p">,</span>
                   <span class="n">proxy_client</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                   <span class="n">proxy_client_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                   <span class="n">company_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                   <span class="n">user_group</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                   <span class="n">local_group</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                   <span class="n">quota_enabled</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                   <span class="n">quota_limit</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a new domain to the commcell</span>

<span class="sd">        Args:</span>
<span class="sd">            domain_name (basestring) : the name of the domain</span>

<span class="sd">            netbios_name (basestring): the netbios name of the domain</span>

<span class="sd">            username (basestring)    : the username of the domain</span>

<span class="sd">            password (basestring)    : the password of the domain</span>

<span class="sd">            proxy_client(boolean)    : enable/disable Access AD via client</span>

<span class="sd">            proxy_client_value(basestring) : client to access AD server from</span>

<span class="sd">            company_name (basestring): company name to be associated with domain</span>

<span class="sd">            user_group (basestring): user group be associated with domain</span>

<span class="sd">            local_group (list): list of local user groups to be associated with domain</span>

<span class="sd">            quota_enabled (boolean) : enable/disable quota enabled checkbox</span>

<span class="sd">            quota_limit (int)       : value of quota limit</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">select_hyperlink</span><span class="p">(</span><span class="s2">&quot;Add&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__click_ad_tab</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__drop_down</span><span class="o">.</span><span class="n">select_drop_down_values</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;Active directory&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">fill_form_by_id</span><span class="p">(</span><span class="s2">&quot;netBiosName&quot;</span><span class="p">,</span> <span class="n">netbios_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">fill_form_by_id</span><span class="p">(</span><span class="s2">&quot;domainName&quot;</span><span class="p">,</span> <span class="n">domain_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">fill_form_by_id</span><span class="p">(</span><span class="s2">&quot;uname&quot;</span><span class="p">,</span> <span class="n">username</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">fill_form_by_id</span><span class="p">(</span><span class="s2">&quot;pass&quot;</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">proxy_client</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">enable_proxy_client</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">proxy_client_value</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__drop_down</span><span class="o">.</span><span class="n">select_drop_down_values</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="n">proxy_client_value</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">disable_proxy_client</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">company_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">select_value_from_dropdown</span><span class="p">(</span><span class="s2">&quot;createForCompanies&quot;</span><span class="p">,</span> <span class="n">company_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">submit_form</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">check_error_message</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">user_group</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_user_group</span><span class="p">(</span><span class="n">user_group</span><span class="p">,</span> <span class="n">local_group</span><span class="p">,</span> <span class="n">quota_enabled</span><span class="p">,</span> <span class="n">quota_limit</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">cancel_form</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">add_user_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_group</span><span class="p">,</span> <span class="n">local_group</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">quota_enabled</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">quota_limit</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method to add user group to the domain</span>

<span class="sd">        Args:</span>
<span class="sd">            user_group  (string)    : the user group to be added to the domain</span>

<span class="sd">            local_group (list)      : list of local groups to associate with the domain</span>

<span class="sd">            quota_enabled (boolean) : enable/disable quota enabled checkbox</span>

<span class="sd">            quota_limit (int)       : value of quota limit</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__modal_panel</span><span class="o">.</span><span class="n">search_and_select</span><span class="p">(</span><span class="s2">&quot;Group name&quot;</span><span class="p">,</span> <span class="n">user_group</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">local_group</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__drop_down</span><span class="o">.</span><span class="n">select_drop_down_values</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">local_group</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">quota_enabled</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">select_checkbox</span><span class="p">(</span><span class="s2">&quot;quotaEnabled&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">quota_limit</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">fill_form_by_id</span><span class="p">(</span><span class="s2">&quot;quotaLimit&quot;</span><span class="p">,</span> <span class="n">quota_limit</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">deselect_checkbox</span><span class="p">(</span><span class="s2">&quot;quotaEnabled&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__modal_panel</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">delete_domain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain_name</span><span class="p">,</span> <span class="n">skip_ownership_transfer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">transfer_owner</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes the domain with the given name</span>

<span class="sd">        Args:</span>
<span class="sd">            domain_name (string)            : the name of the domain whose information has to</span>
<span class="sd">                                                   modified</span>

<span class="sd">            skip_ownership_transfer (bool)  : whether ownerhip has to be transferred or not</span>

<span class="sd">            transfer_owner (string)         : Name of owner if ownership of domain has to be</span>
<span class="sd">                                                  transferred</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">check_if_entity_exists</span><span class="p">(</span><span class="s2">&quot;link&quot;</span><span class="p">,</span> <span class="n">domain_name</span><span class="p">):</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">access_action_item</span><span class="p">(</span><span class="n">domain_name</span><span class="p">,</span> <span class="s2">&quot;Delete&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">skip_ownership_transfer</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__transfer_ownership</span><span class="o">.</span><span class="n">transfer_ownership</span><span class="p">(</span><span class="n">transfer_owner</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">click_button</span><span class="p">(</span><span class="s2">&quot;Delete&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">check_error_message</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Domain does not exist&quot;</span><span class="p">)</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">domains_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;Returns list of domains visible on the page&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">navigate_to_identity_servers</span><span class="p">()</span>
        <span class="n">domains_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_domains_list</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">domains_names</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Commvault Systems Inc. All Rights Reserved

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>