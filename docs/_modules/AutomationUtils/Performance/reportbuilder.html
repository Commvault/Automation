

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>AutomationUtils.Performance.reportbuilder &mdash; Commvault Automation 11.23 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home" alt="Documentation Home"> Commvault Automation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"></div>
            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Commvault Automation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>AutomationUtils.Performance.reportbuilder</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for AutomationUtils.Performance.reportbuilder</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="c1"># --------------------------------------------------------------------------</span>
<span class="c1"># Copyright Commvault Systems, Inc.</span>
<span class="c1"># See LICENSE.txt in the project root for</span>
<span class="c1"># license information.</span>
<span class="c1"># --------------------------------------------------------------------------</span>

<span class="sd">&quot;&quot;&quot;&quot;This file contains helper functions for creating html reports for the given performance monitored job id</span>

<span class="sd">    ReportBuilder:</span>

<span class="sd">        __init__()                          --  Initialize the ReportBuilder class object</span>

<span class="sd">        form_commserv_details()             --  forms the commserv part of the html report</span>

<span class="sd">        form_job_details()                  --  forms the job details part of the html report</span>

<span class="sd">        form_machine_details()              --  forms the machine config details part of the html report</span>

<span class="sd">        form_monitor_details()              --  forms the monitored process/machine details of the html report</span>

<span class="sd">        add_line_breaks()                   --  adds the line breaks to the html report</span>

<span class="sd">        add_html_heading()                  --  adds the side h3 headings to the html report</span>

<span class="sd">        add_html_sub_heading()              --  adds the side h4 headings to the html report</span>

<span class="sd">        generate_report()                   --  generates the html report file and send mail(optional)</span>

<span class="sd">        create_table()                      --  creates table and adds to the html report</span>

<span class="sd">        remove_heading_suffix()             --  removes the heading suffix for the data source dynamic fields</span>

<span class="sd">        add_para()                          --  adds the input string as para to the html report</span>

<span class="sd">        add_unorder_list()                  --  adds the list to the html report as unordered</span>

<span class="sd">        export_graph_for_config()           --  exports the performance stats graph for the given config</span>

<span class="sd">        import_report()                     --  import default report and assign performance data source as dataset</span>

<span class="sd">        share_folder()                      --  shares the performance stats output folder on controller</span>

<span class="sd">        form_api_details()                  --  forms the API details part of the html report</span>


<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">xml.etree.cElementTree</span> <span class="k">as</span> <span class="nn">ETree</span>
<span class="kn">import</span> <span class="nn">xml.sax.saxutils</span> <span class="k">as</span> <span class="nn">saxutils</span>
<span class="kn">from</span> <span class="nn">AutomationUtils</span> <span class="kn">import</span> <span class="n">logger</span>
<span class="kn">from</span> <span class="nn">AutomationUtils.mailer</span> <span class="kn">import</span> <span class="n">Mailer</span>
<span class="kn">from</span> <span class="nn">AutomationUtils.machine</span> <span class="kn">import</span> <span class="n">Machine</span>
<span class="kn">from</span> <span class="nn">AutomationUtils.Performance.Utils.constants</span> <span class="kn">import</span> <span class="n">GeneralConstants</span>
<span class="kn">from</span> <span class="nn">AutomationUtils.Performance.Utils.constants</span> <span class="kn">import</span> <span class="n">JobTypes</span>
<span class="kn">from</span> <span class="nn">AutomationUtils.Performance.Utils.constants</span> <span class="kn">import</span> <span class="n">JobPhases</span>
<span class="kn">from</span> <span class="nn">AutomationUtils.Performance.Utils.constants</span> <span class="kn">import</span> <span class="n">CounterTypes</span>
<span class="kn">from</span> <span class="nn">AutomationUtils.Performance.Utils.constants</span> <span class="kn">import</span> <span class="n">WindowsProcessCounters</span>
<span class="kn">from</span> <span class="nn">AutomationUtils.Performance.Utils.constants</span> <span class="kn">import</span> <span class="n">UnixProcessCounters</span>
<span class="kn">from</span> <span class="nn">AutomationUtils.Performance.Utils.performance_helper</span> <span class="kn">import</span> <span class="n">PerformanceHelper</span>
<span class="kn">from</span> <span class="nn">dynamicindex.utils</span> <span class="kn">import</span> <span class="n">constants</span> <span class="k">as</span> <span class="n">dynamic_constants</span>
<span class="kn">from</span> <span class="nn">Web.API.webconsole</span> <span class="kn">import</span> <span class="n">Reports</span>
<span class="kn">from</span> <span class="nn">Web.API</span> <span class="kn">import</span> <span class="n">customreports</span>
<span class="kn">from</span> <span class="nn">Web.Common.exceptions</span> <span class="kn">import</span> <span class="n">CVNotFound</span>


<div class="viewcode-block" id="ReportBuilder"><a class="viewcode-back" href="../../../source/AutomationUtils.Performance.html#AutomationUtils.Performance.reportbuilder.ReportBuilder">[docs]</a><span class="k">class</span> <span class="nc">ReportBuilder</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;contains helper functions related to html report generation for the monitored performance job&quot;&quot;&quot;</span>

<div class="viewcode-block" id="ReportBuilder.share_folder"><a class="viewcode-back" href="../../../source/AutomationUtils.Performance.html#AutomationUtils.Performance.reportbuilder.ReportBuilder.share_folder">[docs]</a>    <span class="k">def</span> <span class="nf">share_folder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; shares the output performance stats folder on controller</span>

<span class="sd">        Args:</span>

<span class="sd">            None</span>

<span class="sd">        Returns:</span>

<span class="sd">            None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">machine_obj</span> <span class="o">=</span> <span class="n">Machine</span><span class="p">()</span>
        <span class="n">share_list</span> <span class="o">=</span> <span class="n">machine_obj</span><span class="o">.</span><span class="n">list_shares_on_network_path</span><span class="p">(</span><span class="n">network_path</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                                                             <span class="n">username</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                                                             <span class="n">password</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Share list - </span><span class="si">{</span><span class="n">share_list</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">FOLDER_NAME</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">share_list</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sharing the folder - </span><span class="si">{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">FOLDER_NAME</span><span class="si">}</span><span class="s2"> to everyone&quot;</span><span class="p">)</span>
            <span class="n">machine_obj</span><span class="o">.</span><span class="n">share_directory</span><span class="p">(</span><span class="n">share_name</span><span class="o">=</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">FOLDER_NAME</span><span class="p">,</span>
                                        <span class="n">directory</span><span class="o">=</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CONTROLLER_FOLDER_PATH</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sharing done successfully&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Share already exists with that name - </span><span class="si">{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">FOLDER_NAME</span><span class="si">}</span><span class="s2">. Nothing to do&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReportBuilder.import_report"><a class="viewcode-back" href="../../../source/AutomationUtils.Performance.html#AutomationUtils.Performance.reportbuilder.ReportBuilder.import_report">[docs]</a>    <span class="k">def</span> <span class="nf">import_report</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; imports the default report xml and will assign open datasource as dataset to that report</span>

<span class="sd">        Args:</span>

<span class="sd">           None</span>

<span class="sd">        Returns:</span>

<span class="sd">            None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">report_name</span> <span class="o">=</span> <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">Automation_performance_Report_Name</span>
        <span class="n">report_xml_path</span> <span class="o">=</span> <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">REPORT_XML</span>
        <span class="n">api</span> <span class="o">=</span> <span class="n">customreports</span><span class="o">.</span><span class="n">CustomReportsAPI</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">webconsole_hostname</span><span class="p">)</span>
        <span class="n">rpt_api</span> <span class="o">=</span> <span class="n">Reports</span><span class="p">(</span>
            <span class="n">machine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">webconsole_hostname</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Report core API class initialised&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">api</span><span class="o">.</span><span class="n">get_report_definition_by_name</span><span class="p">(</span>
                <span class="n">report_name</span><span class="o">=</span><span class="n">report_name</span><span class="p">,</span> <span class="n">suppress</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">report_name</span><span class="si">}</span><span class="s2"> - custom reports exists already.&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">CVNotFound</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Performance Report doesn&#39;t exists on this commcell. &quot;</span>
                          <span class="sa">f</span><span class="s2">&quot;Going to import Report using xml file : </span><span class="si">{</span><span class="n">report_xml_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">ds_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">datacube</span><span class="o">.</span><span class="n">datasources</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">Machine_Data_Source_Name</span><span class="p">)</span>
            <span class="n">handler_obj</span> <span class="o">=</span> <span class="n">ds_obj</span><span class="o">.</span><span class="n">ds_handlers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">HANDLER_NAME</span><span class="p">)</span>
            <span class="n">handler_id</span> <span class="o">=</span> <span class="n">handler_obj</span><span class="o">.</span><span class="n">handler_id</span>
            <span class="n">ds_id</span> <span class="o">=</span> <span class="n">ds_obj</span><span class="o">.</span><span class="n">datasource_id</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fetched Machine DataSource id - </span><span class="si">{</span><span class="n">ds_id</span><span class="si">}</span><span class="s2"> &amp; Handler ID - </span><span class="si">{</span><span class="n">handler_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">xml_tree</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">report_xml_path</span><span class="p">)</span>
            <span class="n">root</span> <span class="o">=</span> <span class="n">xml_tree</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">iter</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">XML_REPORT_PAGE</span><span class="p">):</span>
                <span class="n">ds_name</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">page_name</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">XML_REPORT_PAGE_NAME</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Going to update Report&#39;s Page : </span><span class="si">{</span><span class="n">page_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">page_name</span> <span class="o">==</span> <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">MACHINE_REPORT_PAGE</span><span class="p">:</span>
                    <span class="n">ds_name</span> <span class="o">=</span> <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">Machine_Data_Source_Name</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ds_name</span> <span class="o">=</span> <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">Process_Data_Source_Name</span>
                <span class="n">ds_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">datacube</span><span class="o">.</span><span class="n">datasources</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ds_name</span><span class="p">)</span>
                <span class="n">handler_obj</span> <span class="o">=</span> <span class="n">ds_obj</span><span class="o">.</span><span class="n">ds_handlers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">HANDLER_NAME</span><span class="p">)</span>
                <span class="n">handler_id</span> <span class="o">=</span> <span class="n">handler_obj</span><span class="o">.</span><span class="n">handler_id</span>
                <span class="n">ds_id</span> <span class="o">=</span> <span class="n">ds_obj</span><span class="o">.</span><span class="n">datasource_id</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fetched DataSource id - </span><span class="si">{</span><span class="n">ds_id</span><span class="si">}</span><span class="s2"> &amp; Handler ID - </span><span class="si">{</span><span class="n">handler_id</span><span class="si">}</span><span class="s2"> for Page : </span><span class="si">{</span><span class="n">page_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">ds_node</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DATA_SOURCE_ID_XML_FIND</span><span class="p">)</span>
                <span class="n">ds_node</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">ds_id</span><span class="p">)</span>
                <span class="n">handler_node</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">HANDLER_ID_XML_FIND</span><span class="p">)</span>
                <span class="n">handler_node</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">handler_id</span><span class="p">)</span>
            <span class="n">xml_tree</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">report_xml_path</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Xml updated correctly&quot;</span><span class="p">)</span>
            <span class="n">rpt_api</span><span class="o">.</span><span class="n">import_custom_report_xml</span><span class="p">(</span><span class="n">rpt_path</span><span class="o">=</span><span class="n">report_xml_path</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Import successful for Report xml : </span><span class="si">{</span><span class="n">report_xml_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReportBuilder.export_graph_for_config"><a class="viewcode-back" href="../../../source/AutomationUtils.Performance.html#AutomationUtils.Performance.reportbuilder.ReportBuilder.export_graph_for_config">[docs]</a>    <span class="k">def</span> <span class="nf">export_graph_for_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;exports the performance stats graph for the given performance config param</span>

<span class="sd">        Args:</span>

<span class="sd">            config          (dict)      --  Client/Process monitor stats param</span>

<span class="sd">                        Example : {</span>

<span class="sd">                                    &quot;client&quot;: &quot;xyz&quot;,</span>
<span class="sd">                                    &quot;binary&quot;: &quot;Machine&quot;,</span>
<span class="sd">                                    &quot;counters&quot;: [&quot;\\Processor(_Total)\\% Processor Time&quot;],</span>
<span class="sd">                                    &quot;platform&quot;: &quot;Windows&quot;,</span>
<span class="sd">                                    &quot;statsfolder&quot;: &quot;C:\\Automation_Performance_Data&quot;,</span>
<span class="sd">                                    &quot;cmdlineparams&quot;: &quot;&quot;,</span>
<span class="sd">                                    &quot;countertype&quot;: &quot;Machine&quot;</span>
<span class="sd">                                }</span>

<span class="sd">        Returns:</span>

<span class="sd">            str     --  exported html file path</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">client_name</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CLIENT_PARAM</span><span class="p">]</span>
        <span class="n">binary</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">BINARY_PARAM</span><span class="p">]</span>
        <span class="n">counter_type</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COUNTER_TYPE_PARAM</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Going to export report for the config - </span><span class="si">{</span><span class="n">config</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># Report name can be passed as report id. it will work</span>
        <span class="n">report_id</span> <span class="o">=</span> <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">Automation_performance_Report_Name</span>
        <span class="n">rpt_api</span> <span class="o">=</span> <span class="n">Reports</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">webconsole_hostname</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Report core API class initialised&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">binary</span> <span class="o">==</span> <span class="n">CounterTypes</span><span class="o">.</span><span class="n">MACHINE_COUNTER</span> <span class="ow">or</span> <span class="n">counter_type</span> <span class="o">==</span> <span class="n">CounterTypes</span><span class="o">.</span><span class="n">MACHINE_COUNTER</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Machine level counter. Using DataSource : </span><span class="si">{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">Machine_Data_Source_Name</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;with report id : </span><span class="si">{</span><span class="n">report_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="c1"># forming filters which needs to applied on reports</span>
            <span class="n">filters</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;pageName=</span><span class="si">{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">MACHINE_REPORT_PAGE</span><span class="si">}</span><span class="s2">&quot;</span> \
                      <span class="sa">f</span><span class="s2">&quot;&amp;&quot;</span> \
                      <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">MACHINE_FILTER_ATTRIBUTE</span><span class="si">}{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_COMMSERV_VERSION</span><span class="si">}</span><span class="s2">-0=&quot;</span> \
                      <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">version</span><span class="si">}</span><span class="s2">&quot;</span> \
                      <span class="sa">f</span><span class="s2">&quot;&amp;&quot;</span> \
                      <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">MACHINE_FILTER_ATTRIBUTE</span><span class="si">}{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_BUILD_ID</span><span class="si">}</span><span class="s2">-0=&quot;</span> \
                      <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">build_id</span><span class="si">}</span><span class="s2">&quot;</span> \
                      <span class="sa">f</span><span class="s2">&quot;&amp;&quot;</span> \
                      <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">MACHINE_FILTER_ATTRIBUTE</span><span class="si">}{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_MACHINE_NAME</span><span class="si">}</span><span class="s2">-0=&quot;</span> \
                      <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">client_name</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Process level counter. Using DataSource : </span><span class="si">{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">Process_Data_Source_Name</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;with report id : </span><span class="si">{</span><span class="n">report_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">filters</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;pageName=</span><span class="si">{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">PROCESS_REPORT_PAGE</span><span class="si">}</span><span class="s2">&quot;</span> \
                      <span class="sa">f</span><span class="s2">&quot;&amp;&quot;</span> \
                      <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">PROCESS_FILTER_ATTRIBUTE</span><span class="si">}{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_COMMSERV_VERSION</span><span class="si">}</span><span class="s2">-0=&quot;</span> \
                      <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">version</span><span class="si">}</span><span class="s2">&quot;</span> \
                      <span class="sa">f</span><span class="s2">&quot;&amp;&quot;</span> \
                      <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">PROCESS_FILTER_ATTRIBUTE</span><span class="si">}{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_BUILD_ID</span><span class="si">}</span><span class="s2">-0=&quot;</span> \
                      <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">build_id</span><span class="si">}</span><span class="s2">&quot;</span> \
                      <span class="sa">f</span><span class="s2">&quot;&amp;&quot;</span> \
                      <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">PROCESS_FILTER_ATTRIBUTE</span><span class="si">}{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_MACHINE_NAME</span><span class="si">}</span><span class="s2">-0=&quot;</span> \
                      <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">client_name</span><span class="si">}</span><span class="s2">&quot;</span> \
                      <span class="sa">f</span><span class="s2">&quot;&amp;&quot;</span> \
                      <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">PROCESS_FILTER_ATTRIBUTE</span><span class="si">}{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_BINARY</span><span class="si">}</span><span class="s2">-0=&quot;</span> \
                      <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">binary</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">report_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">client_name</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">binary</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">job_id</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">build_id</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">report_file</span> <span class="o">=</span> <span class="n">rpt_api</span><span class="o">.</span><span class="n">export_report</span><span class="p">(</span>
            <span class="n">report_id</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">REPORT_EXPORT_TYPE</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">export_html_folder_path</span><span class="p">,</span>
            <span class="n">report_name</span><span class="p">,</span>
            <span class="n">filters</span><span class="p">)</span>
        <span class="n">report_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">report_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">REPORT_EXPORT_TYPE</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">path</span><span class="p">,</span> <span class="n">file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">report_file</span><span class="p">)</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">report_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Removing older reports with same name as : </span><span class="si">{</span><span class="n">report_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">report_file</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully renamed report file as - </span><span class="si">{</span><span class="n">report_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">report_name</span></div>

<div class="viewcode-block" id="ReportBuilder.add_unorder_list"><a class="viewcode-back" href="../../../source/AutomationUtils.Performance.html#AutomationUtils.Performance.reportbuilder.ReportBuilder.add_unorder_list">[docs]</a>    <span class="k">def</span> <span class="nf">add_unorder_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; adds the given list as unordered list to the html report</span>

<span class="sd">        Args:</span>

<span class="sd">            input_list      (list)      --  items which needs to be added for unordered list on html report</span>

<span class="sd">        Returns:</span>

<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">order</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">body_element</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ul_tag</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">input_list</span><span class="p">:</span>
            <span class="n">order_item</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_li_tag</span><span class="p">)</span>
            <span class="n">order_item</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">item</span></div>

<div class="viewcode-block" id="ReportBuilder.add_para"><a class="viewcode-back" href="../../../source/AutomationUtils.Performance.html#AutomationUtils.Performance.reportbuilder.ReportBuilder.add_para">[docs]</a>    <span class="k">def</span> <span class="nf">add_para</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">input</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; adds input string to para tag on the html report</span>

<span class="sd">        Args:</span>

<span class="sd">            input       (str)       --  Input para content</span>

<span class="sd">            color       (dict)      --  color</span>

<span class="sd">        Returns:</span>

<span class="sd">            None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">para</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">body_element</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_p_tag</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span>
        <span class="n">para</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="nb">input</span></div>

<div class="viewcode-block" id="ReportBuilder.remove_heading_suffix"><a class="viewcode-back" href="../../../source/AutomationUtils.Performance.html#AutomationUtils.Performance.reportbuilder.ReportBuilder.remove_heading_suffix">[docs]</a>    <span class="k">def</span> <span class="nf">remove_heading_suffix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">heading</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;removes the heading suffix which got added for solr dynamic fields if any</span>

<span class="sd">        Args:</span>

<span class="sd">            heading         (str)       --  Name of the header</span>

<span class="sd">        Returns:</span>

<span class="sd">            str     --  converted heading name</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">heading</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_i&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_l&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_s&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReportBuilder.create_table"><a class="viewcode-back" href="../../../source/AutomationUtils.Performance.html#AutomationUtils.Performance.reportbuilder.ReportBuilder.create_table">[docs]</a>    <span class="k">def</span> <span class="nf">create_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">is_horizontal</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; creates html table on the body</span>

<span class="sd">        Args:</span>

<span class="sd">            header          (list)      --  Table Header</span>

<span class="sd">            values          (dict/list) --  Table cell/row values</span>

<span class="sd">            is_horizontal   (bool)      --  specifies whether table is of horizontal or vertical</span>
<span class="sd">                                                if True, table will be formed n*2 where n= rows</span>

<span class="sd">        Returns:</span>

<span class="sd">            None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">table</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">body_element</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_table_tag</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="s2">&quot;6&quot;</span><span class="p">)</span>
        <span class="n">table_row</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tr_tag</span><span class="p">,</span> <span class="n">bgcolor</span><span class="o">=</span><span class="s2">&quot;#C1A8D0&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">heading</span> <span class="ow">in</span> <span class="n">header</span><span class="p">:</span>
            <span class="n">table_header</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">table_row</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_th_tag</span><span class="p">)</span>
            <span class="n">table_header</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">remove_heading_suffix</span><span class="p">(</span><span class="n">heading</span><span class="o">=</span><span class="n">heading</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">is_horizontal</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">table_row</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tr_tag</span><span class="p">)</span>
                    <span class="n">key_col</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">table_row</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_td_tag</span><span class="p">)</span>
                    <span class="n">key_col</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                    <span class="n">val_col</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">table_row</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_td_tag</span><span class="p">)</span>
                    <span class="n">val_col</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">table_row</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tr_tag</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">heading</span> <span class="ow">in</span> <span class="n">header</span><span class="p">:</span>
                    <span class="n">val_col</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">table_row</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_td_tag</span><span class="p">)</span>
                    <span class="n">val_col</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="n">heading</span><span class="p">])</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
                <span class="n">table_row</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tr_tag</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">heading</span> <span class="ow">in</span> <span class="n">header</span><span class="p">:</span>
                    <span class="c1"># if value itself dict, then single cell split into multiple rows</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="n">heading</span><span class="p">],</span> <span class="nb">dict</span><span class="p">):</span>
                        <span class="n">temp_dict</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="n">heading</span><span class="p">]</span>
                        <span class="n">val_col</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">table_row</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_td_tag</span><span class="p">)</span>
                        <span class="n">gui_list</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">val_col</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ul_tag</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">temp_dict</span><span class="p">:</span>
                            <span class="n">temp_value</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">element</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">temp_dict</span><span class="p">[</span><span class="n">element</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                            <span class="n">list_element</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">gui_list</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_li_tag</span><span class="p">)</span>
                            <span class="n">list_element</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">temp_value</span>

                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="n">heading</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                        <span class="n">temp_list</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="n">heading</span><span class="p">]</span>
                        <span class="n">val_col</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">table_row</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_td_tag</span><span class="p">)</span>
                        <span class="n">gui_list</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">val_col</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ul_tag</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">temp_list</span><span class="p">:</span>
                            <span class="n">list_element</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">gui_list</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_li_tag</span><span class="p">)</span>
                            <span class="n">list_element</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">element</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">val_col</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">table_row</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_td_tag</span><span class="p">)</span>
                        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="n">heading</span><span class="p">])</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dummy_href</span><span class="p">):</span>
                            <span class="n">modified_value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="n">heading</span><span class="p">])</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dummy_href</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
                            <span class="n">href</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">val_col</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_href_tag</span><span class="p">,</span> <span class="n">href</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;file:</span><span class="si">{</span><span class="n">modified_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                            <span class="n">href</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Click Here to Open&quot;</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">val_col</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="n">heading</span><span class="p">])</span></div>

<div class="viewcode-block" id="ReportBuilder.add_html_heading"><a class="viewcode-back" href="../../../source/AutomationUtils.Performance.html#AutomationUtils.Performance.reportbuilder.ReportBuilder.add_html_heading">[docs]</a>    <span class="k">def</span> <span class="nf">add_html_heading</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;adds the given name as h3 heading on the side in the html</span>

<span class="sd">        Args:</span>
<span class="sd">            name        (str)       --  Heading name</span>

<span class="sd">            color       (dict)      --  tag with color</span>


<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">heading</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">body_element</span><span class="p">,</span> <span class="s2">&quot;h3&quot;</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span>
        <span class="n">heading</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">name</span></div>

<div class="viewcode-block" id="ReportBuilder.add_html_sub_heading"><a class="viewcode-back" href="../../../source/AutomationUtils.Performance.html#AutomationUtils.Performance.reportbuilder.ReportBuilder.add_html_sub_heading">[docs]</a>    <span class="k">def</span> <span class="nf">add_html_sub_heading</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;adds the given name as h4 heading on the side in the html</span>

<span class="sd">        Args:</span>
<span class="sd">            name        (str)       --  Heading name</span>

<span class="sd">            color       (dict)      --  tag with color</span>


<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">heading</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">body_element</span><span class="p">,</span> <span class="s2">&quot;h4&quot;</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span>
        <span class="n">heading</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">name</span></div>

<div class="viewcode-block" id="ReportBuilder.add_line_breaks"><a class="viewcode-back" href="../../../source/AutomationUtils.Performance.html#AutomationUtils.Performance.reportbuilder.ReportBuilder.add_line_breaks">[docs]</a>    <span class="k">def</span> <span class="nf">add_line_breaks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">times</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;adds the line breaks to the html report based on times specified</span>

<span class="sd">        Args:</span>

<span class="sd">            times       (int)   --  number of line breaks to be added</span>

<span class="sd">        Returns:</span>

<span class="sd">            None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">times</span><span class="p">):</span>
            <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">body_element</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_br_tag</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">commcell_object</span><span class="p">,</span> <span class="n">job_id</span><span class="p">,</span> <span class="n">job_type</span><span class="p">,</span> <span class="n">build_id</span><span class="p">,</span> <span class="n">use_data_source</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; initialise the ReportBuilder class</span>

<span class="sd">        Args:</span>

<span class="sd">            commcell_object             (obj)       --  commcell class object</span>

<span class="sd">            job_id                      (str)       --  performance monitored job id</span>

<span class="sd">            job_type                    (int)       --  job type</span>
<span class="sd">                                                            Example : defined in JobTypes in constants.py</span>

<span class="sd">            build_id                    (str)       --  build id for this automation run</span>

<span class="sd">            use_data_source             (bool)      --  whether to use data source or not during report generation</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">get_log</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span> <span class="o">=</span> <span class="n">commcell_object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">job_id</span> <span class="o">=</span> <span class="n">job_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">job_type</span> <span class="o">=</span> <span class="n">job_type</span>
        <span class="k">if</span> <span class="n">job_type</span> <span class="o">==</span> <span class="n">JobTypes</span><span class="o">.</span><span class="n">TIME_BASED_JOB_MONITORING</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">job_id</span> <span class="o">=</span> <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">TIMER_BASED_MONITOR</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build_id</span> <span class="o">=</span> <span class="n">build_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_data_source</span> <span class="o">=</span> <span class="n">use_data_source</span>
        <span class="c1"># html elements</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_table_tag</span> <span class="o">=</span> <span class="s1">&#39;table&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_th_tag</span> <span class="o">=</span> <span class="s1">&#39;th&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_p_tag</span> <span class="o">=</span> <span class="s1">&#39;p&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hr_tag</span> <span class="o">=</span> <span class="s1">&#39;hr&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_img_tag</span> <span class="o">=</span> <span class="s1">&#39;img&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tr_tag</span> <span class="o">=</span> <span class="s1">&#39;tr&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_br_tag</span> <span class="o">=</span> <span class="s1">&#39;br&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_td_tag</span> <span class="o">=</span> <span class="s1">&#39;td&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ul_tag</span> <span class="o">=</span> <span class="s1">&#39;ul&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_li_tag</span> <span class="o">=</span> <span class="s1">&#39;li&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_href_tag</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dummy_href</span> <span class="o">=</span> <span class="s2">&quot;DummyHref&quot;</span>
        <span class="c1"># align tags</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_center_align</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;align&#39;</span><span class="p">:</span> <span class="s1">&#39;center&#39;</span><span class="p">}</span>
        <span class="c1"># color tags</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_blue_color</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;style&#39;</span><span class="p">:</span> <span class="s2">&quot;color:blue;&quot;</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_black_color</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;style&#39;</span><span class="p">:</span> <span class="s2">&quot;color:black;&quot;</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_green_color</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;style&#39;</span><span class="p">:</span> <span class="s2">&quot;color:green;&quot;</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dred_color</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;style&#39;</span><span class="p">:</span> <span class="s2">&quot;color:darkred;&quot;</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_red_color</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;style&#39;</span><span class="p">:</span> <span class="s2">&quot;color:red;&quot;</span><span class="p">}</span>
        <span class="c1"># report folder paths</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">share_folder</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reports_folder_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CONTROLLER_FOLDER_PATH</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">build_id</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CONTROLLER_REPORTS_FOLDER_NAME</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">export_html_folder_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CONTROLLER_FOLDER_PATH</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">build_id</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CONTROLLER_REPORTS_FOLDER_NAME</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CONTROLLER_EXPORT_HTML_FOLDER_NAME</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stats_share_folder_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CONTROLLER_SHARE_FOLDER_PATH</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">export_html_share_folder_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CONTROLLER_SHARE_FOLDER_PATH</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">build_id</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CONTROLLER_REPORTS_FOLDER_NAME</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CONTROLLER_EXPORT_HTML_FOLDER_NAME</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">use_data_source</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">export_html_folder_path</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">export_html_folder_path</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">use_data_source</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reports_folder_path</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reports_folder_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">machine_config_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reports_folder_path</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CONTROLLER_MACHINE_CONFIG_JSON_FILE_NAME</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">job_config_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reports_folder_path</span><span class="p">,</span>
                                                 <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CONTROLLER_PERFORMANCE_CONFIG_JSON_FILE_NAME</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">job_details_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reports_folder_path</span><span class="p">,</span>
                                                  <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CONTROLLER_PERFORMANCE_JOB_DETAILS_JSON_FILE_NAME</span><span class="p">)</span>
        <span class="c1"># html report headers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root_element</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s2">&quot;html&quot;</span><span class="p">)</span>
        <span class="n">head</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root_element</span><span class="p">,</span> <span class="s2">&quot;head&quot;</span><span class="p">)</span>
        <span class="n">style</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="s2">&quot;style&quot;</span><span class="p">)</span>
        <span class="n">style</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;table, th, td </span><span class="se">{{</span><span class="s2">border: 1px solid black;border-collapse: collapse;</span><span class="se">}}</span><span class="s2">th, td </span><span class="se">{{</span><span class="s2">padding: 5px;</span><span class="se">}}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">body_element</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root_element</span><span class="p">,</span> <span class="s2">&quot;body&quot;</span><span class="p">)</span>
        <span class="c1"># add logo</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">LOGO_FILE</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Adding Logo to the report&quot;</span><span class="p">)</span>
            <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">body_element</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_img_tag</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s2">&quot;250&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s2">&quot;50&quot;</span><span class="p">,</span>
                             <span class="n">style</span><span class="o">=</span><span class="s2">&quot;float:left&quot;</span><span class="p">,</span> <span class="n">src</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">LOGO_FILE</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">h1</span> <span class="o">=</span> <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">body_element</span><span class="p">,</span> <span class="s2">&quot;h1&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_center_align</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">job_type</span> <span class="o">!=</span> <span class="n">JobTypes</span><span class="o">.</span><span class="n">TIME_BASED_JOB_MONITORING</span><span class="p">:</span>
            <span class="n">h1</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Performance Report for Job Id - </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">job_id</span><span class="si">}</span><span class="s2"> &amp; Build Id - </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">build_id</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">h1</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Performance Report for </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">job_id</span><span class="si">}</span><span class="s2"> &amp; Build Id - </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">build_id</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="c1"># add straight line</span>
        <span class="n">ETree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">body_element</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hr_tag</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">perf_helper</span> <span class="o">=</span> <span class="n">PerformanceHelper</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="p">)</span>

<div class="viewcode-block" id="ReportBuilder.form_commserv_details"><a class="viewcode-back" href="../../../source/AutomationUtils.Performance.html#AutomationUtils.Performance.reportbuilder.ReportBuilder.form_commserv_details">[docs]</a>    <span class="k">def</span> <span class="nf">form_commserv_details</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Forms the default commserv details header for the performance job on report</span>

<span class="sd">            Args:</span>
<span class="sd">                None</span>

<span class="sd">            Returns:</span>
<span class="sd">                None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_line_breaks</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_html_heading</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">HEADING_COMMSERV_DETAILS</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_blue_color</span><span class="p">)</span>
        <span class="n">commserv_details</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_COMMSERV_NAME</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">commserv_name</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_COMMSERV_VERSION_REPORT</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">version</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_MONITOR_TYPE</span><span class="p">:</span> <span class="s2">&quot;Job&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">job_type</span> <span class="o">!=</span> <span class="n">JobTypes</span><span class="o">.</span><span class="n">TIME_BASED_JOB_MONITORING</span> <span class="k">else</span> <span class="s2">&quot;Timer&quot;</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="n">header</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Parameter&#39;</span><span class="p">,</span> <span class="s1">&#39;Values&#39;</span><span class="p">],</span> <span class="n">values</span><span class="o">=</span><span class="n">commserv_details</span><span class="p">,</span> <span class="n">is_horizontal</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReportBuilder.form_machine_details"><a class="viewcode-back" href="../../../source/AutomationUtils.Performance.html#AutomationUtils.Performance.reportbuilder.ReportBuilder.form_machine_details">[docs]</a>    <span class="k">def</span> <span class="nf">form_machine_details</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Forms the default machine details header for the performance job on the report</span>

<span class="sd">            Args:</span>
<span class="sd">                None</span>

<span class="sd">            Returns:</span>
<span class="sd">                None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_line_breaks</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_html_heading</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">HEADING_MACHINE_CONFIG</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_blue_color</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">machine_config_file_path</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Machine Details Json file not found @ </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">machine_config_file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">config_details</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">perf_helper</span><span class="o">.</span><span class="n">read_json_file</span><span class="p">(</span><span class="n">json_file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">machine_config_file_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Loaded machine config details JSON file in memory&quot;</span><span class="p">)</span>
        <span class="n">client_details</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># machine details will be key-value pair. Remove the key - client name as it is not needed</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">config_details</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">client_details</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="n">machine_header</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_CLIENT_NAME</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_MACHINE_NAME</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_CPU_MODEL</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_MAX_CLOCK_SPEED</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_NO_OF_CORES</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_LOGICAL_PROCESSORS</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_RAM_SIZE</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_OS</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_OS_BIT</span>
        <span class="p">]</span>
        <span class="n">machine_values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">machine_details</span> <span class="ow">in</span> <span class="n">client_details</span><span class="p">:</span>
            <span class="n">values</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_CLIENT_NAME</span><span class="p">:</span> <span class="n">machine_details</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_CLIENT_NAME</span><span class="p">],</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_MACHINE_NAME</span><span class="p">:</span> <span class="n">machine_details</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_MACHINE_NAME</span><span class="p">],</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_CPU_MODEL</span><span class="p">:</span> <span class="n">machine_details</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_CPU_MODEL</span><span class="p">],</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_MAX_CLOCK_SPEED</span><span class="p">:</span>
                    <span class="nb">str</span><span class="p">(</span><span class="n">machine_details</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_MAX_CLOCK_SPEED</span><span class="p">]),</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_NO_OF_CORES</span><span class="p">:</span>
                    <span class="nb">str</span><span class="p">(</span><span class="n">machine_details</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_NO_OF_CORES</span><span class="p">]),</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_LOGICAL_PROCESSORS</span><span class="p">:</span>
                    <span class="nb">str</span><span class="p">(</span><span class="n">machine_details</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_LOGICAL_PROCESSORS</span><span class="p">]),</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_RAM_SIZE</span><span class="p">:</span> <span class="n">machine_details</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_RAM_SIZE</span><span class="p">],</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_OS</span><span class="p">:</span> <span class="n">machine_details</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_OS</span><span class="p">],</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_OS_BIT</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">machine_details</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_OS_BIT</span><span class="p">]</span><span class="si">}</span><span class="s2"> bit&quot;</span>

            <span class="p">}</span>
            <span class="n">machine_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Machine config details Json : </span><span class="si">{</span><span class="n">machine_values</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="n">header</span><span class="o">=</span><span class="n">machine_header</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">machine_values</span><span class="p">,</span> <span class="n">is_horizontal</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReportBuilder.form_monitor_details"><a class="viewcode-back" href="../../../source/AutomationUtils.Performance.html#AutomationUtils.Performance.reportbuilder.ReportBuilder.form_monitor_details">[docs]</a>    <span class="k">def</span> <span class="nf">form_monitor_details</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Forms the monitored performance details header for the performance job on the report</span>

<span class="sd">            Args:</span>
<span class="sd">                None</span>

<span class="sd">            Returns:</span>
<span class="sd">                None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">job_config_file_path</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Job Configs Json file not found @ </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">job_config_file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">job_configs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">perf_helper</span><span class="o">.</span><span class="n">read_json_file</span><span class="p">(</span><span class="n">json_file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">job_config_file_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Loaded job configs JSON file in memory&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Job Configs JSON : </span><span class="si">{</span><span class="n">job_configs</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_line_breaks</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_html_heading</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">HEADING_MONITORED_CONFIG</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_blue_color</span><span class="p">)</span>
        <span class="n">job_phase_obj</span> <span class="o">=</span> <span class="n">JobPhases</span><span class="p">()</span>
        <span class="n">monitored_phases</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">phase</span> <span class="ow">in</span> <span class="n">job_configs</span><span class="p">:</span>
            <span class="n">monitored_phases</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">phase</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_html_sub_heading</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Available Job Phases - </span><span class="si">{</span><span class="n">job_phase_obj</span><span class="o">.</span><span class="n">get_job_phase</span><span class="p">(</span><span class="n">job_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">job_type</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_green_color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_html_sub_heading</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Monitored Job Phases - </span><span class="si">{</span><span class="n">monitored_phases</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dred_color</span><span class="p">)</span>
        <span class="n">config_header</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">PHASE_NAME_PARAM</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CONFIGURATIONS_NAME_PARAM</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_COUNTERS</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_data_source</span><span class="p">:</span>
            <span class="n">config_header</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">MIN_MAX_PARAM</span><span class="p">)</span>
            <span class="n">config_header</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_NET_STATS</span><span class="p">)</span>
            <span class="n">config_header</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">EXPORT_REPORT_PARAM</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">config_header</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CSV_REPORT_PARAM</span><span class="p">)</span>
        <span class="n">config_values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">phase</span> <span class="ow">in</span> <span class="n">job_configs</span><span class="p">:</span>
            <span class="c1"># check for duplicate configurations</span>
            <span class="n">phase_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">perf_helper</span><span class="o">.</span><span class="n">remove_dup_configs</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">job_configs</span><span class="p">[</span><span class="n">phase</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total configurations for this phase : </span><span class="si">{</span><span class="n">phase</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">phase_json</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">config_no</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">phase_json</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>  <span class="c1"># length of dict + 1 as we starting with index 1</span>
                <span class="n">config_to_process</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">config_no</span><span class="p">)</span>
                <span class="n">config_json</span> <span class="o">=</span> <span class="n">phase_json</span><span class="p">[</span><span class="n">config_to_process</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">config_to_process</span><span class="si">}</span><span class="s2"> --&gt; Configuration : </span><span class="si">{</span><span class="n">config_json</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">config_json</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">config_json</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Empty config. Ignore&quot;</span><span class="p">)</span>
                    <span class="k">continue</span>
                <span class="n">temp_counters</span> <span class="o">=</span> <span class="n">config_json</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COUNTERS_PARAM</span><span class="p">]</span>
                <span class="n">counters</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">counter</span> <span class="ow">in</span> <span class="n">temp_counters</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">counter</span> <span class="ow">in</span> <span class="p">(</span><span class="n">WindowsProcessCounters</span><span class="o">.</span><span class="n">PROCESS_PID</span><span class="p">,</span> <span class="n">UnixProcessCounters</span><span class="o">.</span><span class="n">PROCESS_PID</span><span class="p">):</span>
                        <span class="k">continue</span>
                    <span class="n">counter</span> <span class="o">=</span> <span class="n">counter</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">counters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COUNTERS_FIELD_MAPPING</span><span class="p">[</span><span class="n">counter</span><span class="p">])</span>
                <span class="n">phase_dict</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">PHASE_NAME_PARAM</span><span class="p">:</span> <span class="n">phase</span><span class="p">,</span>
                    <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_COUNTERS</span><span class="p">:</span> <span class="n">counters</span><span class="p">,</span>
                    <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CONFIGURATIONS_NAME_PARAM</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">config_json</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CLIENT_PARAM</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                                                                <span class="sa">f</span><span class="s2">&quot; - </span><span class="si">{</span><span class="n">config_json</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">BINARY_PARAM</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

                <span class="p">}</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_data_source</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">PORT_USAGE_PARAM</span> <span class="ow">in</span> <span class="n">config_json</span> <span class="ow">and</span>\
                            <span class="n">config_json</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">PORT_USAGE_PARAM</span><span class="p">]:</span>
                        <span class="c1"># associate netstat details</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Going to collect netstat min/max results&quot;</span><span class="p">)</span>
                        <span class="n">net_stat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">perf_helper</span><span class="o">.</span><span class="n">find_min_max_for_netstat</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">config_json</span><span class="p">,</span>
                                                                             <span class="n">build_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">build_id</span><span class="p">)</span>
                        <span class="n">phase_dict</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_NET_STATS</span><span class="p">]</span> <span class="o">=</span> <span class="n">net_stat</span>
                    <span class="c1"># associate min/max details</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Going to collect counters min/max results&quot;</span><span class="p">)</span>
                    <span class="n">min_max_stats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">perf_helper</span><span class="o">.</span><span class="n">find_min_max_for_counters</span><span class="p">(</span>
                        <span class="n">config</span><span class="o">=</span><span class="n">config_json</span><span class="p">,</span> <span class="n">build_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">build_id</span><span class="p">)</span>
                    <span class="c1"># send it as dict itself so that table cell will be split into multiple cells</span>
                    <span class="n">phase_dict</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">MIN_MAX_PARAM</span><span class="p">]</span> <span class="o">=</span> <span class="n">min_max_stats</span>
                    <span class="c1"># Export the report and associate it as href</span>
                    <span class="n">export_file_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">export_graph_for_config</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">config_json</span><span class="p">)</span>
                    <span class="n">phase_dict</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">EXPORT_REPORT_PARAM</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_dummy_href</span><span class="si">}</span><span class="s2">&quot;</span> \
                                                                       <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">export_html_share_folder_path</span><span class="si">}</span><span class="s2">&quot;</span> \
                                                                       <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="si">}{</span><span class="n">export_file_name</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># put output CSV file location as use data source key is False</span>
                    <span class="n">client_name</span> <span class="o">=</span> <span class="n">config_json</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CLIENT_PARAM</span><span class="p">]</span>
                    <span class="n">binary</span> <span class="o">=</span> <span class="n">config_json</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">BINARY_PARAM</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">binary</span> <span class="o">!=</span> <span class="n">CounterTypes</span><span class="o">.</span><span class="n">MACHINE_COUNTER</span><span class="p">:</span>
                        <span class="n">binary</span> <span class="o">=</span> <span class="n">binary</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>
                    <span class="n">phase_dict</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CSV_REPORT_PARAM</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_dummy_href</span><span class="si">}</span><span class="s2">&quot;</span> \
                                                                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">stats_share_folder_path</span><span class="si">}{</span><span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="si">}</span><span class="s2">&quot;</span> \
                                                                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">client_name</span><span class="si">}{</span><span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="si">}{</span><span class="n">binary</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">config_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">phase_dict</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Monitor configurations json formed : </span><span class="si">{</span><span class="n">config_values</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="n">header</span><span class="o">=</span><span class="n">config_header</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">config_values</span><span class="p">,</span> <span class="n">is_horizontal</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReportBuilder.form_job_details"><a class="viewcode-back" href="../../../source/AutomationUtils.Performance.html#AutomationUtils.Performance.reportbuilder.ReportBuilder.form_job_details">[docs]</a>    <span class="k">def</span> <span class="nf">form_job_details</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Forms the default job details header for the performance job on the report</span>

<span class="sd">            Args:</span>
<span class="sd">                None</span>

<span class="sd">            Returns:</span>
<span class="sd">                None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_line_breaks</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_html_heading</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">HEADING_JOB_DETAILS</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_blue_color</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">job_details_file_path</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Job details Json file not found @ </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">job_details_file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">job_details</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">perf_helper</span><span class="o">.</span><span class="n">read_json_file</span><span class="p">(</span><span class="n">json_file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">job_details_file_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Loaded job details JSON file in memory&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Job Details JSON : </span><span class="si">{</span><span class="n">job_details</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">job_header</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_JOB_ID</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_JOB_TYPE</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_AUTOMATION_JOB_TYPE</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_JOB_STATUS</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_JOB_START</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_JOB_END</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_JOB_DURATION</span>
        <span class="p">]</span>
        <span class="n">job_values</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_JOB_ID</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">job_details</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_JOB_ID</span><span class="p">]),</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_JOB_TYPE</span><span class="p">:</span> <span class="n">job_details</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_JOB_TYPE</span><span class="p">],</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_AUTOMATION_JOB_TYPE</span><span class="p">:</span>
                <span class="nb">str</span><span class="p">(</span><span class="n">job_details</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_AUTOMATION_JOB_TYPE</span><span class="p">]),</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_JOB_STATUS</span><span class="p">:</span> <span class="n">job_details</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_JOB_STATUS</span><span class="p">],</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_JOB_START</span><span class="p">:</span>
                <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span>
                    <span class="n">job_details</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_JOB_START</span><span class="p">]))</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S&#39;</span><span class="p">),</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_JOB_END</span><span class="p">:</span>
                <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span>
                    <span class="n">job_details</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_JOB_END</span><span class="p">]))</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S&#39;</span><span class="p">),</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_JOB_DURATION</span><span class="p">:</span>
                <span class="nb">str</span><span class="p">(</span><span class="n">job_details</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_JOB_DURATION</span><span class="p">])</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="n">header</span><span class="o">=</span><span class="n">job_header</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">job_values</span><span class="p">,</span> <span class="n">is_horizontal</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_line_breaks</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_html_sub_heading</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">HEADING_JOB_EVENTS</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_green_color</span><span class="p">)</span>
        <span class="n">job_events</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">job_details</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_JOB_EVENTS</span><span class="p">]:</span>
            <span class="k">if</span> <span class="s1">&#39;description&#39;</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>
                <span class="n">job_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_unorder_list</span><span class="p">(</span><span class="n">input_list</span><span class="o">=</span><span class="n">job_events</span><span class="p">)</span>

        <span class="c1"># Job specific data source details</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">job_type</span> <span class="ow">in</span> <span class="n">JobTypes</span><span class="o">.</span><span class="n">DATA_SOURCE_SUPPORTED_JOB_TYPES</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Populate the data source details on report as job is related to data source&quot;</span><span class="p">)</span>
            <span class="n">ds_header</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_SOURCE_NAME</span><span class="p">,</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_SOURCE_SIZE</span><span class="p">,</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_DS_NAME</span><span class="p">,</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_TOTAL_DOCS</span><span class="p">,</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_SUCCESS_DOCS</span><span class="p">,</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_FAILED_DOCS</span><span class="p">,</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_SKIPPED_DOCS</span>
            <span class="p">]</span>
            <span class="n">ds_values</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_SOURCE_NAME</span><span class="p">:</span> <span class="n">job_details</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_SOURCE_NAME</span><span class="p">],</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_SOURCE_SIZE</span><span class="p">:</span> <span class="n">job_details</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_SOURCE_SIZE</span><span class="p">],</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_DS_NAME</span><span class="p">:</span> <span class="n">job_details</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_DS_NAME</span><span class="p">],</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_TOTAL_DOCS</span><span class="p">:</span>
                    <span class="nb">str</span><span class="p">(</span><span class="n">job_details</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_TOTAL_DOCS</span><span class="p">]),</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_SUCCESS_DOCS</span><span class="p">:</span>
                    <span class="nb">str</span><span class="p">(</span><span class="n">job_details</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_SUCCESS_DOCS</span><span class="p">]),</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_FAILED_DOCS</span><span class="p">:</span>
                    <span class="nb">str</span><span class="p">(</span><span class="n">job_details</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_FAILED_DOCS</span><span class="p">]),</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_SKIPPED_DOCS</span><span class="p">:</span>
                    <span class="nb">str</span><span class="p">(</span><span class="n">job_details</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_SKIPPED_DOCS</span><span class="p">])</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">job_type</span> <span class="ow">in</span> <span class="n">JobTypes</span><span class="o">.</span><span class="n">DATA_SOURCE_ENTITY_EXTRACT_JOB_TYPES</span><span class="p">:</span>
                <span class="n">ds_header</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_CA_SUCCESS_DOCS</span><span class="p">)</span>
                <span class="n">ds_header</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_CA_FAILED_DOCS</span><span class="p">)</span>
                <span class="n">ds_values</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_CA_SUCCESS_DOCS</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span>
                    <span class="n">job_details</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_CA_SUCCESS_DOCS</span><span class="p">])</span>
                <span class="n">ds_values</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_CA_FAILED_DOCS</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span>
                    <span class="n">job_details</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_CA_FAILED_DOCS</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_line_breaks</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_html_sub_heading</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">HEADING_DATA_SOURCE_DETAILS</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_green_color</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="n">header</span><span class="o">=</span><span class="n">ds_header</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">ds_values</span><span class="p">,</span> <span class="n">is_horizontal</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">FIELD_EXTRACT_DURATION</span> <span class="ow">in</span> <span class="n">job_details</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_line_breaks</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_html_sub_heading</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">HEADING_EXTRACT_DURATION_DETAILS</span><span class="p">,</span>
                    <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_green_color</span><span class="p">)</span>
                <span class="n">ds_values</span> <span class="o">=</span> <span class="n">job_details</span><span class="p">[</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">FIELD_EXTRACT_DURATION</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span>
                    <span class="n">header</span><span class="o">=</span><span class="p">[</span>
                        <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_FILE_TYPE</span><span class="p">,</span>
                        <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_EXTRACT_DURATION_STATS</span><span class="p">],</span>
                    <span class="n">values</span><span class="o">=</span><span class="n">ds_values</span><span class="p">,</span>
                    <span class="n">is_horizontal</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># past job history using open data source</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_data_source</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_line_breaks</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Use DataSource key set. Try to find past similar job history&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_html_sub_heading</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">HEADING_PAST_JOB_HISTORY</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_green_color</span><span class="p">)</span>
            <span class="n">ds_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">datacube</span><span class="o">.</span><span class="n">datasources</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">Job_Details_Data_Source_Name</span><span class="p">)</span>
            <span class="n">index_server_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">index_servers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ds_obj</span><span class="o">.</span><span class="n">index_server_cloud_id</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DataSource/Index Server Object initialised&quot;</span><span class="p">)</span>
            <span class="n">past_job_header</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_COMMSERV_VERSION</span><span class="p">,</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_BUILD_ID</span><span class="p">,</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_JOB_ID</span><span class="p">,</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_JOB_STATUS</span><span class="p">,</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_JOB_DURATION</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">job_type</span> <span class="ow">in</span> <span class="n">JobTypes</span><span class="o">.</span><span class="n">DATA_SOURCE_SUPPORTED_JOB_TYPES</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;DataSource job type. Fetch the data source dynamic fields from job details data source&quot;</span><span class="p">)</span>
                <span class="n">past_job_header</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_TOTAL_DOCS</span><span class="p">)</span>
                <span class="n">past_job_header</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_SUCCESS_DOCS</span><span class="p">)</span>
                <span class="n">past_job_header</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_FAILED_DOCS</span><span class="p">)</span>
                <span class="n">past_job_header</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_SOURCE_NAME</span><span class="p">)</span>
                <span class="n">past_job_header</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_SOURCE_SIZE</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">job_type</span> <span class="ow">in</span> <span class="n">JobTypes</span><span class="o">.</span><span class="n">DATA_SOURCE_ENTITY_EXTRACT_JOB_TYPES</span><span class="p">:</span>
                    <span class="n">past_job_header</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_CA_SUCCESS_DOCS</span><span class="p">)</span>
                    <span class="n">past_job_header</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_CA_FAILED_DOCS</span><span class="p">)</span>
            <span class="n">past_job_values</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_SOURCE_NAME</span><span class="p">:</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="si">{</span><span class="n">job_details</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_SOURCE_NAME</span><span class="p">]</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_AUTOMATION_JOB_TYPE</span><span class="p">:</span> <span class="n">job_details</span><span class="p">[</span>
                    <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_AUTOMATION_JOB_TYPE</span><span class="p">],</span>
                <span class="sa">f</span><span class="s2">&quot;!</span><span class="si">{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_JOB_ID</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">job_id</span><span class="p">}</span>
            <span class="n">resp</span> <span class="o">=</span> <span class="n">index_server_obj</span><span class="o">.</span><span class="n">execute_solr_query</span><span class="p">(</span><span class="n">core_name</span><span class="o">=</span><span class="n">ds_obj</span><span class="o">.</span><span class="n">computed_core_name</span><span class="p">,</span>
                                                       <span class="n">select_dict</span><span class="o">=</span><span class="n">query</span><span class="p">,</span>
                                                       <span class="n">attr_list</span><span class="o">=</span><span class="nb">set</span><span class="p">(</span><span class="n">past_job_header</span><span class="p">),</span>
                                                       <span class="n">op_params</span><span class="o">=</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">QUERY_100_ROWS</span><span class="p">)</span>
            <span class="n">hits</span> <span class="o">=</span> <span class="n">resp</span><span class="p">[</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">RESPONSE_PARAM</span><span class="p">][</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">NUM_FOUND_PARAM</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">hits</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_para</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="s2">&quot;No Past job history found for same source/job type&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_red_color</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">solr_doc</span> <span class="ow">in</span> <span class="n">resp</span><span class="p">[</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">RESPONSE_PARAM</span><span class="p">][</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">DOCS_PARAM</span><span class="p">]:</span>
                    <span class="n">past_job_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">solr_doc</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Past Job history : </span><span class="si">{</span><span class="n">past_job_values</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="n">header</span><span class="o">=</span><span class="n">past_job_header</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">past_job_values</span><span class="p">,</span> <span class="n">is_horizontal</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Use DataSource key not set.&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_html_sub_heading</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Past Job History - Not Available. Please set use_data_source while calling report if applicable&quot;</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_red_color</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReportBuilder.form_api_details"><a class="viewcode-back" href="../../../source/AutomationUtils.Performance.html#AutomationUtils.Performance.reportbuilder.ReportBuilder.form_api_details">[docs]</a>    <span class="k">def</span> <span class="nf">form_api_details</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">api_count</span><span class="o">=</span><span class="mi">15</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Forms the API details part of the html report</span>

<span class="sd">            Args:</span>
<span class="sd">                api_count   (int)   -   number of top time consuming APIs to be listed in the report</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">api_detail_values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">api_table_header</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">HAR_START_TIME_COLUMN</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">HAR_REQUEST_TYPE_COLUMN</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">HAR_URL_COLUMN</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">HAR_TOTAL_TIME_COLUMN</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">HAR_WAIT_TIME_COLUMN</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">HAR_RESPONSE_CODE_COLUMN</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">datacube</span><span class="o">.</span><span class="n">datasources</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">datacube</span><span class="o">.</span><span class="n">datasources</span><span class="o">.</span><span class="n">has_datasource</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">HAR_DS_NAME</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No HAR data source found. Skip it&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">ds_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">datacube</span><span class="o">.</span><span class="n">datasources</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">HAR_DS_NAME</span><span class="p">)</span>
        <span class="n">index_server_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">index_servers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ds_obj</span><span class="o">.</span><span class="n">index_server_cloud_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DataSource/Index Server Object initialised&quot;</span><span class="p">)</span>
        <span class="n">query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">HAR_DS_BUILD_ID</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_id</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">HAR_URL_COLUMN</span><span class="p">:</span> <span class="s1">&#39;*.do*&#39;</span>
        <span class="p">}</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="n">index_server_obj</span><span class="o">.</span><span class="n">execute_solr_query</span><span class="p">(</span><span class="n">core_name</span><span class="o">=</span><span class="n">ds_obj</span><span class="o">.</span><span class="n">computed_core_name</span><span class="p">,</span>
                                                   <span class="n">select_dict</span><span class="o">=</span><span class="n">query</span><span class="p">,</span>
                                                   <span class="n">attr_list</span><span class="o">=</span><span class="n">api_table_header</span><span class="p">,</span>
                                                   <span class="n">op_params</span><span class="o">=</span><span class="p">{</span>
                                                       <span class="s2">&quot;sort&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">HAR_TOTAL_TIME_COLUMN</span><span class="si">}</span><span class="s2"> desc&quot;</span><span class="p">,</span>
                                                       <span class="s2">&quot;rows&quot;</span><span class="p">:</span> <span class="n">api_count</span>
                                                   <span class="p">})</span>
        <span class="n">hits</span> <span class="o">=</span> <span class="n">resp</span><span class="p">[</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">RESPONSE_PARAM</span><span class="p">][</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">NUM_FOUND_PARAM</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">hits</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;No HAR result was found with the given Build id, Skipping&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_line_breaks</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_html_sub_heading</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">HAR_API_DETAILS_HEADING</span> <span class="o">%</span> <span class="n">api_count</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_green_color</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">solr_doc</span> <span class="ow">in</span> <span class="n">resp</span><span class="p">[</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">RESPONSE_PARAM</span><span class="p">][</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">DOCS_PARAM</span><span class="p">]:</span>
                <span class="n">api_detail_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">solr_doc</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;API details retrieved : </span><span class="si">{</span><span class="n">api_detail_values</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="n">header</span><span class="o">=</span><span class="n">api_table_header</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">api_detail_values</span><span class="p">,</span> <span class="n">is_horizontal</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="ReportBuilder.generate_report"><a class="viewcode-back" href="../../../source/AutomationUtils.Performance.html#AutomationUtils.Performance.reportbuilder.ReportBuilder.generate_report">[docs]</a>    <span class="k">def</span> <span class="nf">generate_report</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">send_mail</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">receivers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">api_count</span><span class="o">=</span><span class="mi">15</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Generates the html report for the job monitored and sends mail to given receivers mail ids</span>

<span class="sd">            Args:</span>

<span class="sd">                send_mail       (bool)      -- specifies whether generated report has to be sent or not</span>

<span class="sd">                                    Default : False</span>

<span class="sd">                receivers       (str)       --  receivers mail Id [comma separated email id&#39;s]</span>

<span class="sd">                api_count       (int)   -   number of top time consuming APIs to be listed in the report</span>

<span class="sd">                                    Default : 15</span>

<span class="sd">            Returns:</span>

<span class="sd">                str     --  generated report file path</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">send_mail</span> <span class="ow">and</span> <span class="n">receivers</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Receiver email is not given. Please check&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">import_report</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Custom report setup finished&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">form_commserv_details</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Formed Commserv Details on report&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">job_type</span> <span class="o">!=</span> <span class="n">JobTypes</span><span class="o">.</span><span class="n">TIME_BASED_JOB_MONITORING</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">form_job_details</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Formed Job Details on report&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">form_machine_details</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Formed Machine details on report&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">form_monitor_details</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Formed Monitor details on report&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">form_api_details</span><span class="p">(</span><span class="n">api_count</span><span class="o">=</span><span class="n">api_count</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Formed time consuming API details(if any) on report&quot;</span><span class="p">)</span>
        <span class="c1"># Report Generation code from xml to html. Use saxutils to unescape characters accordingly</span>
        <span class="n">html_string</span> <span class="o">=</span> <span class="n">saxutils</span><span class="o">.</span><span class="n">unescape</span><span class="p">(</span><span class="n">ETree</span><span class="o">.</span><span class="n">tostring</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root_element</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;unicode&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;html&#39;</span><span class="p">))</span>
        <span class="n">report_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reports_folder_path</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">REPORTS_FILE_NAME</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">build_id</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">job_id</span><span class="si">}</span><span class="s2">.html&quot;</span><span class="p">)</span>
        <span class="n">out_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">report_file</span><span class="p">,</span> <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">FILE_WRITE_MODE</span><span class="p">)</span>
        <span class="n">out_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">html_string</span><span class="p">)</span>
        <span class="n">out_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully generated report @ </span><span class="si">{</span><span class="n">report_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">send_mail</span><span class="p">:</span>
            <span class="n">mail_obj</span> <span class="o">=</span> <span class="n">Mailer</span><span class="p">({</span><span class="s1">&#39;receiver&#39;</span><span class="p">:</span> <span class="n">receivers</span><span class="p">},</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="p">)</span>
            <span class="n">mail_obj</span><span class="o">.</span><span class="n">mail</span><span class="p">(</span>
                <span class="n">subject</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">EMAIL_SUBJECT</span><span class="si">}</span><span class="s2"> for BuildId : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">build_id</span><span class="si">}</span><span class="s2"> and Job id : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">job_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">body</span><span class="o">=</span><span class="n">html_string</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">report_file</span></div></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright Commvault Systems Inc. All Rights Reserved

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>