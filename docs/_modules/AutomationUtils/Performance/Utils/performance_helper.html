

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>AutomationUtils.Performance.Utils.performance_helper &mdash; Commvault Automation 11.23 documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home" alt="Documentation Home"> Commvault Automation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"></div>
            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Commvault Automation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../index.html">Module code</a> &raquo;</li>
        
      <li>AutomationUtils.Performance.Utils.performance_helper</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for AutomationUtils.Performance.Utils.performance_helper</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="c1"># --------------------------------------------------------------------------</span>
<span class="c1"># Copyright Commvault Systems, Inc.</span>
<span class="c1"># See LICENSE.txt in the project root for</span>
<span class="c1"># license information.</span>
<span class="c1"># --------------------------------------------------------------------------</span>

<span class="sd">&quot;&quot;&quot;&quot;This file contains helper functions for monitoring cv process performance stats</span>

<span class="sd">Classes defined in this file:</span>

<span class="sd">    PerformanceHelper       --  helper functions related to performance monitoring configurations</span>

<span class="sd">    AutomationCache         --  class for caching mechanism</span>


<span class="sd">    PerformanceHelper:</span>

<span class="sd">        __init__()                          --  Initialize the PerformanceHelper class object</span>

<span class="sd">        form_sdg_fs_monitor_param()         --  forms performance monitor param for FS data Source crawl job in SDG</span>

<span class="sd">        form_client_monitor_param()         --  forms client performance monitor param based on input provided</span>

<span class="sd">        remove_invalid_counters()           --  removes invalid counters for the client based on OS flavor</span>

<span class="sd">        dump_json_to_file()                 --  dumps json(dict) to the output file</span>

<span class="sd">        read_json_file()                    --  reads the json file and returns the dict</span>

<span class="sd">        fetch_data_source_crawl_stats()     --  fetches the crawl stats for the given data source name</span>

<span class="sd">        find_min_max_for_counters()         --  finds min/max values for the each performance counters of given config</span>

<span class="sd">        find_min_max_for_netstat()          --  finds min/max values for netstat of process/Machine of given config</span>

<span class="sd">        print_config()                      --  logs the client config</span>

<span class="sd">        find_fs_extract_duration_stats()    --  fetches the file system extract duration stats for each file type</span>

<span class="sd">        form_fso_monitor_param()            --  forms performance monitor param for FS data Source crawl job in FSO</span>

<span class="sd">        remove_dup_configs()                --  removes duplicate configs from dict for job phase</span>


<span class="sd">    AutomationCache</span>

<span class="sd">        __init__()                          --  Initialize the AutomationCache class object</span>

<span class="sd">        is_exists()                         --  checks whether given key exists in cache or not</span>

<span class="sd">        get_key()                           --  gets value from cache for given key</span>

<span class="sd">        put_key()                           --  inserts key into cache</span>


<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">past.builtins</span> <span class="kn">import</span> <span class="n">basestring</span>
<span class="kn">from</span> <span class="nn">AutomationUtils</span> <span class="kn">import</span> <span class="n">logger</span>
<span class="kn">from</span> <span class="nn">AutomationUtils.machine</span> <span class="kn">import</span> <span class="n">Machine</span>
<span class="kn">from</span> <span class="nn">AutomationUtils.options_selector</span> <span class="kn">import</span> <span class="n">OptionsSelector</span>
<span class="kn">from</span> <span class="nn">AutomationUtils.Performance.Utils.constants</span> <span class="kn">import</span> <span class="n">JobTypes</span>
<span class="kn">from</span> <span class="nn">AutomationUtils.Performance.Utils.constants</span> <span class="kn">import</span> <span class="n">CounterTypes</span>
<span class="kn">from</span> <span class="nn">AutomationUtils.Performance.Utils.constants</span> <span class="kn">import</span> <span class="n">Binary</span>
<span class="kn">from</span> <span class="nn">AutomationUtils.Performance.Utils.constants</span> <span class="kn">import</span> <span class="n">JobPhaseNames</span>
<span class="kn">from</span> <span class="nn">AutomationUtils.Performance.Utils.constants</span> <span class="kn">import</span> <span class="n">WindowsProcessCounters</span>
<span class="kn">from</span> <span class="nn">AutomationUtils.Performance.Utils.constants</span> <span class="kn">import</span> <span class="n">WindowsMachineCounters</span>
<span class="kn">from</span> <span class="nn">AutomationUtils.Performance.Utils.constants</span> <span class="kn">import</span> <span class="n">UnixProcessCounters</span>
<span class="kn">from</span> <span class="nn">AutomationUtils.Performance.Utils.constants</span> <span class="kn">import</span> <span class="n">UnixMachineCounters</span>
<span class="kn">from</span> <span class="nn">AutomationUtils.Performance.Utils.constants</span> <span class="kn">import</span> <span class="n">CustomCounters</span>
<span class="kn">from</span> <span class="nn">AutomationUtils.Performance.Utils.constants</span> <span class="kn">import</span> <span class="n">GeneralConstants</span>
<span class="kn">from</span> <span class="nn">AutomationUtils.Performance.Utils.constants</span> <span class="kn">import</span> <span class="n">Platforms</span>
<span class="kn">from</span> <span class="nn">dynamicindex.utils</span> <span class="kn">import</span> <span class="n">constants</span> <span class="k">as</span> <span class="n">dynamic_constants</span>


<div class="viewcode-block" id="AutomationCache"><a class="viewcode-back" href="../../../../source/AutomationUtils.Performance.Utils.html#AutomationUtils.Performance.Utils.performance_helper.AutomationCache">[docs]</a><span class="k">class</span> <span class="nc">AutomationCache</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;contains caching mechanism related functions&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">get_log</span><span class="p">()</span>
        <span class="c1"># cache implementation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cache</span> <span class="o">=</span> <span class="p">{}</span>

<div class="viewcode-block" id="AutomationCache.is_exists"><a class="viewcode-back" href="../../../../source/AutomationUtils.Performance.Utils.html#AutomationUtils.Performance.Utils.performance_helper.AutomationCache.is_exists">[docs]</a>    <span class="k">def</span> <span class="nf">is_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; checks whether given key exists in cache or not</span>

<span class="sd">        Args:</span>

<span class="sd">            key             --      key to look for in cache</span>

<span class="sd">        Returns:</span>

<span class="sd">            bool        -- True if key is found else False</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="AutomationCache.get_key"><a class="viewcode-back" href="../../../../source/AutomationUtils.Performance.Utils.html#AutomationUtils.Performance.Utils.performance_helper.AutomationCache.get_key">[docs]</a>    <span class="k">def</span> <span class="nf">get_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; gets the value for the given key from cache</span>

<span class="sd">                Args:</span>

<span class="sd">                    key             --      key to look for in cache</span>

<span class="sd">                Returns:</span>

<span class="sd">                    value from the cache for the given key</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Retrieved value : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="si">}</span><span class="s2"> from cache for key : </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">[</span><span class="n">key</span><span class="p">]</span></div>

<div class="viewcode-block" id="AutomationCache.put_key"><a class="viewcode-back" href="../../../../source/AutomationUtils.Performance.Utils.html#AutomationUtils.Performance.Utils.performance_helper.AutomationCache.put_key">[docs]</a>    <span class="k">def</span> <span class="nf">put_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets the value for the given key in cache</span>

<span class="sd">                Args:</span>

<span class="sd">                    key             --      key to insert in cache</span>

<span class="sd">                    value           --      value of the key</span>

<span class="sd">                Returns:</span>

<span class="sd">                    None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cache</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Caching key : </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">  value : </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="PerformanceHelper"><a class="viewcode-back" href="../../../../source/AutomationUtils.Performance.Utils.html#AutomationUtils.Performance.Utils.performance_helper.PerformanceHelper">[docs]</a><span class="k">class</span> <span class="nc">PerformanceHelper</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;contains helper functions related to performance monitoring of jobs or process on client&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">commcell_object</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Initialize the PerformanceHelper class</span>

<span class="sd">                   Args:</span>

<span class="sd">                       commcell_object         (obj)       --      commcell object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">get_log</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span> <span class="o">=</span> <span class="n">commcell_object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cache_obj</span> <span class="o">=</span> <span class="n">AutomationCache</span><span class="p">()</span>

<div class="viewcode-block" id="PerformanceHelper.remove_dup_configs"><a class="viewcode-back" href="../../../../source/AutomationUtils.Performance.Utils.html#AutomationUtils.Performance.Utils.performance_helper.PerformanceHelper.remove_dup_configs">[docs]</a>    <span class="k">def</span> <span class="nf">remove_dup_configs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;removes duplicate configs from dict for job phase</span>

<span class="sd">        Args:</span>

<span class="sd">            config          (dict)          --  configuration for job phase</span>

<span class="sd">        Returns:</span>

<span class="sd">                dict    --  after removing duplicates</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">monitor</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">index</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">output</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">config_no</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">config</span><span class="p">)</span> <span class="o">+</span>
                               <span class="mi">1</span><span class="p">):</span>  <span class="c1"># length of dict + 1 as we starting with index 1</span>
            <span class="n">config_to_process</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">config_no</span><span class="p">)</span>
            <span class="n">current_param</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="n">config_to_process</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">current_param</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">current_param</span> <span class="o">==</span> <span class="p">{}:</span>
                <span class="k">continue</span>
            <span class="n">client</span> <span class="o">=</span> <span class="n">current_param</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CLIENT_PARAM</span><span class="p">]</span>
            <span class="n">binary</span> <span class="o">=</span> <span class="n">current_param</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">BINARY_PARAM</span><span class="p">]</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="n">current_param</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COMMAND_LINE_PARAM</span><span class="p">]</span>
            <span class="n">key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">client</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">binary</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">cmd</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">monitor</span><span class="p">:</span>
                <span class="n">monitor</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                <span class="n">output</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="n">current_param</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Removing the Duplicated configs : </span><span class="si">{</span><span class="n">current_param</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">output</span></div>

<div class="viewcode-block" id="PerformanceHelper.form_fso_monitor_param"><a class="viewcode-back" href="../../../../source/AutomationUtils.Performance.Utils.html#AutomationUtils.Performance.Utils.performance_helper.PerformanceHelper.form_fso_monitor_param">[docs]</a>    <span class="k">def</span> <span class="nf">form_fso_monitor_param</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index_server</span><span class="p">,</span> <span class="n">job_type</span><span class="p">,</span> <span class="n">counters</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">search_engine</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">access_node</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;forms performance monitor param for FS data Source crawl job in FSO</span>

<span class="sd">        Args:</span>

<span class="sd">            index_server                (str)       --      name of the index server</span>

<span class="sd">            job_type                    (int)       --      type of job</span>
<span class="sd">                                                                Example : defined in JobTypes in constants.py</span>

<span class="sd">            counters                    (dict)      --      Windows/Unix counters</span>

<span class="sd">                                    Example : {</span>
<span class="sd">                                                &#39;Process&#39; : [Memory,Handle]</span>
<span class="sd">                                                &#39;Machine&#39; : [Memory,CPU]</span>
<span class="sd">                                             }</span>
<span class="sd">                    if None, then all counters will be selected for monitoring</span>

<span class="sd">            search_engine               (list)      --      list of search engine client names</span>

<span class="sd">            access_node                 (str)       --      Access node client name</span>

<span class="sd">        Returns:</span>

<span class="sd">            dict        --  containing monitoring configurations for clients</span>

<span class="sd">            Example : {</span>
<span class="sd">                &#39;Live Scan&#39;: {</span>
<span class="sd">                                &#39;1&#39;: {</span>
<span class="sd">                                        &#39;client&#39;: &#39;dez&#39;,</span>
<span class="sd">                                        &#39;binary&#39;: {&#39;Windows&#39;: &#39;IFind.exe&#39;},</span>
<span class="sd">                                        &#39;counters&#39;: [&#39;\\Process(%s*)\\Handle Count&#39;, &#39;\\Process(%s*)\\Thread Count&#39;],</span>
<span class="sd">                                        &#39;platform&#39;: &#39;UNIX&#39;,</span>
<span class="sd">                                        &#39;statsfolder&#39;: &#39;/Users/root/commvault_automation/Automation_Performance_Data&#39;}</span>
<span class="sd">                                        &#39;cmdlineparams&#39;: &quot;-j &quot;,</span>
<span class="sd">                                        &#39;portusagestats&#39; : True,</span>
<span class="sd">                                        # below fields are applicable for non-commvault client alone</span>
<span class="sd">                                        &#39;client_username&#39;:&lt;username&gt;,</span>
<span class="sd">                                        &#39;client_password&#39;:&lt;password&gt;</span>
<span class="sd">                                    }</span>
<span class="sd">                            }</span>
<span class="sd">                }</span>

<span class="sd">        Raises</span>

<span class="sd">            Exception:</span>

<span class="sd">                    if input data type is not valid</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index_server</span><span class="p">,</span> <span class="n">basestring</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Input data type is not valid&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">counters</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">counters</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">CounterTypes</span><span class="o">.</span><span class="n">MACHINE_COUNTER</span><span class="p">:</span>
                    <span class="n">WindowsMachineCounters</span><span class="o">.</span><span class="n">COUNTER_VALUES</span> <span class="o">+</span> <span class="n">UnixMachineCounters</span><span class="o">.</span><span class="n">COUNTER_VALUES</span><span class="p">,</span>
                <span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">:</span>
                    <span class="n">WindowsProcessCounters</span><span class="o">.</span><span class="n">COUNTER_VALUES</span> <span class="o">+</span> <span class="n">UnixProcessCounters</span><span class="o">.</span><span class="n">COUNTER_VALUES</span><span class="p">}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No input for counters so Adding All counters by Default - </span><span class="si">{</span><span class="n">counters</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Going to form file system monitor params based on user inputs&quot;</span><span class="p">)</span>
        <span class="n">index_server_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">index_servers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">index_server</span><span class="p">)</span>
        <span class="n">index_server_client_list</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">index_server_obj</span><span class="o">.</span><span class="n">client_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Index server Initialised. Total index server nodes : </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">index_server_client_list</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">monitor_param</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">index_server_machine_param</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">index_server_param</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">index_server_client_list</span><span class="p">:</span>
            <span class="n">index_server_machine_param</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span>
                <span class="n">client_name</span><span class="o">=</span><span class="n">node</span><span class="p">,</span> <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_EMPTY</span><span class="p">,</span>
                <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">MACHINE_COUNTER</span><span class="p">]))</span>
            <span class="n">index_server_param</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span>
                <span class="n">client_name</span><span class="o">=</span><span class="n">node</span><span class="p">,</span>
                <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_DATA_CUBE</span><span class="p">,</span>
                <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Index server configuration formed&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">job_type</span> <span class="o">==</span> <span class="n">JobTypes</span><span class="o">.</span><span class="n">FSO_BACKUP_QUICK_SCAN</span><span class="p">:</span>
            <span class="n">cvci_param</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Quick scan job. Forming cvcianalytics param&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">index_server_client_list</span><span class="p">:</span>
                <span class="n">cvci_param</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span>
                    <span class="n">client_name</span><span class="o">=</span><span class="n">node</span><span class="p">,</span>
                    <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_CVCI_ANALYTICS</span><span class="p">,</span>
                    <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">]))</span>
            <span class="n">index</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">ANALYSIS</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">index_server_client_list</span><span class="p">)):</span>
                <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">ANALYSIS</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="n">index_server_machine_param</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">ANALYSIS</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="n">index_server_param</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">ANALYSIS</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="n">cvci_param</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">job_type</span> <span class="o">==</span> <span class="n">JobTypes</span><span class="o">.</span><span class="n">FSO_BACKUP_FULL_SCAN_SOURCE_CI</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Full scan job for CI&#39;ed Client. Forming analyticsmgr param&quot;</span><span class="p">)</span>
            <span class="n">mgr_service_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span><span class="n">client_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">commserv_client</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                                               <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_CVODS</span><span class="p">,</span>
                                                               <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">],</span>
                                                               <span class="o">**</span><span class="p">{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CVODS_APP_NAME</span><span class="p">:</span>
                                                                  <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">ANALYTICS_MGR_SERVICE_NAME</span><span class="p">})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Analytics Mgr Service - CVODS param formed&quot;</span><span class="p">)</span>
            <span class="n">index</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">IMPORT_INDEX</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">index_server_client_list</span><span class="p">)):</span>
                <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">IMPORT_INDEX</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="n">index_server_machine_param</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">IMPORT_INDEX</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="n">index_server_param</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">IMPORT_INDEX</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="n">mgr_service_param</span>
            <span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">IMPORT_INDEX</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">search_engine</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Forming search engine param for search node : </span><span class="si">{</span><span class="n">node</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="c1"># process counters</span>
                <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">IMPORT_INDEX</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span>
                    <span class="n">client_name</span><span class="o">=</span><span class="n">node</span><span class="p">,</span> <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_SEARCH_ENGINE</span><span class="p">,</span>
                    <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">])</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="c1"># Machine counters</span>
                <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">IMPORT_INDEX</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span>
                    <span class="n">client_name</span><span class="o">=</span><span class="n">node</span><span class="p">,</span> <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_EMPTY</span><span class="p">,</span>
                    <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">MACHINE_COUNTER</span><span class="p">])</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">job_type</span> <span class="o">==</span> <span class="n">JobTypes</span><span class="o">.</span><span class="n">FSO_BACKUP_FULL_SCAN</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Full scan job for backup client.&quot;</span><span class="p">)</span>
            <span class="n">index</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">INDEX_EXTRACTION</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">index_server_client_list</span><span class="p">)):</span>
                <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">INDEX_EXTRACTION</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="n">index_server_machine_param</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">INDEX_EXTRACTION</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="n">index_server_param</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="n">cv_distributor_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span><span class="n">client_name</span><span class="o">=</span><span class="n">index_server_client_list</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
                                                                      <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">INDEX_EXTRACTION</span><span class="p">,</span>
                                                                      <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">])</span>
                <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">INDEX_EXTRACTION</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="n">cv_distributor_param</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="n">cvods_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span><span class="n">client_name</span><span class="o">=</span><span class="n">index_server_client_list</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
                                                             <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_CVODS</span><span class="p">,</span>
                                                             <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">],</span>
                                                             <span class="o">**</span><span class="p">{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CVODS_APP_NAME</span><span class="p">:</span>
                                                                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">INDEX_SERVER_SERVICE_NAME</span><span class="p">})</span>
                <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">INDEX_EXTRACTION</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="n">cvods_param</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="n">clrestore_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span><span class="n">client_name</span><span class="o">=</span><span class="n">index_server_client_list</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
                                                                 <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_CLRESTORE</span><span class="p">,</span>
                                                                 <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">])</span>
                <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">INDEX_EXTRACTION</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="n">clrestore_param</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="n">gateway_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span><span class="n">client_name</span><span class="o">=</span><span class="n">index_server_client_list</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
                                                               <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_INDEX_GATEWAY</span><span class="p">,</span>
                                                               <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">])</span>
                <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">INDEX_EXTRACTION</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="n">gateway_param</span>
        <span class="k">elif</span> <span class="n">job_type</span> <span class="o">==</span> <span class="n">JobTypes</span><span class="o">.</span><span class="n">FSO_LIVE_CRAWL</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Live crawl for client using access node&quot;</span><span class="p">)</span>
            <span class="n">index</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">LIVE_SCAN</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">index_server_client_list</span><span class="p">)):</span>
                <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">LIVE_SCAN</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="n">index_server_machine_param</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">LIVE_SCAN</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="n">index_server_param</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">access_node</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Access node is empty&quot;</span><span class="p">)</span>
            <span class="n">access_node_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span><span class="n">client_name</span><span class="o">=</span><span class="n">access_node</span><span class="p">,</span>
                                                               <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">LIVE_SCAN</span><span class="p">,</span>
                                                               <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">])</span>
            <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">LIVE_SCAN</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="n">access_node_param</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">access_node_machine_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span>
                <span class="n">client_name</span><span class="o">=</span><span class="n">access_node</span><span class="p">,</span> <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_EMPTY</span><span class="p">,</span>
                <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">MACHINE_COUNTER</span><span class="p">])</span>
            <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">LIVE_SCAN</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="n">access_node_machine_param</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Final configurations formed : </span><span class="si">{</span><span class="n">monitor_param</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">monitor_param</span></div>

<div class="viewcode-block" id="PerformanceHelper.find_fs_extract_duration_stats"><a class="viewcode-back" href="../../../../source/AutomationUtils.Performance.Utils.html#AutomationUtils.Performance.Utils.performance_helper.PerformanceHelper.find_fs_extract_duration_stats">[docs]</a>    <span class="k">def</span> <span class="nf">find_fs_extract_duration_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_source_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;fetches the file system extract duration stats for each file type</span>

<span class="sd">        Args:</span>

<span class="sd">            data_source_name            (str)       --  name of the data source</span>

<span class="sd">        Returns:</span>

<span class="sd">            dict        --      containing extract duration stats for each file type</span>

<span class="sd">        Raises</span>

<span class="sd">            Exception:</span>

<span class="sd">                    if failed to fetch extract duration stats</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ds_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">datacube</span><span class="o">.</span><span class="n">datasources</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">data_source_name</span><span class="p">)</span>
        <span class="n">index_server_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">index_servers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ds_obj</span><span class="o">.</span><span class="n">index_server_cloud_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Index server object initialised for cloud id : </span><span class="si">{</span><span class="n">ds_obj</span><span class="o">.</span><span class="n">index_server_cloud_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">file_type_query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">FACET_PARAM</span><span class="p">:</span> <span class="s1">&#39;true&#39;</span><span class="p">,</span>
            <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">FACET_FIELD_SET_PARAM</span><span class="p">:</span> <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">FIELD_FILE_EXTENSION</span><span class="p">,</span>
            <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">ROWS_PARAM</span><span class="p">:</span> <span class="mi">0</span>
        <span class="p">}</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="n">index_server_obj</span><span class="o">.</span><span class="n">execute_solr_query</span><span class="p">(</span>
            <span class="n">core_name</span><span class="o">=</span><span class="n">ds_obj</span><span class="o">.</span><span class="n">computed_core_name</span><span class="p">,</span>
            <span class="n">select_dict</span><span class="o">=</span><span class="p">{</span>
                <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_DATA_SOURCE_NAME</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="si">{</span><span class="n">data_source_name</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">},</span>
            <span class="n">op_params</span><span class="o">=</span><span class="n">file_type_query</span><span class="p">)</span>
        <span class="n">file_type_list</span> <span class="o">=</span> \
            <span class="n">resp</span><span class="p">[</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">FACET_COUNTS_PARAM</span><span class="p">][</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">FACET_FIELDS_PARAM</span><span class="p">][</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">FIELD_FILE_EXTENSION</span><span class="p">]</span>
        <span class="k">del</span> <span class="n">file_type_list</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">]</span>  <span class="c1"># drop all even index</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total file types found for stats analysis : </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">file_type_list</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">output</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">file_type</span> <span class="ow">in</span> <span class="n">file_type_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">file_type</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">file_type</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Going to get stats for File Extension : </span><span class="si">{</span><span class="n">file_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">stats_query</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">STATS_PARAM</span><span class="p">:</span> <span class="s1">&#39;true&#39;</span><span class="p">,</span>
                <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">STATS_FIELD_SET_PARAM</span><span class="p">:</span> <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">FIELD_EXTRACT_DURATION</span><span class="p">,</span>
                <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">ROWS_PARAM</span><span class="p">:</span> <span class="mi">0</span>
            <span class="p">}</span>
            <span class="n">resp</span> <span class="o">=</span> <span class="n">index_server_obj</span><span class="o">.</span><span class="n">execute_solr_query</span><span class="p">(</span>
                <span class="n">core_name</span><span class="o">=</span><span class="n">ds_obj</span><span class="o">.</span><span class="n">computed_core_name</span><span class="p">,</span> <span class="n">select_dict</span><span class="o">=</span><span class="p">{</span>
                    <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">FIELD_FILE_EXTENSION</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="si">{</span><span class="n">file_type</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_DATA_SOURCE_NAME</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="si">{</span><span class="n">data_source_name</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">},</span> <span class="n">op_params</span><span class="o">=</span><span class="n">stats_query</span><span class="p">)</span>
            <span class="n">min_value</span> <span class="o">=</span> \
                <span class="n">resp</span><span class="p">[</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">STATS_PARAM</span><span class="p">][</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">STATS_FIELD_PARAM</span><span class="p">][</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">FIELD_EXTRACT_DURATION</span><span class="p">][</span>
                    <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">MIN_PARAM</span><span class="p">]</span>
            <span class="n">max_value</span> <span class="o">=</span> \
                <span class="n">resp</span><span class="p">[</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">STATS_PARAM</span><span class="p">][</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">STATS_FIELD_PARAM</span><span class="p">][</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">FIELD_EXTRACT_DURATION</span><span class="p">][</span>
                    <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">MAX_PARAM</span><span class="p">]</span>
            <span class="n">mean_value</span> <span class="o">=</span> \
                <span class="n">resp</span><span class="p">[</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">STATS_PARAM</span><span class="p">][</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">STATS_FIELD_PARAM</span><span class="p">][</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">FIELD_EXTRACT_DURATION</span><span class="p">][</span>
                    <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">MEAN_PARAM</span><span class="p">]</span>
            <span class="n">count_value</span> <span class="o">=</span> \
                <span class="n">resp</span><span class="p">[</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">STATS_PARAM</span><span class="p">][</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">STATS_FIELD_PARAM</span><span class="p">][</span>
                    <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">FIELD_EXTRACT_DURATION</span><span class="p">][</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">COUNT_PARAM</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">count_value</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">output</span><span class="p">[</span><span class="n">file_type</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="sa">f</span><span class="s2">&quot;Total Doc </span><span class="si">{</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">COUNT_PARAM</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">count_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">MIN_PARAM</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">min_value</span><span class="si">}</span><span class="s2"> Ms&quot;</span><span class="p">,</span>
                    <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">MAX_PARAM</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">max_value</span><span class="si">}</span><span class="s2"> Ms&quot;</span><span class="p">,</span>
                    <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">MEAN_PARAM</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">mean_value</span><span class="si">}</span><span class="s2"> Ms&quot;</span>
                <span class="p">}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Stats got for this file type : </span><span class="si">{</span><span class="n">file_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">print_config</span><span class="p">(</span><span class="n">config_data</span><span class="o">=</span><span class="n">output</span><span class="p">[</span><span class="n">file_type</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">output</span><span class="p">[</span><span class="n">file_type</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Unsupported file type for extraction&quot;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported file extension for SearchText Extraction : </span><span class="si">{</span><span class="n">file_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">output</span></div>

<div class="viewcode-block" id="PerformanceHelper.find_min_max_for_netstat"><a class="viewcode-back" href="../../../../source/AutomationUtils.Performance.Utils.html#AutomationUtils.Performance.Utils.performance_helper.PerformanceHelper.find_min_max_for_netstat">[docs]</a>    <span class="k">def</span> <span class="nf">find_min_max_for_netstat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">build_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;finds min/max values for the netstat of given config and build id</span>

<span class="sd">        Args:</span>

<span class="sd">            config              (dict)      --  monitor client/process config dict</span>

<span class="sd">                        Example : {</span>

<span class="sd">                                    &quot;client&quot;: &quot;xyz&quot;,</span>
<span class="sd">                                    &quot;binary&quot;: &quot;Machine&quot;,</span>
<span class="sd">                                    &quot;platform&quot;: &quot;Windows&quot;,</span>
<span class="sd">                                    &quot;countertype&quot;: &quot;Machine&quot;</span>
<span class="sd">                                }</span>

<span class="sd">            build_id            (str)       --  Automation run&#39;s build id</span>

<span class="sd">        Returns:</span>

<span class="sd">            dict        --  containing min/max values for netstat</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">counter_type</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COUNTER_TYPE_PARAM</span><span class="p">]</span>
        <span class="n">platform</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">PLATFORM_PARAM</span><span class="p">]</span>
        <span class="n">binary</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">BINARY_PARAM</span><span class="p">]</span>
        <span class="n">client_name</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CLIENT_PARAM</span><span class="p">]</span>
        <span class="n">output</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">ds_obj</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">states</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">Platforms</span><span class="o">.</span><span class="n">Unix</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
            <span class="n">states</span> <span class="o">=</span> <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">NETSTAT_STATE_LIST_UNIX</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">states</span> <span class="o">=</span> <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">NETSTAT_STATE_LIST_WINDOWS</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Netstat States - </span><span class="si">{</span><span class="n">states</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">criteria_query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_BUILD_ID</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="si">{</span><span class="n">build_id</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_MACHINE_NAME</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="si">{</span><span class="n">client_name</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_COMMSERV_VERSION</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">version</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2">&quot;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">counter_type</span> <span class="o">==</span> <span class="n">CounterTypes</span><span class="o">.</span><span class="n">MACHINE_COUNTER</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Machine NetStat detected for Min/Max Calculation&quot;</span><span class="p">)</span>
            <span class="n">ds_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">datacube</span><span class="o">.</span><span class="n">datasources</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">Machine_Data_Source_Name</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Process NetStat detected for Min/Max Calculation&quot;</span><span class="p">)</span>
            <span class="n">ds_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">datacube</span><span class="o">.</span><span class="n">datasources</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">Process_Data_Source_Name</span><span class="p">)</span>
            <span class="n">criteria_query</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_BINARY</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="si">{</span><span class="n">binary</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2">&quot;</span>
        <span class="n">index_server_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">index_servers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ds_obj</span><span class="o">.</span><span class="n">index_server_cloud_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DataSource/Index Server class initialised&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">state</span> <span class="ow">in</span> <span class="n">states</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Going to find Min/Max for state : </span><span class="si">{</span><span class="n">state</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">stats_query</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">STATS_PARAM</span><span class="p">:</span> <span class="s1">&#39;true&#39;</span><span class="p">,</span>
                <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">STATS_FIELD_SET_PARAM</span><span class="p">:</span> <span class="n">state</span><span class="p">,</span>
                <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">ROWS_PARAM</span><span class="p">:</span> <span class="mi">0</span>
            <span class="p">}</span>
            <span class="n">criteria_query</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;-</span><span class="si">{</span><span class="n">state</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># add not query to leave all zero values</span>
            <span class="n">resp</span> <span class="o">=</span> <span class="n">index_server_obj</span><span class="o">.</span><span class="n">execute_solr_query</span><span class="p">(</span><span class="n">core_name</span><span class="o">=</span><span class="n">ds_obj</span><span class="o">.</span><span class="n">computed_core_name</span><span class="p">,</span>
                                                       <span class="n">select_dict</span><span class="o">=</span><span class="n">criteria_query</span><span class="p">,</span>
                                                       <span class="n">op_params</span><span class="o">=</span><span class="n">stats_query</span><span class="p">)</span>
            <span class="n">criteria_query</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;-</span><span class="si">{</span><span class="n">state</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># remove the counter</span>
            <span class="n">min_value</span> <span class="o">=</span> \
                <span class="n">resp</span><span class="p">[</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">STATS_PARAM</span><span class="p">][</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">STATS_FIELD_PARAM</span><span class="p">][</span><span class="n">state</span><span class="p">][</span>
                    <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">MIN_PARAM</span><span class="p">]</span>
            <span class="n">max_value</span> <span class="o">=</span> <span class="n">resp</span><span class="p">[</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">STATS_PARAM</span><span class="p">][</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">STATS_FIELD_PARAM</span><span class="p">][</span><span class="n">state</span><span class="p">][</span>
                <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">MAX_PARAM</span><span class="p">]</span>
            <span class="n">mean_value</span> <span class="o">=</span> <span class="n">resp</span><span class="p">[</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">STATS_PARAM</span><span class="p">][</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">STATS_FIELD_PARAM</span><span class="p">][</span><span class="n">state</span><span class="p">][</span>
                <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">MEAN_PARAM</span><span class="p">]</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">min_value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">min_value</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">max_value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">max_value</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Skip adding for state : </span><span class="si">{</span><span class="n">state</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">output</span><span class="p">[</span><span class="n">state</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">MIN_PARAM</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">min_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">MAX_PARAM</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">max_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">MEAN_PARAM</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">mean_value</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Min/Max NetStat results&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">print_config</span><span class="p">(</span><span class="n">config_data</span><span class="o">=</span><span class="n">output</span><span class="p">[</span><span class="n">state</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">output</span></div>

<div class="viewcode-block" id="PerformanceHelper.find_min_max_for_counters"><a class="viewcode-back" href="../../../../source/AutomationUtils.Performance.Utils.html#AutomationUtils.Performance.Utils.performance_helper.PerformanceHelper.find_min_max_for_counters">[docs]</a>    <span class="k">def</span> <span class="nf">find_min_max_for_counters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">build_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;finds min/max values for the each performance counters of given config and build id</span>

<span class="sd">        Args:</span>

<span class="sd">            config              (dict)      --  monitor client/process config dict</span>

<span class="sd">                        Example : {</span>

<span class="sd">                                    &quot;client&quot;: &quot;xyz&quot;,</span>
<span class="sd">                                    &quot;binary&quot;: &quot;Machine&quot;,</span>
<span class="sd">                                    &quot;counters&quot;: [&quot;\\Processor(_Total)\\% Processor Time&quot;],</span>
<span class="sd">                                    &quot;platform&quot;: &quot;Windows&quot;,</span>
<span class="sd">                                    &quot;countertype&quot;: &quot;Machine&quot;</span>
<span class="sd">                                }</span>

<span class="sd">            build_id            (str)       --  Automation run&#39;s build id</span>

<span class="sd">        Returns:</span>

<span class="sd">            dict        --  containing min/max values for each counters in the config</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">counter_type</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COUNTER_TYPE_PARAM</span><span class="p">]</span>
        <span class="n">platform</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">PLATFORM_PARAM</span><span class="p">]</span>
        <span class="n">counters</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COUNTERS_PARAM</span><span class="p">]</span>
        <span class="n">binary</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">BINARY_PARAM</span><span class="p">]</span>
        <span class="n">client_name</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CLIENT_PARAM</span><span class="p">]</span>
        <span class="n">ds_obj</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">output</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">criteria_query</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_BUILD_ID</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="si">{</span><span class="n">build_id</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_MACHINE_NAME</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="si">{</span><span class="n">client_name</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_COMMSERV_VERSION</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">version</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2">&quot;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">counter_type</span> <span class="o">==</span> <span class="n">CounterTypes</span><span class="o">.</span><span class="n">MACHINE_COUNTER</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Machine counter detected for Min/Max Calculation&quot;</span><span class="p">)</span>
            <span class="n">ds_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">datacube</span><span class="o">.</span><span class="n">datasources</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">Machine_Data_Source_Name</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Process counter detected for Min/Max Calculation&quot;</span><span class="p">)</span>
            <span class="n">ds_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">datacube</span><span class="o">.</span><span class="n">datasources</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">Process_Data_Source_Name</span><span class="p">)</span>
            <span class="n">criteria_query</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_BINARY</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="si">{</span><span class="n">binary</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2">&quot;</span>
        <span class="n">index_server_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">index_servers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ds_obj</span><span class="o">.</span><span class="n">index_server_cloud_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DataSource/Index Server class initialised&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">counter</span> <span class="ow">in</span> <span class="n">counters</span><span class="p">:</span>
            <span class="n">convert</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">unit</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">if</span> <span class="n">counter</span> <span class="ow">in</span> <span class="p">(</span><span class="n">WindowsProcessCounters</span><span class="o">.</span><span class="n">PROCESS_PID</span><span class="p">,</span> <span class="n">UnixProcessCounters</span><span class="o">.</span><span class="n">PROCESS_PID</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">counter_type</span> <span class="o">==</span> <span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">counter</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span>
                        <span class="n">WindowsProcessCounters</span><span class="o">.</span><span class="n">PROCESS_THREAD_COUNT</span><span class="p">,</span>
                        <span class="n">WindowsProcessCounters</span><span class="o">.</span><span class="n">PROCESS_HANDLE_COUNT</span><span class="p">,</span>
                        <span class="n">WindowsProcessCounters</span><span class="o">.</span><span class="n">PROCESS_CPU</span><span class="p">,</span>
                        <span class="n">UnixProcessCounters</span><span class="o">.</span><span class="n">PROCESS_HANDLE_COUNT</span><span class="p">,</span>
                        <span class="n">UnixProcessCounters</span><span class="o">.</span><span class="n">PROCESS_THREAD_COUNT</span><span class="p">,</span>
                        <span class="n">UnixProcessCounters</span><span class="o">.</span><span class="n">PROCESS_CPU</span><span class="p">):</span>
                    <span class="n">convert</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="n">unit</span> <span class="o">=</span> <span class="s1">&#39;MB&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">counter</span> <span class="ow">in</span> <span class="p">(</span><span class="n">WindowsMachineCounters</span><span class="o">.</span><span class="n">MACHINE_AVAILABLE_MEMORY_IN_MB</span><span class="p">,</span>
                               <span class="n">UnixMachineCounters</span><span class="o">.</span><span class="n">MACHINE_AVAILABLE_MEMORY_IN_MB</span><span class="p">):</span>
                    <span class="n">unit</span> <span class="o">=</span> <span class="s1">&#39;MB&#39;</span>
            <span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">Platforms</span><span class="o">.</span><span class="n">Windows</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="n">counter</span> <span class="o">=</span> <span class="n">counter</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">solr_field</span> <span class="o">=</span> <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COUNTERS_FIELD_MAPPING</span><span class="p">[</span><span class="n">counter</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Going to find Min/Max for solr field : </span><span class="si">{</span><span class="n">solr_field</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">stats_query</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">STATS_PARAM</span><span class="p">:</span> <span class="s1">&#39;true&#39;</span><span class="p">,</span>
                <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">STATS_FIELD_SET_PARAM</span><span class="p">:</span> <span class="n">solr_field</span><span class="p">,</span>
                <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">ROWS_PARAM</span><span class="p">:</span> <span class="mi">0</span>
            <span class="p">}</span>
            <span class="n">criteria_query</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;-</span><span class="si">{</span><span class="n">solr_field</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># add not query to leave all zero values</span>
            <span class="n">resp</span> <span class="o">=</span> <span class="n">index_server_obj</span><span class="o">.</span><span class="n">execute_solr_query</span><span class="p">(</span><span class="n">core_name</span><span class="o">=</span><span class="n">ds_obj</span><span class="o">.</span><span class="n">computed_core_name</span><span class="p">,</span>
                                                       <span class="n">select_dict</span><span class="o">=</span><span class="n">criteria_query</span><span class="p">,</span>
                                                       <span class="n">op_params</span><span class="o">=</span><span class="n">stats_query</span><span class="p">)</span>
            <span class="n">criteria_query</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;-</span><span class="si">{</span><span class="n">solr_field</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># remove the counter</span>
            <span class="n">min_value</span> <span class="o">=</span> \
                <span class="n">resp</span><span class="p">[</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">STATS_PARAM</span><span class="p">][</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">STATS_FIELD_PARAM</span><span class="p">][</span><span class="n">solr_field</span><span class="p">][</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">MIN_PARAM</span><span class="p">]</span>
            <span class="n">max_value</span> <span class="o">=</span> <span class="n">resp</span><span class="p">[</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">STATS_PARAM</span><span class="p">][</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">STATS_FIELD_PARAM</span><span class="p">][</span><span class="n">solr_field</span><span class="p">][</span>
                <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">MAX_PARAM</span><span class="p">]</span>
            <span class="n">mean_value</span> <span class="o">=</span> <span class="n">resp</span><span class="p">[</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">STATS_PARAM</span><span class="p">][</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">STATS_FIELD_PARAM</span><span class="p">][</span><span class="n">solr_field</span><span class="p">][</span>
                <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">MEAN_PARAM</span><span class="p">]</span>

            <span class="c1"># convert it to MB in report</span>
            <span class="k">if</span> <span class="n">convert</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">min_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">min_value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">min_value</span> <span class="o">/</span> <span class="mi">1048576</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">max_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">max_value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">max_value</span> <span class="o">/</span> <span class="mi">1048576</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">mean_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mean_value</span><span class="p">,</span> <span class="n">basestring</span><span class="p">):</span>
                    <span class="n">mean_value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">mean_value</span> <span class="o">/</span> <span class="mi">1048576</span><span class="p">)</span>

            <span class="c1"># round it off to 2 decimals</span>
            <span class="k">if</span> <span class="n">min_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">min_value</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
                <span class="n">min_value</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">min_value</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">max_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">max_value</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
                <span class="n">max_value</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">max_value</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">mean_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mean_value</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
                <span class="n">mean_value</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">mean_value</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

            <span class="n">output</span><span class="p">[</span><span class="n">solr_field</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">MIN_PARAM</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">min_value</span><span class="si">}{</span><span class="n">unit</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">MAX_PARAM</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">max_value</span><span class="si">}{</span><span class="n">unit</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">dynamic_constants</span><span class="o">.</span><span class="n">MEAN_PARAM</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">mean_value</span><span class="si">}{</span><span class="n">unit</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Min/Max counters results&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">print_config</span><span class="p">(</span><span class="n">config_data</span><span class="o">=</span><span class="n">output</span><span class="p">[</span><span class="n">solr_field</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">output</span></div>

<div class="viewcode-block" id="PerformanceHelper.fetch_data_source_crawl_stats"><a class="viewcode-back" href="../../../../source/AutomationUtils.Performance.Utils.html#AutomationUtils.Performance.Utils.performance_helper.PerformanceHelper.fetch_data_source_crawl_stats">[docs]</a>    <span class="k">def</span> <span class="nf">fetch_data_source_crawl_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_source_name</span><span class="p">,</span> <span class="n">client_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; fetches the crawl stats for the given data source name</span>

<span class="sd">        Args:</span>

<span class="sd">            data_source_name        (str)       --  name of the data source</span>

<span class="sd">            client_id               (str)       --  client id which needs to applied as filter</span>

<span class="sd">        Returns:</span>

<span class="sd">            dict    --  containing crawl job stats info</span>

<span class="sd">        Raises</span>

<span class="sd">            Exception:</span>

<span class="sd">                    if input data type is not valid</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data_source_name</span><span class="p">,</span> <span class="n">basestring</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Input data type is not valid&quot;</span><span class="p">)</span>
        <span class="n">select_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_DATA_SOURCE_NAME</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="si">{</span><span class="n">data_source_name</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">client_id</span><span class="p">:</span>
            <span class="n">select_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COLUMN_CLIENT_ID</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="si">{</span><span class="n">client_id</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">}</span>
        <span class="n">success_dict</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span> <span class="n">select_dict</span><span class="p">,</span> <span class="o">**</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">QUERY_CISTATE_SUCCESS</span><span class="p">}</span>
        <span class="n">skip_dict</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span> <span class="n">select_dict</span><span class="p">,</span> <span class="o">**</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">QUERY_CISTATE_SKIPPED</span><span class="p">}</span>
        <span class="n">ca_success_dict</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">select_dict</span><span class="p">,</span> <span class="o">**</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">QUERY_CASTATE_SUCCESS</span><span class="p">}</span>
        <span class="n">ds_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">datacube</span><span class="o">.</span><span class="n">datasources</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">data_source_name</span><span class="p">)</span>
        <span class="n">index_server_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">index_servers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ds_obj</span><span class="o">.</span><span class="n">index_server_cloud_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Index server object initialised for cloud id : </span><span class="si">{</span><span class="n">ds_obj</span><span class="o">.</span><span class="n">index_server_cloud_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="n">index_server_obj</span><span class="o">.</span><span class="n">execute_solr_query</span><span class="p">(</span><span class="n">core_name</span><span class="o">=</span><span class="n">ds_obj</span><span class="o">.</span><span class="n">computed_core_name</span><span class="p">,</span>
                                                   <span class="n">select_dict</span><span class="o">=</span><span class="n">select_dict</span><span class="p">,</span>
                                                   <span class="n">op_params</span><span class="o">=</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">QUERY_ZERO_ROWS</span><span class="p">)</span>
        <span class="n">total_docs</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">RESPONSE_PARAM</span><span class="p">][</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">NUM_FOUND_PARAM</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total docs for this Data Source : </span><span class="si">{</span><span class="n">total_docs</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="n">index_server_obj</span><span class="o">.</span><span class="n">execute_solr_query</span><span class="p">(</span><span class="n">core_name</span><span class="o">=</span><span class="n">ds_obj</span><span class="o">.</span><span class="n">computed_core_name</span><span class="p">,</span>
                                                   <span class="n">select_dict</span><span class="o">=</span><span class="n">success_dict</span><span class="p">,</span>
                                                   <span class="n">op_params</span><span class="o">=</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">QUERY_ZERO_ROWS</span><span class="p">)</span>
        <span class="n">ci_success</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">RESPONSE_PARAM</span><span class="p">][</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">NUM_FOUND_PARAM</span><span class="p">])</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="n">index_server_obj</span><span class="o">.</span><span class="n">execute_solr_query</span><span class="p">(</span><span class="n">core_name</span><span class="o">=</span><span class="n">ds_obj</span><span class="o">.</span><span class="n">computed_core_name</span><span class="p">,</span>
                                                   <span class="n">select_dict</span><span class="o">=</span><span class="n">skip_dict</span><span class="p">,</span>
                                                   <span class="n">op_params</span><span class="o">=</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">QUERY_ZERO_ROWS</span><span class="p">)</span>
        <span class="n">ci_skipped</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">RESPONSE_PARAM</span><span class="p">][</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">NUM_FOUND_PARAM</span><span class="p">])</span>

        <span class="n">ci_failed</span> <span class="o">=</span> <span class="n">total_docs</span> <span class="o">-</span> <span class="n">ci_success</span> <span class="o">-</span> <span class="n">ci_skipped</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Success docs for CI : </span><span class="si">{</span><span class="n">ci_success</span><span class="si">}</span><span class="s2">. Failed docs for CI : </span><span class="si">{</span><span class="n">ci_failed</span><span class="si">}</span><span class="s2">&quot;</span>
                      <span class="sa">f</span><span class="s2">&quot; Skipped docs for CI : </span><span class="si">{</span><span class="n">ci_skipped</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="n">index_server_obj</span><span class="o">.</span><span class="n">execute_solr_query</span><span class="p">(</span><span class="n">core_name</span><span class="o">=</span><span class="n">ds_obj</span><span class="o">.</span><span class="n">computed_core_name</span><span class="p">,</span>
                                                   <span class="n">select_dict</span><span class="o">=</span><span class="n">ca_success_dict</span><span class="p">,</span>
                                                   <span class="n">op_params</span><span class="o">=</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">QUERY_ZERO_ROWS</span><span class="p">)</span>
        <span class="n">ca_success</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">RESPONSE_PARAM</span><span class="p">][</span><span class="n">dynamic_constants</span><span class="o">.</span><span class="n">NUM_FOUND_PARAM</span><span class="p">])</span>
        <span class="n">ca_failed</span> <span class="o">=</span> <span class="n">total_docs</span> <span class="o">-</span> <span class="n">ca_success</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Success docs for CA : </span><span class="si">{</span><span class="n">ca_success</span><span class="si">}</span><span class="s2">. Failed docs for CA : </span><span class="si">{</span><span class="n">ca_failed</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">output</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_TOTAL_DOCS</span><span class="p">:</span> <span class="n">total_docs</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_SUCCESS_DOCS</span><span class="p">:</span> <span class="n">ci_success</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_FAILED_DOCS</span><span class="p">:</span> <span class="n">ci_failed</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_SKIPPED_DOCS</span><span class="p">:</span> <span class="n">ci_skipped</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_CA_SUCCESS_DOCS</span><span class="p">:</span> <span class="n">ca_success</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DYNAMIC_COLUMN_CA_FAILED_DOCS</span><span class="p">:</span> <span class="n">ca_failed</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">output</span></div>

<div class="viewcode-block" id="PerformanceHelper.read_json_file"><a class="viewcode-back" href="../../../../source/AutomationUtils.Performance.Utils.html#AutomationUtils.Performance.Utils.performance_helper.PerformanceHelper.read_json_file">[docs]</a>    <span class="k">def</span> <span class="nf">read_json_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">json_file</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Opens the json file and loads into dict</span>

<span class="sd">        Args:</span>

<span class="sd">            json_file           (str)       --  json file path</span>

<span class="sd">        Returns:</span>

<span class="sd">            dict  -- JSON data from the file</span>

<span class="sd">        Raises:</span>

<span class="sd">            Exception:</span>

<span class="sd">                    if failed to read the file</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span> <span class="k">as</span> <span class="n">in_file</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">in_file</span><span class="p">)</span></div>

<div class="viewcode-block" id="PerformanceHelper.dump_json_to_file"><a class="viewcode-back" href="../../../../source/AutomationUtils.Performance.Utils.html#AutomationUtils.Performance.Utils.performance_helper.PerformanceHelper.dump_json_to_file">[docs]</a>    <span class="k">def</span> <span class="nf">dump_json_to_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">json_data</span><span class="p">,</span> <span class="n">out_file</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; dumps the given JSON dict to the output file given</span>

<span class="sd">        Args:</span>

<span class="sd">            json_data       (dict)      --  Data to be dumped to the file</span>

<span class="sd">            out_file        (str)       --  Output file path</span>

<span class="sd">        Returns:</span>

<span class="sd">            None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Dumping Json data in to the file : </span><span class="si">{</span><span class="n">out_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_file</span><span class="p">,</span> <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">FILE_WRITE_MODE</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">json_data</span><span class="p">,</span> <span class="n">outfile</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Json Data saved successfully to Json file - </span><span class="si">{</span><span class="n">out_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="PerformanceHelper.remove_invalid_counters"><a class="viewcode-back" href="../../../../source/AutomationUtils.Performance.Utils.html#AutomationUtils.Performance.Utils.performance_helper.PerformanceHelper.remove_invalid_counters">[docs]</a>    <span class="k">def</span> <span class="nf">remove_invalid_counters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">counters</span><span class="p">,</span> <span class="n">platform</span><span class="p">,</span> <span class="n">counter_type</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;removes invalid counters for the client based on the platform type provided</span>

<span class="sd">        Args:</span>

<span class="sd">            counters            (list)      --  list of counters</span>

<span class="sd">            platform            (str)       --  platform type of client</span>

<span class="sd">            counter_type        (str)       --  type of counter</span>

<span class="sd">        Returns:</span>

<span class="sd">            list        --  valid counters for the client and platform provided</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">class_name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">Platforms</span><span class="o">.</span><span class="n">Windows</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">platform</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">counter_type</span> <span class="o">==</span> <span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">:</span>
                <span class="n">class_name</span> <span class="o">=</span> <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">WINDOWS_PROCESS_COUNTER</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">class_name</span> <span class="o">=</span> <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">WINDOWS_MACHINE_COUNTER</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">counter_type</span> <span class="o">==</span> <span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">:</span>
                <span class="n">class_name</span> <span class="o">=</span> <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">UNIX_PROCESS_COUNTER</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">class_name</span> <span class="o">=</span> <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">UNIX_MACHINE_COUNTER</span>
        <span class="n">class_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">WINDOWS_PROCESS_COUNTER</span><span class="p">:</span> <span class="n">WindowsProcessCounters</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">WINDOWS_MACHINE_COUNTER</span><span class="p">:</span> <span class="n">WindowsMachineCounters</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">UNIX_PROCESS_COUNTER</span><span class="p">:</span> <span class="n">UnixProcessCounters</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">UNIX_MACHINE_COUNTER</span><span class="p">:</span> <span class="n">UnixMachineCounters</span>
        <span class="p">}</span>
        <span class="n">class_obj</span> <span class="o">=</span> <span class="n">class_dict</span><span class="p">[</span><span class="n">class_name</span><span class="p">]</span>
        <span class="n">remove_counter</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">counter</span> <span class="ow">in</span> <span class="n">counters</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">counter</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">class_obj</span><span class="o">.</span><span class="n">COUNTER_VALUES</span><span class="p">:</span>
                <span class="n">remove_counter</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">counter</span><span class="p">)</span>
        <span class="n">set_difference</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">counters</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">remove_counter</span><span class="p">)</span>
        <span class="n">counters</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">set_difference</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Removed invalid counters - </span><span class="si">{</span><span class="n">remove_counter</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Final valid counters returned : </span><span class="si">{</span><span class="n">counters</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">counters</span></div>

<div class="viewcode-block" id="PerformanceHelper.form_client_monitor_param"><a class="viewcode-back" href="../../../../source/AutomationUtils.Performance.Utils.html#AutomationUtils.Performance.Utils.performance_helper.PerformanceHelper.form_client_monitor_param">[docs]</a>    <span class="k">def</span> <span class="nf">form_client_monitor_param</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client_name</span><span class="p">,</span> <span class="n">phase_name</span><span class="p">,</span> <span class="n">counters</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; forms the client monitor performance config based on inputs</span>

<span class="sd">        Args:</span>

<span class="sd">            client_name             (str)       --  name of the client</span>

<span class="sd">            phase_name              (str)       --  Job phase name</span>

<span class="sd">            Note : set this to JobphaseNames.DUMMY_EMPTY in case if we want to form performance counter for machine</span>

<span class="sd">            counters                (list)      --  list containing performance counters which needs to be monitored</span>

<span class="sd">                                                if none, default counters are selected</span>

<span class="sd">            kwargs                              --  optional argument</span>

<span class="sd">                    appname         --  cvods process appname command line param</span>

<span class="sd">                    username        --  username to connect to machine in case of non-commvault client</span>

<span class="sd">                    password        --  password used to connect to machine in case of non-commvault client</span>

<span class="sd">        Returns:</span>

<span class="sd">            dict    --  containing performance config needed to monitor stats for a client/Process</span>

<span class="sd">                Example : {</span>
<span class="sd">                            &#39;client&#39;: &#39;xyz&#39;,</span>
<span class="sd">                            &#39;binary&#39;: {&#39;Windows&#39;: &#39;IFind.exe&#39;},</span>
<span class="sd">                            &#39;counters&#39;: [&#39;\\Process(%s*)\\Handle Count&#39;, &#39;\\Process(%s*)\\Thread Count&#39;],</span>
<span class="sd">                            &#39;platform&#39;: &#39;UNIX&#39;,</span>
<span class="sd">                            &#39;statsfolder&#39;: &#39;/Users/root/commvault_automation/Automation_Performance_Data&#39;},</span>
<span class="sd">                            &#39;cmdlineparams&#39;:&#39;-j &#39;,</span>
<span class="sd">                            &#39;portusagestats&#39; : True,</span>
<span class="sd">                            # below fields are applicable for non-commvault client alone</span>
<span class="sd">                            &#39;client_username&#39;:&lt;username&gt;,</span>
<span class="sd">                            &#39;client_password&#39;:&lt;password&gt;</span>

<span class="sd">                        }</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">client_name</span><span class="p">,</span> <span class="n">basestring</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Input data type is not valid&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">counters</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">phase_name</span> <span class="o">==</span> <span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_EMPTY</span><span class="p">:</span>
                <span class="c1"># Machine counters</span>
                <span class="n">counters</span> <span class="o">=</span> <span class="n">WindowsMachineCounters</span><span class="o">.</span><span class="n">COUNTER_VALUES</span> <span class="o">+</span> <span class="n">UnixMachineCounters</span><span class="o">.</span><span class="n">COUNTER_VALUES</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># process counters</span>
                <span class="n">counters</span> <span class="o">=</span> <span class="n">WindowsProcessCounters</span><span class="o">.</span><span class="n">COUNTER_VALUES</span> <span class="o">+</span> <span class="n">UnixProcessCounters</span><span class="o">.</span><span class="n">COUNTER_VALUES</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No input for counters so Adding All counters by Default - </span><span class="si">{</span><span class="n">counters</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">local_counters</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">counters</span><span class="p">)</span>
        <span class="n">client_obj</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">machine_obj</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">is_cvlt_client</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">install_dir</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">has_client</span><span class="p">(</span><span class="n">client_name</span><span class="p">):</span>
            <span class="n">is_cvlt_client</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">machine_cache_key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">client_name</span><span class="si">}{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">MACHINE_OBJ_CACHE</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_obj</span><span class="o">.</span><span class="n">is_exists</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">machine_cache_key</span><span class="p">):</span>
            <span class="n">machine_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_obj</span><span class="o">.</span><span class="n">get_key</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">machine_cache_key</span><span class="p">)</span>
            <span class="c1"># if commvault client, find instance and install dir</span>
            <span class="k">if</span> <span class="n">is_cvlt_client</span><span class="p">:</span>
                <span class="n">client_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">client_name</span><span class="p">)</span>
                <span class="n">instance</span> <span class="o">=</span> <span class="n">client_obj</span><span class="o">.</span><span class="n">instance</span>
                <span class="n">install_dir</span> <span class="o">=</span> <span class="n">client_obj</span><span class="o">.</span><span class="n">install_directory</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># key not present in cache. Create it</span>
            <span class="k">if</span> <span class="n">is_cvlt_client</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;It is a commvault client - </span><span class="si">{</span><span class="n">client_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">client_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">client_name</span><span class="p">)</span>
                <span class="n">machine_obj</span> <span class="o">=</span> <span class="n">Machine</span><span class="p">(</span><span class="n">machine_name</span><span class="o">=</span><span class="n">client_obj</span><span class="p">,</span> <span class="n">commcell_object</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="p">)</span>
                <span class="n">instance</span> <span class="o">=</span> <span class="n">client_obj</span><span class="o">.</span><span class="n">instance</span>
                <span class="n">install_dir</span> <span class="o">=</span> <span class="n">client_obj</span><span class="o">.</span><span class="n">install_directory</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;It is a Non-commvault client - </span><span class="si">{</span><span class="n">client_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">machine_obj</span> <span class="o">=</span> <span class="n">Machine</span><span class="p">(</span><span class="n">machine_name</span><span class="o">=</span><span class="n">client_name</span><span class="p">,</span> <span class="n">commcell_object</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="p">,</span>
                                      <span class="n">username</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">USERNAME_PARAM</span><span class="p">),</span>
                                      <span class="n">password</span><span class="o">=</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">PASSWORD_PARAM</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cache_obj</span><span class="o">.</span><span class="n">put_key</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">machine_cache_key</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">machine_obj</span><span class="p">)</span>
        <span class="n">binary_name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">cmd_line</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">counter_type</span> <span class="o">=</span> <span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span>
        <span class="k">if</span> <span class="n">phase_name</span> <span class="o">==</span> <span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">LIVE_SCAN</span><span class="p">:</span>
            <span class="n">binary_name</span> <span class="o">=</span> <span class="n">Binary</span><span class="o">.</span><span class="n">I_FIND</span>
            <span class="n">cmd_line</span> <span class="o">=</span> <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">JOB_ID_CMD_LINE_PARAM</span>
        <span class="k">elif</span> <span class="n">phase_name</span> <span class="o">==</span> <span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">CONTENT_PUSH</span><span class="p">:</span>
            <span class="n">binary_name</span> <span class="o">=</span> <span class="n">Binary</span><span class="o">.</span><span class="n">CL_BACKUP</span>
            <span class="n">cmd_line</span> <span class="o">=</span> <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">JOB_ID_CMD_LINE_PARAM</span>
        <span class="k">elif</span> <span class="n">phase_name</span> <span class="o">==</span> <span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">INDEX_EXTRACTION</span><span class="p">:</span>
            <span class="n">binary_name</span> <span class="o">=</span> <span class="n">Binary</span><span class="o">.</span><span class="n">CV_DISTRIBUTOR</span>
            <span class="n">cmd_line</span> <span class="o">=</span> <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">JOB_ID_CMD_LINE_PARAM</span>
        <span class="k">elif</span> <span class="n">phase_name</span> <span class="o">==</span> <span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_DATA_CUBE</span><span class="p">:</span>
            <span class="n">binary_name</span> <span class="o">=</span> <span class="n">Binary</span><span class="o">.</span><span class="n">DATA_CUBE</span>
            <span class="n">cmd_line</span> <span class="o">=</span> <span class="n">instance</span>
        <span class="k">elif</span> <span class="n">phase_name</span> <span class="o">==</span> <span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_CONTENT_EXTRACTOR</span><span class="p">:</span>
            <span class="n">binary_name</span> <span class="o">=</span> <span class="n">Binary</span><span class="o">.</span><span class="n">CONTENT_EXTRACTOR</span>
            <span class="n">cmd_line</span> <span class="o">=</span> <span class="n">instance</span>
        <span class="k">elif</span> <span class="n">phase_name</span> <span class="o">==</span> <span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_MESSAGE_QUEUE</span><span class="p">:</span>
            <span class="n">binary_name</span> <span class="o">=</span> <span class="n">Binary</span><span class="o">.</span><span class="n">MESSAGE_QUEUE</span>
            <span class="n">cmd_line</span> <span class="o">=</span> <span class="n">instance</span>
        <span class="k">elif</span> <span class="n">phase_name</span> <span class="o">==</span> <span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_EXPORTER</span><span class="p">:</span>
            <span class="n">binary_name</span> <span class="o">=</span> <span class="n">Binary</span><span class="o">.</span><span class="n">EXPORTER</span>
            <span class="n">cmd_line</span> <span class="o">=</span> <span class="n">instance</span>
        <span class="k">elif</span> <span class="n">phase_name</span> <span class="o">==</span> <span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_PYTHON</span><span class="p">:</span>
            <span class="n">binary_name</span> <span class="o">=</span> <span class="n">Binary</span><span class="o">.</span><span class="n">PYTHON</span>
            <span class="k">if</span> <span class="n">machine_obj</span><span class="o">.</span><span class="n">os_info</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">Platforms</span><span class="o">.</span><span class="n">Windows</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="n">cmd_line</span> <span class="o">=</span> <span class="s1">&#39;anaconda&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">cmd_line</span> <span class="o">=</span> <span class="n">install_dir</span>
        <span class="k">elif</span> <span class="n">phase_name</span> <span class="o">==</span> <span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_SEARCH_ENGINE</span><span class="p">:</span>
            <span class="n">binary_name</span> <span class="o">=</span> <span class="n">Binary</span><span class="o">.</span><span class="n">SEARCH_ENGINE</span>
            <span class="n">cmd_line</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CI_SERVER_SERVICE</span><span class="si">}{</span><span class="n">instance</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">elif</span> <span class="n">phase_name</span> <span class="o">==</span> <span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_CVCI_ANALYTICS</span><span class="p">:</span>
            <span class="n">binary_name</span> <span class="o">=</span> <span class="n">Binary</span><span class="o">.</span><span class="n">CVCI_ANALYTICS</span>
            <span class="n">cmd_line</span> <span class="o">=</span> <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">JOB_ID_CMD_LINE_PARAM</span>
        <span class="k">elif</span> <span class="n">phase_name</span> <span class="o">==</span> <span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_CVD</span><span class="p">:</span>
            <span class="n">binary_name</span> <span class="o">=</span> <span class="n">Binary</span><span class="o">.</span><span class="n">CVD</span>
            <span class="n">cmd_line</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">install_dir</span><span class="si">}{</span><span class="n">machine_obj</span><span class="o">.</span><span class="n">os_sep</span><span class="si">}{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">BASE_FOLDER</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">elif</span> <span class="n">phase_name</span> <span class="o">==</span> <span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_AUX_COPY</span><span class="p">:</span>
            <span class="n">binary_name</span> <span class="o">=</span> <span class="n">Binary</span><span class="o">.</span><span class="n">AUX_COPY</span>
            <span class="n">cmd_line</span> <span class="o">=</span> <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">JOB_ID_CMD_LINE_PARAM_OTHER</span>
        <span class="k">elif</span> <span class="n">phase_name</span> <span class="o">==</span> <span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_AUX_COPY_MGR</span><span class="p">:</span>
            <span class="n">binary_name</span> <span class="o">=</span> <span class="n">Binary</span><span class="o">.</span><span class="n">AUX_COPY_MGR</span>
            <span class="n">cmd_line</span> <span class="o">=</span> <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">JOB_ID_CMD_LINE_PARAM</span>
        <span class="k">elif</span> <span class="n">phase_name</span> <span class="o">==</span> <span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_CVODS</span><span class="p">:</span>
            <span class="n">binary_name</span> <span class="o">=</span> <span class="n">Binary</span><span class="o">.</span><span class="n">CVODS</span>
            <span class="n">cmd_line</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;-</span><span class="si">{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CVODS_APP_NAME</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CVODS_APP_NAME</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">elif</span> <span class="n">phase_name</span> <span class="o">==</span> <span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_EMPTY</span><span class="p">:</span>
            <span class="c1"># performance stats is for machine level so binary name is Machine</span>
            <span class="n">binary_name</span> <span class="o">=</span> <span class="n">CounterTypes</span><span class="o">.</span><span class="n">MACHINE_COUNTER</span>
            <span class="n">counter_type</span> <span class="o">=</span> <span class="n">CounterTypes</span><span class="o">.</span><span class="n">MACHINE_COUNTER</span>
        <span class="k">elif</span> <span class="n">phase_name</span> <span class="o">==</span> <span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_CLRESTORE</span><span class="p">:</span>
            <span class="n">binary_name</span> <span class="o">=</span> <span class="n">Binary</span><span class="o">.</span><span class="n">CL_RESTORE</span>
            <span class="n">cmd_line</span> <span class="o">=</span> <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">JOB_TOKEN_CMD_LINE_PARAM</span>
        <span class="k">elif</span> <span class="n">phase_name</span> <span class="o">==</span> <span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_INDEX_GATEWAY</span><span class="p">:</span>
            <span class="n">binary_name</span> <span class="o">=</span> <span class="n">Binary</span><span class="o">.</span><span class="n">INDEX_GATEWAY</span>
            <span class="n">cmd_line</span> <span class="o">=</span> <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">INDEX_GATEWAY_COMMAND_LINE_KEYWORD</span>
        <span class="n">drive_cache_lookup</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">client_name</span><span class="si">}{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">DRIVE_CACHE</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">drive</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_obj</span><span class="o">.</span><span class="n">is_exists</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">drive_cache_lookup</span><span class="p">):</span>
            <span class="n">drive</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_obj</span><span class="o">.</span><span class="n">get_key</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">drive_cache_lookup</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">option_obj</span> <span class="o">=</span> <span class="n">OptionsSelector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="p">)</span>
            <span class="n">drive</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">option_obj</span><span class="o">.</span><span class="n">get_drive</span><span class="p">(</span><span class="n">machine</span><span class="o">=</span><span class="n">machine_obj</span><span class="p">)</span><span class="si">}{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">FOLDER_NAME</span><span class="si">}{</span><span class="n">machine_obj</span><span class="o">.</span><span class="n">os_sep</span><span class="si">}</span><span class="s2">&quot;</span> \
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">client_name</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cache_obj</span><span class="o">.</span><span class="n">put_key</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">drive_cache_lookup</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">drive</span><span class="p">)</span>

        <span class="n">platform</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">machine_obj</span><span class="o">.</span><span class="n">os_info</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">Platforms</span><span class="o">.</span><span class="n">Windows</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
            <span class="n">platform</span> <span class="o">=</span> <span class="n">Platforms</span><span class="o">.</span><span class="n">Windows</span>
            <span class="k">if</span> <span class="n">binary_name</span> <span class="o">!=</span> <span class="n">CounterTypes</span><span class="o">.</span><span class="n">MACHINE_COUNTER</span><span class="p">:</span>
                <span class="c1"># Add PID as default counters to all request. we need PID so that we drop unwanted process stats from</span>
                <span class="c1"># pushing into open data source in multi instancing setup</span>
                <span class="k">if</span> <span class="n">WindowsProcessCounters</span><span class="o">.</span><span class="n">PROCESS_PID</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">local_counters</span><span class="p">:</span>
                    <span class="n">local_counters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">WindowsProcessCounters</span><span class="o">.</span><span class="n">PROCESS_PID</span><span class="p">)</span>
                <span class="c1"># remove non windows counters from the list</span>
                <span class="n">local_counters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">remove_invalid_counters</span><span class="p">(</span><span class="n">counters</span><span class="o">=</span><span class="n">local_counters</span><span class="p">,</span>
                                                              <span class="n">counter_type</span><span class="o">=</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">,</span>
                                                              <span class="n">platform</span><span class="o">=</span><span class="n">platform</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">local_counters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">remove_invalid_counters</span><span class="p">(</span><span class="n">counters</span><span class="o">=</span><span class="n">local_counters</span><span class="p">,</span>
                                                              <span class="n">counter_type</span><span class="o">=</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">MACHINE_COUNTER</span><span class="p">,</span>
                                                              <span class="n">platform</span><span class="o">=</span><span class="n">platform</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">platform</span> <span class="o">=</span> <span class="n">Platforms</span><span class="o">.</span><span class="n">Unix</span>
            <span class="k">if</span> <span class="n">binary_name</span> <span class="o">!=</span> <span class="n">CounterTypes</span><span class="o">.</span><span class="n">MACHINE_COUNTER</span><span class="p">:</span>
                <span class="c1"># Add PID as default counters to all request. we need PID so that we drop unwanted process stats from</span>
                <span class="c1"># pushing into open data source in multi instancing setup</span>
                <span class="k">if</span> <span class="n">UnixProcessCounters</span><span class="o">.</span><span class="n">PROCESS_PID</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">local_counters</span><span class="p">:</span>
                    <span class="n">local_counters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">UnixProcessCounters</span><span class="o">.</span><span class="n">PROCESS_PID</span><span class="p">)</span>
                <span class="c1"># remove windows counters from the list</span>
                <span class="n">local_counters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">remove_invalid_counters</span><span class="p">(</span><span class="n">counters</span><span class="o">=</span><span class="n">local_counters</span><span class="p">,</span>
                                                              <span class="n">counter_type</span><span class="o">=</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">,</span>
                                                              <span class="n">platform</span><span class="o">=</span><span class="n">platform</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">local_counters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">remove_invalid_counters</span><span class="p">(</span><span class="n">counters</span><span class="o">=</span><span class="n">local_counters</span><span class="p">,</span>
                                                              <span class="n">counter_type</span><span class="o">=</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">MACHINE_COUNTER</span><span class="p">,</span>
                                                              <span class="n">platform</span><span class="o">=</span><span class="n">platform</span><span class="p">)</span>
        <span class="n">param</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CLIENT_PARAM</span><span class="p">:</span> <span class="n">client_name</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">BINARY_PARAM</span><span class="p">:</span> <span class="n">binary_name</span><span class="p">[</span><span class="n">platform</span><span class="p">]</span> <span class="k">if</span> <span class="n">binary_name</span> <span class="o">!=</span> <span class="n">CounterTypes</span><span class="o">.</span><span class="n">MACHINE_COUNTER</span> <span class="k">else</span> <span class="n">binary_name</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COUNTERS_PARAM</span><span class="p">:</span> <span class="n">local_counters</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">PLATFORM_PARAM</span><span class="p">:</span> <span class="n">platform</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">STATS_FOLDER_PARAM</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">drive</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COMMAND_LINE_PARAM</span><span class="p">:</span> <span class="n">cmd_line</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">COUNTER_TYPE_PARAM</span><span class="p">:</span> <span class="n">counter_type</span><span class="p">,</span>
            <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">PORT_USAGE_PARAM</span><span class="p">:</span> <span class="n">CustomCounters</span><span class="o">.</span><span class="n">CAPTURE_NETWORK_PORT_USAGE</span><span class="p">}</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_cvlt_client</span><span class="p">:</span>
            <span class="n">param</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">USERNAME_PARAM</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">USERNAME_PARAM</span><span class="p">)</span>
            <span class="n">param</span><span class="p">[</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">PASSWORD_PARAM</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">PASSWORD_PARAM</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Client Param Formed &quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">print_config</span><span class="p">(</span><span class="n">config_data</span><span class="o">=</span><span class="n">param</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">param</span></div>

<div class="viewcode-block" id="PerformanceHelper.print_config"><a class="viewcode-back" href="../../../../source/AutomationUtils.Performance.Utils.html#AutomationUtils.Performance.Utils.performance_helper.PerformanceHelper.print_config">[docs]</a>    <span class="k">def</span> <span class="nf">print_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config_data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  prints the config data on log</span>

<span class="sd">        Args:</span>

<span class="sd">            config_data         (dict)      --      config data which needs to be logged</span>

<span class="sd">        Returns:</span>

<span class="sd">            None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;*********************************************************************************************&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">config_data</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">param</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">config_data</span><span class="p">[</span><span class="n">param</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;*********************************************************************************************&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="PerformanceHelper.form_sdg_fs_monitor_param"><a class="viewcode-back" href="../../../../source/AutomationUtils.Performance.Utils.html#AutomationUtils.Performance.Utils.performance_helper.PerformanceHelper.form_sdg_fs_monitor_param">[docs]</a>    <span class="k">def</span> <span class="nf">form_sdg_fs_monitor_param</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">job_type</span><span class="p">,</span>
            <span class="n">counters</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">index_server</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">access_node</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">content_analyzer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">search_engine</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">media_agent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">is_tika</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; forms performance monitor config required for FS data source crawl job in SDG activate</span>

<span class="sd">        Args:</span>

<span class="sd">            job_type                    (int)       --      type of job</span>
<span class="sd">                                                                Example : defined in JobTypes in constants.py</span>

<span class="sd">            index_server                (str)       --      Index server name</span>

<span class="sd">            access_node                 (str)       --      Access node client name</span>

<span class="sd">            content_analyzer            (str)       --      Content Analyzer client name</span>

<span class="sd">            counters                    (dict)      --      Windows/Unix counters</span>

<span class="sd">                                    Example : {</span>
<span class="sd">                                                &#39;Process&#39; : [Memory,Handle]</span>
<span class="sd">                                                &#39;Machine&#39; : [Memory,CPU]</span>
<span class="sd">                                             }</span>

<span class="sd">                    if None, then all counters will be selected for monitoring</span>

<span class="sd">            search_engine               (list)      --      list of search engine client names</span>

<span class="sd">            media_agent                 (str)       --      Media agent client name</span>

<span class="sd">            is_tika                     (bool)      --      specifies whether it is tika or stellant based extraction</span>

<span class="sd">        Returns:</span>

<span class="sd">            dict    --  containing attributes needed for performance monitoring</span>

<span class="sd">    Example : {</span>
<span class="sd">                &#39;Live Scan&#39;: {</span>
<span class="sd">                                &#39;1&#39;: {</span>
<span class="sd">                                        &#39;client&#39;: &#39;dez&#39;,</span>
<span class="sd">                                        &#39;binary&#39;: {&#39;Windows&#39;: &#39;IFind.exe&#39;},</span>
<span class="sd">                                        &#39;counters&#39;: [&#39;\\Process(%s*)\\Handle Count&#39;, &#39;\\Process(%s*)\\Thread Count&#39;],</span>
<span class="sd">                                        &#39;platform&#39;: &#39;UNIX&#39;,</span>
<span class="sd">                                        &#39;statsfolder&#39;: &#39;/Users/root/commvault_automation/Automation_Performance_Data&#39;}</span>
<span class="sd">                                        &#39;cmdlineparams&#39;: &quot;-j &quot;,</span>
<span class="sd">                                        &#39;portusagestats&#39; : True,</span>
<span class="sd">                                        # below fields are applicable for non-commvault client alone</span>
<span class="sd">                                        &#39;client_username&#39;:&lt;username&gt;,</span>
<span class="sd">                                        &#39;client_password&#39;:&lt;password&gt;</span>
<span class="sd">                                    }</span>
<span class="sd">                &#39;Content Push&#39;: {</span>
<span class="sd">                                &#39;1&#39;: {</span>
<span class="sd">                                        &#39;client&#39;: &#39;tyr&#39;,</span>
<span class="sd">                                        &#39;binary&#39;: {&#39;Windows&#39;: &#39;CLBackup.exe&#39;},</span>
<span class="sd">                                        &#39;counters&#39;: [&#39;\\Process(%s*)\\Handle Count&#39;, &#39;\\Process(%s*)\\Thread Count&#39;],</span>
<span class="sd">                                        &#39;platform&#39;: &#39;UNIX&#39;,</span>
<span class="sd">                                        &#39;statsfolder&#39;: &#39;/Users/root/commvault_automation/Automation_Performance_Data&#39;},</span>
<span class="sd">                                        &#39;cmdlineparams&#39;:&quot;-j &quot;,</span>
<span class="sd">                                        &#39;portusagestats&#39; : True,</span>
<span class="sd">                                        # below fields are applicable for non-commvault client alone</span>
<span class="sd">                                        &#39;client_username&#39;:&lt;username&gt;,</span>
<span class="sd">                                        &#39;client_password&#39;:&lt;password&gt;</span>

<span class="sd">                                    }</span>
<span class="sd">                }</span>
<span class="sd">            }</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index_server</span><span class="p">,</span> <span class="n">basestring</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Input data type is not valid&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">counters</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">counters</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">CounterTypes</span><span class="o">.</span><span class="n">MACHINE_COUNTER</span><span class="p">:</span>
                    <span class="n">WindowsMachineCounters</span><span class="o">.</span><span class="n">COUNTER_VALUES</span> <span class="o">+</span> <span class="n">UnixMachineCounters</span><span class="o">.</span><span class="n">COUNTER_VALUES</span><span class="p">,</span>
                <span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">:</span>
                    <span class="n">WindowsProcessCounters</span><span class="o">.</span><span class="n">COUNTER_VALUES</span> <span class="o">+</span> <span class="n">UnixProcessCounters</span><span class="o">.</span><span class="n">COUNTER_VALUES</span><span class="p">}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No input for counters so Adding All counters by Default - </span><span class="si">{</span><span class="n">counters</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Going to form file system monitor params based on user inputs&quot;</span><span class="p">)</span>
        <span class="n">index_server_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">index_servers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">index_server</span><span class="p">)</span>
        <span class="n">index_server_client_list</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">index_server_obj</span><span class="o">.</span><span class="n">client_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Index server Initialised. Total index server nodes : </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">index_server_client_list</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">monitor_param</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1"># Add Machine counters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Forming performance params for machine counters&quot;</span><span class="p">)</span>
        <span class="n">access_node_machine_param</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">job_type</span> <span class="ow">in</span> <span class="n">JobTypes</span><span class="o">.</span><span class="n">ONLINE_CRAWL_JOB</span><span class="p">:</span>
            <span class="n">access_node_machine_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span><span class="n">client_name</span><span class="o">=</span><span class="n">access_node</span><span class="p">,</span>
                                                                       <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_EMPTY</span><span class="p">,</span>
                                                                       <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">MACHINE_COUNTER</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Access node machine configuration formed&quot;</span><span class="p">)</span>
        <span class="n">index_server_machine_param</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">job_type</span> <span class="ow">in</span> <span class="n">JobTypes</span><span class="o">.</span><span class="n">DATA_SOURCE_SUPPORTED_JOB_TYPES</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">index_server_client_list</span><span class="p">:</span>
                <span class="n">index_server_machine_param</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span>
                    <span class="n">client_name</span><span class="o">=</span><span class="n">node</span><span class="p">,</span> <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_EMPTY</span><span class="p">,</span>
                    <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">MACHINE_COUNTER</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Index server machine configuration formed&quot;</span><span class="p">)</span>
        <span class="n">content_analyzer_machine_param</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">amq_param</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">content_analyzer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">content_analyzer</span> <span class="o">!=</span> <span class="n">index_server</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Index server and Content Analyzer are different machines. Forming separate machine counters&quot;</span><span class="p">)</span>
            <span class="n">content_analyzer_machine_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span><span class="n">client_name</span><span class="o">=</span><span class="n">content_analyzer</span><span class="p">,</span>
                                                                            <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_EMPTY</span><span class="p">,</span>
                                                                            <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span>
                                                                                <span class="n">CounterTypes</span><span class="o">.</span><span class="n">MACHINE_COUNTER</span><span class="p">])</span>

        <span class="c1"># Add common Process counters</span>
        <span class="n">index_server_param</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">index_server_client_list</span><span class="p">:</span>
            <span class="n">index_server_param</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span>
                <span class="n">client_name</span><span class="o">=</span><span class="n">node</span><span class="p">,</span>
                <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_DATA_CUBE</span><span class="p">,</span>
                <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">]))</span>
        <span class="n">live_scan_param</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">job_type</span> <span class="ow">in</span> <span class="n">JobTypes</span><span class="o">.</span><span class="n">ONLINE_CRAWL_JOB</span><span class="p">:</span>
            <span class="n">live_scan_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span>
                <span class="n">client_name</span><span class="o">=</span><span class="n">access_node</span><span class="p">,</span>
                <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">LIVE_SCAN</span><span class="p">,</span>
                <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">job_type</span> <span class="ow">in</span> <span class="p">(</span><span class="n">JobTypes</span><span class="o">.</span><span class="n">FILE_SYSTEM_ONLINE_CRAWL_JOB_WITH_CONTENT</span><span class="p">,</span>
                        <span class="n">JobTypes</span><span class="o">.</span><span class="n">FILE_SYSTEM_ONLINE_CRAWL_JOB_WITH_CONTENT_WITH_EE</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Forming basic performance params for FS DataSource with content Crawl&quot;</span><span class="p">)</span>
            <span class="n">cl_backup_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span>
                <span class="n">client_name</span><span class="o">=</span><span class="n">access_node</span><span class="p">,</span>
                <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">CONTENT_PUSH</span><span class="p">,</span>
                <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">])</span>
            <span class="n">ca_param</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">exporter_param</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">python_param</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="c1"># content push alone online job</span>
            <span class="k">if</span> <span class="n">content_analyzer</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">job_type</span> <span class="o">==</span> <span class="n">JobTypes</span><span class="o">.</span><span class="n">FILE_SYSTEM_ONLINE_CRAWL_JOB_WITH_CONTENT</span><span class="p">:</span>
                <span class="c1"># this case is for datacube crawl. Always use first node of index server</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">index_server_client_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Not a supported configurations for this job type&quot;</span><span class="p">)</span>
                <span class="n">ca_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span>
                    <span class="n">client_name</span><span class="o">=</span><span class="n">index_server_client_list</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_CONTENT_EXTRACTOR</span><span class="p">,</span>
                    <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">])</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">is_tika</span><span class="p">:</span>
                    <span class="n">exporter_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span>
                        <span class="n">client_name</span><span class="o">=</span><span class="n">index_server_client_list</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                        <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_EXPORTER</span><span class="p">,</span>
                        <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">])</span>
                    <span class="n">amq_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span><span class="n">client_name</span><span class="o">=</span><span class="n">index_server_client_list</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                                               <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_MESSAGE_QUEUE</span><span class="p">,</span>
                                                               <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;FS DataSource with Entity Extraction Enabled. Forming CA attributes&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">content_analyzer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;CA can&#39;t be NULL for this type of JOB with Entity Extraction Enabled&quot;</span><span class="p">)</span>
                <span class="n">amq_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span><span class="n">client_name</span><span class="o">=</span><span class="n">content_analyzer</span><span class="p">,</span>
                                                           <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_MESSAGE_QUEUE</span><span class="p">,</span>
                                                           <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">])</span>
                <span class="n">ca_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span>
                    <span class="n">client_name</span><span class="o">=</span><span class="n">content_analyzer</span><span class="p">,</span>
                    <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_CONTENT_EXTRACTOR</span><span class="p">,</span>
                    <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">])</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">is_tika</span><span class="p">:</span>
                    <span class="n">exporter_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span>
                        <span class="n">client_name</span><span class="o">=</span><span class="n">content_analyzer</span><span class="p">,</span>
                        <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_EXPORTER</span><span class="p">,</span>
                        <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">])</span>
                <span class="n">python_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span><span class="n">client_name</span><span class="o">=</span><span class="n">content_analyzer</span><span class="p">,</span>
                                                              <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_PYTHON</span><span class="p">,</span>
                                                              <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">])</span>

            <span class="n">monitor_param</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">LIVE_SCAN</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;1&#39;</span><span class="p">:</span> <span class="n">live_scan_param</span><span class="p">,</span>
                    <span class="s1">&#39;2&#39;</span><span class="p">:</span> <span class="n">access_node_machine_param</span><span class="p">},</span>
                <span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">CONTENT_PUSH</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;1&#39;</span><span class="p">:</span> <span class="n">cl_backup_param</span><span class="p">,</span>
                    <span class="s1">&#39;2&#39;</span><span class="p">:</span> <span class="n">ca_param</span> <span class="k">if</span> <span class="n">ca_param</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{},</span>
                    <span class="s1">&#39;3&#39;</span><span class="p">:</span> <span class="n">content_analyzer_machine_param</span> <span class="k">if</span> <span class="n">content_analyzer_machine_param</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{},</span>
                    <span class="s1">&#39;4&#39;</span><span class="p">:</span> <span class="n">exporter_param</span> <span class="k">if</span> <span class="n">exporter_param</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{},</span>
                    <span class="s1">&#39;5&#39;</span><span class="p">:</span> <span class="n">python_param</span> <span class="k">if</span> <span class="n">python_param</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{},</span>
                    <span class="s1">&#39;6&#39;</span><span class="p">:</span> <span class="n">access_node_machine_param</span> <span class="k">if</span> <span class="n">access_node_machine_param</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{},</span>
                    <span class="s1">&#39;7&#39;</span><span class="p">:</span> <span class="n">amq_param</span> <span class="k">if</span> <span class="n">amq_param</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{}</span>
                <span class="p">}}</span>
            <span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">CONTENT_PUSH</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">index_server_client_list</span><span class="p">)):</span>
                <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">CONTENT_PUSH</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="n">index_server_machine_param</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">CONTENT_PUSH</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="n">index_server_param</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">job_type</span> <span class="o">==</span> <span class="n">JobTypes</span><span class="o">.</span><span class="n">FILE_SYSTEM_ONLINE_CRAWL_JOB_WITH_METADATA_ONLY</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Metadata only Crawl&quot;</span><span class="p">)</span>
            <span class="n">monitor_param</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">LIVE_SCAN</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;1&#39;</span><span class="p">:</span> <span class="n">live_scan_param</span><span class="p">,</span>
                    <span class="s1">&#39;2&#39;</span><span class="p">:</span> <span class="n">access_node_machine_param</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">LIVE_SCAN</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">index_server_client_list</span><span class="p">)):</span>
                <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">LIVE_SCAN</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="n">index_server_machine_param</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">LIVE_SCAN</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="n">index_server_param</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">job_type</span> <span class="o">==</span> <span class="n">JobTypes</span><span class="o">.</span><span class="n">FILE_SYSTEM_BACKUP_INDEX_EXTRACTION</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Index Extraction job&quot;</span><span class="p">)</span>
            <span class="n">ca_param</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">python_param</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">exporter_param</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">amq_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span><span class="n">client_name</span><span class="o">=</span><span class="n">content_analyzer</span><span class="p">,</span>
                                                       <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_MESSAGE_QUEUE</span><span class="p">,</span>
                                                       <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">])</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_tika</span><span class="p">:</span>
                <span class="n">exporter_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span>
                    <span class="n">client_name</span><span class="o">=</span><span class="n">content_analyzer</span><span class="p">,</span>
                    <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_EXPORTER</span><span class="p">,</span>
                    <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Exporter param formed&quot;</span><span class="p">)</span>
            <span class="n">ca_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span>
                <span class="n">client_name</span><span class="o">=</span><span class="n">content_analyzer</span><span class="p">,</span>
                <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_CONTENT_EXTRACTOR</span><span class="p">,</span>
                <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Content Extractor param formed&quot;</span><span class="p">)</span>
            <span class="n">python_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span><span class="n">client_name</span><span class="o">=</span><span class="n">content_analyzer</span><span class="p">,</span>
                                                          <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_PYTHON</span><span class="p">,</span>
                                                          <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Content Analyser  - Python  param formed&quot;</span><span class="p">)</span>
            <span class="n">index_server_cvd_param</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">index_server_client_list</span><span class="p">:</span>
                <span class="n">index_server_cvd_param</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span>
                    <span class="n">client_name</span><span class="o">=</span><span class="n">node</span><span class="p">,</span> <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_CVD</span><span class="p">,</span>
                    <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Index server CVD param formed&quot;</span><span class="p">)</span>
            <span class="n">ci_reader_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span><span class="n">client_name</span><span class="o">=</span><span class="n">media_agent</span><span class="p">,</span>
                                                             <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_AUX_COPY</span><span class="p">,</span>
                                                             <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;MA auxcopy param formed&quot;</span><span class="p">)</span>
            <span class="n">ma_machine_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span><span class="n">client_name</span><span class="o">=</span><span class="n">media_agent</span><span class="p">,</span>
                                                              <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_EMPTY</span><span class="p">,</span>
                                                              <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span>
                                                                  <span class="n">CounterTypes</span><span class="o">.</span><span class="n">MACHINE_COUNTER</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;MA Machine param formed&quot;</span><span class="p">)</span>
            <span class="n">aux_mgr_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span><span class="n">client_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">commserv_client</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                                           <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_AUX_COPY_MGR</span><span class="p">,</span>
                                                           <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Aux copy Mgr param formed&quot;</span><span class="p">)</span>
            <span class="n">monitor_param</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">INDEX_EXTRACTION</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;1&#39;</span><span class="p">:</span> <span class="n">content_analyzer_machine_param</span> <span class="k">if</span> <span class="n">content_analyzer_machine_param</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{},</span>
                    <span class="s1">&#39;2&#39;</span><span class="p">:</span> <span class="n">ca_param</span> <span class="k">if</span> <span class="n">ca_param</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{},</span>
                    <span class="s1">&#39;3&#39;</span><span class="p">:</span> <span class="n">python_param</span> <span class="k">if</span> <span class="n">python_param</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{},</span>
                    <span class="s1">&#39;4&#39;</span><span class="p">:</span> <span class="n">ci_reader_param</span> <span class="k">if</span> <span class="n">ci_reader_param</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{},</span>
                    <span class="s1">&#39;5&#39;</span><span class="p">:</span> <span class="n">ma_machine_param</span> <span class="k">if</span> <span class="n">ma_machine_param</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{},</span>
                    <span class="s1">&#39;6&#39;</span><span class="p">:</span> <span class="n">aux_mgr_param</span> <span class="k">if</span> <span class="n">aux_mgr_param</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{},</span>
                    <span class="s1">&#39;7&#39;</span><span class="p">:</span> <span class="n">exporter_param</span> <span class="k">if</span> <span class="n">exporter_param</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{},</span>
                    <span class="s1">&#39;8&#39;</span><span class="p">:</span> <span class="n">amq_param</span> <span class="k">if</span> <span class="n">amq_param</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{}</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">INDEX_EXTRACTION</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">index_server_client_list</span><span class="p">)):</span>
                <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">INDEX_EXTRACTION</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="n">index_server_machine_param</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">INDEX_EXTRACTION</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="n">index_server_param</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">INDEX_EXTRACTION</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="n">index_server_cvd_param</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="k">elif</span> <span class="n">job_type</span> <span class="o">==</span> <span class="n">JobTypes</span><span class="o">.</span><span class="n">FILE_SYSTEM_BACKUP_IMPORT_INDEX</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Import index job from Search engine&quot;</span><span class="p">)</span>
            <span class="n">ca_param</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">python_param</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">content_analyzer</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">search_engine</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;CA/Search engine is empty. Please check&quot;</span><span class="p">)</span>
            <span class="n">amq_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span><span class="n">client_name</span><span class="o">=</span><span class="n">content_analyzer</span><span class="p">,</span>
                                                       <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_MESSAGE_QUEUE</span><span class="p">,</span>
                                                       <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">])</span>
            <span class="n">ca_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span>
                <span class="n">client_name</span><span class="o">=</span><span class="n">content_analyzer</span><span class="p">,</span>
                <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_CONTENT_EXTRACTOR</span><span class="p">,</span>
                <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Content Extractor param formed&quot;</span><span class="p">)</span>
            <span class="n">python_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span><span class="n">client_name</span><span class="o">=</span><span class="n">content_analyzer</span><span class="p">,</span>
                                                          <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_PYTHON</span><span class="p">,</span>
                                                          <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Content Analyser  - Python  param formed&quot;</span><span class="p">)</span>
            <span class="n">mgr_service_param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span><span class="n">client_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">commserv_client</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                                               <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_CVODS</span><span class="p">,</span>
                                                               <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">],</span>
                                                               <span class="o">**</span><span class="p">{</span><span class="n">GeneralConstants</span><span class="o">.</span><span class="n">CVODS_APP_NAME</span><span class="p">:</span>
                                                                  <span class="n">GeneralConstants</span><span class="o">.</span><span class="n">ANALYTICS_MGR_SERVICE_NAME</span><span class="p">})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Analytics Mgr Service - CVODS param formed&quot;</span><span class="p">)</span>

            <span class="n">monitor_param</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">IMPORT_INDEX</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;1&#39;</span><span class="p">:</span> <span class="n">content_analyzer_machine_param</span> <span class="k">if</span> <span class="n">content_analyzer_machine_param</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{},</span>
                    <span class="s1">&#39;2&#39;</span><span class="p">:</span> <span class="n">ca_param</span> <span class="k">if</span> <span class="n">ca_param</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{},</span>
                    <span class="s1">&#39;3&#39;</span><span class="p">:</span> <span class="n">python_param</span> <span class="k">if</span> <span class="n">python_param</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{},</span>
                    <span class="s1">&#39;4&#39;</span><span class="p">:</span> <span class="n">mgr_service_param</span> <span class="k">if</span> <span class="n">mgr_service_param</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{},</span>
                    <span class="s1">&#39;5&#39;</span><span class="p">:</span> <span class="n">amq_param</span> <span class="k">if</span> <span class="n">amq_param</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">{}</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">IMPORT_INDEX</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">search_engine</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Forming search engine param for search node : </span><span class="si">{</span><span class="n">node</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="c1"># process counters</span>
                <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">IMPORT_INDEX</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span>
                    <span class="n">client_name</span><span class="o">=</span><span class="n">node</span><span class="p">,</span> <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_SEARCH_ENGINE</span><span class="p">,</span>
                    <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">PROCESS_COUNTER</span><span class="p">])</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="c1"># Machine counters</span>
                <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">IMPORT_INDEX</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_client_monitor_param</span><span class="p">(</span>
                    <span class="n">client_name</span><span class="o">=</span><span class="n">node</span><span class="p">,</span> <span class="n">phase_name</span><span class="o">=</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">DUMMY_EMPTY</span><span class="p">,</span>
                    <span class="n">counters</span><span class="o">=</span><span class="n">counters</span><span class="p">[</span><span class="n">CounterTypes</span><span class="o">.</span><span class="n">MACHINE_COUNTER</span><span class="p">])</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>

            <span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">IMPORT_INDEX</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">index_server_client_list</span><span class="p">)):</span>
                <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">IMPORT_INDEX</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="n">index_server_machine_param</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="n">monitor_param</span><span class="p">[</span><span class="n">JobPhaseNames</span><span class="o">.</span><span class="n">IMPORT_INDEX</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">=</span> <span class="n">index_server_param</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Final Performance attributes : </span><span class="si">{</span><span class="n">monitor_param</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">monitor_param</span></div></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright Commvault Systems Inc. All Rights Reserved

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>