

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>AutomationUtils.machine &mdash; Commvault Automation 11.24 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Commvault Automation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"></div>
            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Commvault Automation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>AutomationUtils.machine</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for AutomationUtils.machine</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="c1"># --------------------------------------------------------------------------</span>
<span class="c1"># Copyright Commvault Systems, Inc.</span>
<span class="c1"># See LICENSE.txt in the project root for</span>
<span class="c1"># license information.</span>
<span class="c1"># --------------------------------------------------------------------------</span>

<span class="sd">&quot;&quot;&quot;File for performing operations on a machine / computer.</span>

<span class="sd">This file consists of a class named: Machine, which can connect to the remote machine,</span>
<span class="sd">using CVD, if it is a Commvault Client, or using PowerShell, otherwise.</span>

<span class="sd">The instance of this class can be used to perform various operations on a machine, like,</span>

<span class="sd">    #.  Check if a Directory Exists or not</span>
<span class="sd">    #.  Create a new Directory</span>
<span class="sd">    #.  Rename a File / Folder</span>
<span class="sd">    #.  Remove an existing Directory</span>
<span class="sd">    #.  Get the Size of a File / Folder</span>
<span class="sd">    #.  Check if a Registry exists or not</span>
<span class="sd">    #.  Add / Update a Registry Key / Value</span>
<span class="sd">    #.  Get the Value of a Registry Key</span>
<span class="sd">    #.  Delete a Registry Key / Value</span>
<span class="sd">    #.  Compare the contents of 2 Files / Folders</span>


<span class="sd">Machine</span>
<span class="sd">=======</span>

<span class="sd">    __new__()                       --  ping the machine, to get the OS details, whether</span>
<span class="sd">    Windows / UNIX, and initialize the class instance accordingly</span>

<span class="sd">    __init__()                      --  initialize object of the class</span>

<span class="sd">    _login_with_credentials()       --  creates a connection to the remote client</span>

<span class="sd">    _execute_with_credential()      --  execute a script on a remote client using its credentials</span>

<span class="sd">    _execute_with_cvd()             --  execute a script on a remote client using the CVD service</span>

<span class="sd">    _get_file_hash()                --  returns the hash value of specified file</span>

<span class="sd">    _get_folder_hash()              --  returns the set of file paths and hash values</span>

<span class="sd">    _compare_lists()                --  compares the source list with the destination list and</span>
<span class="sd">    checks if they are the same or not</span>

<span class="sd">    _convert_size()                 --  converts the given float size to appropriate size in</span>
<span class="sd">    B / KB / MB / GB, etc.</span>

<span class="sd">    _validate_ignore_files()        --  returns list of files from diff of 2 folders after ignoring</span>
<span class="sd">    the list of files given in ignore_files list</span>

<span class="sd">    _get_client_ip()                -- gets the ip address of the machine</span>

<span class="sd">    get_cpu_usage()                 -- gets the cpu performance counters for the given process</span>

<span class="sd">    get_unc_path()                  --  generates the unc path for the input path</span>

<span class="sd">    execute()                       --  execute the given script remotely on a remote client</span>

<span class="sd">    execute_command()               --  executes a command on the remote machine</span>

<span class="sd">    check_directory_exists()        --  check if a directory exists on a remote client or not</span>

<span class="sd">    check_file_exists()             --  checks if a file exists on a remote client or not</span>

<span class="sd">    create_directory()              --  create a new directory on a remote client</span>

<span class="sd">    rename_file_or_folder()         --  renames a file / folder on a remote client</span>

<span class="sd">    is_file()                       -- Checks if the path is a file or not</span>

<span class="sd">    is_directory()                  --  Checks if the path is a directory or not</span>

<span class="sd">    is_process_running()            -- Checks if a given process is running on the index server</span>

<span class="sd">    get_process_id()                --  returns the process id for the given process name with or without command line</span>

<span class="sd">    get_process_stats()             --  Gets the process stats like Handle count, memory used, CPU usage, thread count</span>

<span class="sd">    get_hardware_info()             --  returns the hardware specifications of this machine</span>

<span class="sd">    get_port_usage()                --  returns the netstat connection stats for the process or machine</span>

<span class="sd">    remove_directory()              --  remove a directory on a remote client</span>

<span class="sd">    get_file_size()                 --  get the size of a file on a remote client</span>

<span class="sd">    get_folder_size()               --  get the size of a folder on a remote client</span>

<span class="sd">    get_storage_details()           --  returns the storage details of this machine</span>

<span class="sd">    get_disk_count()                --  returns the count of the disks on the machine</span>

<span class="sd">    check_registry_exists()         --  check if a registry exists on a remote client or not</span>

<span class="sd">    get_registry_value()            --  get the value of a registry key from a remote client</span>

<span class="sd">    create_registry()               --  create a registry key / value on a remote client</span>

<span class="sd">    update_registry()               --  update the data of a registry value on a remote client</span>

<span class="sd">    remove_registry()               --  remove a registry key / value from a remote client</span>

<span class="sd">    compare_files()                 --  compares the contents of 2 files</span>

<span class="sd">    compare_folders()               --  compares the contents of 2 folders</span>

<span class="sd">    copy_from_local()               --  copies the file / folder specified in the input from</span>
<span class="sd">    local machine to the remote machine</span>

<span class="sd">    copy_folder_to_network_share()  --  copies the folder specified to the network share</span>

<span class="sd">    copy_from_network_share()       --  copies the file/folder specified at network share</span>
<span class="sd">    to the local machine</span>

<span class="sd">    copy_folder()                   --  copies the files specified at a location to</span>
<span class="sd">    another location on same local machine</span>

<span class="sd">    copy_folder_to_network_share()  --  copies the folder from this machine to the network share</span>

<span class="sd">    read_file()                     --  read the contents of the file present at input path</span>

<span class="sd">    delete_file()                   --  removes the file present at the input path</span>

<span class="sd">    change_folder_owner()           --  changes the ownership of the given directory</span>

<span class="sd">    create_current_timestamp_folder()   --  create a folder with the current timestamp as the</span>
<span class="sd">    folder name inside the given folder path</span>

<span class="sd">    get_latest_timestamp_file_or_folder()   --  get the recently created file / folder inside the</span>
<span class="sd">    given folder path</span>

<span class="sd">    get_files_in_path()             --  returns the list of files present at the given path</span>

<span class="sd">    get_folders_in_path()           --  returns the list of folders present at the given path</span>

<span class="sd">    number_of_items_in_folder()     --  Returns the count of number of items in a folder</span>

<span class="sd">    join_path()                     --  joins the path using the separator based on the OS of the</span>
<span class="sd">    Machine</span>

<span class="sd">    get_file_hash()                 --  returns the hash value of specified file</span>

<span class="sd">    get_folder_hash()               --  returns the set of file paths and hash values</span>

<span class="sd">    generate_executable()           --  generates an executable of the python file</span>

<span class="sd">    generate_test_data()            --  generates test data at specified path on remote client</span>

<span class="sd">    disconnect()                    --  disconnects the session with the machine</span>

<span class="sd">    scan_directory()                --  Scans the directory and returns a list of items under it</span>
<span class="sd">    along with its properties</span>

<span class="sd">    add_firewall_allow_port_rule()  --  adds the inbound rule for the given port number</span>

<span class="sd">    start_firewall()                --  turn on firewall services on the current client machine</span>

<span class="sd">    add_firewall_machine_exclusion()    --  adds given machine to firewall exclusion list</span>

<span class="sd">    remove_firewall_allow_port_rule()   --  removes the inbound rule for the given port number</span>

<span class="sd">    stop_firewall()                     --  turn off firewall service on the client machine</span>

<span class="sd">    remove_firewall_machine_exclusion() --  removes given machine from firewall exclusion list</span>

<span class="sd">    reboot_client()                     --  reboots the machine</span>

<span class="sd">    shutdown_client()                   --  shutdown the host</span>

<span class="sd">    is_stub()                           --  for onepass to identify stub</span>

<span class="sd">    get_checksum_list()                 --  Gets the list of checksum of items</span>
<span class="sd">    from the machine on a give path</span>

<span class="sd">    compare_acl()                       --  Compares the acl of src and dest path</span>
<span class="sd">    and checks if they are same</span>

<span class="sd">    kill_process()                      --  terminates a running process on the client machine</span>
<span class="sd">    either with the given process name or the process id</span>

<span class="sd">    modify_content_of_file()        --  append data to a file at specified path on this machine</span>

<span class="sd">    add_user()                      --  create new user account using values passed to method</span>

<span class="sd">    hide_path()                     -- Hides the specified path</span>

<span class="sd">    unhide_path()                     -- unhides the specified path</span>

<span class="sd">    delete_users()                  --  delete a user account and Files in the user&#39;s</span>
<span class="sd">    home directory</span>

<span class="sd">    change_file_permissions()       --  change file mode bits for the given file or directory path</span>

<span class="sd">    nfs4_setfacl()                  -- manipulates the NFSv4 Access Control List (ACL) of</span>
<span class="sd">    one or more files (or directories)</span>

<span class="sd">    nfs4_getfacl()                  -- get NFSv4 file/directory access control lists</span>

<span class="sd">    get_snapshot()                  -- gets meta data(ls -l) and md5sum of each file</span>
<span class="sd">    in the given directory</span>

<span class="sd">    unmount_path()                  --  dis mounts the network path mounted at specified path</span>

<span class="sd">    set_logging_debug_level()       -- set debug log level for given CV service name</span>

<span class="sd">    append_to_file()                --  Appends content to the file present at the specified path</span>

<span class="sd">    change_system_time()            --  Changes the system time as per the offset seconds</span>
<span class="sd">    provided w.r.t to current system time</span>

<span class="sd">    get_ace()                        --  To get ace of file/folder for particular user</span>

<span class="sd">    modify_ace()                     --  To add or remove ACE on file or folder</span>

<span class="sd">    execute_command_unc()            --  Execute command function for unc path</span>

<span class="sd">    windows_operation()              -- For execute windows operation</span>

<span class="sd">    add_minutes_to_system_time()     -- Adds specified number of minutes to current system time</span>

<span class="sd">    add_days_to_system_time()        -- Adds specified number of days to current system time</span>

<span class="sd">    get_active_cluster_node()        --    gets active cluster node</span>

<span class="sd">    get_cluster_nodes()              --   Get all nodes of cluster both active and passive</span>

<span class="sd">    do_failover()                    --   Run Cluster failover</span>

<span class="sd">    has_active_session()             -- Checks if there is an active session on the machine for a user</span>

<span class="sd">    get_login_session_id()           --  Gets the session id for the logged in user</span>

<span class="sd">    logoff_session_id()              --  Logs off the user session id for the logged in user on client.</span>

<span class="sd">    get_file_owner()                 -- Get the owner of the file</span>

<span class="sd">    get_logs_for_job_from_file()     -- Return those log lines for a particular job ID</span>

<span class="sd">    get_event_viewer_logs_message()  -- Gets N newest event viewer log message bodies</span>

<span class="sd">    list_shares_on_network_path() -- gets the list of shares on a UNC path</span>

<span class="sd">    modify_test_data()              --  Modifies the test data at the given path</span>

<span class="sd">    get_items_list()                --  returns the list of items at the given path</span>

<span class="sd">    compare_checksum()              --  compares the checksum of 2 paths</span>

<span class="sd">    move_file()                     --	Moves a file item from source_path to destination_path</span>

<span class="sd">    modify_item_datetime()          --  Changes the last Access time and Modified time of files in unix and windows.</span>
<span class="sd">    Also changes creation time in windows.</span>

<span class="sd">    get_vm_ip()                     --  To get ip address of a VM</span>

<span class="sd">    share_directory()               -- To share a directory using net share</span>

<span class="sd">    unshare_directory()             -- To unshare a directory</span>

<span class="sd">    get_logs_after_time_t()         -- retrives logs of a logfile after time t.</span>

<span class="sd">    lock_file()                     -- To lock a local file.</span>

<span class="sd">    mount_network_path()            -- Mounts the specified network path on this machine.</span>

<span class="sd">    start_all_cv_services()         --  Start all Commvault services using username/password method since SDK cannot</span>
<span class="sd">    talk to the machine when services are down</span>

<span class="sd">    get_api_response_locally()      --  Executes local get api call and returns response</span>

<span class="sd">Attributes</span>
<span class="sd">----------</span>

<span class="sd">    **os_info**     --  returns the OS details of the client (Windows / UNIX)</span>

<span class="sd">    **os_sep**      --  returns the path separator based on the OS of the Machine</span>

<span class="sd">    **ip_address**  --  returns IP address of the machine</span>


<span class="sd">Usage</span>
<span class="sd">-----</span>

<span class="sd">    -   For creating an object of any machine, i.e., Windows / UNIX, the user should only</span>
<span class="sd">        initialize an object of the Machine class, which internally takes care of detecting the OS</span>
<span class="sd">        of the machine, and initialize the appropriate object.</span>

<span class="sd">    -   Machine class object can be initialized in 3 ways:</span>

<span class="sd">        -   If the machine is a Commcell client:</span>

<span class="sd">            &gt;&gt;&gt; machine = Machine(machine_name, commcell_object)</span>

<span class="sd">        -   If the machine is a Commcell client, and user already has the client object:</span>

<span class="sd">            &gt;&gt;&gt; machine = Machine(client_object)</span>

<span class="sd">            **NOTE:** the client_object should be given as the value for the machine_name argument</span>

<span class="sd">        -   If the machine is not a Commcell client:</span>

<span class="sd">            &gt;&gt;&gt; machine = Machine(machine_name, username=username, password=password)</span>

<span class="sd">        -   If the machine is the Local Machine:</span>

<span class="sd">            &gt;&gt;&gt; machine = Machine(local_machine_name)</span>

<span class="sd">                        OR</span>

<span class="sd">            &gt;&gt;&gt; machine = Machine()</span>


<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">difflib</span> <span class="kn">import</span> <span class="n">Differ</span>
<span class="kn">import</span> <span class="nn">getpass</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">from</span> <span class="nn">cvpysdk.client</span> <span class="kn">import</span> <span class="n">Client</span>
<span class="kn">from</span> <span class="nn">.pyping</span> <span class="kn">import</span> <span class="n">ping</span>


<div class="viewcode-block" id="Machine"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine">[docs]</a><span class="k">class</span> <span class="nc">Machine</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Class for performing operations on a remote client.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">machine_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">commcell_object</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the instance of one of the Subclasses WindowsMachine / UnixMachine,</span>
<span class="sd">            based on the OS details of the remote client.</span>

<span class="sd">            If Commcell Object is given, and the Client is Commvault Client:</span>
<span class="sd">                Gets the OS Info from Client OS Info attribute</span>

<span class="sd">            Otherwise, Pings the client, and decides the OS based on the TTL value.</span>

<span class="sd">            TTL Value: 64 (Linux) / 128 (Windows) / 255 (UNIX)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">machine_name</span><span class="p">:</span>
            <span class="n">client</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">machine_name</span><span class="p">,</span> <span class="n">Client</span><span class="p">):</span>
                <span class="n">client</span> <span class="o">=</span> <span class="n">machine_name</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">commcell_object</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span>
                        <span class="n">commcell_object</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">has_client</span><span class="p">(</span><span class="n">machine_name</span><span class="p">)):</span>
                    <span class="n">client</span> <span class="o">=</span> <span class="n">commcell_object</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">machine_name</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">client</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">client</span><span class="o">.</span><span class="n">readiness_details</span><span class="o">.</span><span class="n">is_ready</span><span class="p">(</span><span class="n">cs_cc_network_check</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
                    <span class="n">exception</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="s1">&#39;Check readiness for the client: &quot;</span><span class="si">{0}</span><span class="s1">&quot; failed. &#39;</span>
                        <span class="s1">&#39;Please ensure the services are up and running&#39;</span>
                    <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">client_name</span><span class="p">)</span>

                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">exception</span><span class="p">)</span>

                <span class="k">if</span> <span class="s1">&#39;windows&#39;</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">os_info</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                    <span class="kn">from</span> <span class="nn">.windows_machine</span> <span class="kn">import</span> <span class="n">WindowsMachine</span>
                    <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="n">WindowsMachine</span><span class="p">)</span>
                <span class="k">elif</span> <span class="s1">&#39;open vms&#39;</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">os_info</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                    <span class="kn">from</span> <span class="nn">.openvms_machine</span> <span class="kn">import</span> <span class="n">OpenVMSMachine</span>
                    <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="n">OpenVMSMachine</span><span class="p">)</span>
                <span class="k">elif</span> <span class="s1">&#39;unix&#39;</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">os_info</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                    <span class="k">if</span> <span class="s1">&#39;hdfs_user&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                        <span class="kn">from</span> <span class="nn">.hadoop_machine</span> <span class="kn">import</span> <span class="n">HadoopMachine</span>
                        <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="n">HadoopMachine</span><span class="p">)</span>
                    <span class="kn">from</span> <span class="nn">.unix_machine</span> <span class="kn">import</span> <span class="n">UnixMachine</span>
                    <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="n">UnixMachine</span><span class="p">)</span>
                <span class="k">elif</span> <span class="s1">&#39;iseries&#39;</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">os_info</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">or</span> <span class="s1">&#39;ibm i&#39;</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">os_info</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                    <span class="kn">from</span> <span class="nn">.ibmi_machine</span> <span class="kn">import</span> <span class="n">IBMiMachine</span>
                    <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="n">IBMiMachine</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">machine_name</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">gethostname</span><span class="p">()</span>

        <span class="n">response</span> <span class="o">=</span> <span class="n">ping</span><span class="p">(</span><span class="n">machine_name</span><span class="p">)</span>

        <span class="c1"># Extract TTL value form the response.output string.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">ttl</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(.*)ttl=(\d*) .*&quot;</span><span class="p">,</span>
                               <span class="n">response</span><span class="o">.</span><span class="n">output</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s1">&#39;Failed to connect to the machine.</span><span class="se">\n</span><span class="s1">Error: &quot;</span><span class="si">{0}</span><span class="s1">&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">response</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">ttl</span> <span class="o">&lt;=</span> <span class="mi">64</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">.unix_machine</span> <span class="kn">import</span> <span class="n">UnixMachine</span>
            <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="n">UnixMachine</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">ttl</span> <span class="o">&lt;=</span> <span class="mi">128</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">.windows_machine</span> <span class="kn">import</span> <span class="n">WindowsMachine</span>
            <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="n">WindowsMachine</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">ttl</span> <span class="o">&lt;=</span> <span class="mi">255</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;hdfs_user&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="kn">from</span> <span class="nn">.hadoop_machine</span> <span class="kn">import</span> <span class="n">HadoopMachine</span>
                <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="n">HadoopMachine</span><span class="p">)</span>
            <span class="kn">from</span> <span class="nn">.unix_machine</span> <span class="kn">import</span> <span class="n">UnixMachine</span>
            <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="n">UnixMachine</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s1">&#39;Got unexpected TTL value.</span><span class="se">\n</span><span class="s1">TTL value: &quot;</span><span class="si">{0}</span><span class="s1">&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ttl</span><span class="p">))</span>
            <span class="c1"># https://social.technet.microsoft.com/Forums/windowsserver/en-US/86e490e2-72be-4e2f-bb45-85fa2f52c876/os-check-for-unix-or-linux?forum=winserverpowershell</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">machine_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">commcell_object</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initializes instance of the Machine class.</span>

<span class="sd">        Args:</span>
<span class="sd">            machine_name        (str)       --  name / ip address of the client to connect to</span>

<span class="sd">                if machine name is not provided, then the Machine object for the local machine</span>
<span class="sd">                will be created</span>

<span class="sd">                default:    None</span>

<span class="sd">            commcell_object     (object)    --  instance of the Commcell class from CVPySDK</span>

<span class="sd">                default:    None</span>

<span class="sd">            username            (str)       --  username for the client to connect to</span>

<span class="sd">                    Only Applicable if the client is not a Commvault Client</span>

<span class="sd">                default:    None</span>

<span class="sd">            password            (str)       --  password for the above specified user</span>

<span class="sd">                default:    None</span>

<span class="sd">        Also, initializes the Client object, if it is Commvault Client.</span>

<span class="sd">        Otherwise, it creates a PowerShell credentials object for the client.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">machine_name</span> <span class="o">=</span> <span class="n">machine_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="n">username</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">password</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">commcell_object</span> <span class="o">=</span> <span class="n">commcell_object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">credentials_file</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">is_commvault_client</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client_object</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_local_machine</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_os_info</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ip_address</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_os_flavour</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_script_generator</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_connected</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_encoding_type</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ssh</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">machine_name</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">machine_name</span> <span class="o">=</span> <span class="n">machine_name</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">gethostname</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">machine_name</span><span class="p">,</span> <span class="n">Client</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">is_commvault_client</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">client_object</span> <span class="o">=</span> <span class="n">machine_name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">commcell_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_object</span><span class="o">.</span><span class="n">_commcell_object</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">machine_name</span> <span class="o">=</span> <span class="n">machine_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_object</span><span class="o">.</span><span class="n">client_name</span>

        <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">socket</span><span class="o">.</span><span class="n">gethostbyname_ex</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">gethostname</span><span class="p">()):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="c1"># value will have the FQDN of the controller</span>
                <span class="c1"># machine name should either match the FQDN, or just the hostname</span>
                <span class="c1"># MachineName.Domain.com        //      MachineName.</span>
                <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">machine_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">or</span>
                    <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">machine_name</span><span class="si">}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">machine_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">value</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">is_local_machine</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>

        <span class="k">del</span> <span class="n">temp</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_local_machine</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">credentials_file</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="c1"># this check needs to be performed in case, automation controller is a CS client</span>
            <span class="c1"># and a helper needs to operate on the same client, and they require the client object</span>
            <span class="c1"># to be present to get the log / install directory, or do some Commvault specific</span>
            <span class="c1"># operations on the client</span>
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client_object</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">commcell_object</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span>
                    <span class="n">commcell_object</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">has_client</span><span class="p">(</span><span class="n">machine_name</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">client_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell_object</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">machine_name</span><span class="p">)</span>

            <span class="c1"># executing the script via CVD will take more time here, as we&#39;ll have to</span>
            <span class="c1"># make the API call to the WebServer, which will then go to the CommServer, and</span>
            <span class="c1"># then to the client via CVD, which will then execute the script and return the</span>
            <span class="c1"># results</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">is_commvault_client</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">password</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">prompt</span> <span class="o">=</span> <span class="s1">&#39;Please provide the password of the Machine: &quot;</span><span class="si">{0}</span><span class="s1">&quot;, for User: &quot;</span><span class="si">{1}</span><span class="s1">&quot;: &#39;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span>
                    <span class="n">prompt</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">machine_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span><span class="p">))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_login_with_credentials</span><span class="p">()</span>

        <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client_object</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span>
              <span class="bp">self</span><span class="o">.</span><span class="n">commcell_object</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span>
              <span class="n">commcell_object</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">has_client</span><span class="p">(</span><span class="n">machine_name</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">is_commvault_client</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">client_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell_object</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">machine_name</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_object</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">exception</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s1">&#39;Client: &quot;</span><span class="si">{0}</span><span class="s1">&quot; is not a Local Machine / Commvault client. &#39;</span>
                <span class="s2">&quot;Please provide the client&#39;s username and password&quot;</span>
            <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">machine_name</span><span class="p">)</span>

            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">exception</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_is_connected</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell_object</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell_object</span><span class="o">.</span><span class="n">_user</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;String representation of the instance of this class.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str - string about the details of the Machine class instance</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">representation_string</span> <span class="o">=</span> <span class="s1">&#39;Machine class instance of Host: &quot;</span><span class="si">{0}</span><span class="s1">&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">machine_name</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">representation_string</span> <span class="o">+</span> <span class="s1">&#39;, for User: &quot;</span><span class="si">{0}</span><span class="s1">&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">username</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">representation_string</span>

    <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the current instance.</span>

<span class="sd">        Returns:</span>
<span class="sd">            object - the initialized instance referred by self</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exception_type</span><span class="p">,</span> <span class="n">exception_value</span><span class="p">,</span> <span class="n">traceback</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Disconnects the current session with the machine.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_login_with_credentials</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Establish connection with the remote Client, if the client is not a Commvault client.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="Machine.toggle_time_service"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.toggle_time_service">[docs]</a>    <span class="k">def</span> <span class="nf">toggle_time_service</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">                Toggles the state of the windows time service</span>
<span class="sd">                Args:</span>
<span class="sd">                    stop:  (bool) -- If set to True will stop the service else will start the service</span>

<span class="sd">                Returns:</span>
<span class="sd">                        None: if Windows time service state is toggled successfully</span>

<span class="sd">                    Raises:</span>
<span class="sd">                        Exception:</span>
<span class="sd">                            If Time service state was not toggled successfully</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.current_time"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.current_time">[docs]</a>    <span class="k">def</span> <span class="nf">current_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timezone_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Returns current machine time in UTC TZ as a datetime object</span>

<span class="sd">            Args:</span>
<span class="sd">                timezone_name:  (String) -- pytz timezone to which the system time will be</span>
<span class="sd">                                            converted if not specified will return in UTC</span>

<span class="sd">            Returns:</span>
<span class="sd">                    datetimeobj -- machine&#39;s current time</span>

<span class="sd">            Raises:</span>
<span class="sd">                    Exception:</span>
<span class="sd">                        If not able to fetch current time</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

    <span class="c1"># Execution</span>

    <span class="k">def</span> <span class="nf">_execute_with_credential</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">script</span><span class="p">,</span> <span class="n">script_arguments</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Execute the script remotely on a client using the credentials provided,</span>
<span class="sd">            if the client is not a Commvault client.</span>

<span class="sd">        Args:</span>
<span class="sd">            script              (str)   --  path of the script file to execute on the</span>
<span class="sd">                                            remote client.</span>

<span class="sd">            script_arguments    (str)   --  arguments to be passed to the script.</span>
<span class="sd">                Default: None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            object  -   instance of UnixOutput class</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_execute_with_cvd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">script</span><span class="p">,</span> <span class="n">script_arguments</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Execute the script remotely on a client using the CVD service running on the client.</span>
<span class="sd">            Only applicable if the client is a Commvault Client.</span>

<span class="sd">        Args:</span>
<span class="sd">            script  (str)           --  path of the script file to execute on the client remotely</span>

<span class="sd">            script_arguments (str)  --  arguments to the script</span>
<span class="sd">                Default: None</span>

<span class="sd">        Returns:</span>
<span class="sd">            object  -   instance of UnixOutput class</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_file_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s2">&quot;MD5&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns MD5 hash value of the specified file at the given file path.</span>

<span class="sd">          Args:</span>
<span class="sd">              file_path       (str)             --  Path of the file to get the hash value of.</span>

<span class="sd">              algorithm       (str)             --  Specifies the cryptographic hash function for</span>
<span class="sd">                                                    computing the hash value of the contents.</span>

<span class="sd">                Default: &quot;MD5&quot;.</span>

<span class="sd">              The acceptable values for algorithm parameter are:</span>
<span class="sd">                 * SHA1</span>
<span class="sd">                 * SHA256</span>
<span class="sd">                 * SHA384</span>
<span class="sd">                 * SHA512</span>
<span class="sd">                 * MD5</span>


<span class="sd">          Returns:</span>
<span class="sd">              str     -   hash value of the given file.</span>

<span class="sd">          Raises:</span>
<span class="sd">              Exception: If file path doesn&#39;t exist.</span>

<span class="sd">                  If the algorithm entered is invalid.</span>

<span class="sd">                  If failed to get the hash value.</span>

<span class="sd">          &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_folder_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directory_path</span><span class="p">,</span> <span class="n">ignore_folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">ignore_case</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s2">&quot;MD5&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns set of files and their MD5 hash values present on the input path.</span>

<span class="sd">          Args:</span>
<span class="sd">              directory_path      (str)   --  path of the directory to get hash values of.</span>

<span class="sd">              ignore_folder       (list)  --  list of folders to be ignored.</span>
<span class="sd">                Default: None.</span>

<span class="sd">              ignore_case         (bool)  --  ignores the case if set to True.</span>
<span class="sd">                Default: False.</span>

<span class="sd">              algorithm           (str)   --  Specifies the cryptographic hash function</span>
<span class="sd">                    to use for computing the hash value of the contents.</span>

<span class="sd">                Default: &quot;MD5&quot;</span>

<span class="sd">              The acceptable values for algorithm parameter are:</span>
<span class="sd">                 * SHA1</span>
<span class="sd">                 * SHA256</span>
<span class="sd">                 * SHA384</span>
<span class="sd">                 * SHA512</span>
<span class="sd">                 * MD5</span>


<span class="sd">          Returns:</span>
<span class="sd">              set     -   set consisting of the file paths and their hash value as tuple</span>

<span class="sd">                  set(</span>
<span class="sd">                      (file_path1, hash1),</span>

<span class="sd">                      (file_path2, hash2)</span>

<span class="sd">                  )</span>

<span class="sd">          Raises:</span>
<span class="sd">              Exception: If specified folder doesn&#39;t exist.</span>

<span class="sd">                  If the algorithm entered is invalid.</span>

<span class="sd">                  If failed to get the hash values.</span>

<span class="sd">          &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_compare_lists</span><span class="p">(</span><span class="n">source_list</span><span class="p">,</span> <span class="n">destination_list</span><span class="p">,</span> <span class="n">sort_list</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Compares the source list with destination list</span>
<span class="sd">            and checks if they are same.</span>

<span class="sd">         Args:</span>
<span class="sd">            source_list         (list)  --  list1 to compare the contents of</span>

<span class="sd">            destination_list    (list)  --  list2 to compare the contents of</span>

<span class="sd">            sort_list           (bool)  --  boolean flag specifying whether the lists should</span>
<span class="sd">            be sorted before the comparison or not</span>

<span class="sd">                default: False</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple   -   tuple consisting of a boolean and a string, where:</span>

<span class="sd">                bool:</span>

<span class="sd">                    returns True if the lists are identical</span>

<span class="sd">                    returns False if the contents of the lists are different</span>

<span class="sd">                str:</span>

<span class="sd">                    empty string in case of True, otherwise string consisting of the</span>
<span class="sd">                    differences b/w the 2 lists separated by new-line</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">sort_list</span><span class="p">:</span>
            <span class="n">source_list</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="n">destination_list</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

        <span class="n">diff_output</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="k">if</span> <span class="n">source_list</span> <span class="o">==</span> <span class="n">destination_list</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="n">diff_output</span>

        <span class="n">diff</span> <span class="o">=</span> <span class="n">Differ</span><span class="p">()</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">source_list</span><span class="p">,</span> <span class="n">destination_list</span><span class="p">)</span>
        <span class="n">diff_output</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">diff</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">)])</span>

        <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="n">diff_output</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_convert_size</span><span class="p">(</span><span class="n">input_size</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Converts the given float size to appropriate size in B / KB / MB / GB, etc.</span>

<span class="sd">        Args:</span>
<span class="sd">            size    (float)     --  float value to convert</span>

<span class="sd">        Returns:</span>
<span class="sd">            str     -   size converted to the specific type (B, KB, MB, GB, etc.)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">input_size</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;0B&#39;</span>

        <span class="n">size_name</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;KB&quot;</span><span class="p">,</span> <span class="s2">&quot;MB&quot;</span><span class="p">,</span> <span class="s2">&quot;GB&quot;</span><span class="p">,</span> <span class="s2">&quot;TB&quot;</span><span class="p">,</span> <span class="s2">&quot;PB&quot;</span><span class="p">,</span> <span class="s2">&quot;EB&quot;</span><span class="p">,</span> <span class="s2">&quot;ZB&quot;</span><span class="p">,</span> <span class="s2">&quot;YB&quot;</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">input_size</span><span class="p">,</span> <span class="mi">1024</span><span class="p">)))</span>
        <span class="n">power</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="n">size</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">input_size</span> <span class="o">/</span> <span class="n">power</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">size_name</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_validate_ignore_files</span><span class="p">(</span><span class="n">different_files</span><span class="p">,</span> <span class="n">ignore_files</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Removes the ignore files list from the difference obtained after comparing folders.</span>

<span class="sd">        Args:</span>
<span class="sd">            different_files      (list)  --  list of different files</span>

<span class="sd">            ignore_files         (list)  --  list of files that has to be ignored</span>

<span class="sd">                default: None</span>

<span class="sd">        Returns:</span>
<span class="sd">            list    -   list of remaining different files</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">diff</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">ignore_files</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ignore_files</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">different_file</span> <span class="ow">in</span> <span class="n">different_files</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">different_file</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="n">found</span> <span class="o">=</span> <span class="kc">False</span>

            <span class="c1"># Check if any different file starts with pattern in ignore_files</span>
            <span class="c1"># list</span>
            <span class="k">for</span> <span class="n">pattern</span> <span class="ow">in</span> <span class="n">ignore_files</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">pattern</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)):</span>
                    <span class="n">found</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">break</span>

            <span class="c1"># Append the file which didn&#39;t match with items in ignore_file list</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">found</span><span class="p">:</span>
                <span class="n">diff</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">different_file</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">diff</span>

    <span class="k">def</span> <span class="nf">_execute_script</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">script_path</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Executes the script at the given script path on the machine.</span>

<span class="sd">            Args:</span>
<span class="sd">                script_path     (str)   --  PowerShell / UNIX shell/bash script to be</span>
<span class="sd">                executed on the machine</span>

<span class="sd">                    script should be of same format as other</span>
<span class="sd">                    PowerShell / UNIXShell scripts present in:</span>

<span class="sd">                        -   PowerShell  -   ..\\\\Scripts\\\\Windows\\\\</span>

<span class="sd">                        -   UNIX shell / bash  -   ..\\\\Scripts\\\\UNIX\\\\</span>

<span class="sd">                data            (dict)  --  dictionary consisting of the variables and its values,</span>
<span class="sd">                to be substituted in the script</span>

<span class="sd">            Returns:</span>
<span class="sd">                object  -   instance of Output class corresponding to WindowsOutput for</span>
<span class="sd">                WindowsMachine and UnixOutput for UnixMachine</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_script_generator</span><span class="o">.</span><span class="n">script</span> <span class="o">=</span> <span class="n">script_path</span>
        <span class="n">execute_script</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_script_generator</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">execute_script</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">execute_script</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">output</span>

    <span class="k">def</span> <span class="nf">_get_client_ip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets the ip_address of the machine&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="Machine.set_encoding_type"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.set_encoding_type">[docs]</a>    <span class="k">def</span> <span class="nf">set_encoding_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">encoding_type</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set encoding types</span>
<span class="sd">        Args:</span>
<span class="sd">            encoding_type (str): Encoding type</span>
<span class="sd">                        Example:: utf8 or ascii</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_encoding_type</span> <span class="o">=</span> <span class="n">encoding_type</span></div>

<div class="viewcode-block" id="Machine.execute_script"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.execute_script">[docs]</a>    <span class="k">def</span> <span class="nf">execute_script</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">script_path</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Executes a PowerShell / Shell script on the machine.</span>

<span class="sd">            Args:</span>
<span class="sd">                script_path     (str)   --  script to be executed on the machine</span>

<span class="sd">                    script should be of same format as other scripts present in</span>

<span class="sd">                        ..\\\\Scripts\\\\</span>

<span class="sd">                data            (dict)  --  dictionary consisting of the variables and its values,</span>
<span class="sd">                to be substituted in the script</span>

<span class="sd">            Returns:</span>
<span class="sd">                object  -   instance of WindowsOutput / UnixOutput class</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execute_script</span><span class="p">(</span><span class="n">script_path</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">os_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the OS Info of this machine.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_os_info</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">os_flavour</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the OS flavour of this machine.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_os_flavour</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">os_sep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the path separator based on the OS of the Machine.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
            <span class="s1">&#39;Property Not Implemented by the Child Class&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ip_address</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the IP address of the Machine.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ip_address</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_get_client_ip</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ip_address</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">instance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the value of instance attribute.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
            <span class="s1">&#39;Property Not Implemented by the Child Class&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="Machine.get_unc_path"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_unc_path">[docs]</a>    <span class="k">def</span> <span class="nf">get_unc_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the unc path for the specified path</span>

<span class="sd">        Args:</span>
<span class="sd">            path    (str)   --  path on this machine</span>

<span class="sd">        Returns:</span>
<span class="sd">            str     -   unc path formed from the given path</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">os_info</span> <span class="o">==</span> <span class="s2">&quot;WINDOWS&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\\\\</span><span class="si">{0}</span><span class="se">\\</span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">machine_name</span><span class="p">,</span> <span class="n">path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="s1">&#39;$&#39;</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">path</span></div>

<div class="viewcode-block" id="Machine.execute"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.execute">[docs]</a>    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">script</span><span class="p">,</span> <span class="n">script_arguments</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Execute the script remotely on a client.</span>

<span class="sd">        Args:</span>
<span class="sd">            script              (str)   --  path of the script file to execute on the</span>
<span class="sd">            remote client</span>

<span class="sd">            script_arguments    (str)   --  arguments to be passed to the script</span>

<span class="sd">                **This is applicable only for UNIX machines right now**</span>

<span class="sd">                default: None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_commvault_client</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">execution_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execute_with_cvd</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">execution_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execute_with_credential</span>

        <span class="k">if</span> <span class="n">script_arguments</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">execution_method</span><span class="p">(</span><span class="n">script</span><span class="p">,</span> <span class="n">script_arguments</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">execution_method</span><span class="p">(</span><span class="n">script</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.execute_command"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.execute_command">[docs]</a>    <span class="k">def</span> <span class="nf">execute_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Executes a command on the machine.</span>

<span class="sd">            An instance of the **Output** class is returned.</span>

<span class="sd">            Output / Exception messages received from command execution are</span>
<span class="sd">            available as the attributes of the class instance.</span>

<span class="sd">                output_instance.output              --  raw output returned from the command</span>

<span class="sd">                output_instance.formatted_output    --  o/p received after parsing the raw output</span>

<span class="sd">                output_instance.exception           --  raw exception message</span>

<span class="sd">                output_instance.exception_message   --  parsed exception message from the raw o/p</span>


<span class="sd">        Args:</span>
<span class="sd">            command     (str)   --  command to be executed on the machine</span>

<span class="sd">        Returns:</span>
<span class="sd">            object  -   instance of Output class</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

    <span class="c1"># OS related functions</span>
<div class="viewcode-block" id="Machine.check_directory_exists"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.check_directory_exists">[docs]</a>    <span class="k">def</span> <span class="nf">check_directory_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directory_path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if a directory exists on the client or not.</span>

<span class="sd">        Args:</span>
<span class="sd">            directory_path  (str)   --  path of the directory to check</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool    -   boolean value whether the directory exists or not</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.check_file_exists"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.check_file_exists">[docs]</a>    <span class="k">def</span> <span class="nf">check_file_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if a file exists on the client or not.</span>

<span class="sd">        Args:</span>
<span class="sd">            file_path  (str)   --  path of file to check</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool    -   boolean value whether the file exists or not</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.create_directory"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.create_directory">[docs]</a>    <span class="k">def</span> <span class="nf">create_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">force_create</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates a directory on the client, if it does not exist.</span>

<span class="sd">        Args:</span>
<span class="sd">            directory_name  (str)   --  name / full path of the directory to create</span>

<span class="sd">            force_create    (bool)  --  deletes the existing directory and creates afresh</span>

<span class="sd">        Returns:</span>
<span class="sd">            None    -   if directory creation was successful</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                if directory already exists</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.rename_file_or_folder"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.rename_file_or_folder">[docs]</a>    <span class="k">def</span> <span class="nf">rename_file_or_folder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">old_name</span><span class="p">,</span> <span class="n">new_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Renames a file or a folder on the client.</span>

<span class="sd">        Args:</span>
<span class="sd">            old_name    (str)   --  name / full path of the directory to rename</span>

<span class="sd">            new_name    (str)   --  new name / full path of the directory</span>

<span class="sd">        Returns:</span>
<span class="sd">            None    -   if directory was renamed successfully</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                if failed to rename the directory</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.is_file"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.is_file">[docs]</a>    <span class="k">def</span> <span class="nf">is_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks if the given path is a file or not.</span>

<span class="sd">        Args:</span>
<span class="sd">            path    (str)   --  full path of the file to be validated</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool:</span>
<span class="sd">                True    -   if the given path is a file</span>

<span class="sd">                False   -   if the given path is NOT a file</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception(Exception_Code, Exception_Message):</span>
<span class="sd">                if failed check if its file</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.is_directory"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.is_directory">[docs]</a>    <span class="k">def</span> <span class="nf">is_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks if the given path is a directory or not.</span>

<span class="sd">        Args:</span>
<span class="sd">            path    (str)   --  full path of the directory to be validated</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool:</span>
<span class="sd">                True    -   if the given path is a directory</span>

<span class="sd">                False   -   if the given path is NOT a directory</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception(Exception_Code, Exception_Message):</span>
<span class="sd">                if failed check if its directory</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.remove_directory"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.remove_directory">[docs]</a>    <span class="k">def</span> <span class="nf">remove_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directory_name</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Removes a directory on the client.</span>

<span class="sd">        Args:</span>
<span class="sd">            directory_name  (str)   --  name of the directory to remove</span>

<span class="sd">            days            (int)   --  directories older than the given days</span>
<span class="sd">            will be cleaned up</span>

<span class="sd">                default: None</span>

<span class="sd">        Returns:</span>
<span class="sd">            True    -   if directory was removed successfully</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception(Exception_Code, Exception_Message):</span>
<span class="sd">                if failed to remove the directory</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_file_size"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_file_size">[docs]</a>    <span class="k">def</span> <span class="nf">get_file_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">in_bytes</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets the size of a file on the client.</span>

<span class="sd">        Args:</span>
<span class="sd">            file_path   (str)   --  path of the file to get the size of</span>

<span class="sd">            in_bytes    (bool)  --  if true returns the size in bytes</span>

<span class="sd">        Returns:</span>
<span class="sd">            float   -   size of the file on the client</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                if failed to get the size of the file</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_folder_size"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_folder_size">[docs]</a>    <span class="k">def</span> <span class="nf">get_folder_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">folder_path</span><span class="p">,</span> <span class="n">in_bytes</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets the size of a folder on the client.</span>

<span class="sd">        Args:</span>
<span class="sd">            folder_path     (str)   --  path of the folder to get the size of</span>

<span class="sd">            in_bytes        (bool)  --  if true returns the size in bytes</span>

<span class="sd">        Returns:</span>
<span class="sd">            float   -   size of the folder on the client</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                if failed to get the size of the folder</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_storage_details"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_storage_details">[docs]</a>    <span class="k">def</span> <span class="nf">get_storage_details</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets the details of the Storage on the Client.</span>
<span class="sd">            Returns the details of all paths, if root is set to the default value False.</span>
<span class="sd">            If root is set to True, it returns the details of only `/`</span>

<span class="sd">        Args:</span>
<span class="sd">            root    (bool)  --  boolean flag to specify whether to return details of all paths,</span>
<span class="sd">                                    or the details of the path mounted on root(/)</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict - dictionary consisting the details of the storage on the client (in MB)</span>

<span class="sd">            {</span>
<span class="sd">                &#39;total&#39;: size_in_MB,</span>

<span class="sd">                &#39;available&#39;: size_in_MB,</span>

<span class="sd">                &#39;drive&#39;: {</span>
<span class="sd">                    &#39;total&#39;: size_in_MB,</span>

<span class="sd">                    &#39;available&#39;: size_in_MB,</span>

<span class="sd">                }</span>

<span class="sd">            }</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_disk_count"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_disk_count">[docs]</a>    <span class="k">def</span> <span class="nf">get_disk_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the number of disks on the machine.</span>

<span class="sd">        Returns:</span>
<span class="sd">            int     -   disk count of the machine</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception(Exception_Code, Exception_Message):</span>
<span class="sd">                if failed to get the disk count for the machine</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

    <span class="c1"># Registry related operations</span>
<div class="viewcode-block" id="Machine.check_registry_exists"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.check_registry_exists">[docs]</a>    <span class="k">def</span> <span class="nf">check_registry_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if a registry key / value exists on the client or not.</span>

<span class="sd">        Args:</span>
<span class="sd">            key     (str)   --  registry path of the key</span>

<span class="sd">            value   (str)   --  value of the registry key</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool    -   boolean value whether the registry key / value exists or not</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_registry_value"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_registry_value">[docs]</a>    <span class="k">def</span> <span class="nf">get_registry_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">commvault_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">win_key</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets the data of a registry key and value on the client.</span>

<span class="sd">        Args:</span>
<span class="sd">            commvault_key   (str)   --  registry path of the commvault key</span>
<span class="sd">                                            Example: Automation</span>

<span class="sd">            value           (str)   --  value of the registry key</span>
<span class="sd">                                            Example: CVAUTOPATH</span>

<span class="sd">            win_key         (str)   --  full registry path of non commvault key</span>
<span class="sd">                                            Example: HKLM:\\SOFTWARE\\Python\\PythonCore\\3.6\\InstallPath</span>

<span class="sd">        Returns:</span>
<span class="sd">            str     -   data of the value of the registry key</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception(Exception_Code, Exception_Message):</span>
<span class="sd">                if failed to get the data of the registry key and value</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.create_registry"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.create_registry">[docs]</a>    <span class="k">def</span> <span class="nf">create_registry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">reg_type</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates a registry key / value on the client, if it does not exist.</span>

<span class="sd">        Args:</span>
<span class="sd">            key     (str)       --  registry path of the key</span>

<span class="sd">            value   (str)       --  value of the registry key</span>

<span class="sd">            data    (str)       --  data for the registry value</span>

<span class="sd">            reg_type(str)       --  datatype of the registry key</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool    -   if registry key / value creation was successful</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception(Exception_Code, Exception_Message):</span>
<span class="sd">                if failed to create the registry key</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.update_registry"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.update_registry">[docs]</a>    <span class="k">def</span> <span class="nf">update_registry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reg_type</span><span class="o">=</span><span class="s1">&#39;String&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Updates the value of a registry key / Adds the key (if it does not exist) on the client.</span>

<span class="sd">        Args:</span>
<span class="sd">            key     (str)       --  registry path of the key</span>

<span class="sd">            value   (str)       --  value of the registry key</span>

<span class="sd">            data    (str)       --  data for the registry value</span>

<span class="sd">            reg_type(str)       --  type of the registry value to add</span>

<span class="sd">                Valid values are:</span>

<span class="sd">                    - String</span>
<span class="sd">                    - Binary</span>
<span class="sd">                    - DWord</span>
<span class="sd">                    - QWord</span>
<span class="sd">                    - MultiString</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool    -   if registry value was updated successfully</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.remove_registry"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.remove_registry">[docs]</a>    <span class="k">def</span> <span class="nf">remove_registry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Removes a registry key / value on the client.</span>

<span class="sd">        Args:</span>
<span class="sd">            key     (str)       --  registry path of the key</span>

<span class="sd">            value   (str)       --  value of the registry key</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool    -   if registry key / value removal was successful</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception(Exception_Code, Exception_Message):</span>
<span class="sd">                if failed to remove the registry key</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.compare_files"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.compare_files">[docs]</a>    <span class="k">def</span> <span class="nf">compare_files</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">destination_machine</span><span class="p">,</span>
            <span class="n">source_file_path</span><span class="p">,</span>
            <span class="n">destination_file_path</span><span class="p">,</span>
            <span class="n">algorithm</span><span class="o">=</span><span class="s2">&quot;MD5&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Compares the contents of the 2 files given.</span>

<span class="sd">        Args:</span>
<span class="sd">            destination_machine     (object)    --  Machine class object for destination</span>
<span class="sd">            machine</span>

<span class="sd">            source_file_path        (str)       --  path of the source file to compare</span>

<span class="sd">            destination_file_path   (str)       --  path of the destination file to compare</span>

<span class="sd">            algorithm               (str)       --  Specifies the cryptographic hash function for</span>
<span class="sd">                                                    computing the hash value of the contents.</span>

<span class="sd">                Default: &quot;MD5&quot;.</span>

<span class="sd">              The acceptable values for algorithm parameter are:</span>
<span class="sd">                 * SHA1</span>
<span class="sd">                 * SHA256</span>
<span class="sd">                 * SHA384</span>
<span class="sd">                 * SHA512</span>
<span class="sd">                 * MD5</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool    -   boolean whether the files are same or not</span>

<span class="sd">                True:   files are same</span>

<span class="sd">                False:  files are different</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                If source_file_path does not exist.</span>

<span class="sd">                If destination_file_path does not exist.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">source_hash</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_file_hash</span><span class="p">(</span><span class="n">source_file_path</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="n">algorithm</span><span class="p">)</span>
        <span class="n">destination_hash</span> <span class="o">=</span> <span class="n">destination_machine</span><span class="o">.</span><span class="n">get_file_hash</span><span class="p">(</span>
            <span class="n">destination_file_path</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="n">algorithm</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">source_hash</span> <span class="o">==</span> <span class="n">destination_hash</span></div>

<div class="viewcode-block" id="Machine.compare_folders"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.compare_folders">[docs]</a>    <span class="k">def</span> <span class="nf">compare_folders</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">destination_machine</span><span class="p">,</span>
            <span class="n">source_path</span><span class="p">,</span>
            <span class="n">destination_path</span><span class="p">,</span>
            <span class="n">ignore_files</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">ignore_folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">ignore_case</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">algorithm</span><span class="o">=</span><span class="s2">&quot;MD5&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Compares the two directories on different machines.</span>

<span class="sd">              Args:</span>
<span class="sd">                  destination_machine     (object)    --  Machine class object for destination</span>
<span class="sd">                                                          machine.</span>

<span class="sd">                  source_path             (str)       --  path on source machine that is to be</span>
<span class="sd">                                                          compared.</span>

<span class="sd">                  destination_path        (str)       --  path on destination machine that is</span>
<span class="sd">                                                          to be compared.</span>

<span class="sd">                  ignore_files            (str)       --  files/patterns that are to be ignored.</span>

<span class="sd">                  ignore_folder           (list)      --  list of folders to be ignored.</span>
<span class="sd">                    Default: None.</span>

<span class="sd">                  ignore_case             (bool)      --  ignores the case if set to True.</span>
<span class="sd">                    Default: False.</span>

<span class="sd">                  algorithm               (str)       --  Specifies the cryptographic hash</span>
<span class="sd">                                                          function to use for computing the</span>
<span class="sd">                                                          hash value of the contents.</span>

<span class="sd">                   Default: &quot;MD5&quot;.</span>

<span class="sd">                    The acceptable values for algorithm parameter are:</span>
<span class="sd">                       * SHA1</span>
<span class="sd">                       * SHA256</span>
<span class="sd">                       * SHA384</span>
<span class="sd">                       * SHA512</span>
<span class="sd">                       * MD5</span>


<span class="sd">              Returns:</span>
<span class="sd">                  list    -   file paths which are different on the destination machine.</span>

<span class="sd">              &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">logger</span>
        <span class="n">log</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">get_log</span><span class="p">()</span>
        <span class="n">source_hash</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_folder_hash</span><span class="p">(</span><span class="n">source_path</span><span class="p">,</span> <span class="n">ignore_folder</span><span class="o">=</span><span class="n">ignore_folder</span><span class="p">,</span>
                                            <span class="n">ignore_case</span><span class="o">=</span><span class="n">ignore_case</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="n">algorithm</span><span class="p">)</span>
        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Source Hash : </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">source_hash</span><span class="p">))</span>
        <span class="n">destination_hash</span> <span class="o">=</span> <span class="n">destination_machine</span><span class="o">.</span><span class="n">get_folder_hash</span><span class="p">(</span><span class="n">destination_path</span><span class="p">,</span>
                                                               <span class="n">ignore_folder</span><span class="o">=</span><span class="n">ignore_folder</span><span class="p">,</span>
                                                               <span class="n">ignore_case</span><span class="o">=</span><span class="n">ignore_case</span><span class="p">,</span>
                                                               <span class="n">algorithm</span><span class="o">=</span><span class="n">algorithm</span><span class="p">)</span>
        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Destination Hash : </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">destination_hash</span><span class="p">))</span>
        <span class="n">difference</span> <span class="o">=</span> <span class="n">source_hash</span> <span class="o">-</span> <span class="n">destination_hash</span>
        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Difference : </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">difference</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">bool</span><span class="p">(</span><span class="n">difference</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_ignore_files</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">difference</span><span class="p">)</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">ignore_files</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">[]</span></div>

<div class="viewcode-block" id="Machine.copy_from_local"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.copy_from_local">[docs]</a>    <span class="k">def</span> <span class="nf">copy_from_local</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">local_path</span><span class="p">,</span> <span class="n">remote_path</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Copies the file / folder present at the given path to the path specified on the</span>
<span class="sd">            remote machine.</span>

<span class="sd">        Args:</span>
<span class="sd">            local_path      (str)   --  path of the file / folder on the local machine</span>

<span class="sd">            remote_path     (str)   --  path of the directory to which the file / folder</span>
<span class="sd">            should be copied on the remote machine</span>

<span class="sd">            \*\*kwargs      (dict)  --  optional arguments</span>

<span class="sd">                Available kwargs Options:</span>

<span class="sd">                    threads     (int)   -- Number of threads to be used by copy</span>

<span class="sd">                    raise_exception (bool) -- set to True to raise exception if copy failed</span>

<span class="sd">        Returns:</span>
<span class="sd">            (bool, list)    -   tuple consisting of a</span>

<span class="sd">            **bool** output specifying whether the file / folder was copied successfully or not</span>

<span class="sd">                True    -   all files / folders were copied successfully</span>

<span class="sd">                False   -   failed to copy some files / folders</span>

<span class="sd">            **list** consisting of the items failed to be copied</span>

<span class="sd">                list consisiting of items that were not copied</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception(Exception_Code, Exception_Message):</span>
<span class="sd">                if failed to copy the file / folder</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.copy_folder"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.copy_folder">[docs]</a>    <span class="k">def</span> <span class="nf">copy_folder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_path</span><span class="p">,</span> <span class="n">destination_path</span><span class="p">,</span> <span class="n">optional_params</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Copies the directory/file specified at source path to the destination path.</span>

<span class="sd">        Args:</span>
<span class="sd">            source_path         (str)   --  source directory to be copied</span>

<span class="sd">            destination_path    (str)   --  destination path where the folder has to be copied</span>

<span class="sd">            \*\*kwargs          (dict)  --  optional arguments</span>

<span class="sd">                Available kwargs Options:</span>

<span class="sd">                    threads     (int)   -- Number of threads to be used by copy</span>

<span class="sd">                    raise_exception (bool) -- set to True to raise exception if copy failed</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception(Exception_Code, Exception_Message):</span>
<span class="sd">                if failed to connect to the machine where the copy has to done locally</span>

<span class="sd">                if failed to copy files from source to destination</span>

<span class="sd">                if either of the source or destination path specifies is wrong</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.copy_from_network_share"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.copy_from_network_share">[docs]</a>    <span class="k">def</span> <span class="nf">copy_from_network_share</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network_path</span><span class="p">,</span> <span class="n">destination_path</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Copies the file/folder from the given network path to the destination path on</span>
<span class="sd">           the machine represented by this Machine class instance.</span>

<span class="sd">        Args:</span>
<span class="sd">            network_path        (str)   --  full UNC path of the file/folder to be copied</span>

<span class="sd">            destination_path    (str)   --  destination folder to copy the file/folder at</span>

<span class="sd">            username            (str)   --  username to access the network path</span>

<span class="sd">                e.g.; Domain\\\\Username</span>

<span class="sd">            password        (str)   --  password for the above mentioned user</span>

<span class="sd">            \*\*kwargs      (dict)  --  optional arguments</span>

<span class="sd">                Available kwargs Options:</span>

<span class="sd">                    threads     (int)   -- Number of threads to be used by copy</span>

<span class="sd">                    raise_exception (bool) -- set to True to raise exception if copy failed</span>


<span class="sd">        Returns:</span>
<span class="sd">            bool:</span>
<span class="sd">                True    -   if the file/folder was copied successfully</span>

<span class="sd">                False   -   if failed to copy the file/folder</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception(Exception_Code, Exception_Message):</span>
<span class="sd">                if failed to mount network path</span>

<span class="sd">                if failed to copy file/folder from mounted drive</span>

<span class="sd">                if failed to un mount network drive</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.copy_folder_to_network_share"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.copy_folder_to_network_share">[docs]</a>    <span class="k">def</span> <span class="nf">copy_folder_to_network_share</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_path</span><span class="p">,</span> <span class="n">network_path</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Copies the directory specified at source path to the network share path.</span>

<span class="sd">        Args:</span>
<span class="sd">            source_path     (str)   --  source directory to be copied</span>

<span class="sd">            network_path    (str)   --  network path to copy the files and folders at</span>

<span class="sd">            username        (str)   --  username to access network path</span>

<span class="sd">                e.g.; Domain\\\\Username</span>

<span class="sd">            password        (str)   --  password for the above mentioned user</span>


<span class="sd">            \*\*kwargs          (dict)  --  optional arguments</span>

<span class="sd">                Available kwargs Options:</span>

<span class="sd">                    threads     (int)   -- Number of threads to be used by copy</span>

<span class="sd">                    raise_exception (bool) -- set to True to raise exception if copy failed</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool:</span>
<span class="sd">                True    -   if the file/folder was copied successfully</span>

<span class="sd">                False   -   if failed to copy the file/folder</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception(Exception_Code, Exception_Message):</span>
<span class="sd">                if failed to mount network path</span>

<span class="sd">                if failed to copy files to mounted drive</span>

<span class="sd">                if failed to un mount network drive</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.read_file"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.read_file">[docs]</a>    <span class="k">def</span> <span class="nf">read_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the contents of the file present at the specified file path.</span>

<span class="sd">        Args:</span>
<span class="sd">            file_path   (str)   --  full path of the file to get the contents of</span>

<span class="sd">            \*\*kwargs  (dict)  --  Optional arguments</span>

<span class="sd">        Returns:</span>
<span class="sd">            str     -   string consisting of the file contents</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                if no file exists at the given path</span>

<span class="sd">                if failed to get the contents of the file</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.delete_file"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.delete_file">[docs]</a>    <span class="k">def</span> <span class="nf">delete_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Deletes the file present at the specified file path.</span>

<span class="sd">        Args:</span>
<span class="sd">            file_path   (str)   --  full path of the file to be removed</span>

<span class="sd">        Returns:</span>
<span class="sd">            None    -   if the file was removed successfully</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                if no file exists at the given path</span>

<span class="sd">                if failed to remove the file</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.change_folder_owner"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.change_folder_owner">[docs]</a>    <span class="k">def</span> <span class="nf">change_folder_owner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">directory_path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Changes the owner of the folder given as the value of directory_path.</span>

<span class="sd">        Args:</span>
<span class="sd">            username        (str)   --  name of user to give ownership</span>

<span class="sd">            directory_path  (str)   --  path of the directory to change ownership</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool    -   boolean value if ownership change was successful</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                if specified folder doesn&#39;t exist</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.create_current_timestamp_folder"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.create_current_timestamp_folder">[docs]</a>    <span class="k">def</span> <span class="nf">create_current_timestamp_folder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">folder_path</span><span class="p">,</span> <span class="n">timestamp</span><span class="o">=</span><span class="s2">&quot;time&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates a folder with current date / time as folder name at the given path.</span>

<span class="sd">        Args:</span>
<span class="sd">            folder_path     (str)   --  absolute path to create the folder at</span>

<span class="sd">            timestamp       (str)   --  whether to create a folder with the current date or the</span>
<span class="sd">            current time</span>

<span class="sd">                To create a folder with the date, pass the value as **date**</span>

<span class="sd">                Otherwise it&#39;ll always create folder with the current time as the folder name</span>

<span class="sd">        Returns:</span>
<span class="sd">            str     -   full path of the directory created</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                if failed to create the folder</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_latest_timestamp_file_or_folder"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_latest_timestamp_file_or_folder">[docs]</a>    <span class="k">def</span> <span class="nf">get_latest_timestamp_file_or_folder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">folder_path</span><span class="p">,</span> <span class="n">operation_type</span><span class="o">=</span><span class="s2">&quot;folder&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the latest timestamp folder in given path.</span>

<span class="sd">        Args:</span>
<span class="sd">            folder_path     (str)   --  full path of the folder to get latest</span>
<span class="sd">            file / folder from</span>

<span class="sd">            operation_type  (str)   --  type of the operation, i.e., whether to get latest file</span>
<span class="sd">            or the folder from the given folder path</span>

<span class="sd">                Valid values are:</span>

<span class="sd">                -   file</span>
<span class="sd">                -   folder</span>

<span class="sd">                default: folder</span>

<span class="sd">        Returns:</span>
<span class="sd">            str     -   full path of the directory that was created last inside the given</span>
<span class="sd">            folder path</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                if failed to get the file / folder with the latest timestamp</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_files_in_path"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_files_in_path">[docs]</a>    <span class="k">def</span> <span class="nf">get_files_in_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">folder_path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the list of all the files at the given folder path.</span>

<span class="sd">        Args:</span>
<span class="sd">            folder_path     (str)   --  full path of the folder to get the list of files from</span>

<span class="sd">        Returns:</span>
<span class="sd">            list    -   list of the files present at the given path</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                if failed to get the list of files</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_folders_in_path"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_folders_in_path">[docs]</a>    <span class="k">def</span> <span class="nf">get_folders_in_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">folder_path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the list of all the folders at the given folder path.</span>

<span class="sd">        Args:</span>
<span class="sd">            folder_path     (str)   --  full path of the folder to get the list of folders from</span>

<span class="sd">        Returns:</span>
<span class="sd">            list    -   list of the folders present at the given path</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                if failed to get the list of folders</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.number_of_items_in_folder"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.number_of_items_in_folder">[docs]</a>    <span class="k">def</span> <span class="nf">number_of_items_in_folder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">folder_path</span><span class="p">,</span> <span class="n">include_only</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">filter_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the count of number of items in a folder</span>

<span class="sd">            Args:</span>
<span class="sd">                folder_path       (str)   --  The folder path to get the count for</span>

<span class="sd">                include_only      (str)   --  The type of item to include for counting. Supported values:</span>
<span class="sd">                &quot;files&quot; - count only files, &quot;folders&quot; - count only folders, &quot;all&quot; - count both files and folders</span>

<span class="sd">                recursive         (bool)  --  Decides to whether to count items recursively in the sub folders</span>

<span class="sd">                filter_name       (str)   --  Filter items based on a pattern and include for counting. Example: *.mp3</span>

<span class="sd">            Returns:</span>
<span class="sd">                (int)   --  Count of number of items in the folder</span>

<span class="sd">            Raises:</span>
<span class="sd">                Exception if failed to execute the command</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.join_path"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.join_path">[docs]</a>    <span class="k">def</span> <span class="nf">join_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Joins the paths given in the args list with the given path using the os separator based</span>
<span class="sd">            on the OS / Type of the Machine</span>

<span class="sd">        Args:</span>
<span class="sd">            path    (str)       --  root path to join the rest of the elements to</span>

<span class="sd">            *args   (tuple)     --  list of the elements of path to join to the root path</span>

<span class="sd">        Returns:</span>
<span class="sd">            str     -   full path generated after joining all the elements using the OS sep</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">os_sep</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="p">[</span><span class="n">path</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">os_sep</span><span class="p">)]</span>
            <span class="o">+</span> <span class="p">[</span><span class="n">arg</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">os_sep</span><span class="p">)</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">]</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_file_hash"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_file_hash">[docs]</a>    <span class="k">def</span> <span class="nf">get_file_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s2">&quot;MD5&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns MD5 hash value of the specified file at the given file path.</span>

<span class="sd">          Args:</span>
<span class="sd">              file_path       (str)   --  Path of the file to get the hash value of.</span>

<span class="sd">              algorithm       (str)   --  Specifies the cryptographic hash function for</span>
<span class="sd">                                                    computing the hash value of the contents.</span>

<span class="sd">              Default: &quot;MD5&quot;.</span>

<span class="sd">              The acceptable values for algorithm parameter are:</span>
<span class="sd">                 * SHA1</span>
<span class="sd">                 * SHA256</span>
<span class="sd">                 * SHA384</span>
<span class="sd">                 * SHA512</span>
<span class="sd">                 * MD5</span>


<span class="sd">          Returns:</span>
<span class="sd">              str     -   hash value of the given file.</span>

<span class="sd">          Raises:</span>
<span class="sd">              Exception: If file path doesn&#39;t exist.</span>

<span class="sd">                  If the algorithm entered is invalid.</span>

<span class="sd">                  If failed to get the hash value.</span>

<span class="sd">          &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_file_hash</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="n">algorithm</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_folder_hash"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_folder_hash">[docs]</a>    <span class="k">def</span> <span class="nf">get_folder_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directory_path</span><span class="p">,</span> <span class="n">ignore_folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">ignore_case</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s2">&quot;MD5&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns set of files and their MD5 hash values present on the input path.</span>

<span class="sd">          Args:</span>
<span class="sd">              directory_path      (str)   --  path of the directory to get hash values of.</span>

<span class="sd">              ignore_folder       (list)  --  list of folders to be ignored.</span>
<span class="sd">                Default: None.</span>

<span class="sd">              ignore_case         (bool)  --  ignores the case if set to True.</span>
<span class="sd">                Default: False.</span>

<span class="sd">              algorithm           (str)   --  Specifies the cryptographic hash function</span>
<span class="sd">                    to use for computing the hash value of the contents.</span>

<span class="sd">                Default: &quot;MD5&quot;.</span>

<span class="sd">              The acceptable values for algorithm parameter are:</span>
<span class="sd">                 * SHA1</span>
<span class="sd">                 * SHA256</span>
<span class="sd">                 * SHA384</span>
<span class="sd">                 * SHA512</span>
<span class="sd">                 * MD5</span>


<span class="sd">          Returns:</span>
<span class="sd">              set     -   set consisting of the file paths and their hash value as tuple</span>

<span class="sd">                  set(</span>
<span class="sd">                      (file_path1, hash1),</span>

<span class="sd">                      (file_path2, hash2)</span>

<span class="sd">                  )</span>

<span class="sd">          Raises:</span>
<span class="sd">              Exception: If specified folder doesn&#39;t exist.</span>

<span class="sd">                  If the algorithm entered is invalid.</span>

<span class="sd">                  If failed to get the hash values.</span>

<span class="sd">          &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_folder_hash</span><span class="p">(</span>
            <span class="n">directory_path</span><span class="p">,</span>
            <span class="n">ignore_folder</span><span class="o">=</span><span class="n">ignore_folder</span><span class="p">,</span>
            <span class="n">ignore_case</span><span class="o">=</span><span class="n">ignore_case</span><span class="p">,</span>
            <span class="n">algorithm</span><span class="o">=</span><span class="n">algorithm</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Machine.compare_lists"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.compare_lists">[docs]</a>    <span class="k">def</span> <span class="nf">compare_lists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_list</span><span class="p">,</span> <span class="n">destination_list</span><span class="p">,</span> <span class="n">sort_list</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Compares the source list with destination list</span>
<span class="sd">            and checks if they are same.</span>

<span class="sd">         Args:</span>
<span class="sd">            source_list         (list)  --  list1 to compare the contents of</span>

<span class="sd">            destination_list    (list)  --  list2 to compare the contents of</span>

<span class="sd">            sort_list           (bool)  --  boolean flag specifying whether the lists should</span>
<span class="sd">            be sorted before the comparison or not</span>

<span class="sd">                default: False</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple   -   tuple consisting of a boolean and a string, where:</span>

<span class="sd">                bool:</span>

<span class="sd">                    returns True if the lists are identical</span>

<span class="sd">                    returns False if the contents of the lists are different</span>

<span class="sd">                str:</span>

<span class="sd">                    empty string in case of True, otherwise string consisting of the</span>
<span class="sd">                    differences b/w the 2 lists separated by new-line</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compare_lists</span><span class="p">(</span><span class="n">source_list</span><span class="p">,</span> <span class="n">destination_list</span><span class="p">,</span> <span class="n">sort_list</span><span class="o">=</span><span class="n">sort_list</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.generate_executable"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.generate_executable">[docs]</a>    <span class="k">def</span> <span class="nf">generate_executable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">directory_path</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Converts a Python file into an Executable file</span>

<span class="sd">            Args:</span>
<span class="sd">                file_path                 (str)    --  path of the python file</span>

<span class="sd">                directory_path            (str)    --  destination folder of the executable file</span>

<span class="sd">            Returns:</span>
<span class="sd">                str    --  Path of the executable file</span>

<span class="sd">            Raises:</span>
<span class="sd">                Exception:</span>
<span class="sd">                    if specified path doesn&#39;t exist</span>

<span class="sd">                    if the directory cannot be created</span>

<span class="sd">                    if pyinstaller fails due to errors in python file</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Check whether the given file is a python file or not</span>
        <span class="k">if</span> <span class="n">file_path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;py&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Method accepts only python files&#39;</span><span class="p">)</span>

        <span class="c1"># Check if the Python file exists</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Python File not found at : </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">file_directory</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="n">file_name</span> <span class="o">=</span> <span class="n">file_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.py&#39;</span><span class="p">,</span> <span class="s1">&#39;.exe&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">directory_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">directory_path</span> <span class="o">=</span> <span class="n">file_directory</span>

        <span class="c1"># Check if the directory exists</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">directory_path</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">directory_path</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exception</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">exception</span><span class="p">)</span>

        <span class="n">pyinstaller_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">executable</span><span class="p">),</span> <span class="s1">&#39;Scripts&#39;</span><span class="p">,</span> <span class="s1">&#39;pyinstaller.exe&#39;</span><span class="p">)</span>
        <span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&amp;&quot;</span><span class="si">{</span><span class="n">pyinstaller_path</span><span class="si">}</span><span class="s1">&quot; --distpath &quot;</span><span class="si">{</span><span class="n">directory_path</span><span class="si">}</span><span class="s1">&quot; --onefile &quot;</span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s1">&quot; --clean&#39;</span>
        <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execute_command</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;error&#39;</span> <span class="ow">in</span> <span class="n">output</span><span class="o">.</span><span class="n">exception</span> <span class="ow">or</span> <span class="s1">&#39;not recognized&#39;</span> <span class="ow">in</span> <span class="n">output</span><span class="o">.</span><span class="n">exception</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">join_path</span><span class="p">(</span><span class="n">directory_path</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.generate_test_data"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.generate_test_data">[docs]</a>    <span class="k">def</span> <span class="nf">generate_test_data</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">file_path</span><span class="p">,</span>
            <span class="n">dirs</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
            <span class="n">files</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
            <span class="n">file_size</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
            <span class="n">levels</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">hlinks</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">slinks</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">hslinks</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">sparse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">sparse_hole_size</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span>
            <span class="n">acls</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">unicode</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">xattr</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">long_path</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">long_level</span><span class="o">=</span><span class="mi">1500</span><span class="p">,</span>
            <span class="n">problematic</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">zero_size_file</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">options</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Generates and adds random test data at the given path with the specified options</span>

<span class="sd">        Args:</span>
<span class="sd">            file_path           (str)   --  directory path where</span>
<span class="sd">                                            the data will be generated.</span>

<span class="sd">            dirs                (int)   --  number of directories</span>
<span class="sd">                                            in each level</span>

<span class="sd">                default: 3</span>

<span class="sd">            files               (int)   --  number of files</span>
<span class="sd">                                            in each directory</span>

<span class="sd">                default: 5</span>

<span class="sd">            file_size           (int)   --  Size of the files in KB</span>

<span class="sd">                default: 20</span>

<span class="sd">            levels              (int)   --  number of levels to be created</span>

<span class="sd">                default: 1</span>

<span class="sd">            hlinks              (bool)  --  whether to create</span>
<span class="sd">                                            hardlink files</span>

<span class="sd">                default: True</span>

<span class="sd">            slinks              (bool)  --  whether to create</span>
<span class="sd">                                            symbolic link files</span>

<span class="sd">                default: True</span>

<span class="sd">            hslinks             (bool)  --  whether to create</span>
<span class="sd">                                            symbolic link files with hardlinks.</span>

<span class="sd">                default: False</span>

<span class="sd">            sparse              (bool)  --  whether to create sparse files</span>

<span class="sd">                default: True</span>

<span class="sd">            sparse_hole_size    (int)   --  Size of the holes</span>
<span class="sd">                                            in sparse files in KB</span>

<span class="sd">                default: 1024</span>

<span class="sd">            long_path           (bool)  --  whether to create long files</span>

<span class="sd">                default: False</span>

<span class="sd">            long_level          (int)   --  length of the long path</span>

<span class="sd">                default: 1500</span>

<span class="sd">            acls                (bool)  --  whether to create</span>
<span class="sd">                                            files with acls</span>

<span class="sd">                default: False</span>

<span class="sd">            unicode             (bool)  --  whether to create</span>
<span class="sd">                                            unicode files</span>

<span class="sd">                default: False</span>

<span class="sd">            problematic         (bool)  --  whether to create</span>
<span class="sd">                                            problematic data</span>

<span class="sd">                default: False</span>

<span class="sd">            xattr               (bool)  --  whether to create files</span>
<span class="sd">                                            with xattr</span>

<span class="sd">                default: False</span>

<span class="sd">            zero_size_file               (bool)  --  whether to create files</span>
<span class="sd">                                            with zero kb</span>

<span class="sd">                default: True</span>

<span class="sd">            options             (str)   --  to specify any other</span>
<span class="sd">                                            additional parameters</span>
<span class="sd">                                            to the script.</span>

<span class="sd">                default: &quot;&quot;</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool    -   boolean value True is returned</span>
<span class="sd">                        if no errors during data generation.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                if any error occurred while generating the test data.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.disconnect"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.disconnect">[docs]</a>    <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Disconnects the current session with the machine.</span>

<span class="sd">            Deletes the object&#39;s attributes.</span>

<span class="sd">            Removes the Credentials File as well, if it was created.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_connected</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell_object</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">username</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">password</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_object</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">credentials_file</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">OSError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
            <span class="c1"># Continue silently, as the file might already have been removed</span>
            <span class="k">pass</span>

        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">credentials_file</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_commvault_client</span>

        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_script_generator</span></div>

<div class="viewcode-block" id="Machine.scan_directory"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.scan_directory">[docs]</a>    <span class="k">def</span> <span class="nf">scan_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">filter_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Scans the directory and returns a list of items under it along with its properties</span>

<span class="sd">            Args:</span>
<span class="sd">                path            (str)           Path of directory to scan</span>

<span class="sd">                filter_type     (str)          Filters the list by item type. Possible values</span>
<span class="sd">                are file, directory</span>

<span class="sd">                recursive       (bool)          Decides to whether to get items recursively or from</span>
<span class="sd">                current directory alone</span>

<span class="sd">            Returns:</span>
<span class="sd">                list    -       List of items under the directory with each item being a</span>
<span class="sd">                dictionary of item properties</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.reboot_client"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.reboot_client">[docs]</a>    <span class="k">def</span> <span class="nf">reboot_client</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reboots the machine.</span>

<span class="sd">            Please NOTE that the connectivity will go down in this scenario, and the Machine</span>
<span class="sd">            class may not be able to re-establish the connection to the Machine.</span>

<span class="sd">            In such cases, the user will have to initialize the Machine class instance again.</span>

<span class="sd">            Args:</span>
<span class="sd">                None</span>

<span class="sd">            Returns:</span>
<span class="sd">                object  -   instance of the UnixOutput class</span>

<span class="sd">            Raises:</span>
<span class="sd">                Exception:</span>
<span class="sd">                    if failed to reboot the client</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.shutdown_client"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.shutdown_client">[docs]</a>    <span class="k">def</span> <span class="nf">shutdown_client</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;shutdown the machine.</span>

<span class="sd">            This method turns off active host, Required to implement unplanned Failover Test Case.</span>

<span class="sd">            Args:</span>
<span class="sd">                None</span>

<span class="sd">            Returns:</span>
<span class="sd">                object  -   instance of the WindowsOutput class</span>

<span class="sd">            Raises:</span>
<span class="sd">                Exception:</span>
<span class="sd">                    if it fails to shut down machine.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.kill_process"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.kill_process">[docs]</a>    <span class="k">def</span> <span class="nf">kill_process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">process_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">process_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Terminates a running process on the client machine either with the given</span>
<span class="sd">            process name or the process id.</span>

<span class="sd">            Args:</span>
<span class="sd">                process_name    (str)   --  Name of the process to be terminate</span>

<span class="sd">                                                Example: cvd</span>

<span class="sd">                process_id      (str)   --  ID of the process ID to be terminated</span>

<span class="sd">            Returns:</span>
<span class="sd">                object  -   instance of the UnixOutput class</span>

<span class="sd">            Raises:</span>
<span class="sd">                Exception:</span>
<span class="sd">                    if neither the process name nor the process id is given</span>

<span class="sd">                    if failed to kill the process</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.is_stub"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.is_stub">[docs]</a>    <span class="k">def</span> <span class="nf">is_stub</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">is_nas_turbo_type</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This function will verify whether file is stub</span>

<span class="sd">            Args:</span>
<span class="sd">                file_name (str): file full name</span>

<span class="sd">                is_nas_turbo_type  (bool): True for NAS based client.</span>

<span class="sd">             Return: True if the file is stub otherwise return False</span>

<span class="sd">             Raises:</span>
<span class="sd">                Exception:</span>
<span class="sd">                        if error occurred</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_hardware_info"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_hardware_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_hardware_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the hardware specifications of this machine like cores/Logical processor count/RAM/Architecture</span>

<span class="sd">        Returns:</span>

<span class="sd">            dict        --  containing all the CPU hardware info</span>

<span class="sd">                        Example : {</span>
<span class="sd">                                              &quot;MachineName&quot;: &quot;xyz&quot;,</span>
<span class="sd">                                              &quot;CPUModel&quot;: &quot;Intel(R) Xeon(R) CPU E5-2450 0 @ 2.10GHz&quot;,</span>
<span class="sd">                                              &quot;NumberOfCores&quot;: &quot;5&quot;,</span>
<span class="sd">                                              &quot;NumberOfLogicalProcessors&quot;: &quot;5&quot;,</span>
<span class="sd">                                              &quot;OSArchitecture&quot;: &quot;64&quot;,</span>
<span class="sd">                                              &quot;MaxClockSpeed&quot;: &quot;2100&quot;,</span>
<span class="sd">                                              &quot;RAM&quot;: &quot;13GB&quot;,</span>
<span class="sd">                                              &quot;OS&quot;: &quot;WINDOWS&quot;,</span>
<span class="sd">                                              &quot;OSFlavour&quot;: &quot;Windows 2012 R2&quot;,</span>
<span class="sd">                                              &quot;Storage&quot;: {</span>
<span class="sd">                                                &quot;total&quot;: 614297.6,</span>
<span class="sd">                                                &quot;available&quot;: 305438.72,</span>
<span class="sd">                                                &quot;C&quot;: {</span>
<span class="sd">                                                  &quot;total&quot;: 614297.6,</span>
<span class="sd">                                                  &quot;available&quot;: 305438.72</span>
<span class="sd">                                                }</span>
<span class="sd">                                              }</span>
<span class="sd">                                            }</span>

<span class="sd">         Raises:</span>
<span class="sd">                Exception:</span>
<span class="sd">                    if any error occurred while getting the details</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_process_id"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_process_id">[docs]</a>    <span class="k">def</span> <span class="nf">get_process_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">process_name</span><span class="p">,</span> <span class="n">command_line_keyword</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the process id for the given process.</span>

<span class="sd">        Args:</span>

<span class="sd">            process_name                (str)       --  Name of the process</span>

<span class="sd">            command_line_keyword        (str)       --  Keyword which needs to be present in command line arguments</span>

<span class="sd">        Returns:</span>

<span class="sd">            list         --  list of Process id [Empty list if no process is found]</span>

<span class="sd">        Raises:</span>
<span class="sd">                Exception:</span>
<span class="sd">                    if any error occurred while getting the process id</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_process_stats"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_process_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_process_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">process_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets the process stats like Handle count, memory used, CPU usage, thread count at the requested time</span>
<span class="sd">        for the given process ID</span>

<span class="sd">            Args:</span>
<span class="sd">                process_id      (str)   --      The process ID to get the stats for</span>

<span class="sd">            Returns:</span>
<span class="sd">                (dict)  --  A dictionary with the stat and it&#39;s value (int).</span>
<span class="sd">                            Empty dictionary if process ID does not exist.</span>

<span class="sd">                Example: {</span>
<span class="sd">                    &#39;handle_count&#39;: &#39;100&#39;,</span>
<span class="sd">                    &#39;memory&#39;: &#39;456202665&#39;  # in bytes</span>
<span class="sd">                    &#39;thread_count&#39;: &#39;20&#39;</span>
<span class="sd">                    &#39;cpu_usage&#39;: &#39;2&#39;</span>
<span class="sd">                }</span>

<span class="sd">            Raises:</span>
<span class="sd">                Exception - If any error while executing the script</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_port_usage"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_port_usage">[docs]</a>    <span class="k">def</span> <span class="nf">get_port_usage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">process_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">all_protocols</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; get the netstat output from the machine</span>

<span class="sd">        Args:</span>

<span class="sd">            process_id          (str)       --  process id</span>

<span class="sd">                if None, then netstat output of machine is returned</span>

<span class="sd">            all_protocols       (bool)      --  specifies whether to get tcp &amp; udp connections or only TCP connection</span>
<span class="sd">                                                        Default : TRUE</span>

<span class="sd">                    if true, both tcp &amp; udp connection details are returned</span>

<span class="sd">                    if false, then only tcp connection details are returned</span>

<span class="sd">        Returns:</span>

<span class="sd">            dict    --  containing connection state and no of connections in those state</span>

<span class="sd">        Raises:</span>

<span class="sd">            Exception:</span>

<span class="sd">                if failed to find the process id</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.is_process_running"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.is_process_running">[docs]</a>    <span class="k">def</span> <span class="nf">is_process_running</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">process_name</span><span class="p">,</span> <span class="n">time_out</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">poll_interval</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks if a given process is running on the index server</span>
<span class="sd">            Args:</span>
<span class="sd">                process_name(str)   -- Name of the process</span>

<span class="sd">                time_out(int)       -- wait for n seconds</span>
<span class="sd">                    Default(0)secs</span>

<span class="sd">                poll_interval(int)      -- keep checking for process in n secs</span>
<span class="sd">                    Default(0)secs</span>

<span class="sd">            Returns:</span>
<span class="sd">                Boolean result</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_checksum_list"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_checksum_list">[docs]</a>    <span class="k">def</span> <span class="nf">get_checksum_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_path</span><span class="p">,</span> <span class="n">sorted_output</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets the list of checksum of items from the machine on a give path</span>
<span class="sd">        here it just creates an interface, child class will implement</span>
<span class="sd">        detail function</span>

<span class="sd">             Args:</span>
<span class="sd">                data_path      (str)   --  directory path</span>
<span class="sd">                                            to get the checksum list</span>

<span class="sd">                sorted_output  (bool)  --  to specify whether</span>
<span class="sd">                                            the checksum list should be sorted.</span>

<span class="sd">            Returns:</span>
<span class="sd">                list    -   list of checksum of items from  the machine</span>

<span class="sd">            Raises:</span>
<span class="sd">                Exception:</span>
<span class="sd">                    if any error occurred while getting the checksum of items.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.compare_acl"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.compare_acl">[docs]</a>    <span class="k">def</span> <span class="nf">compare_acl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_path</span><span class="p">,</span> <span class="n">destination_path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Compares the acl of source path with destination path</span>
<span class="sd">            and checks if they are same.</span>

<span class="sd">         Args:</span>
<span class="sd">            source_path         (str)  -- source path to compare</span>

<span class="sd">            destination_path    (str)  -- destination path to compare</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool, str   -   Returns True</span>
<span class="sd">                             if acls of source and destination are same</span>
<span class="sd">                            diff output between source and destination</span>
<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                if any error occurred while comparing the acl of paths.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.add_firewall_allow_port_rule"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.add_firewall_allow_port_rule">[docs]</a>    <span class="k">def</span> <span class="nf">add_firewall_allow_port_rule</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tunnel_port</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds the inbound rule for the given port number</span>
<span class="sd">        Args:</span>
<span class="sd">            tunnel_port (int): port number to be added in the inbound rule</span>
<span class="sd">        Returns:</span>
<span class="sd">            None: if rule addition is successful</span>
<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                if command to add the firewall rule fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.start_firewall"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.start_firewall">[docs]</a>    <span class="k">def</span> <span class="nf">start_firewall</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block_connections</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;start firewall services on the current client machine</span>
<span class="sd">        Args:</span>
<span class="sd">            block_connections (bool) -- Blocks all inbound and outbound connections</span>
<span class="sd">        Returns:</span>
<span class="sd">            None: if firewall started successfully</span>
<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                if command to start firewall service fails or connection rules are failed to set</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.remove_firewall_allow_port_rule"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.remove_firewall_allow_port_rule">[docs]</a>    <span class="k">def</span> <span class="nf">remove_firewall_allow_port_rule</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tunnel_port</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;removes the inbound rule for the given port number</span>
<span class="sd">        Args:</span>
<span class="sd">            tunnel_port (int): port number to be removed in the inbound rule</span>
<span class="sd">        Returns:</span>
<span class="sd">            None: if rule deletion is successful</span>
<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                if command to delete the firewall rule fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.stop_firewall"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.stop_firewall">[docs]</a>    <span class="k">def</span> <span class="nf">stop_firewall</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;turn off firewall service on the current client machine</span>
<span class="sd">        Returns:</span>
<span class="sd">            None: firewall is turned off successfully</span>
<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                if command to turn off firewall fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.add_firewall_machine_exclusion"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.add_firewall_machine_exclusion">[docs]</a>    <span class="k">def</span> <span class="nf">add_firewall_machine_exclusion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">machine_to_exclude</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds given machine to firewall exclusion list. If machine details is</span>
<span class="sd">           not passed, it considers current machine and adds it to exclusion list.</span>
<span class="sd">        Args:</span>
<span class="sd">            machine_to_exclude (str): hostname or IP address to be added to</span>
<span class="sd">                firewall exclusion list</span>
<span class="sd">        Returns:</span>
<span class="sd">            None: if machine is successfully added to firewall exclusion list</span>
<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                if command to add the firewall exclusion rule fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.remove_firewall_machine_exclusion"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.remove_firewall_machine_exclusion">[docs]</a>    <span class="k">def</span> <span class="nf">remove_firewall_machine_exclusion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">excluded_machine</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;removes given machine from firewall exclusion list. If machine details is</span>
<span class="sd">           not passed, it considers current machine and removes it from exclusion list.</span>
<span class="sd">        Args:</span>
<span class="sd">            excluded_machine (str): hostname or IP address to be removed from</span>
<span class="sd">                firewall exclusion list</span>
<span class="sd">        Returns:</span>
<span class="sd">            None: if machine is successfully removed from firewall exclusion list</span>
<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                if command to delete from firewall exclusion rule fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.modify_content_of_file"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.modify_content_of_file">[docs]</a>    <span class="k">def</span> <span class="nf">modify_content_of_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="s1">&#39;CVappended&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;append data to a file at specified path on this machine</span>

<span class="sd">        Args:</span>
<span class="sd">            file_path   (str)   --  path of file to be modified</span>

<span class="sd">            content     (str)   --  content that is to be appended to file</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception(Exception_Code, Exception_Message):</span>
<span class="sd">                if failed to append data to file</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">command</span> <span class="o">=</span> <span class="s1">&#39;echo </span><span class="si">{1}</span><span class="s1"> &gt;&gt; </span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>
        <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execute_command</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">output</span><span class="o">.</span><span class="n">exception</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">exception_code</span><span class="p">,</span> <span class="n">output</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.hide_path"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.hide_path">[docs]</a>    <span class="k">def</span> <span class="nf">hide_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;hide specified path on the machine</span>

<span class="sd">                Args:</span>
<span class="sd">                    path   (str)   --  path to be hidden on machine</span>

<span class="sd">                Returns:</span>
<span class="sd">                    None</span>

<span class="sd">                Raises:</span>
<span class="sd">                    Exception(Exception_Code, Exception_Message):</span>
<span class="sd">                        if failed to hidden a file</span>

<span class="sd">                &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.unhide_path"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.unhide_path">[docs]</a>    <span class="k">def</span> <span class="nf">unhide_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;unhide specified path on the machine</span>

<span class="sd">                Args:</span>
<span class="sd">                    path   (str)   --  path to be unhidded on machine</span>

<span class="sd">                Returns:</span>
<span class="sd">                    None</span>

<span class="sd">                Raises:</span>
<span class="sd">                    Exception(Exception_Code, Exception_Message):</span>
<span class="sd">                        if failed to unhide a file</span>

<span class="sd">                &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.add_user"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.add_user">[docs]</a>    <span class="k">def</span> <span class="nf">add_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">encrypted_password</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;create new user account using values passed to method</span>

<span class="sd">        Args:</span>
<span class="sd">            user                (str)   --  username string to be used to create account</span>

<span class="sd">            encrypted_password  (str)   --  The encrypted password, as returned by crypt(3)</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception(Exception_Code, Exception_Message):</span>
<span class="sd">                if failed to create user account</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.delete_users"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.delete_users">[docs]</a>    <span class="k">def</span> <span class="nf">delete_users</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">users</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;delete a user account and Files in the user&#39;s home directory</span>

<span class="sd">        Args:</span>
<span class="sd">            users   (list)   --  list of valid existing usernames</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception(Exception_Code, Exception_Message):</span>
<span class="sd">                if failed to delete user</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.change_file_permissions"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.change_file_permissions">[docs]</a>    <span class="k">def</span> <span class="nf">change_file_permissions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">file_permissions</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;change file mode bits for the given file or directory path</span>

<span class="sd">        Args:</span>
<span class="sd">            file_path            (str)   --  path of file to be modified with mode bits</span>

<span class="sd">            file_permissions     (str)   --  valid RWX bits which needs to be set</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception(Exception_Code, Exception_Message):</span>
<span class="sd">                if failed to change file mode bits</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.nfs4_setfacl"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.nfs4_setfacl">[docs]</a>    <span class="k">def</span> <span class="nf">nfs4_setfacl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_path</span><span class="p">,</span> <span class="n">ace_type</span><span class="p">,</span> <span class="n">ace_principal</span><span class="p">,</span> <span class="n">ace_permissions</span><span class="p">,</span> <span class="n">ace_flags</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                     <span class="n">user_group_flag</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;manipulates the NFSv4 Access Control List (ACL) of one or more files (or directories),</span>
<span class="sd">           provided they are on a mounted NFSv4 filesystem which supports ACLs.</span>

<span class="sd">            Args:</span>
<span class="sd">                object_path      (str)    -- path of file or directory for which ACL</span>
<span class="sd">                need to be applied</span>

<span class="sd">                ace_type         (str)    -- action which need to taken (Allow/Deny)</span>

<span class="sd">                ace_principal    (str)    -- people for which we are applying the access</span>

<span class="sd">                ace_permissions  (object) -- permissions which needs to be applied</span>

<span class="sd">                ace_flags       (str)     -- different types inheritance (d/f/n/i)</span>

<span class="sd">                user_group_flag (bool)    -- when ace_principal is group this flag need to be set</span>

<span class="sd">            Returns:</span>
<span class="sd">                None</span>

<span class="sd">            Raises:</span>
<span class="sd">                Exception:</span>
<span class="sd">                    if any error occurs in applying ACL</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.nfs4_getfacl"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.nfs4_getfacl">[docs]</a>    <span class="k">def</span> <span class="nf">nfs4_getfacl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;get NFSv4 file/directory access control lists</span>

<span class="sd">            Args:</span>
<span class="sd">                object_path   (str)     -- path of file or directory for which ACL</span>
<span class="sd">                need to be applied</span>

<span class="sd">            Returns:</span>
<span class="sd">                current ACLs set for the given path</span>

<span class="sd">            Raises:</span>
<span class="sd">                Exception:</span>
<span class="sd">                    if any error occurs in retrieving ACLs</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.is_path_mounted"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.is_path_mounted">[docs]</a>    <span class="k">def</span> <span class="nf">is_path_mounted</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mount_path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; check whether given path is mounted</span>

<span class="sd">            Args:</span>
<span class="sd">                mount_path  (str)  --  local directory for nfs mount path</span>

<span class="sd">            Returns:</span>
<span class="sd">                True  -- if mount_path is mounted</span>

<span class="sd">                False -- if mount_path is not mounted</span>

<span class="sd">            Raises:</span>
<span class="sd">                Exception(Exception_Code, Exception_Message):</span>
<span class="sd">                    if failed to mount network path</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.mount_nfs_share"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.mount_nfs_share">[docs]</a>    <span class="k">def</span> <span class="nf">mount_nfs_share</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nfs_client_mount_dir</span><span class="p">,</span> <span class="n">server</span><span class="p">,</span> <span class="n">share</span><span class="p">,</span> <span class="n">cleanup</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; mounts the given NFS mount path</span>

<span class="sd">            Args:</span>
<span class="sd">                nfs_client_mount_dir  (str)  --  local directory for nfs mount path</span>

<span class="sd">                server                (str)  --  nfs server hostname or ip address</span>

<span class="sd">                share                 (str)  --  nfs server share path</span>

<span class="sd">                cleanup               (bool) --  flag to unmount before mounting</span>

<span class="sd">            Returns:</span>
<span class="sd">                None</span>

<span class="sd">            Raises:</span>
<span class="sd">                Exception(Exception_Code, Exception_Message):</span>
<span class="sd">                    if failed to mount network path</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.unmount_path"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.unmount_path">[docs]</a>    <span class="k">def</span> <span class="nf">unmount_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mount_path</span><span class="p">,</span> <span class="n">delete_folder</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">force_unmount</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Dis mounts the mounted path</span>

<span class="sd">        Args:</span>
<span class="sd">            mount_path    (str)   --  path which is mounted on this machine</span>

<span class="sd">            delete_folder (str)   --  delete folder after unmount is successful</span>

<span class="sd">            force_unmount (str)   --  force unmount in case of stale mount points</span>
<span class="sd">        Returns:</span>
<span class="sd">            bool    - dis mount network path operation status</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception(Exception_Code, Exception_Message):</span>
<span class="sd">                if failed to mount network path</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_snapshot"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_snapshot">[docs]</a>    <span class="k">def</span> <span class="nf">get_snapshot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directory_path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        gets meta data(ls -l) and md5sum of each file in the given directory</span>

<span class="sd">        Args:</span>
<span class="sd">            directory_path     (str)   - path of the folder to get the data</span>

<span class="sd">         Returns:</span>
<span class="sd">                file_list   (list)-   list containing [&quot;%m %n %u %g %s \&quot; -exec md5sum]</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                if failed to get the list of files</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.set_logging_debug_level"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.set_logging_debug_level">[docs]</a>    <span class="k">def</span> <span class="nf">set_logging_debug_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">service_name</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s1">&#39;5&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;set debug log level for given CV service name.</span>

<span class="sd">              Args:</span>
<span class="sd">                 service_name         (str)  -- name of valid CV service name</span>

<span class="sd">                 level                (str)  -- log level to be set</span>
<span class="sd">                        default : 5</span>

<span class="sd">            Returns:</span>
<span class="sd">                 None</span>
<span class="sd">            Raises:</span>
<span class="sd">                 Exception:</span>
<span class="sd">                     if any error occurred while updating debug log level</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.delete_task"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.delete_task">[docs]</a>    <span class="k">def</span> <span class="nf">delete_task</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">taskname</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Deletes the specified task on the client</span>
<span class="sd">            Args:</span>
<span class="sd">                taskname (str): Taskname to delete</span>

<span class="sd">            Returns:</span>
<span class="sd">                Output for the task execution command</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.wait_for_task"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.wait_for_task">[docs]</a>    <span class="k">def</span> <span class="nf">wait_for_task</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">taskname</span><span class="p">,</span>
            <span class="n">taskstatus</span><span class="o">=</span><span class="s1">&#39;Ready&#39;</span><span class="p">,</span>
            <span class="n">retry_interval</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
            <span class="n">time_limit</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
            <span class="n">hardcheck</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Wait for scheduled task to complete on client</span>

<span class="sd">            Args:</span>
<span class="sd">                taskname          (str)    -- Name of the task to check for completion</span>

<span class="sd">                taskstatus        (str)    -- Expected task status</span>
<span class="sd">                                                &#39;Running&#39; OR &#39;Ready&#39;</span>

<span class="sd">                retry_interval    (int)    -- Interval (in seconds), checked in a loop. Default = 2</span>

<span class="sd">                time_limit        (int)    -- Time limit to check for. Default (in minutes) = 5</span>

<span class="sd">                hardcheck         (bool)   -- If True, module will exception out if task is not complete.</span>
<span class="sd">                                              If False, module will return with non-truthy value</span>

<span class="sd">            Returns:</span>
<span class="sd">                True/False        (bool)   -- In case task is Ready/Not Ready</span>

<span class="sd">            Raises:</span>
<span class="sd">                Exception if :</span>

<span class="sd">                    - failed during execution of module</span>
<span class="sd">                    - Task did not reach the expected state</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.create_task"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.create_task">[docs]</a>    <span class="k">def</span> <span class="nf">create_task</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">taskoptions</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Create a scheduled task on the machine</span>
<span class="sd">            Args:</span>
<span class="sd">                taskoptions     (str)    : Task options for the schtasks /create command</span>

<span class="sd">            Returns:</span>
<span class="sd">                Output for the task execution command</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.execute_task"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.execute_task">[docs]</a>    <span class="k">def</span> <span class="nf">execute_task</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">taskname</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Executes a scheduled task immediately on the machine</span>
<span class="sd">            Args:</span>
<span class="sd">                taskname     (str)    : Task name to execute</span>

<span class="sd">            Returns:</span>
<span class="sd">                Output for the task execution command</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.has_active_session"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.has_active_session">[docs]</a>    <span class="k">def</span> <span class="nf">has_active_session</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Check if a user has an active session on the Machine</span>
<span class="sd">            Args:</span>
<span class="sd">                user     (str)    : User Name for which to check the active user session</span>

<span class="sd">            Returns:</span>
<span class="sd">                True if user has an active session</span>
<span class="sd">                False if not</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_login_session_id"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_login_session_id">[docs]</a>    <span class="k">def</span> <span class="nf">get_login_session_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Gets the session id for the logged in user</span>
<span class="sd">            Args:</span>
<span class="sd">                username     (str)    : User Name for which to check the active user session</span>

<span class="sd">            Returns:</span>
<span class="sd">                user&#39;s session id (int)</span>

<span class="sd">            Raises:</span>
<span class="sd">                Exception: If failed to get session id for the user</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.logoff_session_id"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.logoff_session_id">[docs]</a>    <span class="k">def</span> <span class="nf">logoff_session_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sessionid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Logs off a user with given session id</span>

<span class="sd">            Args:</span>
<span class="sd">                sessionid (str): Active OR Disconnected user session id of the user</span>

<span class="sd">            Raises:</span>
<span class="sd">                Exception: If failed to logg off user</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.create_file"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.create_file">[docs]</a>    <span class="k">def</span> <span class="nf">create_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">file_size</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates a file at specified path on this machine</span>

<span class="sd">        Args:</span>
<span class="sd">            file_path   (str)   --  path of file to be created</span>

<span class="sd">            content     (str)   --  content that is to be written to file</span>

<span class="sd">            file_size    (int)  -- by default it is None, then it will create</span>
<span class="sd">                                    file with related content otherwise,</span>
<span class="sd">                                    it will create file with required size</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool    -   file creation was successful or not</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception(Exception_Code, Exception_Message):</span>
<span class="sd">                if failed to create file</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.append_to_file"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.append_to_file">[docs]</a>    <span class="k">def</span> <span class="nf">append_to_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">content</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Appends content to the file present at the specified file path.</span>

<span class="sd">            Args:</span>
<span class="sd">                file_path   (str)   --  full path of the file to be appended with</span>

<span class="sd">                content     (str)   --  content to append to the file</span>

<span class="sd">            Returns:</span>
<span class="sd">                None    -   if content was appended successfully</span>

<span class="sd">            Raises:</span>
<span class="sd">                Exception:</span>
<span class="sd">                    if no file exists at the given path</span>

<span class="sd">                    if failed to append content to file</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.change_system_time"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.change_system_time">[docs]</a>    <span class="k">def</span> <span class="nf">change_system_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset_seconds</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Changes the system time as per the offset seconds provided w.r.t to current system time</span>

<span class="sd">            Args:</span>
<span class="sd">                offset_seconds      (int)   --  Seconds to offset the system time.</span>
<span class="sd">                Example, 60 will change the system time to 1 minute forward and -180 will change</span>
<span class="sd">                system time 3 minutes backward</span>

<span class="sd">            Returns:</span>
<span class="sd">                None</span>

<span class="sd">            Raises:</span>
<span class="sd">                Exception, if the powershell command execution fails</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_ace"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_ace">[docs]</a>    <span class="k">def</span> <span class="nf">get_ace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get ACEs of a file or folder for particular user</span>

<span class="sd">        Args:</span>
<span class="sd">            user            (str)   --  User for which ACEs are required</span>

<span class="sd">            path            (str)   --  File or folder path</span>

<span class="sd">        Returns:</span>
<span class="sd">                list       -- list of ACEs for that user</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.modify_ace"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.modify_ace">[docs]</a>    <span class="k">def</span> <span class="nf">modify_ace</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">user</span><span class="p">,</span>
            <span class="n">path</span><span class="p">,</span>
            <span class="n">permission</span><span class="p">,</span>
            <span class="n">action</span><span class="p">,</span>
            <span class="n">folder</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">remove</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">inheritance</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Modify ACEs of a file or folder for particular user</span>

<span class="sd">        Args:</span>
<span class="sd">            user            (str)   --  User for which ACEs are set or remove</span>

<span class="sd">            path            (str)   --  File or folder path</span>

<span class="sd">            action          (str)   --  Allow or Deny for ACEs</span>
<span class="sd">                                        Valid Input-  Allow or Deny</span>

<span class="sd">            permission      (str)   --  Permission to set or remove to file</span>
<span class="sd">                                        Valid input -Read, ReadAndExeute, Write,Modify,FullControl</span>

<span class="sd">            folder          (bool)  --  To modify  ACE of folder , default is for file</span>

<span class="sd">            remove          (bool)  --  To remove the ACE, default is to add</span>

<span class="sd">            inheritance      (str)  -- 0 - permission will be set only to target folder</span>
<span class="sd">                                        1- Permission will be set to target</span>
<span class="sd">                                        folder and only to child folder</span>
<span class="sd">                                        2 -permission will be to target folder,</span>
<span class="sd">                                         all subfolder and files</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.execute_command_unc"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.execute_command_unc">[docs]</a>    <span class="k">def</span> <span class="nf">execute_command_unc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Executes a PowerShell command on the machine.</span>

<span class="sd">                An instance of the **WindowsOutput** class is returned.</span>

<span class="sd">                Output / Exception messages received from command execution are</span>
<span class="sd">                available as the attributes of the class instance.</span>

<span class="sd">                        output_instance.output              --  raw output returned from the command</span>

<span class="sd">                        output_instance.formatted_output    --  o/p received after parsing the raw output</span>

<span class="sd">                        output_instance.exception           --  raw exception message</span>

<span class="sd">                        output_instance.exception_message   --  parsed exception message from the raw o/p</span>


<span class="sd">        Args:</span>

<span class="sd">                command     (str)   --  PowerShell command to be executed on the machine</span>
<span class="sd">                path        (str)   --  UNC path on which command will be executed</span>

<span class="sd">        Returns:</span>

<span class="sd">                object  -   instance of WindowsOutput class</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.windows_operation"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.windows_operation">[docs]</a>    <span class="k">def</span> <span class="nf">windows_operation</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">user</span><span class="p">,</span>
            <span class="n">path</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">permission</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">get_acl</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">modify_acl</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">folder</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">remove</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">inheritance</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Windows specific operations</span>

<span class="sd">        Args:</span>
<span class="sd">            user            (str)   --  User for which ACEs are required</span>

<span class="sd">            path            (str)   --  File or folder path</span>

<span class="sd">            action          (str)   --  Allow or deny for ACEs</span>

<span class="sd">            permission      (str)   --  Permission to set or remove to file</span>

<span class="sd">            get_acl          (bool)  --  To get ACEs of a file for particular user</span>

<span class="sd">            modify_acl       (bool)  --  To add or remove particular ACE for file</span>

<span class="sd">            folder          (bool)  --  To modify  ACE of folder , default is for file</span>

<span class="sd">            remove             (bool)  --  To remove the ACE, default is to add</span>

<span class="sd">            inheritance       (str)  -- 0 - permission will be set only to target folder</span>
<span class="sd">                                        1- Permission will be set to target folder and only to child folder</span>
<span class="sd">                                        2 -permission will be to target folder, all subfolder and files</span>
<span class="sd">        Returns:</span>
<span class="sd">            output       -- Depends on the task</span>

<span class="sd">        Raises:</span>
<span class="sd">                Exception, if the powershell command execution fails</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_cpu_usage"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_cpu_usage">[docs]</a>    <span class="k">def</span> <span class="nf">get_cpu_usage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">,</span> <span class="n">interval</span><span class="p">,</span> <span class="n">totaltime</span><span class="p">,</span> <span class="n">processname</span><span class="p">,</span> <span class="n">outputpath</span><span class="p">,</span> <span class="n">wait_for_completion</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets the CPU usage for a process on the remote machine in given intervals for given total time.</span>

<span class="sd">        Args:</span>
<span class="sd">            client (obj)           -- Client object for a remote machine</span>
<span class="sd">            interval (int)         -- interval in seconds for which it will get the cpu usage for a process</span>
<span class="sd">            totaltime (int)        -- total time in minutes for which it will get the cpu usage for a process</span>
<span class="sd">            processname (str)      -- Process name for which cpu usage to be generated.</span>
<span class="sd">            outputpath  (str)      -- Output path to which the generated output to be written</span>
<span class="sd">            wait_for_completion (boolean)   -- Waits until the command completes</span>

<span class="sd">        Return: Return True if the command is executed</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.compare_meta_data"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.compare_meta_data">[docs]</a>    <span class="k">def</span> <span class="nf">compare_meta_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_path</span><span class="p">,</span> <span class="n">destination_path</span><span class="p">,</span> <span class="n">dirtime</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">skiplink</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Compares the meta data of source path with destination path</span>
<span class="sd">            and checks if they are same.</span>

<span class="sd">         Args:</span>
<span class="sd">            source_path         (str)   -- source path to compare</span>

<span class="sd">            destination_path    (str)   -- destination path to compare</span>

<span class="sd">            dirtime             (bool)  --  whether to get</span>
<span class="sd">                                        time stamp of all directories</span>

<span class="sd">                default: False</span>

<span class="sd">            skiplink            (bool)  --  whether to skip</span>
<span class="sd">                                        link count of all files</span>

<span class="sd">                default: False</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool, str   -   Returns True, if metadata of source and destination are same</span>
<span class="sd">                diff output between source and destination</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                if any error occurred</span>
<span class="sd">                    while comparing the meta data of paths.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.add_minutes_to_system_time"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.add_minutes_to_system_time">[docs]</a>    <span class="k">def</span> <span class="nf">add_minutes_to_system_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minutes</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds specified number of minutes to current system time</span>
<span class="sd">            Args:</span>
<span class="sd">                minutes(int)   -- Minutes to add</span>
<span class="sd">                    Default - 1</span>

<span class="sd">            Raises:</span>
<span class="sd">                Exception, if the powershell command execution fails</span>

<span class="sd">            Returns:</span>
<span class="sd">                String name of the owner result&quot;&quot;&quot;</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.add_days_to_system_time"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.add_days_to_system_time">[docs]</a>    <span class="k">def</span> <span class="nf">add_days_to_system_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds specified number of days to current system time</span>
<span class="sd">            Args:</span>
<span class="sd">                days(int)   -- Days to add</span>
<span class="sd">                    Default - 1</span>

<span class="sd">            Raises:</span>
<span class="sd">                Exception, if the powershell command execution fails</span>

<span class="sd">            Returns:</span>
<span class="sd">                String name of the owner result&quot;&quot;&quot;</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_active_cluster_node"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_active_cluster_node">[docs]</a>    <span class="k">def</span> <span class="nf">get_active_cluster_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cluster_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This method return active windows cluster active node</span>

<span class="sd">        Args:</span>
<span class="sd">            cluster_name          (str)   --   Cluster client name</span>

<span class="sd">        Returns:</span>
<span class="sd">            active_node     -   returns Active node Cluster</span>

<span class="sd">        Raises:</span>
<span class="sd">            None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_cluster_nodes"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_cluster_nodes">[docs]</a>    <span class="k">def</span> <span class="nf">get_cluster_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cluster_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns all cluster nodes</span>

<span class="sd">        Args:</span>
<span class="sd">            cluster_name          (str)   --   Cluster client name</span>

<span class="sd">        Returns:</span>
<span class="sd">            nodes        (list)     --   Returns all cluster nodes</span>

<span class="sd">        Raises:</span>
<span class="sd">            None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.do_failover"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.do_failover">[docs]</a>    <span class="k">def</span> <span class="nf">do_failover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">activenode</span><span class="p">,</span> <span class="n">passivenode</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Run Failover method switch between cluster nodes</span>

<span class="sd">        Args:</span>
<span class="sd">            activenode          (str)   --   Active cluster node</span>

<span class="sd">            passivenode          (str)  --   Passive  cluster node</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>

<span class="sd">        Raises:</span>
<span class="sd">            None</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_file_owner"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_file_owner">[docs]</a>    <span class="k">def</span> <span class="nf">get_file_owner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the owner of the file</span>
<span class="sd">            Args:</span>
<span class="sd">                file_path(str)   -- Path of the file</span>

<span class="sd">            Returns:</span>
<span class="sd">                String name of the owner result&quot;&quot;&quot;</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_subnet"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_subnet">[docs]</a>    <span class="k">def</span> <span class="nf">get_subnet</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Get Subnet mask of the machine</span>

<span class="sd">        Returns:</span>
<span class="sd">            (str) Subnet Mask of machine</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Method not implemented by the child Class&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_default_gateway"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_default_gateway">[docs]</a>    <span class="k">def</span> <span class="nf">get_default_gateway</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Get Default Gateway of the machine</span>

<span class="sd">        Returns:</span>
<span class="sd">            (str) Default Gateway</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Method not implemented by the child Class&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.is_dhcp_enabled"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.is_dhcp_enabled">[docs]</a>    <span class="k">def</span> <span class="nf">is_dhcp_enabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Whether DHCP is enabled on the machine</span>
<span class="sd">        Returns: (bool) DHCP enabled</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Method not implemented by the child Class&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_dns_servers"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_dns_servers">[docs]</a>    <span class="k">def</span> <span class="nf">get_dns_servers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Gets all DNS servers from the machine</span>
<span class="sd">        Returns: (list) DNS servers</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Method not implemented by the child Class&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.add_host_file_entry"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.add_host_file_entry">[docs]</a>    <span class="k">def</span> <span class="nf">add_host_file_entry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hostname</span><span class="p">,</span> <span class="n">ip_addr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Add an entry to host file</span>

<span class="sd">        Args:</span>
<span class="sd">            hostname (str): hostname of the entry</span>

<span class="sd">            ip_addr (str): ip address to assign to the hostname</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception if host file change fails</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Method not implemented by the child Class&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.remove_host_file_entry"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.remove_host_file_entry">[docs]</a>    <span class="k">def</span> <span class="nf">remove_host_file_entry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hostname</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Remove the host file entry by hostname</span>

<span class="sd">        Args:</span>
<span class="sd">            hostname    (str): hostname of the entry to be removed</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception if host file entry change fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Method not implemented by the child Class&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_logs_for_job_from_file"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_logs_for_job_from_file">[docs]</a>    <span class="k">def</span> <span class="nf">get_logs_for_job_from_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">log_file_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">search_term</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;From a log file object only return those log lines for a particular job ID.</span>

<span class="sd">        Args:</span>
<span class="sd">            job_id          (str)   --  Job ID for which log lines need to be fetched.</span>
<span class="sd">                default -   None</span>

<span class="sd">            log_file_name   (bool)  --  Name of the log file.</span>
<span class="sd">                default -   None</span>

<span class="sd">            search_term     (str)   --  Only capture those log lines containing the search term.</span>
<span class="sd">                default -   None</span>

<span class="sd">        Returns:</span>
<span class="sd">            str     -   \r\n separated string containing the requested log lines.</span>

<span class="sd">            None    -   If no log lines were found for the given job ID or containing the given search term.</span>

<span class="sd">        Raises:</span>
<span class="sd">            None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Method not implemented by the child Class&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_event_viewer_logs_message"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_event_viewer_logs_message">[docs]</a>    <span class="k">def</span> <span class="nf">get_event_viewer_logs_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newest_n</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">         Fetches the message body for n newest event viewer logs with Source as &quot;ContentStore&quot;</span>

<span class="sd">         Args:</span>
<span class="sd">             newest_n (int) : Newest n log messages that have to be fetched</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception, if the powershell command execution fails</span>

<span class="sd">        Returns: Message body for n newest event viewer Application logs with source ContentStore</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Method not implemented by the child Class&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.list_shares_on_network_path"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.list_shares_on_network_path">[docs]</a>    <span class="k">def</span> <span class="nf">list_shares_on_network_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network_path</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Lists the shares on an UNC path</span>

<span class="sd">        Args:</span>
<span class="sd">                network_path    (str)   --  network path of fileserver</span>

<span class="sd">                username        (str)   --  username to access the network path</span>

<span class="sd">                Ex: DOMAIN\\\\USERNAME</span>

<span class="sd">                password        (str)   --  password for above mentioned user</span>

<span class="sd">            Returns:</span>
<span class="sd">                list    -       List of shares on the given network path</span>

<span class="sd">            Raises:</span>
<span class="sd">                Exception(Exception Name):</span>

<span class="sd">                    if failed to mount network path</span>

<span class="sd">                    if command returns an exception</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.modify_test_data"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.modify_test_data">[docs]</a>    <span class="k">def</span> <span class="nf">modify_test_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                         <span class="n">data_path</span><span class="p">,</span>
                         <span class="n">rename</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                         <span class="n">modify</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                         <span class="n">acls</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                         <span class="n">xattr</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                         <span class="n">permissions</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                         <span class="n">slinks</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                         <span class="n">hlinks</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                         <span class="n">options</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Modifies the test data at the given path</span>
<span class="sd">            based on the specified options</span>

<span class="sd">        Args:</span>
<span class="sd">            data_path   (str)   --  directory path where</span>
<span class="sd">                                    dataset resides.</span>

<span class="sd">            rename              (bool)  --  whether to rename all files</span>

<span class="sd">                default: False</span>

<span class="sd">            modify              (bool)  --  whether to modify</span>

<span class="sd">                                            data of all files</span>
<span class="sd">                default: False</span>

<span class="sd">            hlinks              (bool)  --  whether to add hard link</span>
<span class="sd">                                            to all files</span>

<span class="sd">                default: False</span>

<span class="sd">            permissions         (bool)  --  whether to change permission</span>
<span class="sd">                                            of all files</span>

<span class="sd">                default: False</span>

<span class="sd">            slinks              (bool)  --  whether to add symbolic link</span>
<span class="sd">                                            to all files</span>

<span class="sd">                default: False</span>

<span class="sd">            acls                (bool)  --  whether to change</span>
<span class="sd">                                            acls of all files</span>

<span class="sd">                default: False</span>

<span class="sd">            xattr               (bool)  --  whether to change</span>
<span class="sd">                                            xattr of all files</span>

<span class="sd">                default: False</span>

<span class="sd">            options             (str)   --  to specify any other</span>
<span class="sd">                                            additional parameters</span>
<span class="sd">                                            to the script.</span>

<span class="sd">                default: &quot;&quot;</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool    -   boolean value True is returned</span>
<span class="sd">                        if no errors during data generation.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                if any error occurred while modifying the test data.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_items_list"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_items_list">[docs]</a>    <span class="k">def</span> <span class="nf">get_items_list</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">data_path</span><span class="p">,</span>
            <span class="n">sorted_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">include_parents</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets the list of items at the given path.</span>

<span class="sd">        Args:</span>
<span class="sd">            data_path           (str)    --  directory path</span>
<span class="sd">                                             to get the items list</span>

<span class="sd">            sorted              (bool)   --  to specify whether</span>
<span class="sd">                                             the list should be sorted.</span>

<span class="sd">                default: True</span>

<span class="sd">            include_parents     (bool)   --  to specify whether</span>
<span class="sd">                                             parent paths should be include</span>

<span class="sd">                default: False</span>

<span class="sd">        Returns:</span>
<span class="sd">            list    -   list of the items</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                if any error occurred while getting the items list.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.compare_checksum"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.compare_checksum">[docs]</a>    <span class="k">def</span> <span class="nf">compare_checksum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_path</span><span class="p">,</span> <span class="n">destination_path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Compares the checksum of source path with destination path and checks if they are same.</span>

<span class="sd">         Args:</span>
<span class="sd">            source_path         (str)   --  source path of the folder to compare</span>

<span class="sd">            destination_path    (str)   --  destination path of the folder to compare</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple   -   tuple consisting of a boolean and a string, where:</span>

<span class="sd">                bool:</span>

<span class="sd">                    returns True if the lists are identical</span>

<span class="sd">                    returns False if the contents of the lists are different</span>

<span class="sd">                str:</span>

<span class="sd">                    empty string in case of True, otherwise string consisting of the</span>
<span class="sd">                    differences b/w the 2 lists separated by new-line</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                if any error occurred while comparing the checksum of paths</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.move_file"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.move_file">[docs]</a>    <span class="k">def</span> <span class="nf">move_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_path</span><span class="p">,</span> <span class="n">destination_path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Moves a file item from source_path to destination_path</span>

<span class="sd">                Args:</span>
<span class="sd">                    source_path   (str)   --  full path of the file to be moved(including file name).</span>

<span class="sd">                    destination_path    (str) -- full path of the destination where file to be moved.</span>

<span class="sd">                Returns:</span>
<span class="sd">                    None    -   if the file was moved successfully</span>

<span class="sd">                Raises:</span>
<span class="sd">                    Exception:</span>
<span class="sd">                        if no file exists at the given path</span>

<span class="sd">                        if failed to move the file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Method not implemented by the child Class&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.modify_item_datetime"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.modify_item_datetime">[docs]</a>    <span class="k">def</span> <span class="nf">modify_item_datetime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">creation_time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">modified_time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">access_time</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Changes the last Access time and Modified time of files in unix and windows.</span>
<span class="sd">        Also changes creation time in windows.</span>

<span class="sd">            Args:</span>
<span class="sd">                path   (str)   --   full path of a file or folder</span>

<span class="sd">                creation_time    (datetime)   --  Create time</span>
<span class="sd">                    default -   None</span>

<span class="sd">                modified_time    (datetime)   --  Write time</span>
<span class="sd">                    default -   None</span>

<span class="sd">                access_time      (datetime)   --  Access time</span>
<span class="sd">                    default -   None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Method not implemented by the child Class&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_vm_ip"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_vm_ip">[docs]</a>    <span class="k">def</span> <span class="nf">get_vm_ip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vm_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        To get ip address of a VM</span>

<span class="sd">        Args:</span>
<span class="sd">            vm_name         (str)   -- Name of the VM</span>

<span class="sd">        Returns:</span>
<span class="sd">            ip address of the vm</span>
<span class="sd">       &quot;&quot;&quot;</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.share_directory"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.share_directory">[docs]</a>    <span class="k">def</span> <span class="nf">share_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        To share a directory using NET SHARE</span>
<span class="sd">        Args:</span>
<span class="sd">            share_name (str) -- Custom name for the share</span>
<span class="sd">            directory (str) -- Full network path of the directory to be shared</span>
<span class="sd">            **kwargs (dict) -- Available kwargs Options:</span>

<span class="sd">                    user     (str)   -- User to grant the permission to (default : everyone)</span>

<span class="sd">                    permission (str) -- permission to be granted to the user (default : FULL)</span>
<span class="sd">                                        (Options : READ | CHANGE | FULL)</span>
<span class="sd">        Returns:</span>
<span class="sd">            None: if folder is shared successfully</span>
<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                if command to share fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.unshare_directory"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.unshare_directory">[docs]</a>    <span class="k">def</span> <span class="nf">unshare_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">share_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        To unshare a directory</span>
<span class="sd">        Args:</span>
<span class="sd">            share_name(str) -- The share name of the net share to be unshared</span>
<span class="sd">        Returns:</span>
<span class="sd">            None: if folder is unshared successfully</span>
<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                if command to unshare fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.lock_file"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.lock_file">[docs]</a>    <span class="k">def</span> <span class="nf">lock_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Locks a file on the client machine, thus causing the file to get failed during backup without VSS.</span>
<span class="sd">        To unlock the file locked using this method, execute the PS command Stop-Process -Id &lt;Process_ID&gt;</span>

<span class="sd">        Args:</span>
<span class="sd">            file    (str)   --  Name of the file that needs to be locked.</span>

<span class="sd">            \*\*kwargs  (dict)  --  Optional arguments</span>

<span class="sd">            Available kwargs Options:</span>
<span class="sd">                interval        (int)   :   Specifies the interval (in seconds) for which the file needs to be locked.</span>

<span class="sd">                    default : 60 (in seconds)</span>

<span class="sd">                file_list       (list)  :   Specifies a list of files which need to be locked.</span>

<span class="sd">                shared_read_write   (bool) : Opens a handle on the file in shared read and shared write mode, leaving</span>
<span class="sd">                the file to be backed up partially, i.e. file is backed up as it&#39;s being updated.</span>

<span class="sd">        Returns:</span>
<span class="sd">            int  - Process ID of the PS Session that has locked the file.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                If an error occurred when trying to lock the file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_logs_after_time_t"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_logs_after_time_t">[docs]</a>    <span class="k">def</span> <span class="nf">get_logs_after_time_t</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">log_file_name</span><span class="p">,</span> <span class="n">time_t</span><span class="p">,</span> <span class="n">search_function</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Fetches logs line after time t, and containing search_function</span>

<span class="sd">            Args:</span>
<span class="sd">                log_file_name     (str)   --  log_file name</span>

<span class="sd">                time_t          (datetime) -- time after which logs required</span>

<span class="sd">                search_function (str)     --  any function name to be searched on log lines</span>

<span class="sd">            Returns:</span>
<span class="sd">                required_log_lines (list) --  list of log lines qualified from search</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.mount_network_path"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.mount_network_path">[docs]</a>    <span class="k">def</span> <span class="nf">mount_network_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network_path</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Mounts the specified network path on this machine.</span>

<span class="sd">        Args:</span>
<span class="sd">            network_path    (str)   --  network path to be mounted on this machine</span>

<span class="sd">            username        (str)   --  username to access the network path</span>

<span class="sd">                Ex: DOMAIN\\\\USERNAME</span>

<span class="sd">            password        (str)   --  password for above mentioned user</span>


<span class="sd">        Returns:</span>
<span class="sd">            str     -   drive letter where the network path is mounted</span>


<span class="sd">        Raises:</span>
<span class="sd">            Exception(Exception_Code, Exception_Message):</span>
<span class="sd">                if failed to mount network path</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_test_data_info"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_test_data_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_test_data_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                           <span class="n">data_path</span><span class="p">,</span>
                           <span class="n">name</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">meta</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">checksum</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">acls</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">xattr</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">dirtime</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">skiplink</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">machinesort</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">options</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                           <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets information about the items on the given path</span>
<span class="sd">            based on the given options</span>

<span class="sd">        Args:</span>
<span class="sd">            data_path             (str)   --  directory path from where</span>
<span class="sd">                                              the data should be retrieved.</span>

<span class="sd">            name                  (bool)  --  whether to get</span>
<span class="sd">                                              name of all the files</span>

<span class="sd">                default: False</span>

<span class="sd">            meta                  (bool)  --  whether to get</span>
<span class="sd">                                              meta data of all files</span>

<span class="sd">                default: True</span>

<span class="sd">            checksum              (bool)  --  whether to get</span>
<span class="sd">                                              OS checksum of all files</span>

<span class="sd">                default: False</span>

<span class="sd">            machinesort           (bool)  --  whether to sort</span>
<span class="sd">                                              the results on the machine</span>

<span class="sd">                default: False</span>

<span class="sd">            acls                  (bool)  --  whether to get</span>
<span class="sd">                                              acls of all files</span>

<span class="sd">                default: False</span>

<span class="sd">            xattr                 (bool)  --  whether to get</span>
<span class="sd">                                              xattr of all files</span>

<span class="sd">                default: False</span>

<span class="sd">            dirtime               (bool)  --  whether to get</span>
<span class="sd">                                              time stamp of all directories</span>

<span class="sd">                default: False</span>

<span class="sd">            skiplink              (bool)  --  whether to skip</span>
<span class="sd">                                              link count of all files</span>

<span class="sd">                default: False</span>

<span class="sd">            options               (str)   --  to specify any other</span>
<span class="sd">                                              additional parameters</span>
<span class="sd">                                              to the script.</span>

<span class="sd">                default: &quot;&quot;</span>

<span class="sd">            **kwargs  (dict)  --  Optional arguments</span>

<span class="sd">            Available kwargs Options:</span>

<span class="sd">                custom_meta_list (str)       :   Only return the item properties specified by the value of this argument.</span>
<span class="sd">                Accepts CSV string with supported values being LastWriteTime, LastAccessTime and CreationTime.</span>


<span class="sd">        Returns:</span>
<span class="sd">            list    -   list of output lines while executing the script.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                if any error occurred while getting the data information.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.start_all_cv_services"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.start_all_cv_services">[docs]</a>    <span class="k">def</span> <span class="nf">start_all_cv_services</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Start all Commvault services using username/password method since SDK cannot talk to the machine</span>
<span class="sd">        when services are down. Use SDK service control methods if services are already running.</span>

<span class="sd">            Returns:</span>
<span class="sd">                None</span>

<span class="sd">            Raises:</span>
<span class="sd">                Exception while trying to execute command to start the service</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Machine.get_api_response_locally"><a class="viewcode-back" href="../../source/AutomationUtils.html#AutomationUtils.machine.Machine.get_api_response_locally">[docs]</a>    <span class="k">def</span> <span class="nf">get_api_response_locally</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">api_url</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Executes api locally and returns response as string</span>

<span class="sd">                Args:</span>

<span class="sd">                    api_url         (str)       --  API url</span>

<span class="sd">                Returns:</span>

<span class="sd">                    Str         --      API response</span>

<span class="sd">                Raises:</span>

<span class="sd">                    Exception:</span>

<span class="sd">                            if failed to get response</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Method Not Implemented by the Child Class&#39;</span><span class="p">)</span></div></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright Commvault Systems Inc. All Rights Reserved

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>