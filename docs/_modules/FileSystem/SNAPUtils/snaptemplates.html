

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>FileSystem.SNAPUtils.snaptemplates &mdash; Commvault Automation 11.20 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> Commvault Automation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"></div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Commvault Automation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>FileSystem.SNAPUtils.snaptemplates</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for FileSystem.SNAPUtils.snaptemplates</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="c1"># --------------------------------------------------------------------------</span>
<span class="c1"># Copyright Commvault Systems, Inc.</span>
<span class="c1"># See LICENSE.txt in the project root for</span>
<span class="c1"># license information.</span>
<span class="c1"># --------------------------------------------------------------------------</span>

<span class="sd">&quot;&quot;&quot;Template file for performing IntelliSnap operations</span>

<span class="sd">SNAPTemplate is the only class defined in this file</span>

<span class="sd">SNAPTemplate: Template class to perform IntelliSnap operations</span>

<span class="sd">SNAPTemplate:</span>

<span class="sd">    __init__()                   --  initializes Snap constant object</span>

<span class="sd">    Snap_Template1()             --  Template to Perform Snap backup and Restore opertaions</span>
<span class="sd">    Steps:</span>
<span class="sd">        1. Add hardware Array details to array management and update the snapconfig details.</span>
<span class="sd">        2. Create Restore/Mountpath/disk liberary location and Create entites like library,</span>
<span class="sd">           storage policy, backupset, subclient, snap and aux copy and enable intellisnap</span>
<span class="sd">           on subclient.</span>
<span class="sd">        3. add test data folder in the subclient content.</span>
<span class="sd">        4. start a Full snap backup job and kill it after snap phase completes to verify snap aging</span>
<span class="sd">        5. Raun DA.</span>
<span class="sd">        6. Run Full Snapbackup job with catalog, Vplex validations for vplex engines.</span>
<span class="sd">        7. Outplace restore from snap backup and validation.</span>
<span class="sd">        8. Modify data on the source, and Run Incremental snap job with catalog.</span>
<span class="sd">        9. Inplace restore from snap backup and validation.</span>
<span class="sd">        10. Mount snap and validate.</span>
<span class="sd">        11. Unmount snap and validate.</span>
<span class="sd">        12. Run backup copy.</span>
<span class="sd">        13. Outplace restore from backup copy and validation.</span>
<span class="sd">        14. Second Full Snap backup with catalog and inline backup copy.</span>
<span class="sd">        15. Delete source data and Run Incremental snap backup with catalog and inline backup copy.</span>
<span class="sd">        16. Outplace restore from snap backup using &#39;show deleted items&#39; enabled for each path</span>
<span class="sd">            and Validation.</span>
<span class="sd">        17. Outplace restore of entire path from snap backup and validation.</span>
<span class="sd">        18. Run Aux copy and Outplace restore from aux copy with validation.</span>
<span class="sd">        19. Revert Snap for supported Engines and validation.</span>
<span class="sd">        20. Delete Snap and validations.</span>
<span class="sd">        21. Aging validation on snap copy.</span>
<span class="sd">        22. Cleanup entites which is been created in step 2.</span>
<span class="sd">        23. Delete Hardware array from array management.</span>


<span class="sd">    snap_template2()             --  Template to Perform Intellisnap Replication operations</span>
<span class="sd">    Steps:</span>
<span class="sd">        1. Add source and target hardware Array and OCUM details in case of NetApp to array</span>
<span class="sd">           management and update the snapconfig details on source and target.</span>
<span class="sd">        2. Create Restore/Mountpath/disk liberary location and Create entites like library,</span>
<span class="sd">           storage policy, backupset, subclient, snap, aux copy and replica/ vault/mirror copies</span>
<span class="sd">           and enable intellisnap on subclient.</span>
<span class="sd">        3. add test data folder in the subclient content.</span>
<span class="sd">        4. Run Full Snapbackup job with skip catalog.</span>
<span class="sd">        5. Outplace restore from snap backup and validation.</span>
<span class="sd">        6. Run Incremental Snapbackup job with skip catalog.</span>
<span class="sd">        7. Run Aux Copy.</span>
<span class="sd">        8. Mount Snap and its Validation from FIRST node copy and validation.</span>
<span class="sd">        9. UnMount Snap and its Validation from FIRST node copy and validation.</span>
<span class="sd">        10. Mount Snap and its Validation from SECOND node copy in 3 node configurations</span>
<span class="sd">            and validation.</span>
<span class="sd">        11. UnMount Snap and its Validation from SECOND node copy in 3 node configurations</span>
<span class="sd">            and validation.</span>
<span class="sd">        12. Revert snap from primary Snap and validation for supported engines.</span>
<span class="sd">        13. OutPlace Restore from FIRST node Snap backup and validations.</span>
<span class="sd">        14. InPlace Restore from FIRST node Snap Backup and validations.</span>
<span class="sd">        15. Enable backup copy and snapshot cataloging on the storage policy.</span>
<span class="sd">        16. Run Snapshot Cataloging.</span>
<span class="sd">        17. OutPlace Restore from First node Snap backup after Catalog and validation.</span>
<span class="sd">        18. Run SECOND FULL and SECOND INCREMENTAL Snap Backup job.</span>
<span class="sd">        19. Run Aux Copy.</span>
<span class="sd">        20. Outplace restore from second node copy and validation.</span>
<span class="sd">        21. Run THIRD FULL and THIRD INCREMENTAL Snap Backup job in 3 node configs.</span>
<span class="sd">        22. Run aux copy.</span>
<span class="sd">        23. Run Backup copy from Storage Policy.</span>
<span class="sd">        24. Run OutPlace Restore from Backup Copy and validations.</span>
<span class="sd">        25. Run Snapshot Cataloging and aux copy from Storage Policy.</span>
<span class="sd">        26. Delete snap from Primary/ first node / second node copies and validations.</span>
<span class="sd">        27. Force delete snap in case of open replication as it will fail with snapmirror</span>
<span class="sd">            dependency.</span>
<span class="sd">        28. data aging validations on primary/ first/ second node copies.</span>
<span class="sd">        29. cleanup of entities created in step2.</span>
<span class="sd">        30. delete arrays and ocum details from the array management.</span>


<span class="sd">    snap_template3()             --  Template to Perform Intellisnap Replication operations for</span>
<span class="sd">                                     Netapp FANOUT and All Copies Configuration</span>
<span class="sd">    Steps:</span>
<span class="sd">        1. Add source and target hardware Array and OCUM details in case of NetApp to array</span>
<span class="sd">           management and update the snapconfig details on source and target.</span>
<span class="sd">        2. Create Restore/Mountpath/disk liberary location and Create entites like library,</span>
<span class="sd">           storage policy, backupset, subclient, snap, aux copy and replica/ vault/mirror copies</span>
<span class="sd">           and enable intellisnap on subclient.</span>
<span class="sd">        3. add test data folder in the subclient content.</span>
<span class="sd">        4. Run Full Snapbackup job with skip catalog.</span>
<span class="sd">        5. Run Incremental Snapbackup job with skip catalog.</span>
<span class="sd">        6. Run Aux copy.</span>
<span class="sd">        7. Restore from each fanout secondary snap copies and validate.</span>
<span class="sd">        8. enable backup copy and snapshot catalog on the storage policy.</span>
<span class="sd">        9. Run backup copy on storage policy.</span>
<span class="sd">        10. Run OutPlace Restore from Backup Copy and validations.</span>
<span class="sd">        11. Run SECOND full and SECOND incremental snap backup with skip catalog.</span>
<span class="sd">        12. Run Aux copy.</span>
<span class="sd">        13. Run Snapshot catalog.</span>
<span class="sd">        14. Run Inplace restore from First node copy after snapshot catalog and validation.</span>
<span class="sd">        15. Run Backup copy.</span>
<span class="sd">        16. delete snapshots from each copy and validate.</span>
<span class="sd">        17. Force delete snaps in case of Open Replication as it will fail with snapmirror</span>
<span class="sd">            dependency.</span>
<span class="sd">        18. data aging validations on Primary snap and all the secondary snap fanout copies.</span>
<span class="sd">        19. cleanup of entities created in step2.</span>
<span class="sd">        20. delete arrays and ocum details from the array management.</span>


<span class="sd">    snap_template3()             --  Snap Template4 to Perform New Copy Creation Wizard and Snap</span>
<span class="sd">                                     Operations using Tape, NAS attached, Mag libraries.</span>
<span class="sd">                                     Deduplication and Non-deduplication pools. with and with out</span>
<span class="sd">                                     On Command System Manager etc</span>
<span class="sd">    Steps:</span>
<span class="sd">        1. Create Storage policy using above said libraries.</span>
<span class="sd">        2. Create Snap Copy if OCUM Server is not provided else not.</span>
<span class="sd">        3. Create Vault/Replica Copy if OCUM Server is not provided else Create Vault copy using</span>
<span class="sd">           Resource Pool and Provisioning Policy.</span>
<span class="sd">        4. Enable Backup copy option if OCUM Server is provided else not.</span>
<span class="sd">        5. Create Backupset, Subclient and Enable Intellisnap on Subclient.</span>
<span class="sd">           Add data to the subclient content.</span>
<span class="sd">        6. Run Full Snap Backup Followed by Aux Copy and Backup Copy.</span>
<span class="sd">        7. Browse and Restore from Snap followed by from Backup Copy and Aux Copy.</span>
<span class="sd">        8. Delete backupset, Storage Policy.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">base64</span> <span class="kn">import</span> <span class="n">b64encode</span>
<span class="kn">from</span> <span class="nn">FileSystem.SNAPUtils.snaphelper</span> <span class="kn">import</span> <span class="n">SNAPHelper</span>
<span class="kn">from</span> <span class="nn">AutomationUtils</span> <span class="kn">import</span> <span class="n">logger</span>
<span class="n">importError</span> <span class="o">=</span> <span class="kc">False</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">FileSystem.SNAPUtils.snaparrayhelper</span> <span class="kn">import</span> <span class="n">SNAPverify</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">importError</span> <span class="o">=</span> <span class="kc">True</span>


<div class="viewcode-block" id="SNAPTemplate"><a class="viewcode-back" href="../../../source/FileSystem.SNAPUtils.html#FileSystem.SNAPUtils.snaptemplates.SNAPTemplate">[docs]</a><span class="k">class</span> <span class="nc">SNAPTemplate</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Helper class to perform snap operations&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">commcell</span><span class="p">,</span> <span class="n">client</span><span class="p">,</span> <span class="n">agent</span><span class="p">,</span> <span class="n">tcinputs</span><span class="p">,</span> <span class="n">snapconstants</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initializes Snaphelper object and gets the commserv database object if not specified</span>

<span class="sd">            Args:</span>
<span class="sd">                commcell        (object)    --  commcell object</span>

<span class="sd">                client          (object)    --  client object</span>

<span class="sd">                agent           (object)    --  agent object</span>

<span class="sd">                tcinputs        (dict)      --  Test case inputs dictionary</span>

<span class="sd">                snapconstants   (object)    --  snapconstants object</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span> <span class="o">=</span> <span class="n">SNAPHelper</span><span class="p">(</span><span class="n">commcell</span><span class="p">,</span> <span class="n">client</span><span class="p">,</span> <span class="n">agent</span><span class="p">,</span> <span class="n">tcinputs</span><span class="p">,</span> <span class="n">snapconstants</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span> <span class="o">=</span> <span class="n">commcell</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">client</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">agent</span> <span class="o">=</span> <span class="n">agent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span> <span class="o">=</span> <span class="n">snapconstants</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span> <span class="o">=</span> <span class="n">tcinputs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">get_log</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">importError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapverify</span> <span class="o">=</span> <span class="n">SNAPverify</span><span class="p">(</span><span class="n">commcell</span><span class="p">,</span> <span class="n">client</span><span class="p">,</span> <span class="n">agent</span><span class="p">,</span> <span class="n">tcinputs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Skipping Verification due to import error. Please check library imports in snaparrayhelper &quot;</span>
                          <span class="s2">&quot;file&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="SNAPTemplate.snap_template1"><a class="viewcode-back" href="../../../source/FileSystem.SNAPUtils.html#FileSystem.SNAPUtils.snaptemplates.SNAPTemplate.snap_template1">[docs]</a>    <span class="k">def</span> <span class="nf">snap_template1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Snap Template1 to Perform Snap backup and Restore opertaions</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">pre_cleanup</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Adding Arrays&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">add_array</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_engine_at_array</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Dell EMC VNX / CLARiiON&quot;</span><span class="p">,</span> <span class="s2">&quot;Fujitsu ETERNUS AF / DX&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">config_update_level</span> <span class="o">=</span> <span class="s2">&quot;subclient&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">config_update_level</span> <span class="o">==</span> <span class="s2">&quot;array&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">source_config</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">edit_array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">arrayname</span><span class="p">,</span>
                                           <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">source_config</span><span class="p">,</span>
                                           <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">config_update_level</span><span class="p">,</span>
                                           <span class="n">array_access_node</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">array_access_nodes_to_edit</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">vplex_engine</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="sd">&quot;&quot;&quot; Adding First Backeend arrays &quot;&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Adding backend array for Snap Engine: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;BackendSnapEngineAtArray&#39;</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">arrayname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;BackendArrayName1&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;BackendArrayUserName1&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">b64encode</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;BackendArrayPassword1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">controlhost</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;BackendArrayControlHost1&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_engine_at_array</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;BackendSnapEngineAtArray&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">add_array</span><span class="p">()</span>

            <span class="sd">&quot;&quot;&quot; Adding Second Backend array &quot;&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Adding Second backend array for Snap Engine: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;BackendSnapEngineAtArray&#39;</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">arrayname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;BackendArrayName2&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;BackendArrayUserName2&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">b64encode</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;BackendArrayPasswd2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">controlhost</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;BackendControlHost2&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">add_array</span><span class="p">()</span>

        <span class="sd">&quot;&quot;&quot; Re-Set arrayname and engine Name as primary &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">arrayname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;ArrayName&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_engine_at_array</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;SnapEngineAtArray&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Setup of Intellisnap Entities&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">setup</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">add_test_data_folder</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">config_update_level</span> <span class="o">==</span> <span class="s2">&quot;subclient&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">source_config</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">edit_array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">arrayname</span><span class="p">,</span>
                                           <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">source_config</span><span class="p">,</span>
                                           <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">config_update_level</span><span class="p">,</span>
                                           <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">subclient</span><span class="o">.</span><span class="n">subclient_id</span><span class="p">),</span>
                                           <span class="n">array_access_node</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">array_access_nodes_to_edit</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Kill Job Verification&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">kill_job</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Kill Job Verification Completed&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="n">snapshot_engine_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">get_snapengine_id</span><span class="p">,</span>
            <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_engine_at_subclient</span><span class="p">},</span> <span class="n">fetch_rows</span><span class="o">=</span><span class="s1">&#39;one&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">snapshot_engine_id</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;16&#39;</span><span class="p">,</span> <span class="s1">&#39;33&#39;</span><span class="p">,</span> <span class="s1">&#39;50&#39;</span><span class="p">]:</span>
            <span class="n">spcopy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">spcopy_obj</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
            <span class="n">spcopy</span><span class="o">.</span><span class="n">copy_retention</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">run_data_aging</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running FULL Snap Backup job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="n">full1_job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_backup</span><span class="p">()</span>
        <span class="n">vendor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_engine_at_array</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">importError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapverify</span><span class="o">.</span><span class="n">verify_snap_creation</span><span class="p">(</span><span class="n">vendor</span><span class="p">,</span> <span class="n">full1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">vplex_engine</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">vplex_snap_validation</span><span class="p">(</span>
                <span class="n">full1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">source_path</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">test_data_path</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running OutPlace Restore from Snap Backup job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_outplace</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">outplace_validation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_outplace_restore_location</span><span class="p">,</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">client_machine</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">update_test_data</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;edit&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running INCREMENTAL Snap Backup job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">backup_level</span> <span class="o">=</span> <span class="s1">&#39;INCREMENTAL&#39;</span>
        <span class="n">inc1_job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_backup</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">importError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapverify</span><span class="o">.</span><span class="n">verify_snap_creation</span><span class="p">(</span><span class="n">vendor</span><span class="p">,</span> <span class="n">inc1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">source_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">test_data_path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running InPlace Restore from Snap Backup job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_inplace</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">inplace_validation</span><span class="p">(</span><span class="n">inc1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
                                           <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">,</span>
                                           <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">test_data_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Mount Snap and its Validation&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">mount_snap</span><span class="p">(</span><span class="n">inc1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">mount_validation</span><span class="p">(</span><span class="n">inc1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;UnMount Snap and its Validation&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">unmount_snap</span><span class="p">(</span><span class="n">inc1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">unmount_validation</span><span class="p">(</span><span class="n">inc1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running Backup copy from Storage Policy&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">backup_copy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running OutPlace Restore from Backup Copy&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">source_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">test_data_path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">tape_outplace</span><span class="p">(</span><span class="n">inc1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">inc1_job</span><span class="o">.</span><span class="n">start_time</span><span class="p">,</span> <span class="n">inc1_job</span><span class="o">.</span><span class="n">end_time</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">outplace_validation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">tape_outplace_restore_location</span><span class="p">,</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">windows_restore_client</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running Second FULL Inline Snap Backup job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">backup_level</span> <span class="o">=</span> <span class="s1">&#39;FULL&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">inline_bkp_cpy</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">full2_job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_backup</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">importError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapverify</span><span class="o">.</span><span class="n">verify_snap_creation</span><span class="p">(</span><span class="n">vendor</span><span class="p">,</span> <span class="n">full2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">snapshot_engine_id</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;16&#39;</span><span class="p">,</span> <span class="s1">&#39;33&#39;</span><span class="p">,</span> <span class="s1">&#39;50&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Snap Engine: </span><span class="si">{0}</span><span class="s2"> supports only 3 snaps. &quot;</span>
                          <span class="s2">&quot;Need to age the previous cycle&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                              <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_engine_at_subclient</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">run_pruning</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Snap Engine: </span><span class="si">{0}</span><span class="s2"> Supports more than 3 snaps. &quot;</span>
                          <span class="s2">&quot;No Need to age the previous cycle&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                              <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_engine_at_subclient</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running Second INCREMENTAL Inline Snap Backup job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">update_test_data</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;delete&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">backup_level</span> <span class="o">=</span> <span class="s1">&#39;INCREMENTAL&#39;</span>
        <span class="n">inc2_job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_backup</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">importError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapverify</span><span class="o">.</span><span class="n">verify_snap_creation</span><span class="p">(</span><span class="n">vendor</span><span class="p">,</span> <span class="n">inc2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">test_data_path</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">source_path</span> <span class="o">=</span> <span class="p">[</span><span class="n">path</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running OutPlace Restore from SnapBackup with</span><span class="se">\</span>
<span class="s2">                          Source Path: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_outplace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">fs_options</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">client_machine</span><span class="p">,</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">client_machine</span><span class="p">,</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">deleted_content_location</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_outplace_restore_location</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Restore of deleted data and Validation is</span><span class="se">\</span>
<span class="s2">                      Successful from Snap&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running OutPlace Restore from Snap Backup job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">source_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">test_data_path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_outplace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">full2_job</span><span class="o">.</span><span class="n">start_time</span><span class="p">,</span> <span class="n">full2_job</span><span class="o">.</span><span class="n">end_time</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">inplace_validation</span><span class="p">(</span><span class="n">full2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
                                           <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">,</span>
                                           <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_outplace_restore_location</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running Auxilliary Copy job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">aux_copy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running OutPlace Restore from Aux Copy job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">tape_outplace</span><span class="p">(</span><span class="n">inc2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">inc2_job</span><span class="o">.</span><span class="n">start_time</span><span class="p">,</span> <span class="n">inc2_job</span><span class="o">.</span><span class="n">end_time</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">outplace_validation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">tape_outplace_restore_location</span><span class="p">,</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">windows_restore_client</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">revert_support</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;************* REVERT IS NOT SUPPORTED FOR ENGINE: </span><span class="si">{0}</span><span class="s2">,</span>
<span class="s2">                                                  skipping this operation *********&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                                      <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_engine_at_subclient</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Revert Snap and its Validation&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">revert_snap</span><span class="p">(</span><span class="n">full2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">revert_validation</span><span class="p">(</span><span class="n">full2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Delete Snap and its Validation&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">importError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapverify</span><span class="o">.</span><span class="n">run_and_verify_snap_deletion</span><span class="p">(</span><span class="n">vendor</span><span class="p">,</span> <span class="n">inc2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_snap</span><span class="p">(</span><span class="n">inc2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">inc2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">importError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapverify</span><span class="o">.</span><span class="n">run_and_verify_reconcile</span><span class="p">(</span><span class="n">vendor</span><span class="p">,</span> <span class="n">full2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Data Aging Validation on Snap copy&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">data_aging_validation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Cleanup of Snap Entities&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Deletion of Arrays&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_array</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">vplex_engine</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="sd">&quot;&quot;&quot; Deleting Vplex arrays&quot;&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">arrayname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;BackendArrayName1&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_array</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">arrayname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;BackendArrayName2&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_array</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;SUCCESSFULLY COMPLETED THE TEST CASE&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span></div>

<div class="viewcode-block" id="SNAPTemplate.snap_template2"><a class="viewcode-back" href="../../../source/FileSystem.SNAPUtils.html#FileSystem.SNAPUtils.snaptemplates.SNAPTemplate.snap_template2">[docs]</a>    <span class="k">def</span> <span class="nf">snap_template2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Snap Template2 to Perform Snapshot Replication Operations</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">pre_cleanup</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Adding Arrays&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pv&quot;</span><span class="p">,</span> <span class="s2">&quot;pm&quot;</span><span class="p">,</span> <span class="s2">&quot;pv_replica&quot;</span><span class="p">,</span> <span class="s2">&quot;pm_replica&quot;</span><span class="p">,</span> <span class="s2">&quot;fanout&quot;</span><span class="p">}:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">add_array</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Successfully Added First Array&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_engine_at_array</span> <span class="o">==</span> <span class="s2">&quot;Fujitsu ETERNUS AF / DX&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">config_update_level</span> <span class="o">=</span> <span class="s2">&quot;subclient&quot;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">source_config</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">edit_array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">arrayname</span><span class="p">,</span>
                                           <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">source_config</span><span class="p">,</span>
                                           <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">config_update_level</span><span class="p">,</span>
                                           <span class="n">array_access_node</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">array_access_nodes_to_edit</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">arrayname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;ArrayName2&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;ArrayUserName2&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">b64encode</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;ArrayPassword2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">controlhost</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ArrayControlHost2&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">add_array</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Successfully Added Second Array&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_engine_at_array</span> <span class="o">==</span> <span class="s2">&quot;Fujitsu ETERNUS AF / DX&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">config_update_level</span> <span class="o">=</span> <span class="s2">&quot;subclient&quot;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">target_config</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">edit_array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">arrayname</span><span class="p">,</span>
                                           <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">target_config</span><span class="p">,</span>
                                           <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">config_update_level</span><span class="p">,</span>
                                           <span class="n">array_access_node</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">array_access_nodes_to_edit</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">add_array</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Successfully Added First Array&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">arrayname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;ArrayName2&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;ArrayUserName2&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">b64encode</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;ArrayPassword2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">add_array</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Successfully Added Second Array&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">arrayname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;ArrayName3&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;ArrayUserName3&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">b64encode</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;ArrayPassword3&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">add_array</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Successfully Added Third Array&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pv&quot;</span><span class="p">,</span> <span class="s2">&quot;pm&quot;</span><span class="p">,</span> <span class="s2">&quot;pvm&quot;</span><span class="p">,</span> <span class="s2">&quot;pmv&quot;</span><span class="p">,</span> <span class="s2">&quot;pmm&quot;</span><span class="p">}:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;ADDING OCUM&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">arrayname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;OCUMServerName&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;OCUMUserName&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">b64encode</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;OCUMPassword&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">is_ocum</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">add_array</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Successfully Added OCUM Information&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">arrayname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;ArrayName&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Setup of Intellisnap Entities&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">setup</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">add_test_data_folder</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running FIRST FULL Snap Backup job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">skip_catalog</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">full1_job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_backup</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">source_path</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">test_data_path</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running OutPlace Restore from Snap Backup job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_outplace</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">outplace_validation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_outplace_restore_location</span><span class="p">,</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">client_machine</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running FIRST INCREMENTAL Snap Backup job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">backup_level</span> <span class="o">=</span> <span class="s1">&#39;INCREMENTAL&#39;</span>
        <span class="n">inc1_job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_backup</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running Auxilliary Copy job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pv&quot;</span><span class="p">,</span> <span class="s2">&quot;pm&quot;</span><span class="p">,</span> <span class="s2">&quot;pvm&quot;</span><span class="p">,</span> <span class="s2">&quot;pmv&quot;</span><span class="p">,</span> <span class="s2">&quot;pmm&quot;</span><span class="p">}:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">aux_copy</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">aux_copy</span><span class="p">(</span><span class="n">use_scale</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Mount Snap and its Validation from FIRST node&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">mount_snap</span><span class="p">(</span><span class="n">inc1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">mount_validation</span><span class="p">(</span><span class="n">inc1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;UnMount Snap and its Validation from FIRST node&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">unmount_snap</span><span class="p">(</span><span class="n">inc1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">unmount_validation</span><span class="p">(</span><span class="n">inc1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pv&quot;</span><span class="p">,</span> <span class="s2">&quot;pv_replica&quot;</span><span class="p">,</span> <span class="s2">&quot;pm&quot;</span><span class="p">,</span> <span class="s2">&quot;pm_replica&quot;</span><span class="p">}:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Mount Snap and its Validation from SECOND node&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">mount_snap</span><span class="p">(</span><span class="n">full1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">mount_validation</span><span class="p">(</span><span class="n">full1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;UnMount Snap and its Validation from SECOND node&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">unmount_snap</span><span class="p">(</span><span class="n">full1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">unmount_validation</span><span class="p">(</span><span class="n">full1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
                                               <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">revert_support</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;************* REVERT IS NOT SUPPORTED FOR ENGINE: </span><span class="si">{0}</span><span class="s2">,</span>
<span class="s2">                                                  skipping this operation *********&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                                      <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_engine_at_subclient</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Revert Snap and its Validation&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">revert_snap</span><span class="p">(</span><span class="n">inc1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">revert_validation</span><span class="p">(</span><span class="n">inc1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running OutPlace Restore from FIRST node Snap backup&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">source_path</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">test_data_path</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_outplace</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">full1_job</span><span class="o">.</span><span class="n">start_time</span><span class="p">,</span> <span class="n">inc1_job</span><span class="o">.</span><span class="n">end_time</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">outplace_validation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_outplace_restore_location</span><span class="p">,</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">client_machine</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">source_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">test_data_path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running InPlace Restore from FIRST node Snap Backup&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_inplace</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">inc1_job</span><span class="o">.</span><span class="n">start_time</span><span class="p">,</span> <span class="n">inc1_job</span><span class="o">.</span><span class="n">end_time</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">inplace_validation</span><span class="p">(</span><span class="n">inc1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">,</span>
                                           <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">test_data_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Storage Policy Update&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pv&quot;</span><span class="p">,</span> <span class="s2">&quot;pv_replica&quot;</span><span class="p">,</span> <span class="s2">&quot;pm&quot;</span><span class="p">,</span> <span class="s2">&quot;pm_replica&quot;</span><span class="p">}:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">update_storage_policy</span><span class="p">(</span>
                <span class="n">enable_backup_copy</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">source_copy_for_snap_to_tape</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">,</span>
                <span class="n">enable_snapshot_catalog</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">source_copy_for_snapshot_catalog</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">update_storage_policy</span><span class="p">(</span>
                <span class="n">enable_backup_copy</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">source_copy_for_snap_to_tape</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">,</span>
                <span class="n">enable_snapshot_catalog</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">source_copy_for_snapshot_catalog</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running Snapshot Cataloging from Storage Policy&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snapshot_cataloging</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;&quot;&quot;Running OutPlace Restore from First node Snap backup after</span>
<span class="s2">                      Catalog&quot;&quot;&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_outplace</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">outplace_validation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_outplace_restore_location</span><span class="p">,</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">client_machine</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pv&quot;</span><span class="p">,</span> <span class="s2">&quot;pv_replica&quot;</span><span class="p">,</span> <span class="s2">&quot;pm&quot;</span><span class="p">,</span> <span class="s2">&quot;pm_replica&quot;</span><span class="p">}:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running SECOND FULL Snap Backup job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">backup_level</span> <span class="o">=</span> <span class="s1">&#39;FULL&#39;</span>
            <span class="n">full2_job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_backup</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running SECOND INCREMENTAL Snap Backup job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">backup_level</span> <span class="o">=</span> <span class="s1">&#39;INCREMENTAL&#39;</span>
            <span class="n">inc2_job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_backup</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running Auxilliary Copy job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pv&quot;</span><span class="p">,</span> <span class="s2">&quot;pm&quot;</span><span class="p">,</span> <span class="s2">&quot;pvm&quot;</span><span class="p">,</span> <span class="s2">&quot;pmv&quot;</span><span class="p">,</span> <span class="s2">&quot;pmm&quot;</span><span class="p">}:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">aux_copy</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">aux_copy</span><span class="p">(</span><span class="n">use_scale</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running OutPlace Restore from SECOND node Snap&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_outplace</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">outplace_validation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_outplace_restore_location</span><span class="p">,</span>
                                                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">client_machine</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pv&quot;</span><span class="p">,</span> <span class="s2">&quot;pv_replica&quot;</span><span class="p">,</span> <span class="s2">&quot;pm&quot;</span><span class="p">,</span> <span class="s2">&quot;pm_replica&quot;</span><span class="p">}:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running THIRD FULL Snap Backup job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running SECOND FULL Snap Backup job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">backup_level</span> <span class="o">=</span> <span class="s1">&#39;FULL&#39;</span>
        <span class="n">full3_job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_backup</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pv&quot;</span><span class="p">,</span> <span class="s2">&quot;pv_replica&quot;</span><span class="p">,</span> <span class="s2">&quot;pm&quot;</span><span class="p">,</span> <span class="s2">&quot;pm_replica&quot;</span><span class="p">}:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running THIRD INCREMENTAL Snap Backup job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running SECOND INCREMENTAL Snap Backup job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">backup_level</span> <span class="o">=</span> <span class="s1">&#39;INCREMENTAL&#39;</span>
        <span class="n">inc3_job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_backup</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running Auxilliary Copy job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pv&quot;</span><span class="p">,</span> <span class="s2">&quot;pm&quot;</span><span class="p">,</span> <span class="s2">&quot;pvm&quot;</span><span class="p">,</span> <span class="s2">&quot;pmv&quot;</span><span class="p">,</span> <span class="s2">&quot;pmm&quot;</span><span class="p">}:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">aux_copy</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">aux_copy</span><span class="p">(</span><span class="n">use_scale</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running Backup copy from Storage Policy&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">backup_copy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running OutPlace Restore from Backup Copy&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">tape_outplace</span><span class="p">(</span><span class="n">full3_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">outplace_validation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">tape_outplace_restore_location</span><span class="p">,</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">windows_restore_client</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running Snapshot Cataloging from Storage Policy&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snapshot_cataloging</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running Auxilliary Copy job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pv&quot;</span><span class="p">,</span> <span class="s2">&quot;pm&quot;</span><span class="p">,</span> <span class="s2">&quot;pvm&quot;</span><span class="p">,</span> <span class="s2">&quot;pmv&quot;</span><span class="p">,</span> <span class="s2">&quot;pmm&quot;</span><span class="p">}:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">aux_copy</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">aux_copy</span><span class="p">(</span><span class="n">use_scale</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;DELETE VALIDATIONS&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying delete operation on Primary Snap Copy&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_snap</span><span class="p">(</span><span class="n">inc1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">inc1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pv&quot;</span><span class="p">,</span> <span class="s2">&quot;pmv&quot;</span><span class="p">,</span> <span class="s2">&quot;pv_replica&quot;</span><span class="p">,</span> <span class="s2">&quot;pmv_replica&quot;</span><span class="p">,</span> <span class="s2">&quot;pvv_replica&quot;</span><span class="p">}:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pv&quot;</span><span class="p">,</span> <span class="s2">&quot;pv_replica&quot;</span><span class="p">}:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying delete operation on First Node Copy&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_snap</span><span class="p">(</span><span class="n">inc1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span>
                    <span class="n">inc1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pmv&quot;</span><span class="p">,</span> <span class="s2">&quot;pmv_replica&quot;</span><span class="p">}:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying delete operation on First Node Copy&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_snap</span><span class="p">(</span>
                    <span class="n">full1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">,</span>
                    <span class="n">is_mirror</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">source_copy_for_mirror</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">full1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
                                                  <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying delete operation on Second Node Copy&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_snap</span><span class="p">(</span><span class="n">inc2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">inc2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
                                                  <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying delete operation on First Node Copy&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_snap</span><span class="p">(</span><span class="n">inc2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">inc2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
                                                  <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying delete operation on Second Node Copy&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_snap</span><span class="p">(</span><span class="n">inc2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">inc2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
                                                  <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pm&quot;</span><span class="p">,</span> <span class="s2">&quot;pm_replica&quot;</span><span class="p">}:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying delete operation on First Node Copy&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_snap</span><span class="p">(</span>
                    <span class="n">full1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">,</span>
                    <span class="n">is_mirror</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">source_copy_for_mirror</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">full1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
                                                  <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pvm&quot;</span><span class="p">,</span> <span class="s2">&quot;pvm_replica&quot;</span><span class="p">}:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying delete operation on First Node Copy&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_snap</span><span class="p">(</span><span class="n">inc2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">inc2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
                                                  <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying delete operation on Second Node Copy&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_snap</span><span class="p">(</span>
                    <span class="n">full2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">,</span>
                    <span class="n">is_mirror</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">source_copy_for_mirror</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">full2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
                                                  <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying delete operation on First Node Copy&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_snap</span><span class="p">(</span>
                    <span class="n">full1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">,</span>
                    <span class="n">is_mirror</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">source_copy_for_mirror</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">full1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
                                                  <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying delete operation on Second Node Copy&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_snap</span><span class="p">(</span>
                    <span class="n">full2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">,</span>
                    <span class="n">is_mirror</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">source_copy_for_mirror</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">full2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
                                                  <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;DELETE VALIDATIONS COMPLETED&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;FORCE DELETE SNAPSHOTS FROM PRIMARY&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pv&quot;</span><span class="p">,</span> <span class="s2">&quot;pv_replica&quot;</span><span class="p">,</span> <span class="s2">&quot;pm&quot;</span><span class="p">,</span> <span class="s2">&quot;pm_replica&quot;</span><span class="p">}:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;force deleting the latest snapshot of jobid :</span><span class="si">{0}</span><span class="s2"> from primary snap</span><span class="se">\</span>
<span class="s2">                          copy which may fail with snapmirror dependency error&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                              <span class="n">inc3_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">force_delete_snap</span><span class="p">(</span><span class="n">inc3_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">inc3_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;force deleting the latest snapshot of jobid :</span><span class="si">{0}</span><span class="s2"> from primary snap</span><span class="se">\</span>
<span class="s2">                          copy which may fail with snapmirror dependency error&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                              <span class="n">inc3_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">force_delete_snap</span><span class="p">(</span><span class="n">inc3_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">inc3_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;force deleting the latest snapshot of jobid :</span><span class="si">{0}</span><span class="s2"> from primary snap</span><span class="se">\</span>
<span class="s2">                          copy which may fail with snapmirror dependency error&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                              <span class="n">inc2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">force_delete_snap</span><span class="p">(</span><span class="n">inc2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">inc2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Disabling backup copy and snapshot catalogue&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">update_storage_policy</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;DATA AGING VALIDATIONS&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">data_aging_validation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pv&quot;</span><span class="p">,</span> <span class="s2">&quot;pmv&quot;</span><span class="p">,</span> <span class="s2">&quot;pv_replica&quot;</span><span class="p">,</span> <span class="s2">&quot;pmv_replica&quot;</span><span class="p">,</span> <span class="s2">&quot;pvv_replica&quot;</span><span class="p">}:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pv&quot;</span><span class="p">,</span> <span class="s2">&quot;pv_replica&quot;</span><span class="p">}:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying Aging on First Node Copy: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">data_aging_validation</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">,</span> <span class="n">vault</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pmv&quot;</span><span class="p">,</span> <span class="s2">&quot;pmv_replica&quot;</span><span class="p">}:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying Aging on First Node Copy: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">data_aging_validation</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">,</span>
                    <span class="n">source_copy_for_mirror</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">,</span>
                    <span class="n">mirror</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying Aging on Second Node Copy: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">data_aging_validation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">,</span>
                                                      <span class="n">vault</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying Aging on First Node Copy: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">data_aging_validation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">,</span>
                                                      <span class="n">vault</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying Aging on Second Node Copy: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">data_aging_validation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">,</span>
                                                      <span class="n">vault</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pm&quot;</span><span class="p">,</span> <span class="s2">&quot;pm_replica&quot;</span><span class="p">}:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying Aging on First Node Copy: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">data_aging_validation</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">,</span>
                    <span class="n">source_copy_for_mirror</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">,</span>
                    <span class="n">mirror</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pvm&quot;</span><span class="p">,</span> <span class="s2">&quot;pvm_replica&quot;</span><span class="p">}:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying Aging on First Node Copy: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">data_aging_validation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">,</span>
                                                      <span class="n">vault</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying Aging on Second Node Copy: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">data_aging_validation</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">,</span>
                    <span class="n">source_copy_for_mirror</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">,</span>
                    <span class="n">mirror</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying Aging on First Node Copy: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">data_aging_validation</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">,</span>
                    <span class="n">source_copy_for_mirror</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">,</span>
                    <span class="n">mirror</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying Aging on Second Node Copy: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">data_aging_validation</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">,</span>
                    <span class="n">source_copy_for_mirror</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">,</span>
                    <span class="n">mirror</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;DATA AGING VALIDATIONS COMPLETED&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;FORCE DELETE SNAPSHOTS FROM SECONDARY&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pv&quot;</span><span class="p">,</span> <span class="s2">&quot;pv_replica&quot;</span><span class="p">,</span> <span class="s2">&quot;pvm&quot;</span><span class="p">,</span> <span class="s2">&quot;pvm_replica&quot;</span><span class="p">}:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;force deleting the latest snapshot of jobid :</span><span class="si">{0}</span><span class="s2"> from First node Vault</span>
<span class="s2">                          copy which may fail with snapmirror dependency error&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                              <span class="n">inc3_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">force_delete_snap</span><span class="p">(</span><span class="n">inc3_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">inc3_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pmv&quot;</span><span class="p">,</span> <span class="s2">&quot;pmv_replica&quot;</span><span class="p">}:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;force deleting the latest snapshot of jobid :</span><span class="si">{0}</span><span class="s2"> from second node</span>
<span class="s2">                          Vault copy which may fail with snapmirror dependency error&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                              <span class="n">inc3_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">force_delete_snap</span><span class="p">(</span><span class="n">inc3_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">inc3_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;pvv_replica&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;force deleting the latest snapshot of jobid :</span><span class="si">{0}</span><span class="s2"> from First node Vault</span>
<span class="s2">                          copy which may fail with snapmirror dependency error&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                              <span class="n">inc3_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">force_delete_snap</span><span class="p">(</span><span class="n">inc3_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">inc3_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;force deleting the latest snapshot of jobid :</span><span class="si">{0}</span><span class="s2"> from second node</span>
<span class="s2">                          Vault copy which may fail with snapmirror dependency error&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                              <span class="n">inc3_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">force_delete_snap</span><span class="p">(</span><span class="n">inc3_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">inc3_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Not Force deleting snapshot of PM,PM_replica,PMM,PMM_replica</span><span class="se">\</span>
<span class="s2">                          since it is already deleted&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Deleting REST of the snapshots before deleting copies&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pv&quot;</span><span class="p">,</span> <span class="s2">&quot;pv_replica&quot;</span><span class="p">,</span> <span class="s2">&quot;pvm&quot;</span><span class="p">,</span> <span class="s2">&quot;pvm_replica&quot;</span><span class="p">}:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying delete operation on First Node Copy&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_snap</span><span class="p">(</span><span class="n">full3_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">full3_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pmv_replica&quot;</span><span class="p">,</span> <span class="s2">&quot;pmv&quot;</span><span class="p">}:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying delete operation on Second Node Copy&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_snap</span><span class="p">(</span><span class="n">full3_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">full3_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;pvv_replica&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying delete operation on First Node Copy&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_snap</span><span class="p">(</span><span class="n">full3_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">full3_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying delete operation on Second Node Copy&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_snap</span><span class="p">(</span><span class="n">full3_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">full3_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">second_node_copy</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Cleanup of Snap Entities&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Deletion of Arrays&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pv&quot;</span><span class="p">,</span> <span class="s2">&quot;pm&quot;</span><span class="p">,</span> <span class="s2">&quot;pv_replica&quot;</span><span class="p">,</span> <span class="s2">&quot;pm_replica&quot;</span><span class="p">}:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">arrayname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;ArrayName&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_array</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">arrayname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;ArrayName2&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_array</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">arrayname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;ArrayName&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_array</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">arrayname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;ArrayName2&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_array</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">arrayname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;ArrayName3&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_array</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;pv&quot;</span><span class="p">,</span> <span class="s2">&quot;pm&quot;</span><span class="p">,</span> <span class="s2">&quot;pvm&quot;</span><span class="p">,</span> <span class="s2">&quot;pmv&quot;</span><span class="p">,</span> <span class="s2">&quot;pmm&quot;</span><span class="p">}:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">arrayname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;OCUMServerName&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_array</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;SUCCESSFULLY COMPLETED THE TEST CASE&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span></div>

<div class="viewcode-block" id="SNAPTemplate.snap_template3"><a class="viewcode-back" href="../../../source/FileSystem.SNAPUtils.html#FileSystem.SNAPUtils.snaptemplates.SNAPTemplate.snap_template3">[docs]</a>    <span class="k">def</span> <span class="nf">snap_template3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Snap Template2 to Perform NetApp Snapshot Replication Operations for FanOut</span>
<span class="sd">           Configuration</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">pre_cleanup</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Adding Arrays&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">add_array</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Successfully Added First Array&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">arrayname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;ArrayName2&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;ArrayUserName2&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">b64encode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;ArrayPassword2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">add_array</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Successfully Added Second Array&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;all&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">arrayname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;ArrayName3&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;ArrayUserName3&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">b64encode</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;ArrayPassword3&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">add_array</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Successfully Added Third Array&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">ocum_server</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;ADDING OCUM&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">arrayname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;OCUMServerName&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;OCUMUserName&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">b64encode</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;OCUMPassword&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">is_ocum</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">add_array</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Successfully Added OCUM Information&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">arrayname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;ArrayName&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Setup of Intellisnap Entities&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">setup</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">add_test_data_folder</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running FIRST FULL Snap Backup job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">skip_catalog</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">full1_job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_backup</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running FIRST INCREMENTAL Snap Backup job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">backup_level</span> <span class="o">=</span> <span class="s1">&#39;INCREMENTAL&#39;</span>
        <span class="n">inc1_job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_backup</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running Auxilliary Copy job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">ocum_server</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">aux_copy</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">aux_copy</span><span class="p">(</span><span class="n">use_scale</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;RESTORING FROM EACH SECONDARY SNAP COPY&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">source_path</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">test_data_path</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="k">for</span> <span class="n">copy</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">fanout_copies_vault</span><span class="p">:</span>
            <span class="n">precedence</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">storage_policy</span><span class="o">.</span><span class="n">get_copy_precedence</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_outplace</span><span class="p">(</span><span class="n">precedence</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">outplace_validation</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_outplace_restore_location</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">client_machine</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Successfully Completed Restore Validation from copy: </span><span class="si">{0}</span><span class="se">\</span>
<span class="s2">                          &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">copy</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">source_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">test_data_path</span>
        <span class="k">for</span> <span class="n">copy</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">fanout_copies_mirror</span><span class="p">:</span>
            <span class="n">precedence</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">storage_policy</span><span class="o">.</span><span class="n">get_copy_precedence</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_inplace</span><span class="p">(</span><span class="n">precedence</span><span class="p">,</span> <span class="n">inc1_job</span><span class="o">.</span><span class="n">start_time</span><span class="p">,</span> <span class="n">inc1_job</span><span class="o">.</span><span class="n">end_time</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">inplace_validation</span><span class="p">(</span>
                <span class="n">inc1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="n">copy</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">test_data_path</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Successfully Completed Restore Validation from copy: </span><span class="si">{0}</span><span class="se">\</span>
<span class="s2">                          &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">copy</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;&quot;&quot;SUCCESSFULLY COMPLETED RESTORING FROM EACH SECONDARY SNAP</span>
<span class="s2">                     COPY&quot;&quot;&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">update_storage_policy</span><span class="p">(</span>
            <span class="n">enable_backup_copy</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">source_copy_for_snap_to_tape</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">fanout_copies_vault</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">enable_snapshot_catalog</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">source_copy_for_snapshot_catalog</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">fanout_copies_mirror</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running Backup copy from Storage Policy&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">backup_copy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running OutPlace Restore from Backup Copy&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">tape_outplace</span><span class="p">(</span><span class="n">full1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">outplace_validation</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">tape_outplace_restore_location</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">windows_restore_client</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running SECOND FULL Snap Backup job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">backup_level</span> <span class="o">=</span> <span class="s1">&#39;FULL&#39;</span>
        <span class="n">full2_job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_backup</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running SECOND INCREMENTAL Snap Backup job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">backup_level</span> <span class="o">=</span> <span class="s1">&#39;INCREMENTAL&#39;</span>
        <span class="n">inc2_job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_backup</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running Auxilliary Copy job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">ocum_server</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">aux_copy</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">aux_copy</span><span class="p">(</span><span class="n">use_scale</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running Snapshot Cataloging from Storage Policy&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snapshot_cataloging</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;&quot;&quot;Running InPlace Restore from First node Snap backup after</span>
<span class="s2">                      Catalog&quot;&quot;&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_inplace</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">inplace_validation</span><span class="p">(</span>
            <span class="n">inc2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">fanout_copies_vault</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">test_data_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running Backup copy of Remaining jobs&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">backup_copy</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;DELETE VALIDATIONS&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="c1"># primary</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying delete operation on Copy: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_snap</span><span class="p">(</span><span class="n">full1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">full1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
        <span class="c1"># Vault</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying delete validation on Vault copies&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">copy</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">fanout_copies_vault</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying delete operation on Copy: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">copy</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_snap</span><span class="p">(</span><span class="n">inc1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">inc1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_snap</span><span class="p">(</span><span class="n">full1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">full1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Successfully completed delete validation on Vault copies&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="c1"># Mirror</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying delete validation on Mirror copies&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">copy</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">fanout_copies_mirror</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying delete validation on Copy: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">copy</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">full1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Successfully completed delete validation on Mirror copies&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;FORCE DELETE SNAPSHOTS&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;force deleting the latest snapshot of jobid :</span><span class="si">{0}</span><span class="s2"> from primary snap copy</span>
<span class="s2">                      which may fail with snapmirror dependency error&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">inc2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">force_delete_snap</span><span class="p">(</span><span class="n">inc2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">inc2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">force_delete_snap</span><span class="p">(</span><span class="n">inc1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">inc1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;force deleting the latest snapshot of jobid :</span><span class="si">{0}</span><span class="s2"> from Vault Copies</span>
<span class="s2">                      which may fail with snapmirror dependency error&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">inc2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">copy</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">fanout_copies_vault</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Force deleting snap of job: </span><span class="si">{0}</span><span class="s2"> on Copy: </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">inc2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="n">copy</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">force_delete_snap</span><span class="p">(</span><span class="n">inc2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">inc2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;DATA AGING VALIDATIONS&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">data_aging_validation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">copy</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">fanout_copies_vault</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying Aging on Copy: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">copy</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">data_aging_validation</span><span class="p">(</span><span class="n">copy</span><span class="p">,</span> <span class="n">vault</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Completed Aging Validations on All Vault Copies&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;fanout&quot;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">copy</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">fanout_copies_mirror</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying Aging on Copy: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">copy</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">data_aging_validation</span><span class="p">(</span>
                    <span class="n">copy</span><span class="p">,</span> <span class="n">source_copy_for_mirror</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">,</span> <span class="n">mirror</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;all&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying Aging on Copy: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">fanout_copies_mirror</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">data_aging_validation</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">fanout_copies_mirror</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">source_copy_for_mirror</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">,</span>
                <span class="n">mirror</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying Aging on Copy: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">fanout_copies_mirror</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">data_aging_validation</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">fanout_copies_mirror</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                <span class="n">source_copy_for_mirror</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">fanout_copies_vault</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">mirror</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying Aging on Copy: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">fanout_copies_mirror</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">data_aging_validation</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">fanout_copies_mirror</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                <span class="n">source_copy_for_mirror</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">,</span>
                <span class="n">mirror</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Verifying Aging on Copy: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">fanout_copies_mirror</span><span class="p">[</span><span class="mi">3</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">data_aging_validation</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">fanout_copies_mirror</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
                <span class="n">source_copy_for_mirror</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">,</span>
                <span class="n">mirror</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Completed Aging Validations on All Mirror Copies&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Deleting REST of the snapshots before deleting SP&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">copy</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">fanout_copies_vault</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Deleting Rest of the snapshots from Copy: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">copy</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_snap</span><span class="p">(</span><span class="n">full2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_validation</span><span class="p">(</span><span class="n">full2_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Successfully Deleting Rest of the snapshots from Vault copies&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Cleanup of Snap Entities&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Deletion of Arrays&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_array</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">arrayname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;ArrayName2&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_array</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">arrayname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;ArrayName3&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_array</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;SUCCESSFULLY COMPLETED THE TEST CASE&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span></div>

<div class="viewcode-block" id="SNAPTemplate.snap_template4"><a class="viewcode-back" href="../../../source/FileSystem.SNAPUtils.html#FileSystem.SNAPUtils.snaptemplates.SNAPTemplate.snap_template4">[docs]</a>    <span class="k">def</span> <span class="nf">snap_template4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Snap Template4 to Perform New Copy Creation Wizard and Snap Operations using Following</span>
<span class="sd">        type of libraries and policies.</span>
<span class="sd">        Tape, NAS attached, Mag libraries. Deduplication and Non-deduplication pools etc.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">create_locations</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tape_lib&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">lib_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;Tape_lib_name&#39;</span><span class="p">]</span>
            <span class="n">media_agent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;MediaAgent&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;nas_attached_lib&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">lib_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NAS_attached_lib_name&#39;</span><span class="p">)</span>
            <span class="n">media_agent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NAS_MediaAgent&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">lib_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;Mag_lib_name&#39;</span><span class="p">]</span>
            <span class="n">media_agent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;MediaAgent&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sp_using_pool&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;dedup&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;global_policy_name&#39;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;pool_name&#39;</span><span class="p">],</span>
                          <span class="s1">&#39;global_dedup_policy&#39;</span> <span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;global_policy_name&#39;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;pool_name&#39;</span><span class="p">],</span>
                          <span class="s1">&#39;global_dedup_policy&#39;</span> <span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Creating storage policy&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">storage_policy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">storage_policies</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">storage_policy_name</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;Mag_lib_name&#39;</span><span class="p">],</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;MediaAgent&#39;</span><span class="p">],</span>
                <span class="n">ocum_server</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">ocum_server</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Successfully created storage policy :</span><span class="si">{0}</span><span class="s2"> using Mag lib&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">storage_policy</span><span class="o">.</span><span class="n">storage_policy_name</span><span class="p">))</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Creating storage policy&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">storage_policy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">storage_policies</span><span class="o">.</span><span class="n">add_tape_sp</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">storage_policy_name</span><span class="p">,</span>
                <span class="n">lib_name</span><span class="p">,</span>
                <span class="n">media_agent</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;drive_pool&#39;</span><span class="p">],</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;scratch_pool&#39;</span><span class="p">],</span>
                <span class="n">ocum_server</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">ocum_server</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Successfully created storage policy :</span><span class="si">{0}</span><span class="s2"> using Tape lib&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">storage_policy</span><span class="o">.</span><span class="n">storage_policy_name</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">ocum_server</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span><span class="s2">&quot;This is OCUM SP, Not creating Snap primary Copy&quot;</span><span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span> <span class="o">=</span> <span class="s2">&quot;Primary&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Creating Snap Copy&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">create_snap_copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span>
                                             <span class="n">lib_name</span><span class="p">,</span>
                                             <span class="n">media_agent</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Successfully created Snap Copy :</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">delete_bkpcpy_schedule</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">ocum_server</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Creating Vault Copy&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span> <span class="o">=</span> <span class="s2">&quot;Vault&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">create_snap_copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span>
                                             <span class="n">lib_name</span><span class="p">,</span>
                                             <span class="n">media_agent</span><span class="p">,</span>
                                             <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">,</span>
                                             <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">prov_policy_vault</span><span class="p">,</span>
                                             <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">resource_pool_vault</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Successfully created Vault Copy :</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">))</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Creating Vault/Replica Copy&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span> <span class="o">=</span> <span class="s2">&quot;Replica&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">create_snap_copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span>
                                             <span class="n">lib_name</span><span class="p">,</span>
                                             <span class="n">media_agent</span><span class="p">,</span>
                                             <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">,</span>
                                             <span class="n">is_replica_copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Successfully created Vault/Replica Copy :</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_engine_at_array</span> <span class="o">==</span> <span class="s2">&quot;NetApp&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">svm_association</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">first_node_copy</span><span class="p">,</span>
                                                <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">arrayname</span><span class="p">,</span>
                                                <span class="bp">self</span><span class="o">.</span><span class="n">tcinputs</span><span class="p">[</span><span class="s1">&#39;ArrayName2&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">disable_auxcpy_schedule</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">entities</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;backupset&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">entity_properties</span><span class="p">[</span><span class="s1">&#39;backupset&#39;</span><span class="p">]})</span>
        <span class="n">sc_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">entities</span><span class="o">.</span><span class="n">create</span><span class="p">({</span><span class="s1">&#39;subclient&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">entity_properties</span><span class="p">[</span><span class="s1">&#39;subclient&#39;</span><span class="p">]})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">subclient</span> <span class="o">=</span> <span class="n">sc_obj</span><span class="p">[</span><span class="s1">&#39;subclient&#39;</span><span class="p">][</span><span class="s1">&#39;object&#39;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">subclient</span><span class="o">.</span><span class="n">enable_intelli_snap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_engine_at_subclient</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Storage Policy Update&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">ocum_server</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">update_storage_policy</span><span class="p">(</span>
                <span class="n">enable_backup_copy</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">source_copy_for_snap_to_tape</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">,</span>
                <span class="n">enable_snapshot_catalog</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">source_copy_for_snapshot_catalog</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">add_test_data_folder</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running FULL Snap Backup job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="n">full1_job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_backup</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running Auxilliary Copy job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">ocum_server</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">aux_copy</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">aux_copy</span><span class="p">(</span><span class="n">use_scale</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running Backup copy from Storage Policy&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">backup_copy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running OutPlace Restore from Snap Backup job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">source_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">test_data_path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_outplace</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">outplace_validation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_outplace_restore_location</span><span class="p">,</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">client_machine</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running OutPlace Restore from Backup Copy&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">tape_outplace</span><span class="p">(</span><span class="n">full1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">full1_job</span><span class="o">.</span><span class="n">start_time</span><span class="p">,</span> <span class="n">full1_job</span><span class="o">.</span><span class="n">end_time</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">outplace_validation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">tape_outplace_restore_location</span><span class="p">,</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">windows_restore_client</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;Running InPlace Restore from Vault/Replica job&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">snap_inplace</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snaphelper</span><span class="o">.</span><span class="n">inplace_validation</span><span class="p">(</span><span class="n">full1_job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
                                           <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">snap_copy_name</span><span class="p">,</span>
                                           <span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">test_data_path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">backupsets</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">backupset_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;successfully deleted backupset : </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">backupset_name</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;deleting storage policy: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">storage_policy</span><span class="o">.</span><span class="n">storage_policy_name</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">storage_policies</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapconstants</span><span class="o">.</span><span class="n">storage_policy</span><span class="o">.</span><span class="n">storage_policy_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="s2">&quot;SUCCESSFULLY COMPLETED THE TEST CASE&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span></div></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Commvault Systems Inc. All Rights Reserved

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>