

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Web.AdminConsole.Helper.identity_servers_helper &mdash; Commvault Automation 11.21 documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home" alt="Documentation Home"> Commvault Automation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"></div>
            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Commvault Automation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../index.html">Module code</a> &raquo;</li>
        
      <li>Web.AdminConsole.Helper.identity_servers_helper</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for Web.AdminConsole.Helper.identity_servers_helper</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="c1"># --------------------------------------------------------------------------</span>
<span class="c1"># Copyright Commvault Systems, Inc.</span>
<span class="c1"># See LICENSE.txt in the project root for</span>
<span class="c1"># license information.</span>
<span class="c1"># --------------------------------------------------------------------------</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This module provides the function or operations that can be used to run</span>
<span class="sd">basic operations on identity servers page.</span>

<span class="sd">Class:</span>

<span class="sd">    IdentityServersMain:</span>

<span class="sd">        __init__()                  --Initializes the Identity servers helper module</span>

<span class="sd">IdentityServersMain():</span>

<span class="sd">    check_if_saml_app_exists()	    --searches for the given app with search box</span>

<span class="sd">    create_saml_app()				--Helper method for creating SAML app in admin console</span>

<span class="sd">    open_saml_app()				    --Searches for a given SAML app and opens it</span>

<span class="sd">    edit_saml_rule_or_mappings()	--Edit the redirect rule or mappings in SAML app</span>

<span class="sd">    modify_saml_general_settings()--Edit the redirect rule or mappings in SAML app</span>

<span class="sd">    delete_app()					--Deletes a given SAML app</span>

<span class="sd">    validate_saml_app()			    --Checks for the displayed values with the given values</span>

<span class="sd">    download_spmetadata()			--Downloads metadata of app</span>

<span class="sd">    edit_saml_idp()				    --Edits a given SAML app</span>

<span class="sd">    edit_trust_party_adfs()		--Create or delete relying trust party created at the AD machine</span>

<span class="sd">    initiate_saml_login()				    --Initiates SAML login</span>

<span class="sd">    initiate_saml_logout()				--Performs a SAML logout</span>

<span class="sd">    add_associations_on_saml_app()  -- Adds associations for a user on a SAML app</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">base64</span>

<span class="kn">from</span> <span class="nn">AutomationUtils</span> <span class="k">import</span> <span class="n">logger</span>
<span class="kn">from</span> <span class="nn">AutomationUtils.machine</span> <span class="k">import</span> <span class="n">Machine</span>
<span class="kn">from</span> <span class="nn">Web.AdminConsole.Components.table</span> <span class="k">import</span> <span class="n">Table</span>
<span class="kn">from</span> <span class="nn">Web.IdentityProvider.identity_provider_support</span> <span class="k">import</span> <span class="n">IDPSupport</span>
<span class="kn">from</span> <span class="nn">Web.AdminConsole.AdminConsolePages.identity_servers</span> <span class="k">import</span> <span class="n">IdentityServers</span>
<span class="kn">from</span> <span class="nn">Web.AdminConsole.AdminConsolePages.identity_server_details</span> <span class="k">import</span> <span class="n">IdentityServerDetails</span>
<span class="kn">from</span> <span class="nn">Web.Common.exceptions</span> <span class="k">import</span> <span class="n">CVWebAutomationException</span>


<div class="viewcode-block" id="IdentityServersMain"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.Helper.html#Web.AdminConsole.Helper.identity_servers_helper.IdentityServersMain">[docs]</a><span class="k">class</span> <span class="nc">IdentityServersMain</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Helper for IdentityServers page</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">admin_console</span><span class="p">,</span> <span class="n">commcell</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">csdb</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Initializes the Identity servers helper module</span>

<span class="sd">             Args:</span>

<span class="sd">                admin_console   (object) -- AdminPage class object</span>

<span class="sd">                commcell -- comcell object</span>

<span class="sd">                csdb -- csdb object</span>

<span class="sd">            Returns : None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span> <span class="o">=</span> <span class="n">admin_console</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">csdb</span> <span class="o">=</span> <span class="n">csdb</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span> <span class="o">=</span> <span class="n">commcell</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__navigator</span> <span class="o">=</span> <span class="n">admin_console</span><span class="o">.</span><span class="n">navigator</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">saml_details</span> <span class="o">=</span> <span class="n">IdentityServerDetails</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">saml</span> <span class="o">=</span> <span class="n">IdentityServers</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">identity_provider_obj</span> <span class="o">=</span> <span class="n">IDPSupport</span><span class="p">(</span><span class="n">admin_console</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="p">,</span> <span class="n">options_type</span><span class="o">=</span><span class="s1">&#39;ADFS&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">okta_obj</span> <span class="o">=</span> <span class="n">IDPSupport</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="p">,</span> <span class="s1">&#39;OKTA&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">get_log</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_app_name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_enable_company</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_redirect_rule</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_associations</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attribute_mapping</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">app_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Get SAML app name&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_app_name</span>

    <span class="nd">@app_name</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">app_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get SAML app name</span>

<span class="sd">        Args:</span>
<span class="sd">            value   (str)   -- name of the app</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_app_name</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">redirect_rule</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Get redirect rule&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_redirect_rule</span>

    <span class="nd">@redirect_rule</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">redirect_rule</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set redirect rule</span>

<span class="sd">        Args:</span>
<span class="sd">            value   (dict)   -- Redirect rule to be set</span>

<span class="sd">                    Sample:</span>

<span class="sd">                        {</span>
<span class="sd">                            &quot;domain&quot;:&quot;redirect.loc&quot;</span>
<span class="sd">                        }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_redirect_rule</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">associations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Get SAML app associations&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_associations</span>

    <span class="nd">@associations</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">associations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Get SAML app associations</span>

<span class="sd">         Args:</span>
<span class="sd">            value   (List)   -- List of associations to be set</span>

<span class="sd">                    Sample: [&#39;user1,user2&#39;]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_associations</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">attribute_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Get attribute mapping&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attribute_mapping</span>

    <span class="nd">@attribute_mapping</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">attribute_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set attribute mapping</span>

<span class="sd">        Args:</span>
<span class="sd">            value   (dict)   -- Attribute mappings to be set</span>

<span class="sd">                    Sample:</span>

<span class="sd">                        {</span>
<span class="sd">                            &quot;user attribute&quot;:&quot;SAML attribute&quot;</span>
<span class="sd">                        }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attribute_mapping</span> <span class="o">=</span> <span class="n">value</span>

<div class="viewcode-block" id="IdentityServersMain.check_if_saml_app_exists"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.Helper.html#Web.AdminConsole.Helper.identity_servers_helper.IdentityServersMain.check_if_saml_app_exists">[docs]</a>    <span class="k">def</span> <span class="nf">check_if_saml_app_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        searches for the given app with search box</span>

<span class="sd">        Args:</span>

<span class="sd">        app_name    (str)   --   SAML app name</span>

<span class="sd">        Returns:     None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">search_for</span><span class="p">(</span><span class="n">app_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">check_if_entity_exists</span><span class="p">(</span><span class="s2">&quot;link&quot;</span><span class="p">,</span> <span class="n">app_name</span><span class="p">)</span></div>

<div class="viewcode-block" id="IdentityServersMain.create_saml_app"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.Helper.html#Web.AdminConsole.Helper.identity_servers_helper.IdentityServersMain.create_saml_app">[docs]</a>    <span class="k">def</span> <span class="nf">create_saml_app</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idp_metadata_path</span><span class="p">,</span> <span class="n">smtp_address</span><span class="p">,</span>
                        <span class="n">webconsole_url</span><span class="p">,</span> <span class="n">enable_company</span><span class="p">,</span>
                        <span class="n">company_name</span><span class="p">,</span> <span class="n">jks_file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">alias_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">keystore_password</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">key_password</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">auto_generate_key</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        creating SAML app in admin console</span>

<span class="sd">        Args:</span>

<span class="sd">        idp_metadata_path    (str)    :IDP metadata file path</span>

<span class="sd">        smtp_address        (str)      :SMTP address of the identity server</span>

<span class="sd">        webconsole_url        (str)   :webconsole url to edit</span>

<span class="sd">        enable_company        (bool)    :True if created for company</span>

<span class="sd">        company_name            (str)    :name of company to be added</span>

<span class="sd">        jks_file_path        (str)    :keystore file path</span>

<span class="sd">        alias_name            (str)    :alias name for</span>
<span class="sd">                                        the .jks file</span>

<span class="sd">        keystore_password    (str)    :keystore password for</span>
<span class="sd">                                        the .jks file</span>

<span class="sd">        key_password        (str)     : key password for the</span>
<span class="sd">                                         .jks file</span>

<span class="sd">        auto_generate_key    (bool)    :True if key is auto generated</span>

<span class="sd">        Returns: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">is_app_created</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">saml</span><span class="o">.</span><span class="n">add_saml_app</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">app_name</span><span class="p">,</span> <span class="n">idp_metadata_path</span><span class="p">,</span>
                                                <span class="n">smtp_address</span><span class="p">,</span> <span class="n">webconsole_url</span><span class="p">,</span>
                                                <span class="n">enable_company</span><span class="p">,</span> <span class="n">company_name</span><span class="p">,</span>
                                                <span class="n">jks_file_path</span><span class="p">,</span> <span class="n">alias_name</span><span class="p">,</span>
                                                <span class="n">keystore_password</span><span class="p">,</span> <span class="n">key_password</span><span class="p">,</span>
                                                <span class="n">auto_generate_key</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">is_app_created</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">redirect_rule</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">saml_details</span><span class="o">.</span><span class="n">edit_redirect_rule</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">redirect_rule</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">wait_for_completion</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">attribute_mapping</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">saml_details</span><span class="o">.</span><span class="n">edit_attribute_mappings</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attribute_mapping</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">wait_for_completion</span><span class="p">()</span></div>

<div class="viewcode-block" id="IdentityServersMain.open_saml_app"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.Helper.html#Web.AdminConsole.Helper.identity_servers_helper.IdentityServersMain.open_saml_app">[docs]</a>    <span class="k">def</span> <span class="nf">open_saml_app</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Searches for a given SAML app and opens it</span>

<span class="sd">            Args:</span>

<span class="sd">                app_name    (str)   --   SAML app name</span>

<span class="sd">            Returns:     None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">saml</span><span class="o">.</span><span class="n">select_identity_server</span><span class="p">(</span><span class="n">app_name</span><span class="p">)</span></div>

<div class="viewcode-block" id="IdentityServersMain.edit_saml_rule_or_mappings"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.Helper.html#Web.AdminConsole.Helper.identity_servers_helper.IdentityServersMain.edit_saml_rule_or_mappings">[docs]</a>    <span class="k">def</span> <span class="nf">edit_saml_rule_or_mappings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_name</span><span class="p">,</span> <span class="n">redirect_rule</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mappings</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Edit the redirect rule or mappings in SAML app</span>

<span class="sd">            Args:</span>

<span class="sd">                app_name    (str)   --   SAML app name</span>

<span class="sd">                redirect_rule(str)   -- the redirect rule that has to be set</span>

<span class="sd">                mappings (str)   --   the attribute mappings that have to be set</span>

<span class="sd">            Returns:     None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">redirect_rule</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">saml_details</span><span class="o">.</span><span class="n">edit_redirect_rule</span><span class="p">(</span><span class="n">redirect_rule</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mappings</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">saml_details</span><span class="o">.</span><span class="n">edit_attribute_mappings</span><span class="p">(</span><span class="n">mappings</span><span class="p">)</span></div>

<div class="viewcode-block" id="IdentityServersMain.modify_saml_general_settings"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.Helper.html#Web.AdminConsole.Helper.identity_servers_helper.IdentityServersMain.modify_saml_general_settings">[docs]</a>    <span class="k">def</span> <span class="nf">modify_saml_general_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_name</span><span class="p">,</span> <span class="n">modify_app_state</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">enable_app</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                     <span class="n">modify_auto_create</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">auto_create_user</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                     <span class="n">add_default_usergroup</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                     <span class="n">modify_user_group</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">user_group</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Edit the general settings in SAML app</span>

<span class="sd">            Args:</span>

<span class="sd">                app_name            (str)   --   SAML app name</span>

<span class="sd">                modify_app_state    (bool)   -- Changes the app state to disabled/enabled</span>

<span class="sd">                enable_app          (bool)   --  Changes the state of the app</span>

<span class="sd">                modify_auto_create  (bool)   --  Changes teh auto user create option</span>

<span class="sd">                auto_create_user    (bool)   --  Changes the auto create user to enabled /disabled</span>

<span class="sd">                add_default_usergroup(bool)  --  Add&#39;s Default User group</span>

<span class="sd">                modify_user_group   (bool)   --  Modifies the user group</span>

<span class="sd">                user_group          (str)   -- Sets the given user group</span>

<span class="sd">            Returns:     None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot; Editing saml app general settings &quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">modify_app_state</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">saml_details</span><span class="o">.</span><span class="n">modify_enable_app</span><span class="p">(</span><span class="n">enable_app</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">modify_auto_create</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">saml_details</span><span class="o">.</span><span class="n">modify_auto_create_user</span><span class="p">(</span><span class="n">auto_create_user</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">add_default_usergroup</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">saml_details</span><span class="o">.</span><span class="n">add_default_usergroup</span><span class="p">(</span><span class="n">user_group</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">modify_user_group</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">user_group</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">saml_details</span><span class="o">.</span><span class="n">modify_user_group</span><span class="p">(</span><span class="n">user_group</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;please give a valid user group&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="IdentityServersMain.delete_app"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.Helper.html#Web.AdminConsole.Helper.identity_servers_helper.IdentityServersMain.delete_app">[docs]</a>    <span class="k">def</span> <span class="nf">delete_app</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Deletes a given SAML app</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Deleting the app &quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__navigator</span><span class="o">.</span><span class="n">navigate_to_identity_servers</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">open_saml_app</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">app_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">saml_details</span><span class="o">.</span><span class="n">delete_saml_app</span><span class="p">()</span></div>

<div class="viewcode-block" id="IdentityServersMain.validate_saml_app"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.Helper.html#Web.AdminConsole.Helper.identity_servers_helper.IdentityServersMain.validate_saml_app">[docs]</a>    <span class="k">def</span> <span class="nf">validate_saml_app</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">validate_key_dict</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Checks for the displayed values with the given values</span>

<span class="sd">            Args:</span>
<span class="sd">                validate_key_dict(dict) --Dictionary of values to validate with displayed values</span>
<span class="sd">                                          Sample:{&#39;AppName&#39;: &#39;app name&#39;,</span>
<span class="sd">                            &#39;Auto user create flag&#39;: True,</span>
<span class="sd">                            &#39;Default user group&#39;: &#39;company name\\Tenant Users&#39;,</span>
<span class="sd">                            &#39;Company name&#39;: &#39;company name&#39;,</span>
<span class="sd">                            &#39;SP entity ID&#39;: &#39;https://hostname:443/webconsole&#39;,</span>
<span class="sd">                            &#39;SSO URL&#39;:</span>
<span class="sd">                            &#39;https://hostname:443/webconsole/samlAcsIdpInitCallback.do?samlAppKey</span>
<span class="sd">                            =NDVDQ0E2NUMwMkEzNDkz&#39;,</span>
<span class="sd">                            &#39;Associations&#39;: None,</span>
<span class="sd">                            &#39;Redirect rule&#39;: {&#39;domain name&#39;, &#39;smtp address&#39;}</span>
<span class="sd">                            &#39;Attribute mapping&#39;: None}</span>

<span class="sd">            Returns:     None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">displayed_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">saml_details</span><span class="o">.</span><span class="n">saml_app_info</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Validating the SAML app created&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">validate_key_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">displayed_val</span><span class="p">[</span><span class="n">key</span><span class="p">]:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">displayed_val</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">==</span> <span class="n">validate_key_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> displayed for </span><span class="si">%s</span><span class="s2"> matches with </span><span class="si">%s</span><span class="s2"> given&quot;</span><span class="p">,</span>
                                      <span class="n">displayed_val</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="n">key</span><span class="p">,</span> <span class="n">validate_key_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> displayed for </span><span class="si">%s</span><span class="s2"> does not match with </span><span class="si">%s</span><span class="s2"> given&quot;</span><span class="p">,</span>
                                                       <span class="n">displayed_val</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="n">key</span><span class="p">,</span> <span class="n">validate_key_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                    <span class="k">if</span> <span class="nb">set</span><span class="p">(</span><span class="n">displayed_val</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="n">validate_key_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> displayed for </span><span class="si">%s</span><span class="s2"> matches with </span><span class="si">%s</span><span class="s2"> given&quot;</span><span class="p">,</span>
                                      <span class="n">displayed_val</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="n">key</span><span class="p">,</span> <span class="n">validate_key_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> displayed for </span><span class="si">%s</span><span class="s2"> does not match with </span><span class="si">%s</span><span class="s2"> given&quot;</span><span class="p">,</span>
                                                       <span class="n">displayed_val</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="n">key</span><span class="p">,</span> <span class="n">validate_key_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Entity displayed_val :</span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">item</span><span class="p">,</span> <span class="n">value_dict</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="n">d_val</span> <span class="o">=</span> <span class="n">displayed_val</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">item</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
                        <span class="n">key_val</span> <span class="o">=</span> <span class="n">validate_key_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">item</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">d_val</span> <span class="o">==</span> <span class="n">key_val</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> values match&quot;</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> displayed for </span><span class="si">%s</span><span class="s2"> does not match with </span><span class="si">%s</span><span class="s2"> given&quot;</span><span class="p">,</span> <span class="n">d_val</span><span class="p">,</span>
                                                           <span class="n">item</span><span class="p">,</span> <span class="n">key_val</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Displayed value for </span><span class="si">%s</span><span class="s2"> has None&quot;</span><span class="p">,</span> <span class="n">validate_key_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">validate_key_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> displayed for </span><span class="si">%s</span><span class="s2"> matches with </span><span class="si">%s</span><span class="s2"> given&quot;</span><span class="p">,</span>
                                  <span class="n">displayed_val</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="n">key</span><span class="p">,</span> <span class="n">validate_key_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span></div>

<div class="viewcode-block" id="IdentityServersMain.download_spmetadata"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.Helper.html#Web.AdminConsole.Helper.identity_servers_helper.IdentityServersMain.download_spmetadata">[docs]</a>    <span class="k">def</span> <span class="nf">download_spmetadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">download_dir</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Downloads metadata of app</span>

<span class="sd">        Args:</span>

<span class="sd">            download_dir    (str)   --  Download location of the  SP metadata</span>

<span class="sd">        Returns:     None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">downloaded_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">saml_details</span><span class="o">.</span><span class="n">download_sp_metadata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">app_name</span><span class="p">,</span> <span class="n">download_dir</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">downloaded_path</span></div>

<div class="viewcode-block" id="IdentityServersMain.edit_saml_idp"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.Helper.html#Web.AdminConsole.Helper.identity_servers_helper.IdentityServersMain.edit_saml_idp">[docs]</a>    <span class="k">def</span> <span class="nf">edit_saml_idp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_name</span><span class="p">,</span> <span class="n">idp_meta_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">web_console_url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                      <span class="n">jks_file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">key_password</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">keystore_password</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                      <span class="n">alias_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Edits a given SAML app</span>

<span class="sd">        Args:</span>
<span class="sd">            app_name           (str)  :name of the identity server app</span>

<span class="sd">            idp_meta_path   (str)   :Location of IDP metadata path</span>

<span class="sd">            web_console_url        (str)   :webconsole url to edit</span>

<span class="sd">            jks_file_path        (str)    :keystore file path</span>

<span class="sd">            key_password        (str)     :key password for the .jks file</span>

<span class="sd">            keystore_password    (str)    :keystore password for the .jks file</span>

<span class="sd">            alias_name            (str)    :alias name for the .jks file</span>

<span class="sd">        Returns:     None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">saml_details</span><span class="o">.</span><span class="n">edit_idp_details</span><span class="p">(</span><span class="n">idp_meta_path</span><span class="p">,</span> <span class="n">web_console_url</span><span class="p">,</span> <span class="n">jks_file_path</span><span class="p">,</span>
                                           <span class="n">key_password</span><span class="p">,</span> <span class="n">keystore_password</span><span class="p">,</span> <span class="n">alias_name</span><span class="p">)</span></div>

<div class="viewcode-block" id="IdentityServersMain.edit_trust_party_adfs"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.Helper.html#Web.AdminConsole.Helper.identity_servers_helper.IdentityServersMain.edit_trust_party_adfs">[docs]</a>    <span class="k">def</span> <span class="nf">edit_trust_party_adfs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_name</span><span class="p">,</span> <span class="n">ad_host_ip</span><span class="p">,</span> <span class="n">ad_machine_user</span><span class="p">,</span> <span class="n">ad_machine_password</span><span class="p">,</span>
                              <span class="n">sp_metadata_location</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">operation</span><span class="o">=</span><span class="s2">&quot;Create&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Create or delete the relying trust party created at the AD machine</span>

<span class="sd">            Args:</span>

<span class="sd">                app_name            (str)    : name of ADFS app</span>

<span class="sd">                ad_host_ip        (str)    :IP/name of AD machine</span>

<span class="sd">                ad_machine_user        (str)   :AD machine username</span>

<span class="sd">                ad_machine_password        (str)    :AD machine password</span>

<span class="sd">                sp_metadata_location    (str)    :path of SP metdata file</span>

<span class="sd">                operation                (str)    :Create-if app is created</span>
<span class="sd">                                                    Delete-if app is deleted</span>
<span class="sd">                                                    Default value is create</span>

<span class="sd">            Returns:     None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">machine</span> <span class="o">=</span> <span class="n">Machine</span><span class="p">(</span><span class="n">machine_name</span><span class="o">=</span><span class="n">ad_host_ip</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="n">ad_machine_user</span><span class="p">,</span>
                          <span class="n">password</span><span class="o">=</span><span class="n">ad_machine_password</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;Create&#39;</span> <span class="ow">in</span> <span class="n">operation</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">=</span> <span class="n">machine</span><span class="o">.</span><span class="n">get_registry_value</span><span class="p">(</span>
                <span class="n">value</span><span class="o">=</span><span class="s2">&quot;ProgramFilesDir&quot;</span><span class="p">,</span>
                <span class="n">win_key</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">output</span><span class="p">:</span>
                <span class="n">destination_path</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="n">destination_file_path</span> <span class="o">=</span> <span class="n">machine</span><span class="o">.</span><span class="n">join_path</span><span class="p">(</span>
                    <span class="n">destination_path</span><span class="p">,</span> <span class="n">f</span><span class="s2">&quot;SPMetadata_</span><span class="si">{app_name}</span><span class="s2">.xml&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">machine</span><span class="o">.</span><span class="n">check_file_exists</span><span class="p">(</span><span class="n">destination_file_path</span><span class="p">):</span>
                    <span class="n">machine</span><span class="o">.</span><span class="n">delete_file</span><span class="p">(</span><span class="n">destination_file_path</span><span class="p">)</span>
                <span class="n">machine</span><span class="o">.</span><span class="n">copy_from_local</span><span class="p">(</span><span class="n">sp_metadata_location</span><span class="p">,</span> <span class="n">destination_path</span><span class="p">)</span>
                <span class="n">output</span> <span class="o">=</span> <span class="n">machine</span><span class="o">.</span><span class="n">execute_command</span><span class="p">(</span>
                    <span class="s1">&#39;Add-AdfsRelyingPartyTrust -Name &quot;ADFS_check&quot; &#39;</span>
                    <span class="s1">&#39;-MetadataFile &quot;</span><span class="si">%s</span><span class="s1">&quot; -IssuanceAuthorizationRules </span><span class="se">\&#39;</span><span class="s1">@RuleTemplate = &#39;</span>
                    <span class="s1">&#39;&quot;AllowAllAuthzRule&quot;=&gt; issue(Type = &#39;</span>
                    <span class="s1">&#39;&quot;http://schemas.microsoft.com/authorization/claims/permit&quot;, Value &#39;</span>
                    <span class="s1">&#39;= &quot;true&quot;);</span><span class="se">\&#39;</span><span class="s1"> -IssuanceTransformRules </span><span class="se">\&#39;</span><span class="s1">@RuleTemplate = &#39;</span>
                    <span class="s1">&#39;&quot;LdapClaims&quot;@RuleName = &quot;r1&quot;c:[Type ==&quot;http://schemas.microsoft.com/ws/&#39;</span>
                    <span class="s1">&#39;2008/06/identity/claims/windowsaccountname&quot;,Issuer== &quot;AD AUTHORITY&quot;]=&gt; &#39;</span>
                    <span class="s1">&#39;issue(store = &quot;Active Directory&quot;, &#39;</span>
                    <span class="s1">&#39;types =(&quot;http://schemas.xmlsoap.org/ws/2005/05/identity/claims/&#39;</span>
                    <span class="s1">&#39;nameidentifier&quot;), query=&quot;;mail;</span><span class="si">{0}</span><span class="s1">&quot;, &#39;</span>
                    <span class="s1">&#39;param = c.Value);</span><span class="se">\&#39;</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">destination_file_path</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">output</span><span class="o">.</span><span class="n">exception</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span><span class="s2">&quot;Create operation Failed at ADFS&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">machine</span><span class="o">.</span><span class="n">check_file_exists</span><span class="p">(</span><span class="n">destination_file_path</span><span class="p">):</span>
                    <span class="n">machine</span><span class="o">.</span><span class="n">delete_file</span><span class="p">(</span><span class="n">destination_file_path</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span><span class="s2">&quot;Destination path not found&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="s1">&#39;Delete&#39;</span> <span class="ow">in</span> <span class="n">operation</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">=</span> <span class="n">machine</span><span class="o">.</span><span class="n">execute_command</span><span class="p">(</span><span class="s1">&#39;Remove-adfsRelyingPArtyTrust -TargetName ADFS_check&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">output</span><span class="o">.</span><span class="n">exception</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span><span class="s2">&quot;Delete operation Failed at ADFS&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span><span class="s2">&quot;Invalid operation given&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="IdentityServersMain.initiate_saml_login"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.Helper.html#Web.AdminConsole.Helper.identity_servers_helper.IdentityServersMain.initiate_saml_login">[docs]</a>    <span class="k">def</span> <span class="nf">initiate_saml_login</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_idp_initiated</span><span class="p">,</span> <span class="n">ad_name</span><span class="p">,</span> <span class="n">web_console_url</span><span class="p">,</span> <span class="n">adfs_app_name</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span>
                            <span class="n">password</span><span class="p">,</span> <span class="n">tab_off_approach</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verify_sso</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initiates SAML login</span>

<span class="sd">        Args:</span>
<span class="sd">            is_idp_initiated: True if the login has to be initiated form the AD site</span>

<span class="sd">            ad_name         (str)   --    AD machien name /IP</span>

<span class="sd">            web_console_url(str)   -- web console URL of the client</span>

<span class="sd">            adfs_app_name  (str)   --  relying party trust app name</span>

<span class="sd">            user           (str)   --   user to login</span>

<span class="sd">            password        (str)   --password of the user</span>

<span class="sd">            tab_off_approach    (bool)  --True if SP init login is with tab approach</span>

<span class="sd">            verify_sso          (bool)  --verifies if SSO is successful</span>

<span class="sd">        Returns:True if the SAML login succeeds and false otherwise</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">is_idp_initiated</span><span class="p">:</span>
            <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">identity_provider_obj</span><span class="o">.</span><span class="n">identity_provider_initiated_login</span><span class="p">(</span><span class="n">ad_name</span><span class="p">,</span>
                                                                                  <span class="n">web_console_url</span><span class="p">,</span>
                                                                                  <span class="n">adfs_app_name</span><span class="p">,</span>
                                                                                  <span class="n">user</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span>
                                                                                  <span class="n">verify_sso</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">tab_off_approach</span><span class="p">:</span>
                <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">identity_provider_obj</span><span class="o">.</span><span class="n">service_provider_initiated_login</span><span class="p">(</span>
                    <span class="n">ad_name</span><span class="p">,</span>
                    <span class="n">web_console_url</span><span class="p">,</span>
                    <span class="n">user</span><span class="p">,</span>
                    <span class="n">password</span><span class="p">,</span>
                    <span class="n">tab_off_approach</span><span class="p">,</span>
                    <span class="n">verify_sso</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">_query</span> <span class="o">=</span> <span class="s2">&quot;select appKey from App_ThirdPartyApp where appname = &#39;</span><span class="si">{0}</span><span class="s2">&#39; and &quot;</span> \
                         <span class="s2">&quot;appType = 2&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">app_name</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">csdb</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">_query</span><span class="p">)</span>
                <span class="n">app_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">csdb</span><span class="o">.</span><span class="n">fetch_one_row</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">app_key</span><span class="p">:</span>
                    <span class="n">saml_app_key</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="nb">bytes</span><span class="p">(</span><span class="n">app_key</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;utf-&#39;</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span><span class="s2">&quot;No such app exists&quot;</span><span class="p">)</span>
                <span class="n">sp_initiated_link</span> <span class="o">=</span> <span class="n">web_console_url</span> <span class="o">+</span> <span class="s2">&quot;/initiateSaml.do?samlAppKey=&quot;</span> \
                    <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">saml_app_key</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>

                <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">identity_provider_obj</span><span class="o">.</span><span class="n">service_provider_initiated_login</span><span class="p">(</span>
                    <span class="n">ad_name</span><span class="p">,</span>
                    <span class="n">web_console_url</span><span class="p">,</span>
                    <span class="n">user</span><span class="p">,</span>
                    <span class="n">password</span><span class="p">,</span>
                    <span class="n">verify_sso</span><span class="p">,</span>
                    <span class="n">tab_off_approach</span><span class="p">,</span>
                    <span class="n">sp_initiated_link</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="n">status</span></div>

<div class="viewcode-block" id="IdentityServersMain.initiate_saml_logout"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.Helper.html#Web.AdminConsole.Helper.identity_servers_helper.IdentityServersMain.initiate_saml_logout">[docs]</a>    <span class="k">def</span> <span class="nf">initiate_saml_logout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_idp_initiated</span><span class="p">,</span> <span class="n">ad_name</span><span class="p">,</span> <span class="n">web_console_url</span><span class="p">,</span>
                             <span class="n">verify_single_logout</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs a SAML logout</span>

<span class="sd">        Args:</span>
<span class="sd">            is_idp_initiated    (bool)   -- True if it is a IDP initiated logout</span>

<span class="sd">            ad_name             (str)   --Name/IP of the AD machine</span>

<span class="sd">            web_console_url     (str)   --web console URL of the client</span>

<span class="sd">            verify_single_logout(bool)   --True ,if single logout is to be verified</span>

<span class="sd">        Returns:True if logout succeeds or not otherwise False</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">is_idp_initiated</span><span class="p">:</span>
            <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">identity_provider_obj</span><span class="o">.</span><span class="n">identity_provider_initiated_logout</span><span class="p">(</span>
                <span class="n">ad_name</span><span class="p">,</span>
                <span class="n">web_console_url</span><span class="p">,</span>
                <span class="n">verify_single_logout</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">identity_provider_obj</span><span class="o">.</span><span class="n">service_provider_initiated_logout</span><span class="p">(</span>
                <span class="n">ad_name</span><span class="p">,</span>
                <span class="n">web_console_url</span><span class="p">,</span>
                <span class="n">verify_single_logout</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">status</span></div>

<div class="viewcode-block" id="IdentityServersMain.add_associations_on_saml_app"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.Helper.html#Web.AdminConsole.Helper.identity_servers_helper.IdentityServersMain.add_associations_on_saml_app">[docs]</a>    <span class="k">def</span> <span class="nf">add_associations_on_saml_app</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds associations for a user on a SAML app</span>

<span class="sd">        Args:</span>

<span class="sd">            user    (str)   -- user to be added under associations</span>

<span class="sd">        Returns:None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_query</span> <span class="o">=</span> <span class="s2">&quot;select appKey from App_ThirdPartyApp where appname = &#39;</span><span class="si">{0}</span><span class="s2">&#39; and &quot;</span> \
                 <span class="s2">&quot;appType = 2&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">app_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">csdb</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">_query</span><span class="p">)</span>
        <span class="n">app_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">csdb</span><span class="o">.</span><span class="n">fetch_one_row</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">app_key</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span><span class="s2">&quot;No such app exists&quot;</span><span class="p">)</span>

        <span class="n">_query</span> <span class="o">=</span> <span class="s2">&quot;select props from App_ThirdPartyApp where appname = &#39;</span><span class="si">{0}</span><span class="s2">&#39; and &quot;</span> \
                 <span class="s2">&quot;appType = 2&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">app_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">csdb</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">_query</span><span class="p">)</span>
        <span class="n">props</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">csdb</span><span class="o">.</span><span class="n">fetch_one_row</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">add_associations_to_saml_app</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">app_name</span><span class="p">,</span> <span class="n">app_key</span><span class="p">,</span> <span class="n">props</span><span class="p">,</span> <span class="n">user</span><span class="p">)</span></div>

<div class="viewcode-block" id="IdentityServersMain.get_sso_url"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.Helper.html#Web.AdminConsole.Helper.identity_servers_helper.IdentityServersMain.get_sso_url">[docs]</a>    <span class="k">def</span> <span class="nf">get_sso_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        returns the SSO url of SAML app</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">saml_details</span><span class="o">.</span><span class="n">copy_sso_url</span><span class="p">()</span></div>

<div class="viewcode-block" id="IdentityServersMain.get_sp_entity_id"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.Helper.html#Web.AdminConsole.Helper.identity_servers_helper.IdentityServersMain.get_sp_entity_id">[docs]</a>    <span class="k">def</span> <span class="nf">get_sp_entity_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        returns the SP entity_id of SAML app</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">saml_details</span><span class="o">.</span><span class="n">copy_sp_entity_id</span><span class="p">()</span></div>

<div class="viewcode-block" id="IdentityServersMain.login_to_okta_and_edit_general_settings"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.Helper.html#Web.AdminConsole.Helper.identity_servers_helper.IdentityServersMain.login_to_okta_and_edit_general_settings">[docs]</a>    <span class="k">def</span> <span class="nf">login_to_okta_and_edit_general_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">okta_url</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">pwd</span><span class="p">,</span> <span class="n">app_name</span><span class="p">,</span>
                                                <span class="n">sso_url</span><span class="p">,</span> <span class="n">sp_entity_id</span><span class="p">,</span> <span class="n">name_id_format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                                <span class="n">attributes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">group_attribute</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                                <span class="n">slo</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">single_logout_url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                                <span class="n">sp_issuer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">certificate</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Login to OKTA and edit the general settings</span>

<span class="sd">        okta_url (str)          : OKTA web url</span>
<span class="sd">        username (str)          : username to login</span>
<span class="sd">        pwd (str)               : password</span>
<span class="sd">        app_name (str)          : app name whose details are to be edited</span>
<span class="sd">        sso_url (str)           : Single sign on URL</span>
<span class="sd">        sp_entity_id (str)      : SP entity ID</span>
<span class="sd">        name_id_format (str)    : Type of value to be received from SAML response</span>
<span class="sd">        attributes (dict)       : Attribute Mappings</span>
<span class="sd">        group_attribute (dict)  : Group Attribute Mappings</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">browser</span><span class="o">.</span><span class="n">open_url_in_new_tab</span><span class="p">(</span><span class="n">okta_url</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">okta_obj</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">pwd</span><span class="p">)</span>
        <span class="n">is_logged_in</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">okta_obj</span><span class="o">.</span><span class="n">check_if_login_successful</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">is_logged_in</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">okta_obj</span><span class="o">.</span><span class="n">edit_general_settings</span><span class="p">(</span><span class="n">app_name</span><span class="p">,</span>
                                                <span class="n">sso_url</span><span class="p">,</span>
                                                <span class="n">sp_entity_id</span><span class="p">,</span>
                                                <span class="n">name_id_format</span><span class="p">,</span>
                                                <span class="n">attributes</span><span class="p">,</span>
                                                <span class="n">group_attribute</span><span class="p">,</span>
                                                <span class="n">slo</span><span class="p">,</span> <span class="n">single_logout_url</span><span class="p">,</span>
                                                <span class="n">sp_issuer</span><span class="p">,</span> <span class="n">certificate</span><span class="p">)</span></div>

<div class="viewcode-block" id="IdentityServersMain.logout_from_okta"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.Helper.html#Web.AdminConsole.Helper.identity_servers_helper.IdentityServersMain.logout_from_okta">[docs]</a>    <span class="k">def</span> <span class="nf">logout_from_okta</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Logout from OKTA</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">okta_obj</span><span class="o">.</span><span class="n">logout_from_okta</span><span class="p">()</span></div>

<div class="viewcode-block" id="IdentityServersMain.single_logout"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.Helper.html#Web.AdminConsole.Helper.identity_servers_helper.IdentityServersMain.single_logout">[docs]</a>    <span class="k">def</span> <span class="nf">single_logout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">okta_url</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs single logout</span>

<span class="sd">        okta_url (str)   : OKTA web url</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">browser</span><span class="o">.</span><span class="n">open_url_in_new_tab</span><span class="p">(</span><span class="n">okta_url</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">wait_for_completion</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">okta_obj</span><span class="o">.</span><span class="n">single_logout</span><span class="p">()</span></div>

<div class="viewcode-block" id="IdentityServersMain.initiate_saml_login_with_okta"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.Helper.html#Web.AdminConsole.Helper.identity_servers_helper.IdentityServersMain.initiate_saml_login_with_okta">[docs]</a>    <span class="k">def</span> <span class="nf">initiate_saml_login_with_okta</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">webconsole_url</span><span class="p">,</span>
            <span class="n">hostname</span><span class="p">,</span>
            <span class="n">okta_url</span><span class="p">,</span>
            <span class="n">username</span><span class="p">,</span>
            <span class="n">pwd</span><span class="p">,</span>
            <span class="n">app_name</span><span class="p">,</span>
            <span class="n">is_idp_initiated</span><span class="p">,</span>
            <span class="n">tab_off_approach</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">sp_initiated_link</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initiates SAML login with OKTA as Identity provider</span>

<span class="sd">        webconsole_url (str)    :   webconsole url</span>
<span class="sd">        hostname (str)          :   commcell hostname</span>
<span class="sd">        okta_url (str)          :   OKTA web url</span>
<span class="sd">        username (str)          :   username to login</span>
<span class="sd">        pwd (str)               :   password</span>
<span class="sd">        app_name (str)          :   SAML app name in OKTA</span>
<span class="sd">        is_idp_initiated (bool) :   True/False</span>
<span class="sd">        tab_off_approach (bool) :   redirects to other url on tab</span>
<span class="sd">        sp_initiated_link (str) :   link to initiate SAML login</span>

<span class="sd">        return  :   current url after SP/IDP initiated SAML login</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">is_idp_initiated</span><span class="p">:</span>
            <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">okta_obj</span><span class="o">.</span><span class="n">idp_initiated_login</span><span class="p">(</span><span class="n">hostname</span><span class="p">,</span> <span class="n">okta_url</span><span class="p">,</span> <span class="n">app_name</span><span class="p">,</span>
                                                       <span class="n">username</span><span class="p">,</span> <span class="n">pwd</span><span class="p">,</span> <span class="n">verify_sso</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">okta_obj</span><span class="o">.</span><span class="n">sp_initiated_login</span><span class="p">(</span><span class="n">webconsole_url</span><span class="p">,</span>
                                                      <span class="n">hostname</span><span class="p">,</span>
                                                      <span class="n">okta_url</span><span class="p">,</span>
                                                      <span class="n">username</span><span class="p">,</span>
                                                      <span class="n">pwd</span><span class="p">,</span>
                                                      <span class="n">tab_off_approach</span><span class="o">=</span><span class="n">tab_off_approach</span><span class="p">,</span>
                                                      <span class="n">verify_sso</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                                      <span class="n">sp_initiated_link</span><span class="o">=</span><span class="n">sp_initiated_link</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">status</span></div>

<div class="viewcode-block" id="IdentityServersMain.initiate_saml_logout_with_okta"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.Helper.html#Web.AdminConsole.Helper.identity_servers_helper.IdentityServersMain.initiate_saml_logout_with_okta">[docs]</a>    <span class="k">def</span> <span class="nf">initiate_saml_logout_with_okta</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hostname</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        initiates SAML logoutloaded_url,</span>

<span class="sd">        loaded_url (str) :   current url after SAML login</span>
<span class="sd">        hostname (str)   :   webconsole hostname</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">okta_obj</span><span class="o">.</span><span class="n">saml_logout</span><span class="p">(</span><span class="n">hostname</span><span class="p">)</span></div>

<div class="viewcode-block" id="IdentityServersMain.delete_mapping"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.Helper.html#Web.AdminConsole.Helper.identity_servers_helper.IdentityServersMain.delete_mapping">[docs]</a>    <span class="k">def</span> <span class="nf">delete_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapping_dict</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes Attribute Mappings</span>

<span class="sd">        mapping_dict (dict)  :   Mapping dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">saml_details</span><span class="o">.</span><span class="n">delete_attribute_mapping</span><span class="p">(</span><span class="n">mapping_dict</span><span class="p">,</span> <span class="n">from_edit</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="IdentityServersMain.check_if_login_is_successful"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.Helper.html#Web.AdminConsole.Helper.identity_servers_helper.IdentityServersMain.check_if_login_is_successful">[docs]</a>    <span class="k">def</span> <span class="nf">check_if_login_is_successful</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if Login is successful or not</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">okta_obj</span><span class="o">.</span><span class="n">check_if_login_successful</span><span class="p">()</span></div>

<div class="viewcode-block" id="IdentityServersMain.check_slo"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.Helper.html#Web.AdminConsole.Helper.identity_servers_helper.IdentityServersMain.check_slo">[docs]</a>    <span class="k">def</span> <span class="nf">check_slo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">okta_url</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check single logout status</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">okta_obj</span><span class="o">.</span><span class="n">check_slo_status</span><span class="p">(</span><span class="n">okta_url</span><span class="p">)</span></div></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2019, Commvault Systems Inc. All Rights Reserved

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>