

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Web.AdminConsole.DR.monitor &mdash; Commvault Automation 11.22 documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home" alt="Documentation Home"> Commvault Automation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"></div>
            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Commvault Automation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../index.html">Module code</a> &raquo;</li>
        
      <li>Web.AdminConsole.DR.monitor</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for Web.AdminConsole.DR.monitor</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="c1"># --------------------------------------------------------------------------</span>
<span class="c1"># Copyright Commvault Systems, Inc.</span>
<span class="c1"># See LICENSE.txt in the project root for</span>
<span class="c1"># license information.</span>
<span class="c1"># --------------------------------------------------------------------------</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This module provides the function or operations that can be performed on replication monitor page</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>

<span class="kn">from</span> <span class="nn">Web.Common.page_object</span> <span class="kn">import</span> <span class="n">PageService</span><span class="p">,</span> <span class="n">WebAction</span>
<span class="kn">from</span> <span class="nn">Web.AdminConsole.Components.table</span> <span class="kn">import</span> <span class="n">Table</span><span class="p">,</span> <span class="n">CVTable</span>
<span class="kn">from</span> <span class="nn">Web.AdminConsole.Components.panel</span> <span class="kn">import</span> <span class="n">ModalPanel</span>
<span class="kn">from</span> <span class="nn">Web.AdminConsole.Components.dialog</span> <span class="kn">import</span> <span class="n">ModalDialog</span>
<span class="kn">from</span> <span class="nn">Web.AdminConsole.DR.recovery_targets</span> <span class="kn">import</span> <span class="n">RecoveryPointStore</span>
<span class="kn">from</span> <span class="nn">Web.AdminConsole.DR.fs_replication</span> <span class="kn">import</span> <span class="n">ConfigureBLR</span><span class="p">,</span> <span class="n">ReplicaCopy</span>
<span class="kn">from</span> <span class="nn">Web.Common.exceptions</span> <span class="kn">import</span> <span class="n">CVWebAutomationException</span>


<div class="viewcode-block" id="ReplicationMonitor"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.DR.html#Web.AdminConsole.DR.monitor.ReplicationMonitor">[docs]</a><span class="k">class</span> <span class="nc">ReplicationMonitor</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;All operation on s specific to Replication monitors goes here&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">admin_console</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span> <span class="o">=</span> <span class="n">admin_console</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__modal_panel</span> <span class="o">=</span> <span class="n">ModalPanel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">_load_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">props</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">has_replication_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if specified replication group exists</span>
<span class="sd">        Args:</span>
<span class="sd">            group_name           (str):      Replication group name</span>
<span class="sd">        Returns                  (bool):     True if replication group exists or False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">is_entity_present_in_column</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;label.replicationGroup&#39;</span><span class="p">],</span> <span class="n">group_name</span><span class="p">)</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">get_replication_group_details</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">group_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read replication monitor page content for specific group name</span>
<span class="sd">        Args:</span>
<span class="sd">            group_name          (str): Specify replication group name</span>
<span class="sd">        Returns                 (dict): table content</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">apply_filter_over_column</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;label.replicationSource&#39;</span><span class="p">],</span> <span class="n">source</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">apply_filter_over_column</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;label.replicationGroup&#39;</span><span class="p">],</span> <span class="n">group_name</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">get_table_data</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;label.replicationSource&#39;</span><span class="p">]]:</span>
            <span class="k">return</span> <span class="n">data</span>
        <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span><span class="s2">&quot;Replication group [</span><span class="si">%s</span><span class="s2">] not in replication monitor page&quot;</span>
                                       <span class="o">%</span> <span class="n">group_name</span><span class="p">)</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">planned_failover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">replication_group</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Planned failover for the replication group.</span>
<span class="sd">        Args:</span>
<span class="sd">            source            (str): source name</span>
<span class="sd">            replication_group (str): replication group name</span>
<span class="sd">        Returns: job id for planned failover job</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">apply_filter_over_column</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;label.replicationSource&#39;</span><span class="p">],</span> <span class="n">source</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">apply_filter_over_column</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;label.replicationGroup&#39;</span><span class="p">],</span> <span class="n">replication_group</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">select_rows</span><span class="p">([</span><span class="n">source</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">access_toolbar_menu</span><span class="p">(</span><span class="s1">&#39;plannedFailover&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__modal_panel</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span>
        <span class="n">job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">get_jobid_from_popup</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">job_id</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">unplanned_failover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">replication_group</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Unplanned failover for the replication group.</span>
<span class="sd">        Args:</span>
<span class="sd">            source            (str): source name</span>
<span class="sd">            replication_group (str): replication group name</span>
<span class="sd">        Returns: job id for unplanned failover job</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">apply_filter_over_column</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;label.replicationSource&#39;</span><span class="p">],</span> <span class="n">source</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">apply_filter_over_column</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;label.replicationGroup&#39;</span><span class="p">],</span> <span class="n">replication_group</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">select_rows</span><span class="p">([</span><span class="n">source</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">access_toolbar_menu</span><span class="p">(</span><span class="s1">&#39;unplannedFailover&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__modal_panel</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span>
        <span class="n">job_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">get_jobid_from_popup</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">job_id</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">access_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">replication_group</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Opens the vm with the given name</span>
<span class="sd">        Args:</span>
<span class="sd">            source              (str):  name of vm</span>
<span class="sd">            replication_group    (str): replication group name</span>
<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                If there is no vm with given name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">apply_filter_over_column</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;label.replicationSource&#39;</span><span class="p">],</span> <span class="n">source</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">apply_filter_over_column</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;label.replicationGroup&#39;</span><span class="p">],</span> <span class="n">replication_group</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">access_link</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">mark_for_full_replication</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">replication_group</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">         This method marks the VM for full replication</span>

<span class="sd">        Args:</span>
<span class="sd">            source            (string)    : vm whose replication is to be started immediately</span>
<span class="sd">            replication_group (string)    : replication group name</span>
<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                Replication action item is not present</span>

<span class="sd">                Wrong job text is displayed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sync_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sync_status</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">replication_group</span><span class="p">)</span>
        <span class="n">expected_sync_status</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Sync Enabled&#39;</span><span class="p">,</span> <span class="s1">&#39;In Sync&#39;</span><span class="p">,</span> <span class="s1">&#39;Sync Pending&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">sync_status</span> <span class="ow">in</span> <span class="n">expected_sync_status</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">select_rows</span><span class="p">([</span><span class="n">source</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">access_menu_from_dropdown</span><span class="p">(</span><span class="s1">&#39;VSAREP_PENDING&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span><span class="s2">&quot;status [</span><span class="si">%s</span><span class="s2">] of source is not in expected state[</span><span class="si">%s</span><span class="s2">]&quot;</span>
                                           <span class="o">%</span> <span class="p">(</span><span class="n">sync_status</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">expected_sync_status</span><span class="p">)))</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">test_boot_vm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">replication_group</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method test the boot for VM</span>
<span class="sd">        Args:</span>
<span class="sd">            source            (string)    : specify the source name</span>
<span class="sd">            replication_group (string)    : replication group name</span>
<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                Test boot VM action item is not present</span>
<span class="sd">                Wrong job text is displayed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sync_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sync_status</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">replication_group</span><span class="p">)</span>
        <span class="n">expected_sync_status</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;In Sync&#39;</span><span class="p">,</span> <span class="s1">&#39;Needs Sync&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">sync_status</span> <span class="ow">in</span> <span class="n">expected_sync_status</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">select_rows</span><span class="p">([</span><span class="n">source</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">access_menu_from_dropdown</span><span class="p">(</span><span class="s1">&#39;failoverTestBootVM&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__modal_panel</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span>
            <span class="n">job_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">get_notification</span><span class="p">()</span>
            <span class="n">replication_text</span> <span class="o">=</span> <span class="n">job_text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
            <span class="n">expected_notification</span> <span class="o">=</span> <span class="s1">&#39;Test boot requested &#39;</span>
            <span class="k">if</span> <span class="n">replication_text</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">expected_notification</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span><span class="s2">&quot;Expected notification [</span><span class="si">%s</span><span class="s2">] but got [</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span>
                                               <span class="p">(</span><span class="n">expected_notification</span><span class="p">,</span> <span class="n">replication_text</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span><span class="s2">&quot;status [</span><span class="si">%s</span><span class="s2">] of source is not in expected state[</span><span class="si">%s</span><span class="s2">]&quot;</span>
                                           <span class="o">%</span> <span class="p">(</span><span class="n">sync_status</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">expected_sync_status</span><span class="p">)))</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">sync_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">replication_group</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the sync status of vm</span>
<span class="sd">        Args:</span>
<span class="sd">            source              (String) : source name whose sync status has to be checked</span>
<span class="sd">            replication_group   (string) : replication group name</span>
<span class="sd">        Returns:</span>
<span class="sd">            Sync Status of the VM</span>
<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                Not able to find the staus for VM</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">apply_filter_over_column</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;label.replicationSource&#39;</span><span class="p">],</span> <span class="n">source</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">apply_filter_over_column</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;label.replicationGroup&#39;</span><span class="p">],</span> <span class="n">replication_group</span><span class="p">)</span>
        <span class="n">sync_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">get_column_data</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;label.column.status&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">sync_status</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span><span class="s2">&quot;Source[</span><span class="si">%s</span><span class="s2">] and replication_group[</span><span class="si">%s</span><span class="s2">] row is not &quot;</span>
                                           <span class="s2">&quot;found in monitor page&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">replication_group</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">sync_status</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<div class="viewcode-block" id="ReplicationMonitor.replicate_now"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.DR.html#Web.AdminConsole.DR.monitor.ReplicationMonitor.replicate_now">[docs]</a>    <span class="k">def</span> <span class="nf">replicate_now</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">replication_group</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Triggers replicate now by filtering source and replication group name in monitor page</span>
<span class="sd">        Args:</span>
<span class="sd">            source(str): Source name</span>
<span class="sd">            replication_group(str): replication group name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">apply_filter_over_column</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;label.replicationSource&#39;</span><span class="p">],</span> <span class="n">source</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">apply_filter_over_column</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;label.replicationGroup&#39;</span><span class="p">],</span> <span class="n">replication_group</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">select_rows</span><span class="p">([</span><span class="n">source</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">access_menu_from_dropdown</span><span class="p">(</span><span class="s1">&#39;VMReplicateNow&#39;</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="ContinuousReplicationMonitor"><a class="viewcode-back" href="../../../../source/Web.AdminConsole.DR.html#Web.AdminConsole.DR.monitor.ContinuousReplicationMonitor">[docs]</a><span class="k">class</span> <span class="nc">ContinuousReplicationMonitor</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class is used to perform monitoring operations on the Continuous tab of the Replication monitor</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">admin_console</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            admin_console: adminconsole base object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span> <span class="o">=</span> <span class="n">admin_console</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__driver</span> <span class="o">=</span> <span class="n">admin_console</span><span class="o">.</span><span class="n">driver</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table</span> <span class="o">=</span> <span class="n">CVTable</span><span class="p">(</span><span class="n">admin_console</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dialog</span> <span class="o">=</span> <span class="n">ModalDialog</span><span class="p">(</span><span class="n">admin_console</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__modal_panel</span> <span class="o">=</span> <span class="n">ModalPanel</span><span class="p">(</span><span class="n">admin_console</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">_load_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">props</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">__get_report</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets the values for each entity in the dash pane component&quot;&quot;&quot;</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">text</span><span class="p">)</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span>
                  <span class="bp">self</span><span class="o">.</span><span class="n">__driver</span><span class="o">.</span><span class="n">find_elements_by_xpath</span><span class="p">(</span><span class="s2">&quot;//div[contains(@class, &#39;entities&#39;)]&quot;</span>
                                                       <span class="s2">&quot;//span[contains(@class, &#39;entity-value&#39;)]&quot;</span><span class="p">)]</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">element</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span>
                  <span class="bp">self</span><span class="o">.</span><span class="n">__driver</span><span class="o">.</span><span class="n">find_elements_by_xpath</span><span class="p">(</span><span class="s2">&quot;//div[contains(@class, &#39;entities&#39;)]&quot;</span>
                                                       <span class="s2">&quot;//a[contains(@class, &#39;entity-container&#39;)]&quot;</span><span class="p">)]</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">values</span><span class="p">))</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">__open_grid_menu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Opens the filter menu present in the table for views and column selection&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s2">&quot;//*[@class=&#39;ui-grid-icon-container&#39;]&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">__select_menu_option</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Selects the action in the grid menu</span>
<span class="sd">        Args:</span>
<span class="sd">            action_name (str): Name of the action to be selected</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s2">&quot;//*[@class=&#39;ui-grid-menu-inner&#39;]//button[contains(text(), &#39;</span><span class="si">{}</span><span class="s2">&#39;)]&quot;</span>
                                            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">action_name</span><span class="p">))</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">__click_view_dropdown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clicks on the filters dropdown&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s2">&quot;//*[contains(@class, &#39;view-selection&#39;)]&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">__click_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;All&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clicks on the view name available on the view dropdown&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s2">&quot;//*[contains(@class, &#39;view-selection&#39;)]//*[contains(text(), &#39;</span><span class="si">{}</span><span class="s2">&#39;)]&quot;</span>
                                            <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">))</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">__fill_rule_form</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rule_id</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fills the rules inputs using the class name</span>
<span class="sd">            index: index# of the rule</span>
<span class="sd">            value: Value to be entered</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s2">&quot;//*[@id=&#39;</span><span class="si">{}</span><span class="s2">&#39;]//input&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">rule_id</span><span class="p">))</span>
        <span class="n">element</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">element</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">__click_action_menu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clicks the action menu button for the first row in the table&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s2">&quot;//*[contains(@class, &#39;cv-permitted-actions&#39;)]&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">__click_action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clicks on the action name provided&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s2">&quot;//*[contains(@class, &#39;cv-permitted-actions&#39;)]&quot;</span>
                                            <span class="s2">&quot;//li/a[contains(text(), &#39;</span><span class="si">{}</span><span class="s2">&#39;)]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">action_name</span><span class="p">))</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">report</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets the report from the web action</span>
<span class="sd">        eg: {</span>
<span class="sd">            &#39;Total pairs&#39;: 0,</span>
<span class="sd">            &#39;Point in time recovery pairs&#39;: 0,</span>
<span class="sd">            &#39;Latest recovery pairs&#39;: 0,</span>
<span class="sd">            &#39;Application consistent pairs&#39;: 0,</span>
<span class="sd">            &#39;Pairs with lag&#39;: 0</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_report</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">create_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view_name</span><span class="p">,</span> <span class="n">rules</span><span class="p">,</span> <span class="n">set_default</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new view in the replication pairs for sorting and filtering</span>
<span class="sd">        Args:</span>
<span class="sd">            view_name: Name of the view to be created</span>
<span class="sd">            rules: A dictionary of rules in the form of {&lt;column-name&gt;: &lt;value&gt;}</span>
<span class="sd">                    eg: {&#39;Source&#39;: &#39;client1&#39;}</span>
<span class="sd">            set_default: Sets the view as default when opening the replication monitor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__open_grid_menu</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__select_menu_option</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;label.createView&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">wait_for_completion</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">fill_form_by_id</span><span class="p">(</span><span class="s2">&quot;viewName&quot;</span><span class="p">,</span> <span class="n">view_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">set_default</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">checkbox_select</span><span class="p">(</span><span class="s2">&quot;chkSetAsDefault&quot;</span><span class="p">)</span>
        <span class="n">num_rules</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">rules</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">rule_idx</span><span class="p">,</span> <span class="n">rule_key</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">rules</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">select_value_from_dropdown</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;rule-</span><span class="si">{</span><span class="n">rule_idx</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">rule_key</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__fill_rule_form</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;ruleFilter-</span><span class="si">{</span><span class="n">rule_idx</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">rules</span><span class="p">[</span><span class="n">rule_key</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">rule_idx</span> <span class="o">&lt;</span> <span class="n">num_rules</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># Click add rule only if rule is not the last</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">click_button</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;label.addRule&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__modal_panel</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">check_error_message</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">wait_for_completion</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">check_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks whether a given view exists or not&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">check_if_entity_exists</span><span class="p">(</span><span class="s2">&quot;xpath&quot;</span><span class="p">,</span> <span class="s2">&quot;//*[contains(@class, &#39;view-selection&#39;)]&quot;</span>
                                                                    <span class="s2">&quot;//*[contains(text(), &#39;</span><span class="si">{}</span><span class="s2">&#39;)]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">select_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Selects a view based on the name provided&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_view</span><span class="p">(</span><span class="n">view_name</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span><span class="s1">&#39;The view </span><span class="si">{}</span><span class="s1"> does not exist&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">view_name</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__click_view_dropdown</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__click_view</span><span class="p">(</span><span class="n">view_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">wait_for_completion</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">delete_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Removes the view from the command center&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_view</span><span class="p">(</span><span class="n">view_name</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span><span class="s1">&#39;Cannot delete the view </span><span class="si">{}</span><span class="s1"> because it does not exist&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">view_name</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__open_grid_menu</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__select_menu_option</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;label.deleteView&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">wait_for_completion</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">select_value_from_dropdown</span><span class="p">(</span><span class="s2">&quot;deleteViewName&quot;</span><span class="p">,</span> <span class="n">view_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__modal_panel</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">check_error_message</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">access_action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Access the actions options present in the action button for the first row&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__click_action_menu</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">wait_for_completion</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__click_action</span><span class="p">(</span><span class="n">action_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">wait_for_completion</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">has_replication_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_client</span><span class="p">,</span> <span class="n">destination_client</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the boolean on whether the pair exists or not</span>
<span class="sd">        Args:</span>
<span class="sd">            source_client       (str): Name of the source client</span>
<span class="sd">            destination_client  (str): Name of the destination client</span>
<span class="sd">        Returns: true, if row exists, false otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">source_exists</span> <span class="o">=</span> <span class="n">source_client</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">get_column_data</span><span class="p">(</span><span class="s1">&#39;Source&#39;</span><span class="p">)</span> <span class="c1"># TODO: Fix this self.__label[&#39;label.source&#39;])</span>
        <span class="n">destination_exists</span> <span class="o">=</span> <span class="n">destination_client</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">get_column_data</span><span class="p">(</span><span class="s1">&#39;Destination&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">source_exists</span> <span class="ow">and</span> <span class="n">destination_exists</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">get_replication_group_details</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_client</span><span class="p">,</span> <span class="n">destination_client</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the row data for the selected replication pair</span>
<span class="sd">        Args:</span>
<span class="sd">            source_client       (str): Name of the source client</span>
<span class="sd">            destination_client  (str): Name of the destination client</span>
<span class="sd">        Returns: dict of table content</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_replication_group</span><span class="p">(</span><span class="n">source_client</span><span class="p">,</span> <span class="n">destination_client</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span><span class="s2">&quot;No pair </span><span class="si">{}</span><span class="s2">, </span><span class="si">{}</span><span class="s2"> found&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">source_client</span><span class="p">,</span> <span class="n">destination_client</span><span class="p">))</span>
        <span class="n">details</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__table</span><span class="o">.</span><span class="n">get_values_from_table</span><span class="p">([</span><span class="n">source_client</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">details</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">sync_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_client</span><span class="p">,</span> <span class="n">destination_client</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the synchronisation status of the FIRST replication pair of the source client</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_replication_group_details</span><span class="p">(</span><span class="n">source_client</span><span class="p">,</span> <span class="n">destination_client</span><span class="p">)[</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;header.status&#39;</span><span class="p">]]</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">access_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_client</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clicks on the FIRST replication pair for the source client name</span>
<span class="sd">        To make sure you select the right pair, ensure to use `create_view` and `select_view` functions beforehand for</span>
<span class="sd">        filtering the rows</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">select_hyperlink</span><span class="p">(</span><span class="n">source_client</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">wait_for_completion</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">resync</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs the resync operation on the FIRST replication pair for the source client</span>
<span class="sd">        To make sure you select the right pair, ensure to use `create_view` and `select_view` functions beforehand for</span>
<span class="sd">        filtering the rows</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">access_action</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;action.resync&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">wait_for_completion</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs the stop operation on the FIRST replication pair for the source client</span>
<span class="sd">        To make sure you select the right pair, ensure to use `create_view` and `select_view` functions beforehand for</span>
<span class="sd">        filtering the rows</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">access_action</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;action.stop&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">wait_for_completion</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">suspend</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs the suspend operation on the FIRST replication pair for the source client</span>
<span class="sd">        To make sure you select the right pair, ensure to use `create_view` and `select_view` functions beforehand for</span>
<span class="sd">        filtering the rows</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">access_action</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;action.suspend&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">wait_for_completion</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">resume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs the resume operation on the FIRST replication pair for the source client</span>
<span class="sd">        To make sure you select the right pair, ensure to use `create_view` and `select_view` functions beforehand for</span>
<span class="sd">        filtering the rows</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">access_action</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;action.resume&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">wait_for_completion</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs the start operation on the FIRST replication pair for the source client</span>
<span class="sd">        To make sure you select the right pair, ensure to use `create_view` and `select_view` functions beforehand for</span>
<span class="sd">        filtering the rows</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">access_action</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;action.start&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">wait_for_completion</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">delete_pair</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs the suspend operation on the FIRST replication pair for the source client</span>
<span class="sd">        To make sure you select the right pair, ensure to use `create_view` and `select_view` functions beforehand for</span>
<span class="sd">        filtering the rows</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">access_action</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;action.deletePair&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dialog</span><span class="o">.</span><span class="n">click_submit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">wait_for_completion</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">edit_recovery_options</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Accesses the Edit recovery options and then returns the RecoveryPointStore used to configure the recovery</span>
<span class="sd">        options on the page</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rpstore</span> <span class="o">=</span> <span class="n">RecoveryPointStore</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">access_action</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;action.editRecoveryOptions&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">wait_for_completion</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">rpstore</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">edit_replication_volumes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Accesses the Edit replication volumes and then returns the ConfigureBLR object used to configure the volumes</span>
<span class="sd">        on the page</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">blr</span> <span class="o">=</span> <span class="n">ConfigureBLR</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">access_action</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;label.editReplicationVolume&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">wait_for_completion</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">blr</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">create_replica_copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Accesses the replica copy pair action for a replication pair, and return the ReplicaCopy object which</span>
<span class="sd">        can be used to configure a replica copy</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">replica_copy</span> <span class="o">=</span> <span class="n">ReplicaCopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">access_action</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__label</span><span class="p">[</span><span class="s1">&#39;action.createNewPermMount&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__admin_console</span><span class="o">.</span><span class="n">wait_for_completion</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">replica_copy</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Commvault Systems Inc. All Rights Reserved

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>