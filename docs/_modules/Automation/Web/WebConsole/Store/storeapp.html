
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Automation.Web.WebConsole.Store.storeapp &#8212; Commvault Automation 11.14 documentation</title>
    <link rel="stylesheet" href="../../../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
   
  <link rel="stylesheet" href="../../../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for Automation.Web.WebConsole.Store.storeapp</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="c1"># --------------------------------------------------------------------------</span>
<span class="c1"># Copyright Commvault Systems, Inc.</span>
<span class="c1"># See LICENSE.txt in the project root for</span>
<span class="c1"># license information.</span>
<span class="c1"># --------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">time</span>

<span class="kn">from</span> <span class="nn">selenium.common.exceptions</span> <span class="k">import</span> <span class="n">NoSuchElementException</span>
<span class="kn">from</span> <span class="nn">selenium.common.exceptions</span> <span class="k">import</span> <span class="n">WebDriverException</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.common.keys</span> <span class="k">import</span> <span class="n">Keys</span>

<span class="kn">from</span> <span class="nn">AutomationUtils</span> <span class="k">import</span> <span class="n">logger</span><span class="p">,</span> <span class="n">config</span>
<span class="kn">from</span> <span class="nn">Reports.storeutils</span> <span class="k">import</span> <span class="n">StoreUtils</span>
<span class="kn">from</span> <span class="nn">Web.Common.exceptions</span> <span class="k">import</span> <span class="n">CVTimeOutException</span>
<span class="kn">from</span> <span class="nn">Web.Common.exceptions</span> <span class="k">import</span> <span class="n">CVWebAutomationException</span>
<span class="kn">from</span> <span class="nn">Web.Common.page_object</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">WebAction</span><span class="p">,</span>
    <span class="n">PageService</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">Web.WebConsole.webconsole</span> <span class="k">import</span> <span class="n">WebConsole</span>

<span class="n">_CONFIG</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_config</span><span class="p">()</span>
<span class="n">_STORE_CONFIG</span> <span class="o">=</span> <span class="n">StoreUtils</span><span class="o">.</span><span class="n">get_store_config</span><span class="p">()</span>


<div class="viewcode-block" id="StoreApp"><a class="viewcode-back" href="../../../../../Automation.Web.WebConsole.Store.html#Automation.Web.WebConsole.Store.storeapp.StoreApp">[docs]</a><span class="k">class</span> <span class="nc">StoreApp</span><span class="p">:</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class contains the methods used to interact with Store UI</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_SEARCH_FIELD_XPATH</span> <span class="o">=</span> <span class="s2">&quot;//input[@placeholder=&#39;Search&#39; and @type=&#39;text&#39;]&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">webconsole</span><span class="p">:</span> <span class="n">WebConsole</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">             webconsole (WebConsole): WebConsole object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_webconsole</span> <span class="o">=</span> <span class="n">webconsole</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_browser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_webconsole</span><span class="o">.</span><span class="n">browser</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_webconsole</span><span class="o">.</span><span class="n">browser</span><span class="o">.</span><span class="n">driver</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_is_cloud_login_complete</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Check if cloud login is complete</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_click_install_on_first_package</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Click Install on first package&quot;&quot;&quot;</span>
        <span class="n">install_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span>
                <span class="s2">&quot;//div[@class=&#39;actionBtn&#39;]/a[text()=&#39;Install&#39;]&quot;</span><span class="p">)</span>
        <span class="n">install_btn</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_click_purchase_button</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Click Purchase button&quot;&quot;&quot;</span>
        <span class="n">purchase_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span>
            <span class="s2">&quot;//div[@class=&#39;actionBtn&#39;]/a[text()=&#39;Purchase&#39;]&quot;</span><span class="p">)</span>
        <span class="n">purchase_btn</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_click_open_button</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Click Open button&quot;&quot;&quot;</span>
        <span class="n">open_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span>
            <span class="n">f</span><span class="s2">&quot;//div[@class=&#39;actionBtn&#39;]/a[text()=&#39;Open&#39;]&quot;</span><span class="p">)</span>
        <span class="n">open_btn</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_click_update_on_first_package</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Click Update on first package&quot;&quot;&quot;</span>
        <span class="n">update_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span>
                <span class="s2">&quot;//div[@class=&#39;actionBtn&#39;]/a[text()=&#39;Update&#39;]&quot;</span><span class="p">)</span>
        <span class="n">update_btn</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_click_download_on_first_package</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Click Download on first package&quot;&quot;&quot;</span>
        <span class="n">download_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span>
                <span class="s2">&quot;//div[@class=&#39;actionBtn&#39;]/a[text()=&#39;Download&#39;]&quot;</span><span class="p">)</span>
        <span class="n">download_btn</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_click_package</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Click Package name&quot;&quot;&quot;</span>
        <span class="n">package_link</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span>
            <span class="s2">&quot;//span[text()=&#39;&quot;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;&#39;]&quot;</span><span class="p">)</span>
        <span class="n">package_link</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_click_category</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Click on Package category&quot;&quot;&quot;</span>
        <span class="n">category</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span>
            <span class="s2">&quot;//nav[contains(@class,&#39;navigation&#39;)]//span[text()=&#39;</span><span class="si">%s</span><span class="s2">&#39;]&quot;</span> <span class="o">%</span> <span class="n">name</span>
        <span class="p">)</span>
        <span class="n">category</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_click_download_all_on_media_modal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Click Download All on download media window&quot;&quot;&quot;</span>
        <span class="n">download_all_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span>
            <span class="s2">&quot;//button[text()=&#39;Download All&#39;]&quot;</span><span class="p">)</span>
        <span class="n">download_all_btn</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_click_download_media_by_platform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">platform</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Click the Package hyperlink on download media window&quot;&quot;&quot;</span>
        <span class="n">download_lnk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span>
            <span class="s2">&quot;//div[@class=&#39;modal-body&#39;]//tr[./td[text()=&#39;</span><span class="si">%s</span><span class="s2">&#39;]]//span&quot;</span> <span class="o">%</span> <span class="n">platform</span>
        <span class="p">)</span>
        <span class="n">download_lnk</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_click_close_on_download_window</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Click close on download media window&quot;&quot;&quot;</span>
        <span class="n">close_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span>
            <span class="s2">&quot;(//button[text()=&#39;Close&#39;])[1]&quot;</span><span class="p">)</span>
        <span class="n">close_btn</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_click_recent_activity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Click Recent activity hyperlink&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">execute_script</span><span class="p">(</span>  <span class="c1"># To prevent opening in new tab</span>
                <span class="sd">&quot;&quot;&quot;document.querySelector(&quot;[href=&#39;activity.do&#39;]&quot;).removeAttribute(&quot;target&quot;)&quot;&quot;&quot;</span>
        <span class="p">)</span>
        <span class="n">link</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_link_text</span><span class="p">(</span><span class="s2">&quot;Recent Activity&quot;</span><span class="p">)</span>
        <span class="n">link</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_click_sub_category</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sub_category</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Click sub-category&quot;&quot;&quot;</span>
        <span class="n">sub_category_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span>
            <span class="s2">&quot;//li/a[contains(text(), &#39;</span><span class="si">%s</span><span class="s2">&#39;)]&quot;</span> <span class="o">%</span> <span class="n">sub_category</span><span class="p">)</span>
        <span class="n">sub_category_btn</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_click_clear_button_on_search_box</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Click clear on Search box&quot;&quot;&quot;</span>
        <span class="n">close_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span>
            <span class="s2">&quot;//span[@class=&#39;glyphicon glyphicon-remove&#39;]&quot;</span>
        <span class="p">)</span>
        <span class="n">close_btn</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_click_home_link_on_readme_page</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Click Home hyperlink on ReadmePage&quot;&quot;&quot;</span>
        <span class="n">home_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s2">&quot;//a[text()=&#39;home&#39;]&quot;</span><span class="p">)</span>
        <span class="n">home_btn</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_click_enable_auto_update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Click enable auto-update button&quot;&quot;&quot;</span>
        <span class="n">slider</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span>
            <span class="s2">&quot;//span[@class=&#39;store-au-span sprite icon-switch-off&#39;]&quot;</span>
        <span class="p">)</span>
        <span class="n">slider</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_click_disable_auto_update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Click disable auto-update button&quot;&quot;&quot;</span>
        <span class="n">slider</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span>
            <span class="s2">&quot;//span[@class=&#39;store-au-span sprite icon-switch-on&#39;]&quot;</span>
        <span class="p">)</span>
        <span class="n">slider</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_click_quick_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">quick_filter</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Click the filter below search bar&quot;&quot;&quot;</span>
        <span class="n">filter_button</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span>
            <span class="n">f</span><span class="s2">&quot;//*[@*=&#39;quick-filters&#39;]//*[text()=&#39;</span><span class="si">{quick_filter}</span><span class="s2">&#39;]&quot;</span>
        <span class="p">)</span>
        <span class="n">filter_button</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_click_ok_on_premium_window_popup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Click OK on Premium info popup&quot;&quot;&quot;</span>
        <span class="n">ok_btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s2">&quot;//button[.=&#39;OK&#39;]&quot;</span><span class="p">)</span>
        <span class="n">ok_btn</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_get_name_of_first_package</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get name of the first package&quot;&quot;&quot;</span>
        <span class="n">pkg_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span>
            <span class="s2">&quot;//span[@class=&#39;pkg-name-span ng-binding&#39;]&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">pkg_name</span><span class="o">.</span><span class="n">text</span>

    <span class="nd">@WebAction</span><span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_get_package_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the packages displayed&quot;&quot;&quot;</span>
        <span class="n">elements</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_elements_by_xpath</span><span class="p">(</span>
            <span class="s2">&quot;//span[@class=&#39;pkg-name-span ng-binding&#39;]&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">element</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">elements</span><span class="p">]</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_get_status_of_first_package</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get status of first package&quot;&quot;&quot;</span>
        <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span>
            <span class="s2">&quot;//div[@class=&#39;actionBtn&#39;]/a&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">status</span><span class="o">.</span><span class="n">text</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_get_category_of_first_package</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get category name of the first package displayed&quot;&quot;&quot;</span>
        <span class="n">category</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span>
            <span class="s2">&quot;//li[@data-ng-repeat=&#39;item in row&#39;]//h3&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">category</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;view all &gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_get_packages_with_premium_icon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the premium icon on the packages&quot;&quot;&quot;</span>
        <span class="n">packages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_elements_by_xpath</span><span class="p">(</span>
            <span class="s2">&quot;//*[@id=&#39;premium-package-icon&#39;]/preceding::div[@title]&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">package</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">packages</span><span class="p">]</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_get_premium_popup_text</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Read info text from premium pop&quot;&quot;&quot;</span>
        <span class="n">body_txt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span>
            <span class="s2">&quot;//*[./*/*[.=&#39;Access to Premium Packages&#39;]]/*[contains(@class, &#39;modal-body&#39;)]&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">body_txt</span><span class="o">.</span><span class="n">text</span>

    <span class="nd">@WebAction</span><span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_get_currently_selected_quick_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the currently selected quick filter&quot;&quot;&quot;</span>
        <span class="n">quick_filter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span>
            <span class="s2">&quot;//li[./*[contains(@class, &#39;active-filter&#39;)]]&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">quick_filter</span><span class="o">.</span><span class="n">text</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_read_available_filter_names</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the name of available filters&quot;&quot;&quot;</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_elements_by_xpath</span><span class="p">(</span>
            <span class="s2">&quot;//li//*[contains(@class, &#39;quick-filter&#39;)]&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">filter_</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">filter_</span> <span class="ow">in</span> <span class="n">filters</span><span class="p">]</span>

    <span class="nd">@WebAction</span><span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_is_currently_selected_subcategory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sub_category</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get currently selected sub-category&quot;&quot;&quot;</span>
        <span class="n">category</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_elements_by_xpath</span><span class="p">(</span>
            <span class="s2">&quot;//a[@class=&#39;subcategory ng-binding active&#39;]&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">category</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">category</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">sub_category</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@WebAction</span><span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_is_currently_selected_category</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">category</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the currently active category&quot;&quot;&quot;</span>
        <span class="n">_category</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_elements_by_xpath</span><span class="p">(</span>
            <span class="s2">&quot;//a[@class=&#39;active-category active&#39;]&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_category</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">_category</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">category</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@WebAction</span><span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_is_currently_searched_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">search_string</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if currently searched string is&quot;&quot;&quot;</span>
        <span class="n">search_field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_elements_by_xpath</span><span class="p">(</span>
            <span class="n">StoreApp</span><span class="o">.</span><span class="n">_SEARCH_FIELD_XPATH</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">search_field</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">search_field</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span>
                <span class="s2">&quot;value&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">search_string</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@WebAction</span><span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_is_store_app</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if current page is Store page&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">js</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">            function isStore() { </span>
<span class="s2">               divObj = document.getElementsByClassName(&quot;vm-mydata-title&quot;);</span>
<span class="s2">               if (divObj.length &gt; 0) {</span>
<span class="s2">                  return divObj[0].innerText == &quot;Store&quot;;</span>
<span class="s2">                }</span>
<span class="s2">               return false;</span>
<span class="s2">            }</span>
<span class="s2">            return isStore();</span>
<span class="s2">            &quot;&quot;&quot;</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">execute_script</span><span class="p">(</span><span class="n">js</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">WebDriverException</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@WebAction</span><span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_is_readme_page</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if current page is readme page&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">js</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">            function isReadmePage() {</span>
<span class="s2">                obj = document.getElementById(&quot;readmeFrame&quot;);</span>
<span class="s2">                return obj != null;</span>
<span class="s2">            }</span>
<span class="s2">            return isReadmePage();</span>
<span class="s2">            &quot;&quot;&quot;</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">execute_script</span><span class="p">(</span><span class="n">js</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">WebDriverException</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@WebAction</span><span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_is_store_spin_displayed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if Store&#39;s spinner loading is visible&quot;&quot;&quot;</span>
        <span class="n">js</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">            function isSpinnerVisible() {</span>
<span class="s2">                obj = document.getElementsByClassName(&quot;spinner&quot;);</span>
<span class="s2">                if (obj)</span>
<span class="s2">                    if (obj.length &gt; 0)</span>
<span class="s2">                        return obj[0].parentElement.getAttribute(&quot;class&quot;) != &quot;ng-scope ng-hide&quot;;</span>
<span class="s2">                return false;</span>
<span class="s2">            }</span>
<span class="s2">            return isSpinnerVisible();</span>
<span class="s2">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">execute_script</span><span class="p">(</span><span class="n">js</span><span class="p">)</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_is_download_media_window_open</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if download media window is open&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">modal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span>
                <span class="s2">&quot;//h4[@class=&#39;modal-title&#39; and text()=&#39;Downloads&#39;]&quot;</span>
            <span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">modal</span><span class="o">.</span><span class="n">is_displayed</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">WebDriverException</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_set_search_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">search_string</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Type search string on search field&quot;&quot;&quot;</span>
        <span class="n">search_box</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span>
            <span class="n">StoreApp</span><span class="o">.</span><span class="n">_SEARCH_FIELD_XPATH</span>
        <span class="p">)</span>
        <span class="n">search_box</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">search_box</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="n">search_string</span><span class="p">)</span>
        <span class="n">search_box</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="n">Keys</span><span class="o">.</span><span class="n">ENTER</span><span class="p">)</span>

    <span class="nd">@WebAction</span><span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_lookup_auto_update_slider</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># TODO: Remove this method to get rid of stacking</span>
        <span class="sd">&quot;&quot;&quot;Check if auto-update is enabled&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span>
            <span class="s2">&quot;//span[@class=&#39;store-au-span sprite icon-switch-off&#39;]&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_load_all_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Scroll down till all the packages are visible&quot;&quot;&quot;</span>
        <span class="n">num_package_old</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_package_list</span><span class="p">())</span>
        <span class="n">num_package_new</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">num_package_old</span> <span class="o">!=</span> <span class="n">num_package_new</span> <span class="ow">and</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">execute_script</span><span class="p">(</span>
                <span class="s2">&quot;window.scrollTo(0, document.body.scrollHeight);&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
            <span class="n">num_package_old</span> <span class="o">=</span> <span class="n">num_package_new</span>
            <span class="n">num_package_new</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_package_list</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span><span class="s2">&quot;Load all packages ended prematurely&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_lookup_package</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">package_name</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Reports&quot;</span><span class="p">,</span> <span class="n">sub_category</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">quick_filter</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Find package matching given category</span>

<span class="sd">        Args:</span>
<span class="sd">            package_name (str): Name of the package to search with</span>
<span class="sd">            category (str): Category under which to look for the package</span>
<span class="sd">            sub_category (str): The subcategory to search under</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if the package exists as the first result, else False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_filter_by</span><span class="p">(</span><span class="n">category</span><span class="p">,</span> <span class="n">sub_category</span><span class="p">,</span> <span class="n">quick_filter</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_currently_searched_string</span><span class="p">(</span><span class="n">package_name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_search_field</span><span class="p">(</span><span class="n">package_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>
        <span class="n">pkg_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_name_of_first_package</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">pkg_name</span> <span class="o">!=</span> <span class="n">package_name</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span>
                <span class="n">f</span><span class="s2">&quot;Unable to find package=[</span><span class="si">{package_name}</span><span class="s2">], category=[</span><span class="si">{category}</span><span class="s2">], &quot;</span>
                <span class="n">f</span><span class="s2">&quot;subcategory=[</span><span class="si">{sub_category}</span><span class="s2">]&quot;</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>  <span class="c1"># added to tolerate the load screen disappear issue</span>

    <span class="nd">@PageService</span><span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_wait_till_store_spin_load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Wait till store spin load&quot;&quot;&quot;</span>
        <span class="n">end_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">+</span> <span class="n">timeout</span>
        <span class="k">while</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">end_time</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_store_spin_displayed</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">CVTimeOutException</span><span class="p">(</span>
            <span class="n">timeout</span><span class="p">,</span>
            <span class="s2">&quot;Load time exceeded on store page&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">current_url</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_install_package</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">sub_category</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">expected_status</span><span class="o">=</span><span class="s2">&quot;Up-to-date&quot;</span><span class="p">,</span> <span class="n">refresh</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Common function to install package&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lookup_package</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">sub_category</span><span class="p">)</span>
        <span class="n">pkg_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_status_of_first_package</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">pkg_status</span> <span class="o">==</span> <span class="s2">&quot;Install&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_click_install_on_first_package</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span>
                <span class="s2">&quot;Unable to install package [</span><span class="si">%s</span><span class="s2">], existing package &quot;</span>
                <span class="s2">&quot;has status [</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">pkg_status</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># The loading screen disappears for a while before reappearing</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">refresh</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>
        <span class="n">pkg_status_post_install</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_status_of_first_package</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">expected_status</span> <span class="o">!=</span> <span class="n">pkg_status_post_install</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span>
                <span class="s2">&quot;Expecting status [</span><span class="si">%s</span><span class="s2">], found [</span><span class="si">%s</span><span class="s2">] for [</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">expected_status</span><span class="p">,</span>
                    <span class="n">pkg_status_post_install</span><span class="p">,</span>
                    <span class="n">name</span>
                <span class="p">)</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_download_package</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span>
                          <span class="n">sub_category</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">validate_cloud_login</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Download package from store&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lookup_package</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">sub_category</span><span class="p">)</span>
        <span class="n">pkg_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_status_of_first_package</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">pkg_status</span> <span class="o">!=</span> <span class="s2">&quot;Download&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span>
                <span class="s2">&quot;Unable to download package [</span><span class="si">%s</span><span class="s2">], existing package has &quot;</span>
                <span class="s2">&quot;[</span><span class="si">%s</span><span class="s2">] status&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">pkg_status</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_click_download_on_first_package</span><span class="p">()</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_webconsole</span><span class="o">.</span><span class="n">is_login_page</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_webconsole</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">auto_open_login_page</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_cloud_login_complete</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Login page for webconsole did not appear</span>
            <span class="k">if</span> <span class="n">validate_cloud_login</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_cloud_login_complete</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span>
                    <span class="s2">&quot;Download did not ask for authentication&quot;</span>
                <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_webconsole</span><span class="o">.</span><span class="n">get_all_unread_notifications</span><span class="p">(</span>
            <span class="n">expected_count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">expected_notifications</span><span class="o">=</span><span class="p">[</span><span class="n">f</span><span class="s2">&quot;Downloading </span><span class="se">\&quot;</span><span class="si">{name}</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">]</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_filter_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sub_category</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">quick_filter</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">category</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_currently_selected_category</span><span class="p">(</span><span class="n">category</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_click_category</span><span class="p">(</span><span class="s2">&quot;Home&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_click_category</span><span class="p">(</span><span class="n">category</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">sub_category</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_currently_selected_subcategory</span><span class="p">(</span><span class="n">sub_category</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_click_sub_category</span><span class="p">(</span><span class="n">sub_category</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">quick_filter</span><span class="p">:</span>
            <span class="n">selected_filter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_currently_selected_quick_filter</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">selected_filter</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">!=</span> <span class="n">quick_filter</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_click_quick_filter</span><span class="p">(</span><span class="n">quick_filter</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_update_package</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">sub_category</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">expected_status</span><span class="o">=</span><span class="s2">&quot;Open&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Common function to update package&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lookup_package</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">sub_category</span><span class="p">)</span>
        <span class="n">pkg_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_status_of_first_package</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">pkg_status</span> <span class="o">==</span> <span class="s2">&quot;Update&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_click_update_on_first_package</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span>
                <span class="s2">&quot;Unable to update package [</span><span class="si">%s</span><span class="s2">], existing package &quot;</span>
                <span class="s2">&quot;has status [</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">pkg_status</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># The loading screen disappears for a while before reappearing</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>
        <span class="n">pkg_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_status_of_first_package</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">pkg_status</span> <span class="o">!=</span> <span class="n">expected_status</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span>
                <span class="s2">&quot;Package [</span><span class="si">%s</span><span class="s2">]&#39;s status did not change to [Open] after&quot;</span>
                <span class="s2">&quot;install, current status [</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">pkg_status</span><span class="p">)</span>
            <span class="p">)</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_refresh_page</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Refresh page&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_browser</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">clear_search_field</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clear search field&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_currently_searched_string</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
            <span class="k">return</span>   <span class="c1"># currently no search string set</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_click_clear_button_on_search_box</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">search_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">search_string</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Reports&quot;</span><span class="p">,</span> <span class="n">refresh</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Search package with given search string</span>

<span class="sd">        Args:</span>
<span class="sd">            search_string&lt;str&gt;: String to enter into the search field on store</span>
<span class="sd">            category&lt;str&gt;: Clicks on the package category</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">refresh</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_click_category</span><span class="p">(</span><span class="n">category</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_search_field</span><span class="p">(</span><span class="n">search_string</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_package_list</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">search_by_name_on_store_homepage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">package_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if package exists by given name on homepage</span>

<span class="sd">        Args:</span>
<span class="sd">            package_name (str): Name of the package</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_search_field</span><span class="p">(</span><span class="n">package_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_name_of_first_package</span><span class="p">()</span> <span class="o">==</span> <span class="n">package_name</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_category_of_first_package</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">search_package_by_name</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">package_name</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Reports&quot;</span><span class="p">,</span> <span class="n">sub_category</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if any package exists by given criteria&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lookup_package</span><span class="p">(</span><span class="n">package_name</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">sub_category</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="n">CVWebAutomationException</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">get_package_status</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">package_name</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">sub_category</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">refresh</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get status of package from button</span>

<span class="sd">        Args:</span>
<span class="sd">            package_name (str): name of the package</span>
<span class="sd">            category (str): Any of Workflows/Alerts/Reports</span>
<span class="sd">            sub_category (str): Name of sub category</span>
<span class="sd">            refresh (bool): Refresh page to get status</span>

<span class="sd">        Returns:</span>
<span class="sd">            (str): Any of Install/Up-to-Date/Update</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">refresh</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_refresh_page</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lookup_package</span><span class="p">(</span><span class="n">package_name</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">sub_category</span><span class="p">)</span>
        <span class="n">pkg_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_status_of_first_package</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">pkg_status</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">get_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Reports&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get visible packages under category</span>
<span class="sd">        Retrieves the names of the packages visible under the specified category</span>
<span class="sd">        Not to be confused with get_all_packages which scrolls till the EOP</span>

<span class="sd">        Args:</span>
<span class="sd">            category (str): Category name which has to be clicked</span>
<span class="sd">        Returns:</span>
<span class="sd">            list: All the packages under the category</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_click_category</span><span class="p">(</span><span class="n">category</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_package_list</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">get_all_packages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sub_category</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">quick_filter</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get all package name by scrolling till end of page&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_filter_by</span><span class="p">(</span><span class="n">category</span><span class="p">,</span> <span class="n">sub_category</span><span class="p">,</span> <span class="n">quick_filter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_load_all_packages</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_package_list</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">goto_store_home</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Goto Store HomePage&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_readme_page</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_click_home_link_on_readme_page</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_click_category</span><span class="p">(</span><span class="s2">&quot;Home&quot;</span><span class="p">)</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">goto_readme</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">package_name</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Reports&quot;</span><span class="p">,</span> <span class="n">sub_category</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Open readme page of the specified package</span>

<span class="sd">        Args:</span>
<span class="sd">            package_name (str): name of the package</span>
<span class="sd">            category (str): Category under which to look for the package</span>
<span class="sd">            sub_category (str): Sub-category name of the package</span>
<span class="sd">        Returns:</span>
<span class="sd">            True if package is accessed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lookup_package</span><span class="p">(</span><span class="n">package_name</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">sub_category</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_click_package</span><span class="p">(</span><span class="n">package_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">get_all_available_filters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get all the visible filters on page&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_available_filter_names</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">get_premium_info_message</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">package_name</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sub_category</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">quick_filter</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get Premium message displayed on the Premium Popup window&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lookup_package</span><span class="p">(</span>
            <span class="n">package_name</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">sub_category</span><span class="p">,</span> <span class="n">quick_filter</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_click_purchase_button</span><span class="p">()</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># wait till model is opened</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_premium_popup_text</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_click_ok_on_premium_window_popup</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">msg</span>

    <span class="nd">@PageService</span><span class="p">(</span><span class="n">hide_args</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">download_workflow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span>
                          <span class="n">username</span><span class="o">=</span><span class="n">_STORE_CONFIG</span><span class="o">.</span><span class="n">PREMIUM_USERNAME</span><span class="p">,</span>
                          <span class="n">password</span><span class="o">=</span><span class="n">_STORE_CONFIG</span><span class="o">.</span><span class="n">PREMIUM_PASSWORD</span><span class="p">,</span>
                          <span class="n">validate_cloud_login</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Download WorkFlow</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): name of the WF to download</span>
<span class="sd">            username (str): username for store login</span>
<span class="sd">            password (str): password for store login</span>
<span class="sd">            validate_cloud_login (bool): If set to true, will validate if the download</span>
<span class="sd">                is redirected to Store server&#39;s WebConsole login page</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_download_package</span><span class="p">(</span>
            <span class="n">name</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Workflows&quot;</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">,</span>
            <span class="n">validate_cloud_login</span><span class="o">=</span><span class="n">validate_cloud_login</span><span class="p">)</span>

    <span class="nd">@PageService</span><span class="p">(</span><span class="n">hide_args</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">download_alert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span>
                       <span class="n">username</span><span class="o">=</span><span class="n">_STORE_CONFIG</span><span class="o">.</span><span class="n">PREMIUM_USERNAME</span><span class="p">,</span>
                       <span class="n">password</span><span class="o">=</span><span class="n">_STORE_CONFIG</span><span class="o">.</span><span class="n">PREMIUM_PASSWORD</span><span class="p">,</span>
                       <span class="n">validate_cloud_login</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Downloads the alert if it has &#39;Download&#39; status</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): name of the alert to download</span>
<span class="sd">            username (str): username for store login</span>
<span class="sd">            password (str): password for store login</span>
<span class="sd">            validate_cloud_login (bool): If set to true, will validate if the download</span>
<span class="sd">                is redirected to Store server&#39;s WebConsole login page</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_download_package</span><span class="p">(</span>
            <span class="n">name</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Alerts&quot;</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">,</span>
            <span class="n">validate_cloud_login</span><span class="o">=</span><span class="n">validate_cloud_login</span><span class="p">)</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">download_packages_with_multiple_platforms</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">platforms</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Download packages which have multiple download types</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): name of the package</span>
<span class="sd">            category (str): category under the package</span>
<span class="sd">            platforms (list): Leave it None to download all platforms, to download</span>
<span class="sd">                a specific list of platform, pass the platform as list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lookup_package</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">category</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_click_download_on_first_package</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_download_media_window_open</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span>
                <span class="s2">&quot;Unable to open media download window modal&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">platforms</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">platform</span> <span class="ow">in</span> <span class="n">platforms</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_click_download_media_by_platform</span><span class="p">(</span><span class="n">platform</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_click_download_all_on_media_modal</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_click_close_on_download_window</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">(</span><span class="n">hide_args</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">download_package</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                         <span class="n">name</span><span class="p">,</span>
                         <span class="n">category</span><span class="p">,</span>
                         <span class="n">username</span><span class="o">=</span><span class="n">_STORE_CONFIG</span><span class="o">.</span><span class="n">PREMIUM_USERNAME</span><span class="p">,</span>
                         <span class="n">password</span><span class="o">=</span><span class="n">_STORE_CONFIG</span><span class="o">.</span><span class="n">PREMIUM_PASSWORD</span><span class="p">,</span>
                         <span class="n">sub_category</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">validate_cloud_login</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Download package&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_download_package</span><span class="p">(</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">category</span><span class="o">=</span><span class="n">category</span><span class="p">,</span>
            <span class="n">sub_category</span><span class="o">=</span><span class="n">sub_category</span><span class="p">,</span>
            <span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span>
            <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">,</span>
            <span class="n">validate_cloud_login</span><span class="o">=</span><span class="n">validate_cloud_login</span>
        <span class="p">)</span>

    <span class="nd">@PageService</span><span class="p">(</span><span class="n">hide_args</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">download_report</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                        <span class="n">name</span><span class="p">,</span>
                        <span class="n">username</span><span class="o">=</span><span class="n">_STORE_CONFIG</span><span class="o">.</span><span class="n">PREMIUM_USERNAME</span><span class="p">,</span>
                        <span class="n">password</span><span class="o">=</span><span class="n">_STORE_CONFIG</span><span class="o">.</span><span class="n">PREMIUM_PASSWORD</span><span class="p">,</span>
                        <span class="n">validate_cloud_login</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Download the report</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): Report package name</span>
<span class="sd">            username (str): username for login</span>
<span class="sd">            password (str): password for login</span>
<span class="sd">            validate_cloud_login (bool): If set to true, will validate if the download</span>
<span class="sd">                is redirected to Store server&#39;s WebConsole login page</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_download_package</span><span class="p">(</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Reports&quot;</span><span class="p">,</span>
            <span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span>
            <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">,</span>
            <span class="n">validate_cloud_login</span><span class="o">=</span><span class="n">validate_cloud_login</span>
        <span class="p">)</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">disable_auto_update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Disable the auto-update if its enabled&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_auto_update_enabled</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_click_disable_auto_update</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">install_quick_access_tool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tool_name</span><span class="p">,</span> <span class="n">refresh</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Install quick access tool&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_install_package</span><span class="p">(</span>
            <span class="n">tool_name</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Tools&quot;</span><span class="p">,</span> <span class="n">sub_category</span><span class="o">=</span><span class="s2">&quot;Quick Access&quot;</span><span class="p">,</span>
            <span class="n">refresh</span><span class="o">=</span><span class="n">refresh</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_webconsole</span><span class="o">.</span><span class="n">get_all_unread_notifications</span><span class="p">(</span>
            <span class="n">expected_count</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="n">expected_notifications</span><span class="o">=</span><span class="p">[</span>
                <span class="s2">&quot;Tool installed successfully.&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Installing </span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">tool_name</span>
            <span class="p">]</span>
        <span class="p">)</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">install_report</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">report_name</span><span class="p">,</span> <span class="n">refresh</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Install the report</span>

<span class="sd">        Args:</span>
<span class="sd">            report_name (str): Name of the report to install</span>
<span class="sd">            refresh (bool): Refresh page before checking for package</span>
<span class="sd">                status</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_install_package</span><span class="p">(</span>
            <span class="n">report_name</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Reports&quot;</span><span class="p">,</span> <span class="n">expected_status</span><span class="o">=</span><span class="s2">&quot;Open&quot;</span><span class="p">,</span>
            <span class="n">refresh</span><span class="o">=</span><span class="n">refresh</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_webconsole</span><span class="o">.</span><span class="n">get_all_unread_notifications</span><span class="p">(</span>
            <span class="n">expected_count</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="n">expected_notifications</span><span class="o">=</span><span class="p">[</span>
                <span class="s1">&#39;Report &#39;</span> <span class="o">+</span> <span class="n">report_name</span> <span class="o">+</span> <span class="s1">&#39; installed successfully.&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Installing &quot;&#39;</span> <span class="o">+</span> <span class="n">report_name</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span>
            <span class="p">]</span>
        <span class="p">)</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">install_workflow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wf_name</span><span class="p">,</span> <span class="n">refresh</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Install the workflow from the store</span>

<span class="sd">        Args:</span>
<span class="sd">            wf_name (str): name of the workflow</span>
<span class="sd">            refresh (bool): Refresh page before checking for package</span>
<span class="sd">                status</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_install_package</span><span class="p">(</span>
            <span class="n">wf_name</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Workflows&quot;</span><span class="p">,</span> <span class="n">expected_status</span><span class="o">=</span><span class="s2">&quot;Open&quot;</span><span class="p">,</span>
            <span class="n">refresh</span><span class="o">=</span><span class="n">refresh</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_webconsole</span><span class="o">.</span><span class="n">get_all_unread_notifications</span><span class="p">(</span>
            <span class="n">expected_count</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="n">expected_notifications</span><span class="o">=</span><span class="p">[</span>
                <span class="s2">&quot;Workflow installed successfully.&quot;</span><span class="p">,</span>
                <span class="s1">&#39;Installing &quot;&#39;</span> <span class="o">+</span> <span class="n">wf_name</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span>
            <span class="p">]</span>
        <span class="p">)</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">install_alert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alert_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Install the alert from the store</span>

<span class="sd">        Args:</span>
<span class="sd">            alert_name (str): name of the alert</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_install_package</span><span class="p">(</span>
            <span class="n">alert_name</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Alerts&quot;</span><span class="p">,</span> <span class="n">expected_status</span><span class="o">=</span><span class="s2">&quot;Up-to-date&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_webconsole</span><span class="o">.</span><span class="n">get_all_unread_notifications</span><span class="p">(</span>
            <span class="n">expected_count</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="n">expected_notifications</span><span class="o">=</span><span class="p">[</span>
                <span class="s1">&#39;Alert installed successfully.&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Installing &quot;&#39;</span> <span class="o">+</span> <span class="n">alert_name</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span>
            <span class="p">]</span>
        <span class="p">)</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">is_auto_update_enabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if auto-update is enabled&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lookup_auto_update_slider</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">except</span> <span class="n">NoSuchElementException</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">validate_if_package_is_premium</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">package_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if package has premium status&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lookup_package</span><span class="p">(</span><span class="n">package_name</span><span class="p">)</span>
        <span class="n">pkg_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_status_of_first_package</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">pkg_status</span> <span class="o">!=</span> <span class="s2">&quot;Purchase&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span>
                <span class="s2">&quot;[</span><span class="si">%s</span><span class="s2">] Does not have Purchase status, it has [</span><span class="si">%s</span><span class="s2">] status&quot;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">package_name</span><span class="p">,</span> <span class="n">pkg_status</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">package_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_packages_with_premium_icon</span><span class="p">():</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span>
                <span class="s2">&quot;[</span><span class="si">%s</span><span class="s2">] Does not have Premium icon&quot;</span> <span class="o">%</span> <span class="n">package_name</span><span class="p">)</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">update_quick_access_tool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tool_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the quick access tool&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_package</span><span class="p">(</span>
            <span class="n">tool_name</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Tools&quot;</span><span class="p">,</span> <span class="n">sub_category</span><span class="o">=</span><span class="s2">&quot;Quick Access Tools&quot;</span><span class="p">)</span>
        <span class="n">msgs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_webconsole</span><span class="o">.</span><span class="n">get_all_unread_notifications</span><span class="p">(</span><span class="n">expected_count</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">err_msg</span> <span class="o">=</span> <span class="s2">&quot;Unexpected notification [</span><span class="si">%s</span><span class="s2">] while installing tool [</span><span class="si">%s</span><span class="s2">]&quot;</span>
        <span class="k">if</span> <span class="n">msgs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;Tool installed successfully.&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span><span class="n">err_msg</span> <span class="o">%</span> <span class="p">(</span><span class="n">msgs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">tool_name</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">msgs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;Installing </span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">tool_name</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span><span class="n">err_msg</span> <span class="o">%</span> <span class="p">(</span><span class="n">msgs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">tool_name</span><span class="p">))</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">update_workflow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wf_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Install the workflow from the store</span>

<span class="sd">        Args:</span>
<span class="sd">            wf_name (str): name of the workflow</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_package</span><span class="p">(</span><span class="n">wf_name</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Workflows&quot;</span><span class="p">)</span>
        <span class="n">msgs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_webconsole</span><span class="o">.</span><span class="n">get_all_unread_notifications</span><span class="p">(</span><span class="n">expected_count</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">msgs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;Installing &quot;&#39;</span> <span class="o">+</span> <span class="n">wf_name</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span>
                <span class="s2">&quot;Install workflow on [</span><span class="si">%s</span><span class="s2">] returned [</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">wf_name</span><span class="p">,</span> <span class="n">msgs</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="k">if</span> <span class="n">msgs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;Workflow installed successfully.&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span>
                <span class="s2">&quot;Received incorrect notification [</span><span class="si">%s</span><span class="s2">] for [</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">msgs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">wf_name</span><span class="p">))</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">update_report</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">report_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the report</span>

<span class="sd">        Args:</span>
<span class="sd">            report_name (str): Name of the report to install</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_package</span><span class="p">(</span><span class="n">report_name</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Reports&quot;</span><span class="p">)</span>
        <span class="n">msgs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_webconsole</span><span class="o">.</span><span class="n">get_all_unread_notifications</span><span class="p">(</span><span class="n">expected_count</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">msgs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;Installing &quot;&#39;</span> <span class="o">+</span> <span class="n">report_name</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span>
                <span class="s2">&quot;Installing report returned [</span><span class="si">%s</span><span class="s2">] for report [</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">msgs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">report_name</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">msgs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;Report &#39;</span> <span class="o">+</span> <span class="n">report_name</span> <span class="o">+</span> <span class="s1">&#39; installed successfully.&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span>
                <span class="s2">&quot;Report Import returned [</span><span class="si">%s</span><span class="s2">] for report [</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">msgs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">report_name</span>
                <span class="p">)</span>
            <span class="p">)</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">update_alert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alert_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Install the alert from the store</span>

<span class="sd">        Args:</span>
<span class="sd">            alert_name (str): name of the alert</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_package</span><span class="p">(</span><span class="n">alert_name</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Alerts&quot;</span><span class="p">,</span> <span class="n">expected_status</span><span class="o">=</span><span class="s2">&quot;Up-to-date&quot;</span><span class="p">)</span>
        <span class="n">msgs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_webconsole</span><span class="o">.</span><span class="n">get_all_unread_notifications</span><span class="p">(</span><span class="n">expected_count</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">msgs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;Installing &quot;&#39;</span> <span class="o">+</span> <span class="n">alert_name</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span>
                <span class="s2">&quot;Install alert on [</span><span class="si">%s</span><span class="s2">] returned [</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">alert_name</span><span class="p">,</span> <span class="n">msgs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">msgs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;Alert installed successfully.&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span>
                <span class="s2">&quot;Received incorrect notification [</span><span class="si">%s</span><span class="s2">] for [</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">msgs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">alert_name</span>
                <span class="p">)</span>
            <span class="p">)</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">enable_auto_update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clicks on auto-update slider if its disabled&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_auto_update_enabled</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_click_enable_auto_update</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">wait_till_load_complete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Wait till the loading is complete on Store page&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_store_app</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_wait_till_store_spin_load</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_webconsole</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>  <span class="c1"># interleaved purposefully</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_store_app</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_wait_till_store_spin_load</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">filter_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sub_category</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">quick_filter</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Filter the packages&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_filter_by</span><span class="p">(</span><span class="n">category</span><span class="p">,</span> <span class="n">sub_category</span><span class="p">,</span> <span class="n">quick_filter</span><span class="p">)</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">open_package</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">package_name</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Reports&quot;</span><span class="p">,</span> <span class="n">sub_category</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">quick_filter</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Opening package&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lookup_package</span><span class="p">(</span>
            <span class="n">package_name</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="n">category</span><span class="p">,</span> <span class="n">sub_category</span><span class="o">=</span><span class="n">sub_category</span><span class="p">,</span>
            <span class="n">quick_filter</span><span class="o">=</span><span class="n">quick_filter</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_status_of_first_package</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;Open&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span>
                <span class="n">f</span><span class="s2">&quot;[</span><span class="si">{package_name}</span><span class="s2">] does not have Open status&quot;</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_click_open_button</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span></div>


<div class="viewcode-block" id="ReadMe"><a class="viewcode-back" href="../../../../../Automation.Web.WebConsole.Store.html#Automation.Web.WebConsole.Store.storeapp.ReadMe">[docs]</a><span class="k">class</span> <span class="nc">ReadMe</span><span class="p">:</span>

    <span class="sd">&quot;&quot;&quot;Contains the methods needed to interact with the Read me page.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">webconsole</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">             webconsole (WebConsole): WebConsole object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_webconsole</span> <span class="o">=</span> <span class="n">webconsole</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span> <span class="o">=</span> <span class="n">webconsole</span><span class="o">.</span><span class="n">browser</span><span class="o">.</span><span class="n">driver</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_store</span> <span class="o">=</span> <span class="n">StoreApp</span><span class="p">(</span><span class="n">webconsole</span><span class="p">)</span>

    <span class="nd">@WebAction</span><span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_switch_to_readme_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Change context to readme frame&quot;&quot;&quot;</span>
        <span class="n">readme_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_class_name</span><span class="p">(</span><span class="s2">&quot;readmeFrame&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">switch_to_frame</span><span class="p">(</span><span class="n">readme_frame</span><span class="p">)</span>

    <span class="nd">@WebAction</span><span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_switch_to_default_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Switch to default readme page frame&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">switch_to_default_content</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_click_home</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Click home hyperlink&quot;&quot;&quot;</span>
        <span class="n">link</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s2">&quot;//a[@href and .=&#39;home&#39;]&quot;</span><span class="p">)</span>
        <span class="n">link</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_get_readme_title</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get package title from readme page&quot;&quot;&quot;</span>
        <span class="n">page_title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span>
            <span class="s2">&quot;//h1[@class=&#39;pkg-main-title ng-binding&#39;]&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">page_title</span><span class="o">.</span><span class="n">text</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_get_readme_description</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get package description from Readme page&quot;&quot;&quot;</span>
        <span class="n">page_desc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span>
            <span class="s2">&quot;//p[@class=&#39;pkg-main-desc ng-binding&#39;]&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">page_desc</span><span class="o">.</span><span class="n">text</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_get_html_readme_row_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the number of rows&quot;&quot;&quot;</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_elements_by_xpath</span><span class="p">(</span>
            <span class="s2">&quot;//table//tr[@data-ng-repeat=&#39;data in $data&#39;]&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_get_html_readme_title</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Read title from readme&quot;&quot;&quot;</span>
        <span class="n">title_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s2">&quot;sectionTitle&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">title_obj</span><span class="o">.</span><span class="n">text</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_get_html_readme_description</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Read html readme&#39;s description&quot;&quot;&quot;</span>
        <span class="n">desc_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s2">&quot;crdescription&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">desc_obj</span><span class="o">.</span><span class="n">text</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_get_html_readme_content_as_text</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return text content inside HTML Readme</span>

<span class="sd">        *IMPORTANT* - Use this method after switching to readme frame</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">readme_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s2">&quot;//body&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">readme_obj</span><span class="o">.</span><span class="n">text</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">get_readme_title</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get readme page&#39;s title&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_store</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_readme_title</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">get_readme_description</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get page description&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_store</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_readme_description</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">get_html_readme_title</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get description from html export preview&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_store</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_switch_to_readme_frame</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_html_readme_title</span><span class="p">()</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_switch_to_default_frame</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">get_html_readme_description</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get html readme description&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_store</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_switch_to_readme_frame</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_html_readme_description</span><span class="p">()</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_switch_to_default_frame</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">get_html_readme_row_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the number of rows in readme table&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_store</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_switch_to_readme_frame</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_html_readme_row_count</span><span class="p">()</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_switch_to_default_frame</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">get_html_readme_text_content</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the HTML readme&#39;s content as text&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_store</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_switch_to_readme_frame</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_html_readme_content_as_text</span><span class="p">()</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_switch_to_default_frame</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">get_sample_screenshot_message</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if SAMPLE SCREENSHOT title exists&quot;&quot;&quot;</span>
        <span class="n">web_element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_elements_by_xpath</span><span class="p">(</span>
            <span class="s2">&quot;//h2[contains(., &#39;Sample Screenshot&#39;)]&quot;</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">web_element</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span>
                <span class="s2">&quot;SAMPLE SCREENSHOT message not shown on readme page&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">web_element</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">get_hyperlink_link_text</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if hyper link exists on readme&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_switch_to_readme_frame</span><span class="p">()</span>
            <span class="n">hyperlinks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_elements_by_xpath</span><span class="p">(</span><span class="s2">&quot;//a[@href]&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">hyperlink</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">hyperlink</span> <span class="ow">in</span> <span class="n">hyperlinks</span><span class="p">]</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_switch_to_default_frame</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">visit_hyperlink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">link_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Open hyperlink&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_switch_to_readme_frame</span><span class="p">()</span>
            <span class="n">link</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_link_text</span><span class="p">(</span><span class="n">link_name</span><span class="p">)</span>
            <span class="n">link</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">window_handles</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span>
                    <span class="s2">&quot;New tab did not open after clicking hyperlink&quot;</span>
                <span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_switch_to_default_frame</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">goto_store_home</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Open store from readme page&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_click_home</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_webconsole</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span></div>


<div class="viewcode-block" id="StoreLogin"><a class="viewcode-back" href="../../../../../Automation.Web.WebConsole.Store.html#Automation.Web.WebConsole.Store.storeapp.StoreLogin">[docs]</a><span class="k">class</span> <span class="nc">StoreLogin</span><span class="p">:</span>

    <span class="sd">&quot;&quot;&quot;This class handles the operations related to store login&quot;&quot;&quot;</span>

    <span class="n">_STORE_FRAME_ID</span> <span class="o">=</span> <span class="s2">&quot;loginframe&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">webconsole</span><span class="p">:</span> <span class="n">WebConsole</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            webconsole&lt;WebConsole&gt;: WebConsole object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_webconsole</span> <span class="o">=</span> <span class="n">webconsole</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_webconsole</span><span class="o">.</span><span class="n">browser</span><span class="o">.</span><span class="n">driver</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_store</span> <span class="o">=</span> <span class="n">StoreApp</span><span class="p">(</span><span class="n">webconsole</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_browser</span> <span class="o">=</span> <span class="n">webconsole</span><span class="o">.</span><span class="n">browser</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_LOG</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">get_log</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_is_store_login_popup_open</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if store login popup is open&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_store_frame_switchable</span><span class="p">()</span> <span class="ow">or</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_store_frame_already_focused</span><span class="p">()</span>
        <span class="p">)</span>

    <span class="nd">@WebAction</span><span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_is_store_frame_already_focused</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if already inside loginFrame&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_tag_name</span><span class="p">(</span><span class="s2">&quot;iframe&quot;</span><span class="p">)</span>
            <span class="n">frame</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s2">&quot;//*[text()=&#39;Log on to Store&#39;]&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">frame</span><span class="o">.</span><span class="n">is_displayed</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">WebDriverException</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">_is_store_frame_switchable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if current frame can be switched to loginFrame&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_switch_into_login_popup_frame</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="n">WebDriverException</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_switch_to_default_frame</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_switch_into_login_popup_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Change frame to loginFrame&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">switch_to_frame</span><span class="p">(</span><span class="n">StoreLogin</span><span class="o">.</span><span class="n">_STORE_FRAME_ID</span><span class="p">)</span>

    <span class="nd">@WebAction</span><span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_switch_to_default_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Exit loginFrame and enter default frame&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">switch_to_default_content</span><span class="p">()</span>

    <span class="nd">@WebAction</span><span class="p">(</span><span class="n">delay</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_set_username</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set username on login popup&quot;&quot;&quot;</span>
        <span class="n">text_box</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s2">&quot;username&quot;</span><span class="p">)</span>
        <span class="n">text_box</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="n">username</span><span class="p">)</span>

    <span class="nd">@WebAction</span><span class="p">(</span><span class="n">hide_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_set_password</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set password on login popup&quot;&quot;&quot;</span>
        <span class="n">pwd_box</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s2">&quot;password&quot;</span><span class="p">)</span>
        <span class="n">pwd_box</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="n">password</span><span class="p">)</span>

    <span class="nd">@WebAction</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_read_store_login_popup_feedback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Read error if login Store login fails&quot;&quot;&quot;</span>
        <span class="n">feedback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s2">&quot;errorText&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">feedback</span><span class="o">.</span><span class="n">text</span>

    <span class="nd">@WebAction</span><span class="p">(</span><span class="n">delay</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_click_login</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Click login on store login popup&quot;&quot;&quot;</span>
        <span class="n">btn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s2">&quot;loginbtn&quot;</span><span class="p">)</span>
        <span class="n">btn</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

    <span class="nd">@PageService</span><span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">wait_till_login_complete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Wait till login is complete&quot;&quot;&quot;</span>
        <span class="n">end_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">+</span> <span class="n">timeout</span>
        <span class="k">while</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">end_time</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_store_login_popup_open</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">CVTimeOutException</span><span class="p">(</span>
            <span class="n">timeout</span><span class="p">,</span>
            <span class="s2">&quot;Login to store using Store Login Popup&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_driver</span><span class="o">.</span><span class="n">current_url</span>
        <span class="p">)</span>

    <span class="nd">@PageService</span><span class="p">(</span><span class="n">hide_args</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">login</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Login using store login popup&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_store_login_popup_open</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_switch_into_login_popup_frame</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_store</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_set_username</span><span class="p">(</span><span class="n">username</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_set_password</span><span class="p">(</span><span class="n">password</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_click_login</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_switch_to_default_frame</span><span class="p">()</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">wait_till_login_complete</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_store</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># Sometimes the loading screen exits sooner</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_store</span><span class="o">.</span><span class="n">wait_till_load_complete</span><span class="p">()</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_store_login_popup_open</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_switch_into_login_popup_frame</span><span class="p">()</span>
                    <span class="n">failure_msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_store_login_popup_feedback</span><span class="p">()</span>
                    <span class="k">raise</span> <span class="n">CVWebAutomationException</span><span class="p">(</span>
                        <span class="n">f</span><span class="s2">&quot;Store login failed with [</span><span class="si">{failure_msg}</span><span class="s2">]&quot;</span>
                    <span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_switch_to_default_frame</span><span class="p">()</span></div>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../../index.html">Documentation overview</a><ul>
  <li><a href="../../../../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Commvault Systems Inc..
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.11</a>
      
    </div>

    

    
  </body>
</html>