

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Server.Network.networkhelper &mdash; Commvault Automation 11.22 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home" alt="Documentation Home"> Commvault Automation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"></div>
            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Commvault Automation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>Server.Network.networkhelper</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for Server.Network.networkhelper</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="c1"># --------------------------------------------------------------------------</span>
<span class="c1"># Copyright Commvault Systems, Inc.</span>
<span class="c1"># See LICENSE.txt in the project root for</span>
<span class="c1"># license information.</span>
<span class="c1"># --------------------------------------------------------------------------</span>

<span class="sd">&quot;&quot;&quot;Helper file for performing network operations</span>

<span class="sd">NetworkHelper is the only class defined in this file</span>

<span class="sd">NetworkHelper: Helper class to perform network operations</span>

<span class="sd">NetworkHelper:</span>
<span class="sd">    __init__()                      --  initializes network helper object</span>

<span class="sd">    enable_firewall()               -- Enables firewall on given machine list</span>

<span class="sd">    disable_firewall                -- disabls firewall on given machine list</span>

<span class="sd">    exclude_machine()               -- adds a machine to firewall exclusion list of remote</span>
<span class="sd">                                       client machine</span>

<span class="sd">    remove_machine()                -- removes machine from firewall exclusion list of remote</span>
<span class="sd">                                       client machine</span>

<span class="sd">    set_one_way()                   -- sets one-way firewall between two entities</span>

<span class="sd">    set_two_way()                   -- sets two-way firewall between two entities</span>

<span class="sd">    set_via_proxy()                 -- sets via proxy route between two entities</span>

<span class="sd">    push_config_client()            -- performs push network configuration on a list of clients</span>

<span class="sd">    push_config_clientgroup()       -- performs push network configuration on a list of</span>
<span class="sd">                                        client groups</span>

<span class="sd">    set_via_gateway()               -- sets via gateway route on a client/client group</span>

<span class="sd">    enable_proxy()                  -- marks a client/client group as proxy</span>

<span class="sd">    enable_roaming_client()         -- enables roaming client option on a client/client group</span>

<span class="sd">    set_tunnelport()                -- sets the specified port as tunnel port on given list of</span>
<span class="sd">                                        clients/client groups</span>

<span class="sd">    remove_network_config()         -- removes network configuration on the given list of</span>
<span class="sd">                                        clients/client groups</span>

<span class="sd">    set_gui_tppm()                  -- configure GUI tppm</span>

<span class="sd">    set_wswc_tppm()                 -- configure webserver-webconsole tppm</span>

<span class="sd">    outgoing_route_settings()       -- sets options for outgoing routes on client/client group</span>

<span class="sd">    validate()                      -- performs check readiness and backup , restore jobs</span>
<span class="sd">                                        on the client</span>

<span class="sd">    validate_tunnel_port()          -- validates the default tunnel port set on the client</span>
<span class="sd">                                        or client group</span>

<span class="sd">    validate_keep_alive()           -- validates the default keep alive interval on the client</span>
<span class="sd">                                        or client group</span>

<span class="sd">    validate_tunnel_init()          -- validates the default tunnel init interval on the client</span>
<span class="sd">                                        or client group</span>

<span class="sd">    validate_other_defaults()       -- validates default values for force ssl, proxy, bind open</span>
<span class="sd">                                        ports and roaming client on a client or client group</span>

<span class="sd">    client_tunnel_port()            -- returns client tunnel port</span>

<span class="sd">    do_cvping()                     -- Does a cvping on the specified port on destination</span>
<span class="sd">                                        client from source client</span>

<span class="sd">    s_bind_to_interface()           -- Sets registry key sBindToInterface on the client and</span>
<span class="sd">                                        validates if client is using the specified interface</span>

<span class="sd">    cv_ip_info()                    -- Does a host name lookup for specified destination host</span>
<span class="sd">                                        from source</span>

<span class="sd">    cleanup_network()               --  handles all network clean-up part</span>

<span class="sd">    one_way_topology()              -- creates a one way network topology</span>

<span class="sd">    two_way_topology()              -- creates a two way network topology</span>

<span class="sd">    proxy_topology()                -- creates a proxy topology</span>

<span class="sd">    cascading_gateways_topology()   -- creates a cascading gateway topology</span>

<span class="sd">    delete_topology()               -- deletes a network topology</span>

<span class="sd">    push_topology()                 -- performs a push network topology</span>

<span class="sd">    modify_topology()               -- modifies properties of existing network topology</span>

<span class="sd">    set_network_throttle()          -- sets network throttling on client/client group</span>

<span class="sd">    remove_network_throttle()       -- removes network throttling on client/client group</span>

<span class="sd">    get_network_summary()           -- gets the network summary for a list of clients</span>

<span class="sd">    get_network_topology_id()       -- gets the id of a network topology</span>

<span class="sd">    run_server()                    -- Starts the server given with bat file path and command</span>

<span class="sd">    server_client_connection()      -- Initiates server/client connection on CVNetworkTestTool with specified options</span>

<span class="sd">    get_dips_client()               -- Gets Data interface pairs for a client</span>

<span class="sd">    add_dips()                      -- Adds data(backup) interface pairs on clients/client groups</span>

<span class="sd">    delete_dips()                   -- Deletes data(backup) interface pairs on clients/client groups</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="kn">from</span> <span class="nn">cvpysdk.network_topology</span> <span class="kn">import</span> <span class="n">NetworkTopologies</span>
<span class="kn">from</span> <span class="nn">cvpysdk.backup_network_pairs</span> <span class="kn">import</span> <span class="n">BackupNetworkPairs</span>
<span class="kn">from</span> <span class="nn">AutomationUtils.machine</span> <span class="kn">import</span> <span class="n">Machine</span>
<span class="kn">from</span> <span class="nn">AutomationUtils.options_selector</span> <span class="kn">import</span> <span class="n">CVEntities</span><span class="p">,</span> <span class="n">OptionsSelector</span>
<span class="kn">from</span> <span class="nn">AutomationUtils.idautils</span> <span class="kn">import</span> <span class="n">CommonUtils</span>
<span class="kn">from</span> <span class="nn">AutomationUtils</span> <span class="kn">import</span> <span class="n">config</span>
<span class="kn">from</span> <span class="nn">Server.serverhelper</span> <span class="kn">import</span> <span class="n">ServerTestCases</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">networkconstants</span>


<div class="viewcode-block" id="NetworkHelper"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper">[docs]</a><span class="k">class</span> <span class="nc">NetworkHelper</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Helper class to perform network operations&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">testcase</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initializes networkhelper object &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">testcase</span><span class="o">.</span><span class="n">log</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_testcase</span> <span class="o">=</span> <span class="n">testcase</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span> <span class="o">=</span> <span class="n">testcase</span><span class="o">.</span><span class="n">commcell</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">serverbase</span> <span class="o">=</span> <span class="n">CommonUtils</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">server</span> <span class="o">=</span> <span class="n">ServerTestCases</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_testcase</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="n">OptionsSelector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entities</span> <span class="o">=</span> <span class="n">CVEntities</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_testcase</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span> <span class="o">=</span> <span class="n">NetworkTopologies</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">backup_network_pairs</span> <span class="o">=</span> <span class="n">BackupNetworkPairs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">post_trivial_list</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pre_trivial_list</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">app_firewall_value1</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">app_firewall_value2</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">app_fwoutgoing_routes1</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">app_fwoutgoing_routes2</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">network_config</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;disable_firewall&quot;</span><span class="p">:</span>
                <span class="p">{</span>
                    <span class="s2">&quot;clients&quot;</span><span class="p">:</span> <span class="p">[],</span>
                    <span class="s2">&quot;ports&quot;</span><span class="p">:</span> <span class="p">[]</span>
                <span class="p">},</span>
            <span class="s2">&quot;delete_machine&quot;</span><span class="p">:</span>
                <span class="p">{</span>
                    <span class="s2">&quot;clients&quot;</span><span class="p">:</span> <span class="p">[]</span>
                <span class="p">},</span>
            <span class="s2">&quot;remove_network_config&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;entities&quot;</span><span class="p">:</span> <span class="p">[]</span>
            <span class="p">},</span>
            <span class="s2">&quot;s_bind_to_interface&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;client&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Representation string for the instance of the NetworkHelper class.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;NetworkHelper class instance for test case: &#39;</span><span class="si">{0}</span><span class="s2">&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_testcase</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<div class="viewcode-block" id="NetworkHelper.exclude_machine"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.exclude_machine">[docs]</a>    <span class="k">def</span> <span class="nf">exclude_machine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clients</span><span class="p">,</span> <span class="n">machine_to_exclude</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds machine to firewall exclusion list in all the given client list</span>

<span class="sd">             Args:</span>
<span class="sd">                clients               (list)   --  client list to add the exclusion</span>

<span class="sd">                machine_to_exclude    (str)   --  hostname or IP address of the machine to exclude</span>

<span class="sd">            Returns:</span>
<span class="sd">                None:</span>
<span class="sd">                    if machine is added successfully to firewall exclusion list</span>

<span class="sd">            Raises:</span>
<span class="sd">                Exception:</span>
<span class="sd">                    if any error occurred while adding firewall exclusion</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">client</span> <span class="ow">in</span> <span class="n">clients</span><span class="p">:</span>
            <span class="c1"># update cleanup dictionary before success to handle exception</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">network_config</span><span class="p">[</span><span class="s1">&#39;delete_machine&#39;</span><span class="p">][</span><span class="s1">&#39;clients&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>

            <span class="c1"># create a machine object to execute the command</span>
            <span class="n">machine_obj</span> <span class="o">=</span> <span class="n">Machine</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;adding firewall exclusion on client </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">client</span><span class="p">))</span>
            <span class="n">machine_obj</span><span class="o">.</span><span class="n">add_firewall_machine_exclusion</span><span class="p">(</span><span class="n">machine_to_exclude</span><span class="p">)</span></div>

<div class="viewcode-block" id="NetworkHelper.enable_firewall"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.enable_firewall">[docs]</a>    <span class="k">def</span> <span class="nf">enable_firewall</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">machine_names</span><span class="p">,</span> <span class="n">tunnel_ports</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds inbound rule to allow port and start firewall service in all the given clients</span>
<span class="sd">             Args:</span>
<span class="sd">                machine_names   (list)   --  list of client names</span>

<span class="sd">                tunnel_ports    (list)   --  list of tunnel ports</span>

<span class="sd">            Returns:</span>
<span class="sd">                None:</span>
<span class="sd">                    if inbound rule is added and firewall is started successfully</span>
<span class="sd">            Raises:</span>
<span class="sd">                Exception:</span>
<span class="sd">                    if any error occurred while adding rule or starting firewall</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">machine_name</span><span class="p">,</span> <span class="n">tunnel_port</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">machine_names</span><span class="p">,</span> <span class="n">tunnel_ports</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">network_config</span><span class="p">[</span><span class="s1">&#39;disable_firewall&#39;</span><span class="p">][</span><span class="s1">&#39;clients&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">machine_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">network_config</span><span class="p">[</span><span class="s1">&#39;disable_firewall&#39;</span><span class="p">][</span><span class="s1">&#39;ports&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">tunnel_port</span><span class="p">))</span>

            <span class="n">machine_obj</span> <span class="o">=</span> <span class="n">Machine</span><span class="p">(</span><span class="n">machine_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;Adding firewall allow port rule on client </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">machine_name</span><span class="p">))</span>
            <span class="n">machine_obj</span><span class="o">.</span><span class="n">add_firewall_allow_port_rule</span><span class="p">(</span><span class="n">tunnel_port</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;starting firewall on client </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">machine_name</span><span class="p">))</span>
            <span class="n">machine_obj</span><span class="o">.</span><span class="n">start_firewall</span><span class="p">()</span></div>

<div class="viewcode-block" id="NetworkHelper.disable_firewall"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.disable_firewall">[docs]</a>    <span class="k">def</span> <span class="nf">disable_firewall</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">machine_names</span><span class="p">,</span> <span class="n">tunnel_ports</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;removes inbound rule to allow port and stop firewall service in all the given clients</span>
<span class="sd">             Args:</span>
<span class="sd">                machine_names   (list)   --  list of client names</span>

<span class="sd">                tunnel_ports    (list)   --  list of tunnel ports</span>

<span class="sd">            Returns:</span>
<span class="sd">                None:</span>
<span class="sd">                    if inbound rule is removed and firewall is started successfully</span>
<span class="sd">            Raises:</span>
<span class="sd">                Exception:</span>
<span class="sd">                    if any error occurred while removing rule or stopping firewall</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">machine_name</span><span class="p">,</span> <span class="n">tunnel_port</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">machine_names</span><span class="p">,</span> <span class="n">tunnel_ports</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">machine_obj</span> <span class="o">=</span> <span class="n">Machine</span><span class="p">(</span><span class="n">machine_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;disabling firewall on client </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">machine_name</span><span class="p">))</span>
                <span class="n">machine_obj</span><span class="o">.</span><span class="n">stop_firewall</span><span class="p">()</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="s2">&quot;removing firewall allow port rule on client </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">machine_name</span><span class="p">))</span>
                <span class="n">machine_obj</span><span class="o">.</span><span class="n">remove_firewall_allow_port_rule</span><span class="p">(</span><span class="n">tunnel_port</span><span class="p">)</span>

            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">excp</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">excp</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Using machine credentials to disable firewall&quot;</span><span class="p">)</span>
                <span class="n">config_json</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_config</span><span class="p">()</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">config_json</span><span class="o">.</span><span class="n">Network</span><span class="o">.</span><span class="n">username</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Username is missing in config.json. &quot;</span>
                                    <span class="s2">&quot;Please add username and password&quot;</span><span class="p">)</span>
                <span class="n">cl_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">machine_name</span><span class="p">)</span>
                <span class="n">machine_obj</span> <span class="o">=</span> <span class="n">Machine</span><span class="p">(</span><span class="n">cl_obj</span><span class="o">.</span><span class="n">client_hostname</span><span class="p">,</span>
                                      <span class="n">username</span><span class="o">=</span><span class="n">config_json</span><span class="o">.</span><span class="n">Network</span><span class="o">.</span><span class="n">username</span><span class="p">,</span>
                                      <span class="n">password</span><span class="o">=</span><span class="n">config_json</span><span class="o">.</span><span class="n">Network</span><span class="o">.</span><span class="n">password</span><span class="p">)</span>
                <span class="n">machine_obj</span><span class="o">.</span><span class="n">stop_firewall</span><span class="p">()</span>
                <span class="n">machine_obj</span><span class="o">.</span><span class="n">remove_firewall_allow_port_rule</span><span class="p">(</span><span class="n">tunnel_port</span><span class="p">)</span></div>

<div class="viewcode-block" id="NetworkHelper.remove_machine"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.remove_machine">[docs]</a>    <span class="k">def</span> <span class="nf">remove_machine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clients</span><span class="p">,</span> <span class="n">excluded_machine</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;removes machine from firewall exclusion list in all the given client list</span>

<span class="sd">             Args:</span>
<span class="sd">                clients             (list)  --  list of client names</span>

<span class="sd">                excluded_machine    (str)   --  hostname or IP address of the machine to exclude</span>

<span class="sd">            Returns:</span>
<span class="sd">                None:</span>
<span class="sd">                    if machine is removed successfully from firewall exclusion list</span>

<span class="sd">            Raises:</span>
<span class="sd">                Exception:</span>
<span class="sd">                    if any error occurred while removing firewall exclusion</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">client</span> <span class="ow">in</span> <span class="n">clients</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">machine_obj</span> <span class="o">=</span> <span class="n">Machine</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;removing firewall exclusion on client </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">client</span><span class="p">))</span>
                <span class="n">machine_obj</span><span class="o">.</span><span class="n">remove_firewall_machine_exclusion</span><span class="p">(</span><span class="n">excluded_machine</span><span class="p">)</span>

            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">excp</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">excp</span><span class="p">)</span></div>

<div class="viewcode-block" id="NetworkHelper.set_one_way"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.set_one_way">[docs]</a>    <span class="k">def</span> <span class="nf">set_one_way</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity1</span><span class="p">,</span> <span class="n">entity2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets one-way firewall between two entities (client/client group)</span>

<span class="sd">        Args:</span>
<span class="sd">                entity1(dict)  -- dict of entity name</span>
<span class="sd">                {&#39;clientName&#39;:val}</span>

<span class="sd">                entity2(dict)  -- dict of entity name</span>
<span class="sd">                {&#39;clientGroupName&#39;:val}</span>

<span class="sd">                Note: pass the key name based on entity</span>

<span class="sd">            Example:</span>
<span class="sd">                entity1:</span>
<span class="sd">                {</span>
<span class="sd">                &#39;clientName&#39;: &#39;centOS&#39;,</span>
<span class="sd">                }</span>

<span class="sd">                entity2:</span>
<span class="sd">                {</span>
<span class="sd">                &#39;clientGroupName&#39;: &#39;Laptop Clients&#39;</span>
<span class="sd">                }</span>

<span class="sd">        Raises:</span>
<span class="sd">                Exception:</span>
<span class="sd">                    if the required key is missing in the input value passed</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Setting one-way firewall&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">obj1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_entity_object</span><span class="p">(</span><span class="n">entity1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">obj1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;client&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">network_config</span><span class="p">[</span><span class="s1">&#39;remove_network_config&#39;</span><span class="p">][</span><span class="s1">&#39;entities&#39;</span><span class="p">]</span><span class="o">.</span> \
                    <span class="n">append</span><span class="p">({</span><span class="s1">&#39;clientName&#39;</span><span class="p">:</span> <span class="n">entity1</span><span class="p">[</span><span class="s1">&#39;clientName&#39;</span><span class="p">]})</span>
                <span class="n">incoming_connection1</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="s1">&#39;BLOCKED&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;entity&#39;</span><span class="p">:</span> <span class="n">entity1</span><span class="p">[</span><span class="s1">&#39;clientName&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;isClient&#39;</span><span class="p">:</span> <span class="kc">True</span>
                    <span class="p">}]</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">network_config</span><span class="p">[</span><span class="s1">&#39;remove_network_config&#39;</span><span class="p">][</span><span class="s1">&#39;entities&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="p">{</span><span class="s1">&#39;clientGroupName&#39;</span><span class="p">:</span> <span class="n">entity1</span><span class="p">[</span><span class="s1">&#39;clientGroupName&#39;</span><span class="p">]})</span>
                <span class="n">incoming_connection1</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="s1">&#39;BLOCKED&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;entity&#39;</span><span class="p">:</span> <span class="n">entity1</span><span class="p">[</span><span class="s1">&#39;clientGroupName&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;isClient&#39;</span><span class="p">:</span> <span class="kc">False</span>
                    <span class="p">}]</span>

            <span class="n">obj2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_entity_object</span><span class="p">(</span><span class="n">entity2</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">obj2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;client&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">network_config</span><span class="p">[</span><span class="s1">&#39;remove_network_config&#39;</span><span class="p">][</span><span class="s1">&#39;entities&#39;</span><span class="p">]</span><span class="o">.</span> \
                    <span class="n">append</span><span class="p">({</span><span class="s1">&#39;clientName&#39;</span><span class="p">:</span> <span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;clientName&#39;</span><span class="p">]})</span>
                <span class="n">incoming_connection2</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="s1">&#39;RESTRICTED&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;entity&#39;</span><span class="p">:</span> <span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;clientName&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;isClient&#39;</span><span class="p">:</span> <span class="kc">True</span>
                    <span class="p">}]</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">network_config</span><span class="p">[</span><span class="s1">&#39;remove_network_config&#39;</span><span class="p">][</span><span class="s1">&#39;entities&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="p">{</span><span class="s1">&#39;clientGroupName&#39;</span><span class="p">:</span> <span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;clientGroupName&#39;</span><span class="p">]})</span>
                <span class="n">incoming_connection2</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="s1">&#39;RESTRICTED&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;entity&#39;</span><span class="p">:</span> <span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;clientGroupName&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;isClient&#39;</span><span class="p">:</span> <span class="kc">False</span>
                    <span class="p">}]</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Setting </span><span class="si">{0}</span><span class="s2"> as restricted on incoming connections of </span><span class="si">{1}</span><span class="s2">&quot;</span>
                          <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">entity2</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">list</span><span class="p">(</span><span class="n">entity1</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">]))</span>

            <span class="n">obj1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">set_incoming_connections</span><span class="p">(</span>
                <span class="n">incoming_connection2</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Setting </span><span class="si">{0}</span><span class="s2"> as blocked on incoming connections of </span><span class="si">{1}</span><span class="s2">&quot;</span>
                          <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">entity1</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">list</span><span class="p">(</span><span class="n">entity2</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">]))</span>

            <span class="n">obj2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">set_incoming_connections</span><span class="p">(</span><span class="n">incoming_connection1</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">excp</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Exception raised with error </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">excp</span><span class="p">))</span></div>

<div class="viewcode-block" id="NetworkHelper.set_two_way"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.set_two_way">[docs]</a>    <span class="k">def</span> <span class="nf">set_two_way</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity1</span><span class="p">,</span> <span class="n">entity2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets two-way firewall between two client/client group</span>

<span class="sd">        Args:</span>
<span class="sd">                entity1(dict)  -- dict of entity name</span>
<span class="sd">                {&#39;clientName&#39;:val}</span>

<span class="sd">                entity2(dict)  -- dict of entity name</span>
<span class="sd">                {&#39;clientGroupName&#39;:val}</span>

<span class="sd">                Note: pass the key name based on entity</span>

<span class="sd">            Example:</span>
<span class="sd">                entity1:</span>
<span class="sd">                {</span>
<span class="sd">                &#39;clientName&#39;: &#39;centOS&#39;,</span>
<span class="sd">                }</span>

<span class="sd">                entity2:</span>
<span class="sd">                {</span>
<span class="sd">                &#39;clientGroupName&#39;: &#39;Laptop Clients&#39;</span>
<span class="sd">                }</span>

<span class="sd">        Raises:</span>
<span class="sd">                Exception:</span>
<span class="sd">                    if the required key is missing in the input value passed</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Setting two-way firewall&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">obj1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_entity_object</span><span class="p">(</span><span class="n">entity1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">obj1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;client&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">network_config</span><span class="p">[</span><span class="s1">&#39;remove_network_config&#39;</span><span class="p">][</span><span class="s1">&#39;entities&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                    <span class="s1">&#39;clientName&#39;</span><span class="p">:</span> <span class="n">entity1</span><span class="p">[</span><span class="s1">&#39;clientName&#39;</span><span class="p">]})</span>
                <span class="n">incoming_connection1</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="s1">&#39;RESTRICTED&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;entity&#39;</span><span class="p">:</span> <span class="n">entity1</span><span class="p">[</span><span class="s1">&#39;clientName&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;isClient&#39;</span><span class="p">:</span> <span class="kc">True</span>
                    <span class="p">}]</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">network_config</span><span class="p">[</span><span class="s1">&#39;remove_network_config&#39;</span><span class="p">][</span><span class="s1">&#39;entities&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                    <span class="s1">&#39;clientGroupName&#39;</span><span class="p">:</span> <span class="n">entity1</span><span class="p">[</span><span class="s1">&#39;clientGroupName&#39;</span><span class="p">]})</span>
                <span class="n">incoming_connection1</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="s1">&#39;RESTRICTED&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;entity&#39;</span><span class="p">:</span> <span class="n">entity1</span><span class="p">[</span><span class="s1">&#39;clientGroupName&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;isClient&#39;</span><span class="p">:</span> <span class="kc">False</span>
                    <span class="p">}]</span>

            <span class="n">obj2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_entity_object</span><span class="p">(</span><span class="n">entity2</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">obj2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;client&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">network_config</span><span class="p">[</span><span class="s1">&#39;remove_network_config&#39;</span><span class="p">][</span><span class="s1">&#39;entities&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                    <span class="s1">&#39;clientName&#39;</span><span class="p">:</span> <span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;clientName&#39;</span><span class="p">]})</span>
                <span class="n">incoming_connection2</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="s1">&#39;RESTRICTED&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;entity&#39;</span><span class="p">:</span> <span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;clientName&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;isClient&#39;</span><span class="p">:</span> <span class="kc">True</span>
                    <span class="p">}]</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">network_config</span><span class="p">[</span><span class="s1">&#39;remove_network_config&#39;</span><span class="p">][</span><span class="s1">&#39;entities&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                    <span class="s1">&#39;clientGroupName&#39;</span><span class="p">:</span> <span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;clientGroupName&#39;</span><span class="p">]})</span>
                <span class="n">incoming_connection2</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="s1">&#39;RESTRICTED&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;entity&#39;</span><span class="p">:</span> <span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;clientGroupName&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;isClient&#39;</span><span class="p">:</span> <span class="kc">False</span>
                    <span class="p">}]</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Setting </span><span class="si">{0}</span><span class="s2"> as restricted on incoming connections of </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span>
                          <span class="nb">format</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">entity2</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">list</span><span class="p">(</span><span class="n">entity1</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">]))</span>
            <span class="n">obj1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">set_incoming_connections</span><span class="p">(</span><span class="n">incoming_connection2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Setting </span><span class="si">{0}</span><span class="s2"> as restricted on incoming connections of </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span>
                          <span class="nb">format</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">entity1</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">list</span><span class="p">(</span><span class="n">entity2</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">]))</span>
            <span class="n">obj2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">set_incoming_connections</span><span class="p">(</span><span class="n">incoming_connection1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Setting done...&quot;</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">excp</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Exception raised with error </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">excp</span><span class="p">))</span></div>

<div class="viewcode-block" id="NetworkHelper.set_via_proxy"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.set_via_proxy">[docs]</a>    <span class="k">def</span> <span class="nf">set_via_proxy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity1</span><span class="p">,</span> <span class="n">entity2</span><span class="p">,</span> <span class="n">proxy</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets firewall via proxy between two client/client group</span>

<span class="sd">                Args:</span>
<span class="sd">                entity1(dict)  -- dict of entity name and it&#39;s type</span>
<span class="sd">                {&#39;entity&#39;:val,&#39;isClient&#39;:val}</span>

<span class="sd">                entity2(dict)  -- dict of entity name and it&#39;s type</span>
<span class="sd">                {&#39;entity&#39;:val,&#39;isClient&#39;:val}</span>

<span class="sd">                proxy(dict)    -- dict of entity name and it&#39;s type</span>
<span class="sd">                {&#39;entity&#39;:val,&#39;isClient&#39;:val}</span>

<span class="sd">            Example:</span>

<span class="sd">                {</span>
<span class="sd">                &#39;entity&#39;: &#39;centOS&#39;,</span>
<span class="sd">                &#39;isClient&#39; : True</span>
<span class="sd">                }</span>



<span class="sd">        Raises:</span>
<span class="sd">                Exception:</span>
<span class="sd">                    if the required key is missing in the input value passed</span>



<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Setting firewall via proxy between the clients&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">entity1</span><span class="p">[</span><span class="s1">&#39;isClient&#39;</span><span class="p">]:</span>
                <span class="n">obj1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">entity1</span><span class="p">[</span><span class="s1">&#39;entity&#39;</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">network_config</span><span class="p">[</span><span class="s1">&#39;remove_network_config&#39;</span><span class="p">][</span><span class="s1">&#39;entities&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                    <span class="s1">&#39;clientName&#39;</span><span class="p">:</span> <span class="n">entity1</span><span class="p">[</span><span class="s1">&#39;entity&#39;</span><span class="p">]})</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">obj1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">client_groups</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">entity1</span><span class="p">[</span><span class="s1">&#39;entity&#39;</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">network_config</span><span class="p">[</span><span class="s1">&#39;remove_network_config&#39;</span><span class="p">][</span><span class="s1">&#39;entities&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                    <span class="s1">&#39;clientGroupName&#39;</span><span class="p">:</span> <span class="n">entity1</span><span class="p">[</span><span class="s1">&#39;entity&#39;</span><span class="p">]})</span>

            <span class="k">if</span> <span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;isClient&#39;</span><span class="p">]:</span>
                <span class="n">obj2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;entity&#39;</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">network_config</span><span class="p">[</span><span class="s1">&#39;remove_network_config&#39;</span><span class="p">][</span><span class="s1">&#39;entities&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                    <span class="s1">&#39;clientName&#39;</span><span class="p">:</span> <span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;entity&#39;</span><span class="p">]})</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">obj2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">client_groups</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;entity&#39;</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">network_config</span><span class="p">[</span><span class="s1">&#39;remove_network_config&#39;</span><span class="p">][</span><span class="s1">&#39;entities&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                    <span class="s1">&#39;clientGroupName&#39;</span><span class="p">:</span> <span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;entity&#39;</span><span class="p">]})</span>

            <span class="k">if</span> <span class="n">proxy</span><span class="p">[</span><span class="s1">&#39;isClient&#39;</span><span class="p">]:</span>
                <span class="n">obj3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">proxy</span><span class="p">[</span><span class="s1">&#39;entity&#39;</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">network_config</span><span class="p">[</span><span class="s1">&#39;remove_network_config&#39;</span><span class="p">][</span><span class="s1">&#39;entities&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                    <span class="s1">&#39;clientName&#39;</span><span class="p">:</span> <span class="n">proxy</span><span class="p">[</span><span class="s1">&#39;entity&#39;</span><span class="p">]})</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">obj3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">client_groups</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">proxy</span><span class="p">[</span><span class="s1">&#39;entity&#39;</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">network_config</span><span class="p">[</span><span class="s1">&#39;remove_network_config&#39;</span><span class="p">][</span><span class="s1">&#39;entities&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                    <span class="s1">&#39;clientGroupName&#39;</span><span class="p">:</span> <span class="n">proxy</span><span class="p">[</span><span class="s1">&#39;entity&#39;</span><span class="p">]})</span>

            <span class="n">incoming_connection</span> <span class="o">=</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="s1">&#39;RESTRICTED&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;entity&#39;</span><span class="p">:</span> <span class="n">entity1</span><span class="p">[</span><span class="s1">&#39;entity&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;isClient&#39;</span><span class="p">:</span> <span class="n">entity1</span><span class="p">[</span><span class="s1">&#39;isClient&#39;</span><span class="p">]</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="s1">&#39;RESTRICTED&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;entity&#39;</span><span class="p">:</span> <span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;entity&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;isClient&#39;</span><span class="p">:</span> <span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;isClient&#39;</span><span class="p">]</span>
                <span class="p">}</span>
            <span class="p">]</span>

            <span class="n">obj3</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">proxy</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">obj3</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">set_incoming_connections</span><span class="p">(</span><span class="n">incoming_connection</span><span class="p">)</span>

            <span class="n">incoming_connection</span> <span class="o">=</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="s1">&#39;BLOCKED&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;entity&#39;</span><span class="p">:</span> <span class="n">proxy</span><span class="p">[</span><span class="s1">&#39;entity&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;isClient&#39;</span><span class="p">:</span> <span class="n">proxy</span><span class="p">[</span><span class="s1">&#39;isClient&#39;</span><span class="p">]</span>
                <span class="p">}]</span>

            <span class="n">obj1</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">set_incoming_connections</span><span class="p">(</span><span class="n">incoming_connection</span><span class="p">)</span>
            <span class="n">obj2</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">set_incoming_connections</span><span class="p">(</span><span class="n">incoming_connection</span><span class="p">)</span>

            <span class="n">outgoing_routes1</span> <span class="o">=</span> <span class="p">[{</span>
                <span class="s1">&#39;routeType&#39;</span><span class="p">:</span> <span class="s1">&#39;VIA_PROXY&#39;</span><span class="p">,</span>
                <span class="s1">&#39;remoteEntity&#39;</span><span class="p">:</span> <span class="n">entity1</span><span class="p">[</span><span class="s1">&#39;entity&#39;</span><span class="p">],</span>
                <span class="s1">&#39;remoteProxy&#39;</span><span class="p">:</span> <span class="n">proxy</span><span class="p">[</span><span class="s1">&#39;entity&#39;</span><span class="p">],</span>
                <span class="s1">&#39;isClient&#39;</span><span class="p">:</span> <span class="n">entity1</span><span class="p">[</span><span class="s1">&#39;isClient&#39;</span><span class="p">]</span>
            <span class="p">}]</span>

            <span class="n">obj2</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">set_outgoing_routes</span><span class="p">(</span><span class="n">outgoing_routes1</span><span class="p">)</span>

            <span class="n">outgoing_routes2</span> <span class="o">=</span> <span class="p">[{</span>
                <span class="s1">&#39;routeType&#39;</span><span class="p">:</span> <span class="s1">&#39;VIA_PROXY&#39;</span><span class="p">,</span>
                <span class="s1">&#39;remoteEntity&#39;</span><span class="p">:</span> <span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;entity&#39;</span><span class="p">],</span>
                <span class="s1">&#39;remoteProxy&#39;</span><span class="p">:</span> <span class="n">proxy</span><span class="p">[</span><span class="s1">&#39;entity&#39;</span><span class="p">],</span>
                <span class="s1">&#39;isClient&#39;</span><span class="p">:</span> <span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;isClient&#39;</span><span class="p">]</span>
            <span class="p">}]</span>

            <span class="n">obj1</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">set_outgoing_routes</span><span class="p">(</span><span class="n">outgoing_routes2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Setting done...&quot;</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">excp</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Exception raised with error </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">excp</span><span class="p">))</span></div>

<div class="viewcode-block" id="NetworkHelper.push_config_client"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.push_config_client">[docs]</a>    <span class="k">def</span> <span class="nf">push_config_client</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clients</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Performs a push network configuration on the list of clients</span>

<span class="sd">            Args:</span>
<span class="sd">                clients : list of client names</span>

<span class="sd">                Example:</span>
<span class="sd">                    [&quot;auto&quot;, &quot;v11-restapi&quot;]</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;*&quot;</span> <span class="o">*</span>
            <span class="mi">10</span> <span class="o">+</span>
            <span class="s2">&quot;Performing push network configuration on the list of clients&quot;</span> <span class="o">+</span>
            <span class="s2">&quot;*&quot;</span> <span class="o">*</span>
            <span class="mi">10</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">client</span> <span class="ow">in</span> <span class="n">clients</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;Performing push network configuration on Client </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">client</span><span class="p">))</span>

            <span class="n">_client_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>

            <span class="n">_client_obj</span><span class="o">.</span><span class="n">push_network_config</span><span class="p">()</span></div>

<div class="viewcode-block" id="NetworkHelper.push_config_clientgroup"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.push_config_clientgroup">[docs]</a>    <span class="k">def</span> <span class="nf">push_config_clientgroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clientgroups</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Performs a push network configuration on the list of client groups</span>

<span class="sd">        Args:</span>
<span class="sd">                clients : list of client names</span>

<span class="sd">                Example:</span>
<span class="sd">                    [&quot;Testgp&quot;]</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;*&quot;</span> <span class="o">*</span>
            <span class="mi">10</span> <span class="o">+</span>
            <span class="s2">&quot;Performing push network configuration on the list of client groups&quot;</span> <span class="o">+</span>
            <span class="s2">&quot;*&quot;</span> <span class="o">*</span>
            <span class="mi">10</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">clientgroup</span> <span class="ow">in</span> <span class="n">clientgroups</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;Performing push network configuration on Client Group </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">clientgroup</span><span class="p">))</span>

            <span class="n">_clientgroup_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">client_groups</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">clientgroup</span><span class="p">)</span>

            <span class="n">_clientgroup_obj</span><span class="o">.</span><span class="n">push_network_config</span><span class="p">()</span></div>

<div class="viewcode-block" id="NetworkHelper.set_via_gateway"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.set_via_gateway">[docs]</a>    <span class="k">def</span> <span class="nf">set_via_gateway</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity1</span><span class="p">,</span> <span class="n">entity2</span><span class="p">,</span> <span class="n">gateway_info</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the route via gateway</span>

<span class="sd">            Args:</span>
<span class="sd">                entity1(dict)  -- dict of entity name</span>
<span class="sd">                                This should be entity on which gateway route has to be defined.</span>
<span class="sd">                {&#39;clientName&#39;:val} or {&#39;clientGroupName&#39;:val}</span>


<span class="sd">                entity2(dict)  -- dict of client name and number of streams.</span>
<span class="sd">                                  Entity value can be a client name only.</span>
<span class="sd">                                  This is the remote entity for which gateway will be set.</span>
<span class="sd">                {&#39;clientName&#39;:val,&#39;streams&#39;:val}</span>

<span class="sd">                gateway_info(dict) -- dict of gateway port and gateway host</span>
<span class="sd">                {&#39;gatewayPort&#39;:val,&#39;gatewayHost&#39;:val}</span>

<span class="sd">            Example:</span>
<span class="sd">                entity1:</span>
<span class="sd">                {</span>
<span class="sd">                &#39;clientName&#39;: &#39;Test&#39;</span>
<span class="sd">                }</span>

<span class="sd">                entity2:</span>
<span class="sd">                {</span>
<span class="sd">                &#39;clientName&#39;: &#39;centOS&#39;,</span>
<span class="sd">                &#39;streams&#39; : 2</span>
<span class="sd">                }</span>

<span class="sd">                entity3:</span>
<span class="sd">                {</span>
<span class="sd">                &#39;gatewayPort&#39;: 443,</span>
<span class="sd">                &#39;gatewayHost&#39; : &#39;1.2.3.4&#39;</span>
<span class="sd">                }</span>


<span class="sd">        Raises:</span>
<span class="sd">                Exception:</span>
<span class="sd">                    if the required key is missing in the input value passed</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_entity_object</span><span class="p">(</span><span class="n">entity1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Setting Gateway route on </span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span>
                          <span class="nb">format</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nb">list</span><span class="p">(</span><span class="n">entity1</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">]))</span>
            <span class="n">outgoing_routes</span> <span class="o">=</span> <span class="p">[{</span>
                <span class="s1">&#39;routeType&#39;</span><span class="p">:</span> <span class="s1">&#39;VIA_GATEWAY&#39;</span><span class="p">,</span>
                <span class="s1">&#39;remoteEntity&#39;</span><span class="p">:</span> <span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;clientName&#39;</span><span class="p">],</span>
                <span class="s1">&#39;streams&#39;</span><span class="p">:</span> <span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;streams&#39;</span><span class="p">],</span>
                <span class="s1">&#39;gatewayPort&#39;</span><span class="p">:</span> <span class="n">gateway_info</span><span class="p">[</span><span class="s1">&#39;gatewayPort&#39;</span><span class="p">],</span>
                <span class="s1">&#39;gatewayHost&#39;</span><span class="p">:</span> <span class="n">gateway_info</span><span class="p">[</span><span class="s1">&#39;gatewayHost&#39;</span><span class="p">],</span>
                <span class="s1">&#39;isClient&#39;</span><span class="p">:</span> <span class="kc">True</span>
            <span class="p">}]</span>

            <span class="n">obj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">set_outgoing_routes</span><span class="p">(</span><span class="n">outgoing_routes</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">excp</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Exception raised with error </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">excp</span><span class="p">))</span></div>

<div class="viewcode-block" id="NetworkHelper.enable_proxy"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.enable_proxy">[docs]</a>    <span class="k">def</span> <span class="nf">enable_proxy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Marks a client or a client group as proxy</span>

<span class="sd">            Args:</span>
<span class="sd">                entity(dict)  -- dict of entity name</span>

<span class="sd">                {&#39;clientName&#39;:val} or {&#39;clientGroupName&#39;:val}</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_entity_object</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Enabling proxy on </span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                                                         <span class="nb">list</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">obj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">proxy</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="NetworkHelper.enable_roaming_client"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.enable_roaming_client">[docs]</a>    <span class="k">def</span> <span class="nf">enable_roaming_client</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entities</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Marks a client or a client group as roaming client</span>

<span class="sd">            Args:</span>
<span class="sd">                entity(dict)  -- list of dict of entity name</span>

<span class="sd">                Example:</span>
<span class="sd">                [{&#39;clientName&#39;:val}, {&#39;clientGroupName&#39;:val}]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">entities</span><span class="p">:</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_entity_object</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Enabling roaming client on&quot;</span>
                          <span class="s2">&quot; </span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nb">list</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">]))</span>

            <span class="n">obj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">roaming_client</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="NetworkHelper.set_tunnelport"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.set_tunnelport">[docs]</a>    <span class="k">def</span> <span class="nf">set_tunnelport</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entities</span><span class="p">,</span> <span class="n">tunnelports</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the specified port as the tunnel port on the given client/ client group</span>

<span class="sd">            Args:</span>
<span class="sd">                entities(dict)  -- list of dict of entity name</span>
<span class="sd">                [{&#39;clientGroupName&#39;:val},{&#39;clientName&#39;:val}]</span>

<span class="sd">                Note: pass the key name based on entity</span>

<span class="sd">                tunnelports   --  list of tunnel ports</span>

<span class="sd">                example:</span>
<span class="sd">                {</span>
<span class="sd">                &#39;clientName&#39;: &#39;shezavm11&#39;,</span>
<span class="sd">                }</span>
<span class="sd">                [&#39;9999&#39;,&#39;9999&#39;]</span>

<span class="sd">            Raises:</span>
<span class="sd">                Exception:</span>
<span class="sd">                    if the required key is missing in the input value passed</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">tunnelport</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">entities</span><span class="p">,</span> <span class="n">tunnelports</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_entity_object</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Setting tunnel port for &quot;</span>
                              <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nb">list</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">]))</span>

                <span class="n">obj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">tunnel_connection_port</span> <span class="o">=</span> <span class="n">tunnelport</span>

            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">excp</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Exception raised with error </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">excp</span><span class="p">))</span></div>

<div class="viewcode-block" id="NetworkHelper.set_extra_ports"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.set_extra_ports">[docs]</a>    <span class="k">def</span> <span class="nf">set_extra_ports</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">is_group</span><span class="p">,</span> <span class="n">port_pairs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds extra ports to the incoming ports of network properties of a client/client group</span>

<span class="sd">                    Args:</span>
<span class="sd">                        entity(str)  -- Name of the client entity</span>

<span class="sd">                        is_group(bool)    -- Is a client group</span>

<span class="sd">                        port_pairs(list)  -- list of ports should be a list of dict containing</span>
<span class="sd">                                            start port and end port</span>
<span class="sd">                                            [{&#39;startPort&#39;:val,&#39;endPort&#39;:val}]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">network_obj</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">is_group</span><span class="p">:</span>
            <span class="n">client_group_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">client_groups</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
            <span class="n">network_obj</span> <span class="o">=</span> <span class="n">client_group_obj</span><span class="o">.</span><span class="n">network</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">client_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
            <span class="n">network_obj</span> <span class="o">=</span> <span class="n">client_obj</span><span class="o">.</span><span class="n">network</span>
        <span class="n">network_obj</span><span class="o">.</span><span class="n">set_additional_ports</span><span class="p">(</span><span class="n">port_pairs</span><span class="p">)</span></div>

<div class="viewcode-block" id="NetworkHelper.remove_network_config"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.remove_network_config">[docs]</a>    <span class="k">def</span> <span class="nf">remove_network_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entities</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Removes network configuration on a client or client group</span>

<span class="sd">            Args:</span>
<span class="sd">                entities(dict)  -- list of dict of entity name</span>
<span class="sd">                [{&#39;clientGroupName&#39;:val}, {&#39;clientName&#39;:val}]</span>

<span class="sd">                Note: pass the key name based on entity</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">entities</span><span class="p">:</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_entity_object</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Removing network configuration on </span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">obj</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nb">list</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">]))</span>

            <span class="n">obj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">configure_network_settings</span> <span class="o">=</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="NetworkHelper.set_gui_tppm"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.set_gui_tppm">[docs]</a>    <span class="k">def</span> <span class="nf">set_gui_tppm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity1</span><span class="p">,</span> <span class="n">entity2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets one-way firewall between two clients and then sets GUI tppm between them</span>

<span class="sd">            Args:</span>
<span class="sd">                entity1(dict)  -- dict containing CS client name</span>
<span class="sd">                {&#39;clientName&#39;:val}</span>

<span class="sd">                entity2(dict)  -- dict of proxy entity name and it&#39;s local port number</span>
<span class="sd">                {&#39;proxyEntity&#39;:val,&#39;portNumber&#39;:val}</span>


<span class="sd">            Example:</span>

<span class="sd">                entity1:</span>
<span class="sd">                {</span>
<span class="sd">                &#39;clientName&#39;: &#39;v11-restapi&#39;</span>
<span class="sd">                }</span>

<span class="sd">                entity2:</span>
<span class="sd">                {</span>
<span class="sd">                &#39;proxyEntity&#39;: &#39;testproxy&#39;</span>
<span class="sd">                &#39;portNumber&#39;: 9999</span>
<span class="sd">                }</span>


<span class="sd">        Raises:</span>
<span class="sd">                Exception:</span>
<span class="sd">                    if the required key is missing in the input value passed</span>


<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Setting GUI TPPM with proxy </span><span class="si">{0}</span><span class="s2"> and local port on proxy as </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span>
                          <span class="nb">format</span><span class="p">(</span><span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;proxyEntity&#39;</span><span class="p">],</span> <span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;portNumber&#39;</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_one_way</span><span class="p">({</span><span class="s1">&#39;clientName&#39;</span><span class="p">:</span> <span class="n">entity1</span><span class="p">[</span><span class="s1">&#39;clientName&#39;</span><span class="p">]},</span>
                             <span class="p">{</span><span class="s1">&#39;clientName&#39;</span><span class="p">:</span> <span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;proxyEntity&#39;</span><span class="p">]})</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">enable_proxy</span><span class="p">({</span><span class="s1">&#39;clientName&#39;</span><span class="p">:</span> <span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;proxyEntity&#39;</span><span class="p">]})</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">entity1</span><span class="p">[</span><span class="s1">&#39;clientName&#39;</span><span class="p">])</span>

            <span class="n">tppm</span> <span class="o">=</span> <span class="p">[{</span>
                <span class="s1">&#39;tppmType&#39;</span><span class="p">:</span> <span class="s1">&#39;COMMSERVE&#39;</span><span class="p">,</span>
                <span class="s1">&#39;portNumber&#39;</span><span class="p">:</span> <span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;portNumber&#39;</span><span class="p">],</span>
                <span class="s1">&#39;proxyEntity&#39;</span><span class="p">:</span> <span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;proxyEntity&#39;</span><span class="p">]</span>
            <span class="p">}]</span>

            <span class="n">obj</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">set_tppm_settings</span><span class="p">(</span><span class="n">tppm</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">excp</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Exception raised with error </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">excp</span><span class="p">))</span></div>

<div class="viewcode-block" id="NetworkHelper.set_wswc_tppm"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.set_wswc_tppm">[docs]</a>    <span class="k">def</span> <span class="nf">set_wswc_tppm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity1</span><span class="p">,</span> <span class="n">entity2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets one-way firewall between two clients and then sets webserver-webconsole</span>
<span class="sd">            tppm between them</span>

<span class="sd">                    Args:</span>
<span class="sd">                        entity1(dict)  -- dict containing webserver client name</span>
<span class="sd">                        {&#39;webserver&#39;:val}</span>

<span class="sd">                        entity2(dict)  -- dict containing webconsole client name and</span>
<span class="sd">                                          it&#39;s local port number</span>
<span class="sd">                        {&#39;webconsole&#39;:val,&#39;portNumber&#39;:val}</span>


<span class="sd">                    Example:</span>

<span class="sd">                        entity1:</span>
<span class="sd">                        {</span>
<span class="sd">                        &#39;webserver&#39;: &#39;v11-restapi&#39;</span>
<span class="sd">                        }</span>

<span class="sd">                        entity2:</span>
<span class="sd">                        {</span>
<span class="sd">                        &#39;webconsole&#39;: &#39;testproxy&#39;</span>
<span class="sd">                        &#39;portNumber&#39;: 9999</span>
<span class="sd">                        }</span>


<span class="sd">                Raises:</span>
<span class="sd">                        Exception:</span>
<span class="sd">                            if the required key is missing in the input value passed</span>


<span class="sd">                &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Setting Webserver-Webconsole TPPM with webconsole </span><span class="si">{0}</span><span class="s2"> &quot;</span>
                          <span class="s2">&quot;and local port on webconsole as </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span>
                          <span class="nb">format</span><span class="p">(</span><span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;webconsole&#39;</span><span class="p">],</span> <span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;portNumber&#39;</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_one_way</span><span class="p">({</span><span class="s1">&#39;clientName&#39;</span><span class="p">:</span> <span class="n">entity1</span><span class="p">[</span><span class="s1">&#39;webserver&#39;</span><span class="p">],</span> <span class="p">},</span>
                             <span class="p">{</span><span class="s1">&#39;clientName&#39;</span><span class="p">:</span> <span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;webconsole&#39;</span><span class="p">]})</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">entity1</span><span class="p">[</span><span class="s1">&#39;webserver&#39;</span><span class="p">])</span>

            <span class="n">tppm</span> <span class="o">=</span> <span class="p">[{</span>
                <span class="s1">&#39;tppmType&#39;</span><span class="p">:</span> <span class="s1">&#39;WEB_SERVER_FOR_IIS_SERVER&#39;</span><span class="p">,</span>
                <span class="s1">&#39;portNumber&#39;</span><span class="p">:</span> <span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;portNumber&#39;</span><span class="p">],</span>
                <span class="s1">&#39;proxyEntity&#39;</span><span class="p">:</span> <span class="n">entity2</span><span class="p">[</span><span class="s1">&#39;webconsole&#39;</span><span class="p">]</span>
            <span class="p">}]</span>

            <span class="n">obj</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">set_tppm_settings</span><span class="p">(</span><span class="n">tppm</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">excp</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Exception raised with error </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">excp</span><span class="p">))</span></div>

<div class="viewcode-block" id="NetworkHelper.validate"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.validate">[docs]</a>    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client_names</span><span class="p">,</span>
                 <span class="n">media_agent</span><span class="p">,</span> <span class="n">test_data_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">test_data_level</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">test_data_size</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Function to perform backup and restore jobs on a list of clients</span>

<span class="sd">                Args:</span>
<span class="sd">                        client_names(list)      -- list of client names</span>

<span class="sd">                        media_agent(str)        --  media agent to be used</span>

<span class="sd">                        test_data_path(str)     -- path to generate test data</span>

<span class="sd">                        test_data_level(int)    -- depth of folders under test data</span>

<span class="sd">                        test_data_size(int)     -- size of each test file to be generated in KB</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># create disk library</span>
        <span class="n">disklibrary_inputs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;disklibrary&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s2">&quot;disklibrary_&quot;</span> <span class="o">+</span> <span class="n">media_agent</span><span class="p">,</span>
                <span class="s1">&#39;mediaagent&#39;</span><span class="p">:</span> <span class="n">media_agent</span><span class="p">,</span>
                <span class="s1">&#39;mount_path&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">entities</span><span class="o">.</span><span class="n">get_mount_path</span><span class="p">(</span><span class="n">media_agent</span><span class="p">),</span>
                <span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;cleanup_mount_path&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                <span class="s1">&#39;force&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Creating disk library using media agent </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">media_agent</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entities</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">disklibrary_inputs</span><span class="p">)</span>
        <span class="c1"># create storage policy</span>
        <span class="n">storagepolicy_inputs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;target&#39;</span><span class="p">:</span>
                <span class="p">{</span>
                    <span class="s1">&#39;library&#39;</span><span class="p">:</span> <span class="s2">&quot;disklibrary_&quot;</span> <span class="o">+</span> <span class="n">media_agent</span><span class="p">,</span>
                    <span class="s1">&#39;mediaagent&#39;</span><span class="p">:</span> <span class="n">media_agent</span><span class="p">,</span>
                    <span class="s1">&#39;force&#39;</span><span class="p">:</span> <span class="kc">False</span>
                <span class="p">},</span>
            <span class="s1">&#39;storagepolicy&#39;</span><span class="p">:</span>
                <span class="p">{</span>
                    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s2">&quot;storagepolicy_&quot;</span> <span class="o">+</span> <span class="n">media_agent</span><span class="p">,</span>
                    <span class="s1">&#39;dedup_path&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="s1">&#39;incremental_sp&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="s1">&#39;retention_period&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
                <span class="p">},</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Creating storage policy using library </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span>
                      <span class="nb">format</span><span class="p">(</span><span class="s2">&quot;disklibrary_&quot;</span> <span class="o">+</span> <span class="n">media_agent</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entities</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">storagepolicy_inputs</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">client_name</span> <span class="ow">in</span> <span class="n">client_names</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Creating subclient for client </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">client_name</span><span class="p">))</span>
            <span class="n">subclient_name</span> <span class="o">=</span> <span class="s2">&quot;subclient_&quot;</span> <span class="o">+</span> <span class="n">client_name</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get_custom_str</span><span class="p">()</span>
            <span class="n">backupset_name</span> <span class="o">=</span> <span class="s2">&quot;backupset_&quot;</span> <span class="o">+</span> <span class="n">client_name</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get_custom_str</span><span class="p">()</span>
            <span class="c1"># create subclient</span>
            <span class="n">subclient_inputs</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;target&#39;</span><span class="p">:</span>
                    <span class="p">{</span>
                        <span class="s1">&#39;client&#39;</span><span class="p">:</span> <span class="n">client_name</span><span class="p">,</span>
                        <span class="s1">&#39;agent&#39;</span><span class="p">:</span> <span class="s2">&quot;File system&quot;</span><span class="p">,</span>
                        <span class="s1">&#39;instance&#39;</span><span class="p">:</span> <span class="s2">&quot;defaultinstancename&quot;</span><span class="p">,</span>
                        <span class="s1">&#39;storagepolicy&#39;</span><span class="p">:</span> <span class="s2">&quot;storagepolicy_&quot;</span> <span class="o">+</span> <span class="n">media_agent</span><span class="p">,</span>
                        <span class="s1">&#39;force&#39;</span><span class="p">:</span> <span class="kc">True</span>
                    <span class="p">},</span>
                <span class="s1">&#39;backupset&#39;</span><span class="p">:</span>
                    <span class="p">{</span>
                        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">backupset_name</span><span class="p">,</span>
                        <span class="s1">&#39;on_demand_backupset&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                        <span class="s1">&#39;force&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                    <span class="p">},</span>

                <span class="s1">&#39;subclient&#39;</span><span class="p">:</span>
                    <span class="p">{</span>
                        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">subclient_name</span><span class="p">,</span>
                        <span class="s1">&#39;client_name&#39;</span><span class="p">:</span> <span class="n">client_name</span><span class="p">,</span>
                        <span class="s1">&#39;backupset&#39;</span><span class="p">:</span> <span class="n">backupset_name</span><span class="p">,</span>
                        <span class="s1">&#39;data_path&#39;</span><span class="p">:</span> <span class="n">test_data_path</span><span class="p">,</span>
                        <span class="s1">&#39;level&#39;</span><span class="p">:</span> <span class="n">test_data_level</span><span class="p">,</span>
                        <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="n">test_data_size</span><span class="p">,</span>
                        <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s2">&quot;Automation - Target properties&quot;</span><span class="p">,</span>
                        <span class="s1">&#39;subclient_type&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="p">}</span>
            <span class="p">}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entities</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">subclient_inputs</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Going to perform backup and restore jobs for client </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">client_name</span><span class="p">))</span>

            <span class="n">client_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">client_name</span><span class="p">)</span>
            <span class="n">agent_obj</span> <span class="o">=</span> <span class="n">client_obj</span><span class="o">.</span><span class="n">agents</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;File System&#39;</span><span class="p">)</span>
            <span class="n">backupset_obj</span> <span class="o">=</span> <span class="n">agent_obj</span><span class="o">.</span><span class="n">backupsets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">backupset_name</span><span class="p">)</span>
            <span class="n">subclient_obj</span> <span class="o">=</span> <span class="n">backupset_obj</span><span class="o">.</span><span class="n">subclients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">subclient_name</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;Going to trigger backup job on Subclient: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">subclient_name</span><span class="p">))</span>

            <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
            <span class="n">job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serverbase</span><span class="o">.</span><span class="n">subclient_backup</span><span class="p">(</span><span class="n">subclient_obj</span><span class="p">,</span> <span class="s2">&quot;full&quot;</span><span class="p">)</span>
            <span class="n">end</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Time taken for backup job: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="p">))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">serverbase</span><span class="o">.</span><span class="n">backup_validation</span><span class="p">(</span><span class="n">job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span> <span class="s2">&quot;Full&quot;</span><span class="p">)</span>

            <span class="n">job_throughput</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">job_controller</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">job</span><span class="o">.</span><span class="n">job_id</span><span class="p">)</span><span class="o">.</span><span class="n">details</span><span class="p">[</span>
                <span class="s1">&#39;jobDetail&#39;</span><span class="p">][</span><span class="s1">&#39;detailInfo&#39;</span><span class="p">][</span><span class="s1">&#39;throughPut&#39;</span><span class="p">])</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Throughput value: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">job_throughput</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Successfully finished subclient full backup and validation&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="s2">&quot; Run Restore out of place &quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)</span>
            <span class="c1"># run restore in place job</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">serverbase</span><span class="o">.</span><span class="n">subclient_restore_out_of_place</span><span class="p">(</span><span class="n">subclient_obj</span><span class="o">.</span><span class="n">content</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                                                           <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">RESTOREDATA&quot;</span><span class="p">,</span>
                                                           <span class="n">subclient_obj</span><span class="o">.</span><span class="n">content</span><span class="p">,</span>
                                                           <span class="n">client_name</span><span class="p">,</span>
                                                           <span class="n">subclient_obj</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Successfully completed backup and restore jobs for client&quot;</span>
                          <span class="s2">&quot; </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">client_name</span><span class="p">))</span></div>

            <span class="c1"># return job_throughput</span>

<div class="viewcode-block" id="NetworkHelper.validate_tunnel_port"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.validate_tunnel_port">[docs]</a>    <span class="k">def</span> <span class="nf">validate_tunnel_port</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entities</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Validates the default tunnel port on a client or client group</span>

<span class="sd">            Args:</span>
<span class="sd">                entities(dict)  -- list of dict of entity name</span>
<span class="sd">                {&#39;clientGroupName&#39;:val}  or {&#39;clientName&#39;:val}</span>

<span class="sd">                Note: pass the key name based on entity</span>

<span class="sd">             Raises:</span>
<span class="sd">                Exception:</span>
<span class="sd">                    if the required key is missing in the input value passed</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">entities</span><span class="p">:</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_entity_object</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Getting default tunnel port set on </span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2"> &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">obj</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">entity</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>

                <span class="n">tunnel_port</span> <span class="o">=</span> <span class="n">obj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">tunnel_connection_port</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Tunnel port is: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tunnel_port</span><span class="p">))</span>

                <span class="k">if</span> <span class="n">tunnel_port</span> <span class="o">==</span> <span class="n">networkconstants</span><span class="o">.</span><span class="n">TUNNEL_CONNECTION_PORT</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">or</span> <span class="n">tunnel_port</span> <span class="o">==</span> \
                        <span class="n">networkconstants</span><span class="o">.</span><span class="n">TUNNEL_CONNECTION_PORT</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Validated default tunnel port&quot;</span><span class="p">)</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                        <span class="s2">&quot;Failed to validate default tunnel port&quot;</span>
                    <span class="p">)</span>

            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">excp</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Exception raised with error </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">excp</span><span class="p">))</span></div>

<div class="viewcode-block" id="NetworkHelper.validate_keep_alive"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.validate_keep_alive">[docs]</a>    <span class="k">def</span> <span class="nf">validate_keep_alive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entities</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Validates the default keep alive interval on a client or client group</span>

<span class="sd">                    Args:</span>
<span class="sd">                        entities(dict)  -- list of dict of entity name</span>
<span class="sd">                        {&#39;clientGroupName&#39;:val}  or {&#39;clientName&#39;:val}</span>

<span class="sd">                        Note: pass the key name based on entity</span>

<span class="sd">                     Raises:</span>
<span class="sd">                        Exception:</span>
<span class="sd">                            if the required key is missing in the input value passed</span>

<span class="sd">                &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">entities</span><span class="p">:</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_entity_object</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Getting default keep alive interval set on </span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">obj</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nb">list</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">]))</span>

                <span class="n">keep_alive</span> <span class="o">=</span> <span class="n">obj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">keep_alive_seconds</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Keep alive interval is: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">keep_alive</span><span class="p">))</span>

                <span class="k">if</span> <span class="n">keep_alive</span> <span class="o">==</span> <span class="n">networkconstants</span><span class="o">.</span><span class="n">KEEP_ALIVE_SECONDS</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Validated default keep alive interval&quot;</span><span class="p">)</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                        <span class="s2">&quot;Failed to validate default keep alive interval&quot;</span>
                    <span class="p">)</span>

            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">excp</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Exception raised with error </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">excp</span><span class="p">))</span></div>

<div class="viewcode-block" id="NetworkHelper.validate_tunnel_init"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.validate_tunnel_init">[docs]</a>    <span class="k">def</span> <span class="nf">validate_tunnel_init</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entities</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Validates the default tunnel init interval on a client or client group</span>

<span class="sd">                    Args:</span>
<span class="sd">                        entities(dict)  -- list of dict of entity name</span>
<span class="sd">                        {&#39;clientGroupName&#39;:val}  or {&#39;clientName&#39;:val}</span>

<span class="sd">                        Note: pass the key name based on entity</span>

<span class="sd">                     Raises:</span>
<span class="sd">                        Exception:</span>
<span class="sd">                            if the required key is missing in the input value passed</span>

<span class="sd">                &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">entities</span><span class="p">:</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_entity_object</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Getting default tunnel init interval set on&quot;</span>
                              <span class="s2">&quot; </span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nb">list</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">]))</span>

                <span class="n">tunnel_init</span> <span class="o">=</span> <span class="n">obj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">tunnel_init_seconds</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="s2">&quot;Tunnel init interval is: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tunnel_init</span><span class="p">))</span>

                <span class="k">if</span> <span class="n">tunnel_init</span> <span class="o">==</span> <span class="n">networkconstants</span><span class="o">.</span><span class="n">TUNNEL_INIT_SECONDS</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Validated default tunnel init interval&quot;</span><span class="p">)</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                        <span class="s2">&quot;Failed to validate default tunnel init interval&quot;</span>
                    <span class="p">)</span>

            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">excp</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Exception raised with error </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">excp</span><span class="p">))</span></div>

<div class="viewcode-block" id="NetworkHelper.validate_other_defaults"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.validate_other_defaults">[docs]</a>    <span class="k">def</span> <span class="nf">validate_other_defaults</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entities</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Validates the default values for force ssl, proxy, bind open ports and roaming client</span>
<span class="sd">                    on a client or client group</span>

<span class="sd">                    Args:</span>
<span class="sd">                        entities(dict)  -- list of dict of entity name</span>
<span class="sd">                        {&#39;clientGroupName&#39;:val}  or {&#39;clientName&#39;:val}</span>

<span class="sd">                        Note: pass the key name based on entity</span>

<span class="sd">                     Raises:</span>
<span class="sd">                        Exception:</span>
<span class="sd">                            if the required key is missing in the input value passed</span>

<span class="sd">                &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">entities</span><span class="p">:</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_entity_object</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">5</span> <span class="o">+</span> <span class="s2">&quot;Validating default values for force_ssl, is_dmz, &quot;</span>
                                        <span class="s2">&quot;bind_open_ports and is_roaming set on&quot;</span>
                                        <span class="s2">&quot; </span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nb">list</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="mi">5</span> <span class="o">*</span> <span class="s2">&quot;*&quot;</span><span class="p">)</span>

                <span class="n">options_values</span> <span class="o">=</span> <span class="p">[</span><span class="n">networkconstants</span><span class="o">.</span><span class="n">FORCE_SSL</span><span class="p">,</span>
                                  <span class="n">networkconstants</span><span class="o">.</span><span class="n">IS_DMZ</span><span class="p">,</span>
                                  <span class="n">networkconstants</span><span class="o">.</span><span class="n">BIND_OPEN_PORTS_ONLY</span><span class="p">,</span>
                                  <span class="n">networkconstants</span><span class="o">.</span><span class="n">IS_ROAMING_CLIENT</span><span class="p">]</span>

                <span class="n">options_functions</span> <span class="o">=</span> <span class="p">[</span><span class="n">obj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">force_ssl</span><span class="p">,</span>
                                     <span class="n">obj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">proxy</span><span class="p">,</span>
                                     <span class="n">obj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">bind_open_ports</span><span class="p">,</span>
                                     <span class="n">obj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">roaming_client</span><span class="p">]</span>

                <span class="k">for</span> <span class="p">(</span><span class="n">option_value</span><span class="p">,</span> <span class="n">option_function</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
                        <span class="n">options_values</span><span class="p">,</span> <span class="n">options_functions</span><span class="p">):</span>

                    <span class="n">option_val</span> <span class="o">=</span> <span class="n">option_function</span>

                    <span class="k">if</span> <span class="n">option_val</span> <span class="o">==</span> <span class="n">option_value</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Validated default value&quot;</span><span class="p">)</span>

                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                            <span class="s2">&quot;Failed to validate default value&quot;</span>
                        <span class="p">)</span>

            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">excp</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Exception raised with error </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">excp</span><span class="p">))</span></div>

<div class="viewcode-block" id="NetworkHelper.outgoing_route_settings"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.outgoing_route_settings">[docs]</a>    <span class="k">def</span> <span class="nf">outgoing_route_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets tunnel connection protocol for outgoing routes on a client/client group</span>

<span class="sd">                Args:</span>

<span class="sd">                    entity                (dict)  -- dict of entity name</span>
<span class="sd">                                                    {&#39;clientGroupName&#39;:val}  or {&#39;clientName&#39;:val}</span>

<span class="sd">                    **kwargs              (dict)  -- Key value pairs for supported arguments</span>


<span class="sd">                    Supported arguments for **kwargs:</span>

<span class="sd">                    route_type            (str)   -- type of route that needs to be set</span>

<span class="sd">                    remote_entity         (str)   -- client/client group towards which</span>
<span class="sd">                                                     outgoing route is set</span>

<span class="sd">                    streams               (int)   -- total number of tunnels</span>

<span class="sd">                    is_client             (bool)  -- specify if remote entity is a client or</span>
<span class="sd">                                                     client group</span>

<span class="sd">                    force_all_data_traffic(bool)  -- set to true to force all data traffic</span>
<span class="sd">                                                     into tunnel</span>

<span class="sd">                    connection_protocol   (int)   -- type of tunnel connection protocol that</span>
<span class="sd">                                                     needs to be set</span>

<span class="sd">                    gateway_port          (int)   -- gateway port number if outgoing route is</span>
<span class="sd">                                                     via gateway</span>

<span class="sd">                    gateway_host          (str)   -- gateway ip if outgoing route is via gateway</span>

<span class="sd">                    remote_proxy          (str)   -- proxy entity if outgoing route is via proxy</span>

<span class="sd">                Valid values for route_type:</span>
<span class="sd">                &#39;DIRECT&#39;</span>
<span class="sd">                &#39;VIA_GATEWAY&#39;</span>
<span class="sd">                &#39;VIA_PROXY&#39;</span>

<span class="sd">                Valid values for connection_protocol:</span>
<span class="sd">                0: &#39;HTTP&#39;,</span>
<span class="sd">                1: &#39;HTTPS&#39;,</span>
<span class="sd">                2: &#39;HTTPS_AuthOnly&#39;,</span>
<span class="sd">                3: &#39;RAW_PROTOCOL&#39;</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_entity_object</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>

        <span class="n">route_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;routeType&#39;</span><span class="p">:</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;route_type&#39;</span><span class="p">,</span> <span class="s1">&#39;DIRECT&#39;</span><span class="p">),</span>
            <span class="s1">&#39;remoteEntity&#39;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;remote_entity&#39;</span><span class="p">],</span>
            <span class="s1">&#39;streams&#39;</span><span class="p">:</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;streams&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
            <span class="s1">&#39;gatewayPort&#39;</span><span class="p">:</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gateway_port&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="s1">&#39;gatewayHost&#39;</span><span class="p">:</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gateway_host&#39;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="s1">&#39;isClient&#39;</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;is_client&#39;</span><span class="p">],</span>
            <span class="s1">&#39;forceAllDataTraffic&#39;</span><span class="p">:</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;force_all_data_traffic&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
            <span class="s1">&#39;connectionProtocol&#39;</span><span class="p">:</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;connection_protocol&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
            <span class="s1">&#39;remoteProxy&#39;</span><span class="p">:</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;remote_proxy&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Setting outgoing routes on </span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">entity</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Tunnel connection protocol being set is: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">networkconstants</span><span class="o">.</span><span class="n">OUTGOING_CONNECTION_PROTOCOL</span><span class="p">[</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;connection_protocol&#39;</span><span class="p">]]))</span>
        <span class="n">obj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">set_outgoing_routes</span><span class="p">([</span><span class="n">route_dict</span><span class="p">])</span></div>

<div class="viewcode-block" id="NetworkHelper.get_network_summary"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.get_network_summary">[docs]</a>    <span class="k">def</span> <span class="nf">get_network_summary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client_list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Gets the network summary for each client in the client list</span>

<span class="sd">        Args:</span>
<span class="sd">            client_list    (list)          --   List of client names(str)</span>

<span class="sd">        Returns:</span>
<span class="sd">            network_summary_dict(dict)      -   key = client_name</span>
<span class="sd">                                                value = network_summary</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                client_list is empty</span>
<span class="sd">            Exception:</span>
<span class="sd">                Improper input. Check input</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">client_list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Input is empty&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">client_obj</span> <span class="ow">in</span> <span class="n">client_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">client_obj</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Improper input. Check input&quot;</span><span class="p">)</span>

        <span class="n">network_summary_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">client_name</span> <span class="ow">in</span> <span class="n">client_list</span><span class="p">:</span>
            <span class="n">client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">client_name</span><span class="p">)</span>
            <span class="n">network_summary_dict</span><span class="p">[</span><span class="n">client_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_network_summary</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">network_summary_dict</span></div>

    <span class="k">def</span> <span class="nf">_get_entity_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns object for client or client group</span>

<span class="sd">            Raises:</span>
<span class="sd">                Exception:</span>
<span class="sd">                    if the required key is missing in the input value passed</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;clientName&#39;</span> <span class="ow">in</span> <span class="n">entity</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">entity</span><span class="p">[</span><span class="s1">&#39;clientName&#39;</span><span class="p">]),</span> <span class="s1">&#39;client&#39;</span>

            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">client_groups</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">entity</span><span class="p">[</span><span class="s1">&#39;clientGroupName&#39;</span><span class="p">]),</span> <span class="s1">&#39;client group&#39;</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">excp</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Exception raised with error </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">excp</span><span class="p">))</span>

<div class="viewcode-block" id="NetworkHelper.do_cvping"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.do_cvping">[docs]</a>    <span class="k">def</span> <span class="nf">do_cvping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">destination</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">family</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Does a cvping on the specified port on destination client from source client</span>

<span class="sd">                Args:</span>
<span class="sd">                    source      (str)       -- client name from where cvping will be executed</span>

<span class="sd">                    destination (str)       -- destination client</span>

<span class="sd">                    port        (int)       -- destination port</span>

<span class="sd">                    family      (str)       -- specifies type of family --- ipv4/ipv6/any</span>
<span class="sd">                                            Valid values are:  &#39;UseIPv4&#39;, &#39;UseIPv6&#39; or &#39;UseIPAny&#39;</span>

<span class="sd">                    validate    (bool)      -- specified as true if cvping tool needs to be</span>
<span class="sd">                                                validated</span>

<span class="sd">                Raises:</span>
<span class="sd">                        Exception:</span>
<span class="sd">                            if cvping connection fails</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">family</span><span class="p">:</span>
            <span class="n">family</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;-</span><span class="si">{0}</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">family</span><span class="p">)</span>

        <span class="n">source_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
        <span class="n">destination_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">destination</span><span class="p">)</span>
        <span class="n">machine_obj</span> <span class="o">=</span> <span class="n">Machine</span><span class="p">(</span><span class="n">source_obj</span><span class="p">)</span>

        <span class="n">cvping_cmds</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;WINDOWS&#39;</span><span class="p">:</span> <span class="sa">r</span><span class="s1">&#39;cmd.exe /c &quot;</span><span class="si">{0}</span><span class="s1">\CVPing.exe&quot; </span><span class="si">{1}</span><span class="s1"> </span><span class="si">{2}</span><span class="s1"> -port </span><span class="si">{3}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="s1">&#39;UNIX&#39;</span><span class="p">:</span> <span class="s1">&#39;cd </span><span class="si">{0}</span><span class="s1"> &amp;&amp; ./cvping </span><span class="si">{1}</span><span class="s1"> </span><span class="si">{2}</span><span class="s1"> </span><span class="si">{3}</span><span class="s1">&#39;</span>
        <span class="p">}</span>

        <span class="n">install_dir</span> <span class="o">=</span> <span class="n">machine_obj</span><span class="o">.</span><span class="n">join_path</span><span class="p">(</span><span class="n">source_obj</span><span class="o">.</span><span class="n">install_directory</span><span class="p">,</span> <span class="s1">&#39;Base&#39;</span><span class="p">)</span>

        <span class="n">cvping_cmd</span> <span class="o">=</span> <span class="n">cvping_cmds</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">machine_obj</span><span class="o">.</span><span class="n">os_info</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">install_dir</span><span class="p">,</span>
                                                                 <span class="n">destination_obj</span><span class="o">.</span><span class="n">client_hostname</span><span class="p">,</span>
                                                                 <span class="n">family</span><span class="p">,</span>
                                                                 <span class="n">port</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Executing command: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cvping_cmd</span><span class="p">))</span>

        <span class="n">res1</span> <span class="o">=</span> <span class="n">machine_obj</span><span class="o">.</span><span class="n">execute_command</span><span class="p">(</span><span class="n">cvping_cmd</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\bConnection successful\b&#39;</span><span class="p">,</span> <span class="n">res1</span><span class="o">.</span><span class="n">output</span><span class="p">)</span> <span class="ow">or</span>
                <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\bSuccessfully connected\b&#39;</span><span class="p">,</span> <span class="n">res1</span><span class="o">.</span><span class="n">output</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Connection successful with output: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">res1</span><span class="o">.</span><span class="n">output</span><span class="p">))</span>
            <span class="k">return</span>

        <span class="k">elif</span> <span class="n">validate</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;Trying to connect&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">res1</span><span class="o">.</span><span class="n">output</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;CVPing tool execution failed&quot;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">validate</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Connection failed with error: </span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span>
                            <span class="nb">format</span><span class="p">(</span><span class="n">res1</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="n">res1</span><span class="o">.</span><span class="n">exception_message</span><span class="p">))</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Output Received: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">res1</span><span class="o">.</span><span class="n">output</span><span class="p">))</span></div>

<div class="viewcode-block" id="NetworkHelper.s_bind_to_interface"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.s_bind_to_interface">[docs]</a>    <span class="k">def</span> <span class="nf">s_bind_to_interface</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client_name</span><span class="p">,</span> <span class="n">interface</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets registry key sBindToInterface on the client and validates if client is using</span>
<span class="sd">            the specified interface</span>

<span class="sd">            Args:</span>
<span class="sd">                    client_name     (str) -- client name on which registry key needs to be set</span>

<span class="sd">                    interface       (str) -- client IP address to be used</span>

<span class="sd">                                                Example: &quot;172.19.96.79&quot;</span>

<span class="sd">                Raises:</span>
<span class="sd">                        Exception:</span>
<span class="sd">                            if services are not bind to specified interface</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">network_config</span><span class="p">[</span><span class="s1">&#39;s_bind_to_interface&#39;</span><span class="p">][</span><span class="s1">&#39;client&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">client_name</span>

        <span class="n">cl_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">client_name</span><span class="p">)</span>

        <span class="n">cvd_port</span> <span class="o">=</span> <span class="n">cl_obj</span><span class="o">.</span><span class="n">cvd_port</span>

        <span class="n">cmd_list</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;WINDOWS&#39;</span><span class="p">:</span> <span class="s1">&#39;netstat -ano | findstr </span><span class="si">{0}</span><span class="s1"> | findstr &quot;LISTENING&quot;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;UNIX&#39;</span><span class="p">:</span> <span class="s1">&#39;netstat -ano | grep </span><span class="si">{0}</span><span class="s1"> | grep &quot;LISTEN&quot;&#39;</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">serverbase</span><span class="o">.</span><span class="n">check_client_readiness</span><span class="p">([</span><span class="n">client_name</span><span class="p">])</span>

        <span class="n">cl_obj</span><span class="o">.</span><span class="n">add_additional_setting</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">,</span> <span class="s2">&quot;sBindToInterface&quot;</span><span class="p">,</span> <span class="s2">&quot;STRING&quot;</span><span class="p">,</span> <span class="n">interface</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">sleep_time</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">serverbase</span><span class="o">.</span><span class="n">restart_services</span><span class="p">([</span><span class="n">client_name</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">sleep_time</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>

        <span class="n">machine_obj</span> <span class="o">=</span> <span class="n">Machine</span><span class="p">(</span><span class="n">cl_obj</span><span class="p">)</span>

        <span class="n">cmd</span> <span class="o">=</span> <span class="n">cmd_list</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">machine_obj</span><span class="o">.</span><span class="n">os_info</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cvd_port</span><span class="p">)</span>

        <span class="n">res</span> <span class="o">=</span> <span class="n">machine_obj</span><span class="o">.</span><span class="n">execute_command</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>

        <span class="n">output_list</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;WINDOWS&#39;</span><span class="p">:</span> <span class="s2">&quot;  TCP    </span><span class="si">{0}</span><span class="s2">:</span><span class="si">{1}</span><span class="s2">     0.0.0.0:0              LISTENING&quot;</span><span class="p">,</span>
            <span class="s1">&#39;UNIX&#39;</span><span class="p">:</span> <span class="s2">&quot;tcp        0      0 </span><span class="si">{0}</span><span class="s2">:</span><span class="si">{1}</span><span class="s2">       0.0.0.0:*               LISTEN&quot;</span>
        <span class="p">}</span>

        <span class="n">output_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">output_list</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">machine_obj</span><span class="o">.</span><span class="n">os_info</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">interface</span><span class="p">,</span> <span class="n">cvd_port</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">output_str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">output</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Services bind to IP address </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">interface</span><span class="p">))</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Services not bound to specified IP </span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span>
                            <span class="nb">format</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">exception_message</span><span class="p">))</span></div>

    <span class="k">def</span> <span class="nf">_remove_s_bind_to_interface</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;removes sBindToInterface key on the client and restarts services</span>

<span class="sd">                Args:</span>
<span class="sd">                    client_name (str)   -- client name on which registry key needs to be removed</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">client_name</span><span class="p">:</span>
            <span class="n">cl_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">client_name</span><span class="p">)</span>

            <span class="n">cl_obj</span><span class="o">.</span><span class="n">delete_additional_setting</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">,</span> <span class="s2">&quot;sBindToInterface&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">sleep_time</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">serverbase</span><span class="o">.</span><span class="n">restart_services</span><span class="p">([</span><span class="n">client_name</span><span class="p">])</span>

<div class="viewcode-block" id="NetworkHelper.cv_ip_info"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.cv_ip_info">[docs]</a>    <span class="k">def</span> <span class="nf">cv_ip_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">family</span><span class="o">=</span><span class="s2">&quot;IPv4&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Does a host name lookup for specified destination host from source</span>

<span class="sd">            Args:</span>
<span class="sd">                    source      (str)      -- client name from where cvipinfo will be executed</span>

<span class="sd">                    destination (str)      -- destination client. If not provided, LocalHost is used</span>

<span class="sd">                    family      (str)      -- specifies if it will be ipv4 or ipv6</span>

<span class="sd">                Raises:</span>
<span class="sd">                        Exception:</span>
<span class="sd">                            if cvipinfo  execution fails</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">host</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">destination</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">destination_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">destination</span><span class="p">)</span>
            <span class="n">host</span> <span class="o">=</span> <span class="n">destination_obj</span><span class="o">.</span><span class="n">client_hostname</span>

        <span class="n">source_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>

        <span class="n">machine_obj</span> <span class="o">=</span> <span class="n">Machine</span><span class="p">(</span><span class="n">source_obj</span><span class="p">)</span>

        <span class="n">cvipinfo_cmds</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;WINDOWS&#39;</span><span class="p">:</span> <span class="sa">r</span><span class="s1">&#39;cmd.exe /c &quot;</span><span class="si">{0}</span><span class="s1">\CVIPInfo.exe&quot; </span><span class="si">{1}</span><span class="s1"> </span><span class="si">{2}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="s1">&#39;UNIX&#39;</span><span class="p">:</span> <span class="s1">&#39;cd </span><span class="si">{0}</span><span class="s1"> &amp;&amp; ./CVIPInfo </span><span class="si">{1}</span><span class="s1"> </span><span class="si">{2}</span><span class="s1">&#39;</span>
        <span class="p">}</span>

        <span class="n">install_dir</span> <span class="o">=</span> <span class="n">machine_obj</span><span class="o">.</span><span class="n">join_path</span><span class="p">(</span><span class="n">source_obj</span><span class="o">.</span><span class="n">install_directory</span><span class="p">,</span> <span class="s1">&#39;Base&#39;</span><span class="p">)</span>

        <span class="n">cvipinfo_cmd</span> <span class="o">=</span> <span class="n">cvipinfo_cmds</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">machine_obj</span><span class="o">.</span><span class="n">os_info</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">install_dir</span><span class="p">,</span>
                                                                     <span class="n">family</span><span class="p">,</span>
                                                                     <span class="n">host</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Executing Command </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cvipinfo_cmd</span><span class="p">))</span>

        <span class="n">res1</span> <span class="o">=</span> <span class="n">machine_obj</span><span class="o">.</span><span class="n">execute_command</span><span class="p">(</span><span class="n">cvipinfo_cmd</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;Testing Addresses:&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">res1</span><span class="o">.</span><span class="n">output</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Successfully executed CVIPinfo: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">res1</span><span class="o">.</span><span class="n">output</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">res1</span><span class="o">.</span><span class="n">output</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Failed to execute CVIPInfo: </span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span>
                            <span class="nb">format</span><span class="p">(</span><span class="n">res1</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="n">res1</span><span class="o">.</span><span class="n">exception_message</span><span class="p">))</span></div>

<div class="viewcode-block" id="NetworkHelper.client_tunnel_port"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.client_tunnel_port">[docs]</a>    <span class="k">def</span> <span class="nf">client_tunnel_port</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns tunnel port of the client</span>

<span class="sd">                Args:</span>
<span class="sd">                    client      (str)      -- client name for which tunnel port needs</span>
<span class="sd">                                              to be determined</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">client_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
        <span class="n">tunnel_port</span> <span class="o">=</span> <span class="n">client_obj</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">tunnel_connection_port</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Tunnel port for client </span><span class="si">{0}</span><span class="s2"> is </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">tunnel_port</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">tunnel_port</span></div>

<div class="viewcode-block" id="NetworkHelper.cleanup_network"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.cleanup_network">[docs]</a>    <span class="k">def</span> <span class="nf">cleanup_network</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Does all the clean up for any test case</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="s2">&quot;Starting network clean-up phase&quot;</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">disable_firewall</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">network_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;disable_firewall&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;clients&#39;</span><span class="p">,</span> <span class="p">[]),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">network_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;disable_firewall&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ports&#39;</span><span class="p">,</span> <span class="p">[]))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">remove_machine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">network_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;delete_machine&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;clients&#39;</span><span class="p">,</span> <span class="p">[]))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">remove_network_config</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">network_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="s1">&#39;remove_network_config&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;entities&#39;</span><span class="p">,</span> <span class="p">[]))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_remove_s_bind_to_interface</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">network_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;s_bind_to_interface&#39;</span><span class="p">)</span><span class="o">.</span>
                                         <span class="n">get</span><span class="p">(</span><span class="s1">&#39;client&#39;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">push_config_client</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">network_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;delete_machine&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;clients&#39;</span><span class="p">,</span> <span class="p">[]))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Network clean-up phase completed&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">network_config</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;disable_firewall&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;clients&quot;</span><span class="p">:</span> <span class="p">[],</span>
                <span class="s2">&quot;ports&quot;</span><span class="p">:</span> <span class="p">[]</span>
            <span class="p">},</span>
            <span class="s2">&quot;delete_machine&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;clients&quot;</span><span class="p">:</span> <span class="p">[]</span>
            <span class="p">},</span>
            <span class="s2">&quot;remove_network_config&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;entities&quot;</span><span class="p">:</span> <span class="p">[]</span>
            <span class="p">},</span>
            <span class="s2">&quot;s_bind_to_interface&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;client&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span></div>

<div class="viewcode-block" id="NetworkHelper.is_mnemonic_client_grp"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.is_mnemonic_client_grp">[docs]</a>    <span class="k">def</span> <span class="nf">is_mnemonic_client_grp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client_grp_list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks if the client is a mnemonic grp or not</span>

<span class="sd">                Args:</span>
<span class="sd">                    client_grp_list     (list)    -- list of client names</span>

<span class="sd">                Returns:</span>
<span class="sd">                    is_mnemonic_dict    (dict)    -- key - client_name</span>
<span class="sd">                                                     value(bool) - is mnemonic or not</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mnemonic_grp_set</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;My CommServe Computer and MediaAgents&#39;</span><span class="p">,</span> <span class="s1">&#39;My CommServe Computer&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;My MediaAgents&#39;</span><span class="p">}</span>

        <span class="n">is_mnemonic_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">client_grp</span> <span class="ow">in</span> <span class="n">client_grp_list</span><span class="p">:</span>
            <span class="n">is_mnemonic_dict</span><span class="p">[</span><span class="n">client_grp</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">client_grp</span> <span class="ow">in</span> <span class="n">mnemonic_grp_set</span><span class="p">:</span>
                <span class="n">is_mnemonic_dict</span><span class="p">[</span><span class="n">client_grp</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">return</span> <span class="n">is_mnemonic_dict</span></div>

<div class="viewcode-block" id="NetworkHelper.one_way_topology"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.one_way_topology">[docs]</a>    <span class="k">def</span> <span class="nf">one_way_topology</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client_group1</span><span class="p">,</span> <span class="n">client_group2</span><span class="p">,</span> <span class="n">topology_name</span><span class="p">,</span> <span class="n">display_type</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates one-way network topology</span>

<span class="sd">                Args:</span>
<span class="sd">                    client_group1      (str)      -- client group name for topology creation</span>

<span class="sd">                    client_group2      (str)      -- client group name for topology creation</span>

<span class="sd">                    topology_name      (str)      -- name of topology that will be created</span>

<span class="sd">                    display_type       (int)      -- display type 1 for laptops, 0 for servers</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span><span class="o">.</span><span class="n">has_network_topology</span><span class="p">(</span><span class="n">topology_name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">topology_name</span><span class="p">)</span>

        <span class="n">is_mnemonic_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_mnemonic_client_grp</span><span class="p">([</span><span class="n">client_group1</span><span class="p">,</span> <span class="n">client_group2</span><span class="p">])</span>
        <span class="n">is_smart_topology</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span><span class="n">is_mnemonic_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Creating one-way topology between client groups </span><span class="si">{0}</span><span class="s2"> and </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span>
                      <span class="nb">format</span><span class="p">(</span><span class="n">client_group1</span><span class="p">,</span> <span class="n">client_group2</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">topology_name</span><span class="p">,</span>
                            <span class="p">[{</span><span class="s1">&#39;group_type&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;group_name&#39;</span><span class="p">:</span> <span class="n">client_group1</span><span class="p">,</span>
                              <span class="s1">&#39;is_mnemonic&#39;</span><span class="p">:</span> <span class="n">is_mnemonic_dict</span><span class="p">[</span><span class="n">client_group1</span><span class="p">]},</span>
                             <span class="p">{</span><span class="s1">&#39;group_type&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;group_name&#39;</span><span class="p">:</span> <span class="n">client_group2</span><span class="p">,</span>
                              <span class="s1">&#39;is_mnemonic&#39;</span><span class="p">:</span> <span class="n">is_mnemonic_dict</span><span class="p">[</span><span class="n">client_group2</span><span class="p">]}],</span>
                            <span class="n">topology_description</span><span class="o">=</span><span class="s2">&quot;This is a test for validating &quot;</span>
                                                 <span class="s2">&quot;one way network topology&quot;</span><span class="p">,</span>
                            <span class="n">topology_type</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                            <span class="n">display_type</span><span class="o">=</span><span class="n">display_type</span><span class="p">,</span>
                            <span class="n">is_smart_topology</span><span class="o">=</span><span class="n">is_smart_topology</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Created one-way topology&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="NetworkHelper.two_way_topology"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.two_way_topology">[docs]</a>    <span class="k">def</span> <span class="nf">two_way_topology</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client_group1</span><span class="p">,</span> <span class="n">client_group2</span><span class="p">,</span> <span class="n">topology_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates two-way network topology</span>

<span class="sd">                Args:</span>
<span class="sd">                    client_group1      (str)      -- client group name for topology creation</span>

<span class="sd">                    client_group2      (str)      -- client group name for topology creation</span>

<span class="sd">                    topology_name      (str)      -- name of topology that will be created</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span><span class="o">.</span><span class="n">has_network_topology</span><span class="p">(</span><span class="n">topology_name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">topology_name</span><span class="p">)</span>

        <span class="n">is_mnemonic_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_mnemonic_client_grp</span><span class="p">([</span><span class="n">client_group1</span><span class="p">,</span> <span class="n">client_group2</span><span class="p">])</span>
        <span class="n">is_smart_topology</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span><span class="n">is_mnemonic_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Creating two-way topology between client groups </span><span class="si">{0}</span><span class="s2"> and </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span>
                      <span class="nb">format</span><span class="p">(</span><span class="n">client_group1</span><span class="p">,</span> <span class="n">client_group2</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">topology_name</span><span class="p">,</span>
                            <span class="p">[{</span><span class="s1">&#39;group_type&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;group_name&#39;</span><span class="p">:</span> <span class="n">client_group1</span><span class="p">,</span>
                              <span class="s1">&#39;is_mnemonic&#39;</span><span class="p">:</span> <span class="n">is_mnemonic_dict</span><span class="p">[</span><span class="n">client_group1</span><span class="p">]},</span>
                             <span class="p">{</span><span class="s1">&#39;group_type&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;group_name&#39;</span><span class="p">:</span> <span class="n">client_group2</span><span class="p">,</span>
                              <span class="s1">&#39;is_mnemonic&#39;</span><span class="p">:</span> <span class="n">is_mnemonic_dict</span><span class="p">[</span><span class="n">client_group2</span><span class="p">]}],</span>
                            <span class="n">topology_description</span><span class="o">=</span><span class="s2">&quot;This is a test for validating &quot;</span>
                                                 <span class="s2">&quot;two way network topology&quot;</span><span class="p">,</span>
                            <span class="n">topology_type</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
                            <span class="n">is_smart_topology</span><span class="o">=</span><span class="n">is_smart_topology</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Created two-way topology&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="NetworkHelper.proxy_topology"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.proxy_topology">[docs]</a>    <span class="k">def</span> <span class="nf">proxy_topology</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client_group1</span><span class="p">,</span> <span class="n">client_group2</span><span class="p">,</span> <span class="n">client_group3</span><span class="p">,</span> <span class="n">topology_name</span><span class="p">,</span>
                       <span class="n">wildcard</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates proxy network topology</span>

<span class="sd">                Args:</span>
<span class="sd">                    client_group1      (str)      -- client group name for topology creation</span>

<span class="sd">                    client_group2      (str)      -- client group name for topology creation</span>

<span class="sd">                    client_group3      (str)      -- client group name for topology creation</span>

<span class="sd">                    topology_name      (str)      -- name of topology that will be created</span>

<span class="sd">                    wildcard           (boolean)  -- specify wildcard option</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span><span class="o">.</span><span class="n">has_network_topology</span><span class="p">(</span><span class="n">topology_name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">topology_name</span><span class="p">)</span>

        <span class="n">is_mnemonic_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_mnemonic_client_grp</span><span class="p">([</span><span class="n">client_group1</span><span class="p">,</span> <span class="n">client_group2</span><span class="p">,</span> <span class="n">client_group3</span><span class="p">])</span>
        <span class="n">is_smart_topology</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span><span class="n">is_mnemonic_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Creating proxy topology between client groups </span><span class="si">{0}</span><span class="s2">, </span><span class="si">{1}</span><span class="s2"> and </span><span class="si">{2}</span><span class="s2">&quot;</span><span class="o">.</span>
                      <span class="nb">format</span><span class="p">(</span><span class="n">client_group1</span><span class="p">,</span> <span class="n">client_group2</span><span class="p">,</span> <span class="n">client_group3</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">topology_name</span><span class="p">,</span>
                            <span class="p">[{</span><span class="s1">&#39;group_type&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;group_name&#39;</span><span class="p">:</span> <span class="n">client_group1</span><span class="p">,</span>
                              <span class="s1">&#39;is_mnemonic&#39;</span><span class="p">:</span> <span class="n">is_mnemonic_dict</span><span class="p">[</span><span class="n">client_group1</span><span class="p">]},</span>
                             <span class="p">{</span><span class="s1">&#39;group_type&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;group_name&#39;</span><span class="p">:</span> <span class="n">client_group2</span><span class="p">,</span>
                              <span class="s1">&#39;is_mnemonic&#39;</span><span class="p">:</span> <span class="n">is_mnemonic_dict</span><span class="p">[</span><span class="n">client_group2</span><span class="p">]},</span>
                             <span class="p">{</span><span class="s1">&#39;group_type&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;group_name&#39;</span><span class="p">:</span> <span class="n">client_group3</span><span class="p">,</span>
                              <span class="s1">&#39;is_mnemonic&#39;</span><span class="p">:</span> <span class="n">is_mnemonic_dict</span><span class="p">[</span><span class="n">client_group3</span><span class="p">]}],</span>
                            <span class="n">topology_description</span><span class="o">=</span><span class="s2">&quot;This is a test for validating &quot;</span>
                                                 <span class="s2">&quot;proxy network topology&quot;</span><span class="p">,</span>
                            <span class="n">topology_type</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">use_wildcard</span><span class="o">=</span><span class="n">wildcard</span><span class="p">,</span> <span class="n">is_smart_topology</span><span class="o">=</span><span class="n">is_smart_topology</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Created Proxy topology&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="NetworkHelper.cascading_gateways_topology"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.cascading_gateways_topology">[docs]</a>    <span class="k">def</span> <span class="nf">cascading_gateways_topology</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client_group1</span><span class="p">,</span> <span class="n">client_group2</span><span class="p">,</span> <span class="n">client_group3</span><span class="p">,</span>
                                    <span class="n">client_group4</span><span class="p">,</span> <span class="n">topology_name</span><span class="p">,</span> <span class="n">display_type</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates cascading gateways network topology</span>

<span class="sd">                Args:</span>
<span class="sd">                    client_group1      (str)      -- client group name for topology creation</span>
<span class="sd">                    (Trusted Client Group1)</span>
<span class="sd">                    client_group2      (str)      -- client group name for topology creation</span>
<span class="sd">                    (Trusted Client Group2)</span>
<span class="sd">                    client_group3      (str)      -- client group name for topology creation</span>
<span class="sd">                    (DMZ Group near Trusted Client Group1)</span>
<span class="sd">                    client_group4      (str)      -- client group name for topology creation</span>
<span class="sd">                    (DMZ Group near Trusted Client Group2)</span>
<span class="sd">                    topology_name      (str)      -- name of topology that will be created</span>


<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span><span class="o">.</span><span class="n">has_network_topology</span><span class="p">(</span><span class="n">topology_name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">topology_name</span><span class="p">)</span>

        <span class="n">is_mnemonic_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_mnemonic_client_grp</span><span class="p">([</span><span class="n">client_group1</span><span class="p">,</span> <span class="n">client_group2</span><span class="p">,</span> <span class="n">client_group3</span><span class="p">,</span> <span class="n">client_group4</span><span class="p">])</span>
        <span class="n">is_smart_topology</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span><span class="n">is_mnemonic_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Creating cascading gateways topology between &quot;</span>
                      <span class="s2">&quot;client groups </span><span class="si">{0}</span><span class="s2">, </span><span class="si">{1}</span><span class="s2">, </span><span class="si">{2}</span><span class="s2"> and </span><span class="si">{3}</span><span class="s2">&quot;</span><span class="o">.</span>
                      <span class="nb">format</span><span class="p">(</span><span class="n">client_group1</span><span class="p">,</span> <span class="n">client_group2</span><span class="p">,</span> <span class="n">client_group3</span><span class="p">,</span> <span class="n">client_group4</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">topology_name</span><span class="p">,</span>
                            <span class="p">[{</span><span class="s1">&#39;group_type&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;group_name&#39;</span><span class="p">:</span> <span class="n">client_group1</span><span class="p">,</span>
                              <span class="s1">&#39;is_mnemonic&#39;</span><span class="p">:</span> <span class="n">is_mnemonic_dict</span><span class="p">[</span><span class="n">client_group1</span><span class="p">]},</span>
                             <span class="p">{</span><span class="s1">&#39;group_type&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;group_name&#39;</span><span class="p">:</span> <span class="n">client_group2</span><span class="p">,</span>
                              <span class="s1">&#39;is_mnemonic&#39;</span><span class="p">:</span> <span class="n">is_mnemonic_dict</span><span class="p">[</span><span class="n">client_group2</span><span class="p">]},</span>
                             <span class="p">{</span><span class="s1">&#39;group_type&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;group_name&#39;</span><span class="p">:</span> <span class="n">client_group3</span><span class="p">,</span>
                              <span class="s1">&#39;is_mnemonic&#39;</span><span class="p">:</span> <span class="n">is_mnemonic_dict</span><span class="p">[</span><span class="n">client_group3</span><span class="p">]},</span>
                             <span class="p">{</span><span class="s1">&#39;group_type&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;group_name&#39;</span><span class="p">:</span> <span class="n">client_group4</span><span class="p">,</span>
                              <span class="s1">&#39;is_mnemonic&#39;</span><span class="p">:</span> <span class="n">is_mnemonic_dict</span><span class="p">[</span><span class="n">client_group4</span><span class="p">]}],</span>
                            <span class="n">topology_description</span><span class="o">=</span><span class="s2">&quot;This is a test for validating cascading &quot;</span>
                                                 <span class="s2">&quot;gateway network topology.&quot;</span><span class="p">,</span>
                            <span class="n">topology_type</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                            <span class="n">display_type</span><span class="o">=</span><span class="n">display_type</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Created cascading gateways&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="NetworkHelper.validate_one_way_topology"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.validate_one_way_topology">[docs]</a>    <span class="k">def</span> <span class="nf">validate_one_way_topology</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topology_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Validates if topology created is one-way</span>

<span class="sd">                Args:</span>

<span class="sd">                    topology_name      (str)      -- name of the topology created</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Validating topology name&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span><span class="o">.</span><span class="n">has_network_topology</span><span class="p">(</span><span class="n">topology_name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Network Topology </span><span class="si">{0}</span><span class="s2"> was created successfully&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">topology_name</span><span class="p">))</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Topology creation for </span><span class="si">{0}</span><span class="s2"> failed&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">topology_name</span><span class="p">))</span>

        <span class="n">topology_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">topology_name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Validating topology type&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">topology_obj</span><span class="o">.</span><span class="n">network_topology_type</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Validated Created topology type is one-way&quot;</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Created topology type doesn&#39;t match with the specified topology&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Validating topology description&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">topology_obj</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">&quot;This is a test for validating one way network topology&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Validated description&quot;</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Mismatch in description&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="NetworkHelper.validate_two_way_topology"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.validate_two_way_topology">[docs]</a>    <span class="k">def</span> <span class="nf">validate_two_way_topology</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topology_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Validates if topology created is two-way</span>

<span class="sd">                 Args:</span>

<span class="sd">                    topology_name      (str)      -- name of the topology created</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span><span class="o">.</span><span class="n">has_network_topology</span><span class="p">(</span><span class="n">topology_name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Network Topology </span><span class="si">{0}</span><span class="s2"> was created successfully&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">topology_name</span><span class="p">))</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Topology creation for </span><span class="si">{0}</span><span class="s2"> failed&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">topology_name</span><span class="p">))</span>

        <span class="n">topology_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">topology_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">topology_obj</span><span class="o">.</span><span class="n">network_topology_type</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Validated Created topology type is two-way&quot;</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Created topology type doesn&#39;t match with the specified topology&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">topology_obj</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">&quot;This is a test for validating two way network topology&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Validated description&quot;</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Mismatch in description&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="NetworkHelper.validate_proxy_topology"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.validate_proxy_topology">[docs]</a>    <span class="k">def</span> <span class="nf">validate_proxy_topology</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topology_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;validates if topology created is proxy topology</span>

<span class="sd">                Args:</span>

<span class="sd">                    topology_name      (str)      -- name of the topology created</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span><span class="o">.</span><span class="n">has_network_topology</span><span class="p">(</span><span class="n">topology_name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Network Topology </span><span class="si">{0}</span><span class="s2"> was created successfully&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">topology_name</span><span class="p">))</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Topology creation for </span><span class="si">{0}</span><span class="s2"> failed&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">topology_name</span><span class="p">))</span>

        <span class="n">topology_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">topology_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">topology_obj</span><span class="o">.</span><span class="n">network_topology_type</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Validated Created topology type is proxy&quot;</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Created topology type doesn&#39;t match with the specified topology&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">topology_obj</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="s2">&quot;This is a test for validating proxy network topology&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Validated description&quot;</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Mismatch in description&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="NetworkHelper.validate_cascading_gateways_topology"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.validate_cascading_gateways_topology">[docs]</a>    <span class="k">def</span> <span class="nf">validate_cascading_gateways_topology</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topology_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;validates if topology created is cascading_gateways_topology</span>

<span class="sd">                Args:</span>

<span class="sd">                    topology_name      (str)      -- name of the topology created</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span><span class="o">.</span><span class="n">has_network_topology</span><span class="p">(</span><span class="n">topology_name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Network Topology </span><span class="si">{0}</span><span class="s2"> was created successfully&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">topology_name</span><span class="p">))</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Topology creation for </span><span class="si">{0}</span><span class="s2"> failed&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">topology_name</span><span class="p">))</span>

        <span class="n">topology_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">topology_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">topology_obj</span><span class="o">.</span><span class="n">network_topology_type</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Validated Created topology type is cascading gateways topology&quot;</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Created topology type doesn&#39;t match with the specified topology&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">topology_obj</span><span class="o">.</span><span class="n">description</span> <span class="o">==</span> <span class="p">(</span><span class="s2">&quot;This is a test for validating cascading gateway &quot;</span>
                                        <span class="s2">&quot;network topology.&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Validated description&quot;</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Mismatch in description&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="NetworkHelper.validate_fwconfig_file"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.validate_fwconfig_file">[docs]</a>    <span class="k">def</span> <span class="nf">validate_fwconfig_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topology_type</span><span class="p">,</span> <span class="n">client1</span><span class="p">,</span> <span class="n">client2</span><span class="p">,</span> <span class="n">client3</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">wildcard</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Validates FwConfig.txt files pushed on the clients</span>

<span class="sd">                Args:</span>

<span class="sd">                    topology_type      (int)      -- type of topology</span>

<span class="sd">                    client1            (str)      -- client added to the group</span>

<span class="sd">                    client2            (str)      -- client added to the group</span>

<span class="sd">                    client3            (str)      -- client added to the group</span>

<span class="sd">                    wildcard           (int)      -- specify if wildcard is selected</span>


<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">client1_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">client1</span><span class="p">)</span>
        <span class="n">client2_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">client2</span><span class="p">)</span>
        <span class="n">machine_obj1</span> <span class="o">=</span> <span class="n">Machine</span><span class="p">(</span><span class="n">client1_obj</span><span class="p">)</span>
        <span class="n">machine_obj2</span> <span class="o">=</span> <span class="n">Machine</span><span class="p">(</span><span class="n">client2_obj</span><span class="p">)</span>

        <span class="n">client1_base_path</span> <span class="o">=</span> <span class="n">machine_obj1</span><span class="o">.</span><span class="n">join_path</span><span class="p">(</span><span class="n">client1_obj</span><span class="o">.</span><span class="n">install_directory</span><span class="p">,</span> <span class="s1">&#39;Base&#39;</span><span class="p">)</span>
        <span class="n">client2_base_path</span> <span class="o">=</span> <span class="n">machine_obj2</span><span class="o">.</span><span class="n">join_path</span><span class="p">(</span><span class="n">client2_obj</span><span class="o">.</span><span class="n">install_directory</span><span class="p">,</span> <span class="s1">&#39;Base&#39;</span><span class="p">)</span>

        <span class="n">client1_guid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">client1</span><span class="p">)</span><span class="o">.</span><span class="n">client_guid</span>
        <span class="n">client2_guid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">client2</span><span class="p">)</span><span class="o">.</span><span class="n">client_guid</span>
        <span class="k">if</span> <span class="n">client3</span><span class="p">:</span>
            <span class="n">client3_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">client3</span><span class="p">)</span>
            <span class="n">machine_obj3</span> <span class="o">=</span> <span class="n">Machine</span><span class="p">(</span><span class="n">client3_obj</span><span class="p">)</span>
            <span class="n">client3_base_path</span> <span class="o">=</span> <span class="n">machine_obj3</span><span class="o">.</span><span class="n">join_path</span><span class="p">(</span><span class="n">client3_obj</span><span class="o">.</span><span class="n">install_directory</span><span class="p">,</span> <span class="s1">&#39;Base&#39;</span><span class="p">)</span>
            <span class="n">client3_guid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">client3</span><span class="p">)</span><span class="o">.</span><span class="n">client_guid</span>

        <span class="n">route2</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">file</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">success</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">found</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Validating routes on client2 </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">client2</span><span class="p">))</span>
        <span class="n">route</span> <span class="o">=</span> <span class="n">client2</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">client1</span>
        <span class="k">if</span> <span class="n">topology_type</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">route2</span> <span class="o">=</span> <span class="s2">&quot; remote_guid=&quot;</span> <span class="o">+</span> <span class="n">client1_guid</span> <span class="o">+</span> <span class="s2">&quot; type=passive&quot;</span>

        <span class="k">elif</span> <span class="n">topology_type</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">route2</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot; remote_guid=&quot;</span> <span class="o">+</span> <span class="n">client1_guid</span> <span class="o">+</span> <span class="s2">&quot; type=ondemand proto=httpsa cvfwd=&quot;</span> <span class="o">+</span>
                      <span class="n">client1_obj</span><span class="o">.</span><span class="n">client_hostname</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">topology_type</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">route2</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot; remote_guid=&quot;</span> <span class="o">+</span> <span class="n">client1_guid</span> <span class="o">+</span> <span class="s2">&quot; type=throttling proto=http cvfwd=&quot;</span> <span class="o">+</span>
                      <span class="n">client1_obj</span><span class="o">.</span><span class="n">client_hostname</span> <span class="o">+</span> <span class="s2">&quot;:0 cvd_port=&quot;</span><span class="p">)</span>

        <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">client2_base_path</span><span class="p">,</span> <span class="s2">&quot;FwConfig.txt&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;The file path is </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_path</span><span class="p">))</span>

        <span class="n">file</span> <span class="o">=</span> <span class="n">machine_obj2</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Contents of FwConfig.txt file on client </span><span class="si">{0}</span><span class="s2"> are:</span><span class="se">\n</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span>
                      <span class="nb">format</span><span class="p">(</span><span class="n">client2</span><span class="p">,</span> <span class="n">file</span><span class="p">))</span>

        <span class="n">file_list</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_route</span><span class="p">(</span><span class="n">file_list</span><span class="p">,</span> <span class="n">route</span><span class="p">,</span> <span class="n">route2</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">success</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Validating routes on client1 </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">client1</span><span class="p">))</span>

            <span class="n">route</span> <span class="o">=</span> <span class="n">client1</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">client2</span>
            <span class="k">if</span> <span class="n">topology_type</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">route2</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot; remote_guid=&quot;</span> <span class="o">+</span> <span class="n">client2_guid</span> <span class="o">+</span> <span class="s2">&quot; type=persistent proto=httpsa cvfwd=&quot;</span>
                          <span class="o">+</span> <span class="n">client2_obj</span><span class="o">.</span><span class="n">client_hostname</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span><span class="p">)</span>

            <span class="k">elif</span> <span class="n">topology_type</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">route2</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot; remote_guid=&quot;</span> <span class="o">+</span> <span class="n">client2_guid</span> <span class="o">+</span> <span class="s2">&quot; type=ondemand proto=httpsa cvfwd=&quot;</span>
                          <span class="o">+</span> <span class="n">client2_obj</span><span class="o">.</span><span class="n">client_hostname</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span><span class="p">)</span>

            <span class="k">elif</span> <span class="n">topology_type</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">route2</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot; remote_guid=&quot;</span> <span class="o">+</span> <span class="n">client2_guid</span> <span class="o">+</span> <span class="s2">&quot; type=throttling proto=http cvfwd=&quot;</span> <span class="o">+</span>
                          <span class="n">client2_obj</span><span class="o">.</span><span class="n">client_hostname</span> <span class="o">+</span> <span class="s2">&quot;:0 cvd_port=&quot;</span><span class="p">)</span>

            <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">client1_base_path</span><span class="p">,</span> <span class="s2">&quot;FwConfig.txt&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;The file path is </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_path</span><span class="p">))</span>

            <span class="n">file</span> <span class="o">=</span> <span class="n">machine_obj1</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Contents of FwConfig.txt file on client </span><span class="si">{0}</span><span class="s2"> are:</span><span class="se">\n</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span>
                          <span class="nb">format</span><span class="p">(</span><span class="n">client1</span><span class="p">,</span> <span class="n">file</span><span class="p">))</span>

            <span class="n">file_list</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_route</span><span class="p">(</span><span class="n">file_list</span><span class="p">,</span> <span class="n">route</span><span class="p">,</span> <span class="n">route2</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">success</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">and</span> <span class="n">topology_type</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">wildcard</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">client3</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Validating proxy route on client1 </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">client1</span><span class="p">))</span>
                <span class="n">route</span> <span class="o">=</span> <span class="p">(</span><span class="n">client1</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">client3</span> <span class="o">+</span> <span class="s2">&quot; proxy=&quot;</span> <span class="o">+</span> <span class="n">client2</span> <span class="o">+</span>
                         <span class="s2">&quot; remote_guid=&quot;</span> <span class="o">+</span> <span class="n">client3_guid</span><span class="p">)</span>

                <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_proxy_route</span><span class="p">(</span><span class="n">file_list</span><span class="p">,</span> <span class="n">route</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">success</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Validation of proxy route Failed on client </span><span class="si">{0}</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">client1</span><span class="p">))</span>

            <span class="k">if</span> <span class="n">success</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">and</span> <span class="n">wildcard</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">topology_type</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">route</span> <span class="o">=</span> <span class="n">client1</span> <span class="o">+</span> <span class="s2">&quot; *&quot;</span> <span class="o">+</span> <span class="s2">&quot; proxy=&quot;</span> <span class="o">+</span> <span class="n">client2</span>

                <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_proxy_route</span><span class="p">(</span><span class="n">file_list</span><span class="p">,</span> <span class="n">route</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">success</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Validation of proxy route Failed on client </span><span class="si">{0}</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">client1</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">success</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Validation of FwConfig.txt files Failed for &quot;</span>
                            <span class="s2">&quot;clients </span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">client1</span><span class="p">,</span> <span class="n">client2</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Validation of FwConfig.txt files completed successfully &quot;</span>
                      <span class="s2">&quot;for clients </span><span class="si">{0}</span><span class="s2"> and </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">client1</span><span class="p">,</span> <span class="n">client2</span><span class="p">))</span></div>

<div class="viewcode-block" id="NetworkHelper.find_route"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.find_route">[docs]</a>    <span class="k">def</span> <span class="nf">find_route</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_list</span><span class="p">,</span> <span class="n">route</span><span class="p">,</span> <span class="n">route2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Searches for a route pattern in FwConfig.txt file in client&#39;s  base folder</span>

<span class="sd">                Args:</span>

<span class="sd">                    file_list     (list)     -- file contents in form of list</span>

<span class="sd">                    route         (str)      -- route1 that needs to be searched</span>

<span class="sd">                    route2        (str)      -- route2 that needs to be searched</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>
            <span class="n">found</span> <span class="o">=</span> <span class="p">(</span><span class="n">line</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">found</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Route found in file is : [</span><span class="si">{0}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">route2</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">line</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Validation of route succeeded.&quot;</span><span class="p">)</span>
                    <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="NetworkHelper.find_proxy_route"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.find_proxy_route">[docs]</a>    <span class="k">def</span> <span class="nf">find_proxy_route</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_list</span><span class="p">,</span> <span class="n">route</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Searches for a route pattern in FwConfig.txt file in client&#39;s  base folder</span>

<span class="sd">                Args:</span>

<span class="sd">                    file_list     (list)     -- file contents in form of list</span>

<span class="sd">                    route         (str)      -- route1 that needs to be searched</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">found</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>
            <span class="n">found</span> <span class="o">=</span> <span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">route</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">found</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Route found in file is : [</span><span class="si">{0}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Validation of route [</span><span class="si">{0}</span><span class="s2">] succeeded &quot;</span>
                              <span class="s2">&quot;on Client&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">route</span><span class="p">))</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">found</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="NetworkHelper.delete_topology"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.delete_topology">[docs]</a>    <span class="k">def</span> <span class="nf">delete_topology</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topology_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Deletes the specified network topology</span>

<span class="sd">                Args:</span>

<span class="sd">                    topology_name      (str)      -- name of the topology created</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span><span class="o">.</span><span class="n">has_network_topology</span><span class="p">(</span><span class="n">topology_name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Deleting topology </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">topology_name</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">topology_name</span><span class="p">)</span></div>

<div class="viewcode-block" id="NetworkHelper.push_topology"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.push_topology">[docs]</a>    <span class="k">def</span> <span class="nf">push_topology</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topology_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Performs a push network configuration on the specified topology</span>

<span class="sd">            Args:</span>

<span class="sd">                    topology_name      (str)      -- name of the topology created</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span><span class="o">.</span><span class="n">has_network_topology</span><span class="p">(</span><span class="n">topology_name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Going to perform a push network configuration &quot;</span>
                          <span class="s2">&quot;on network topology </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">topology_name</span><span class="p">))</span>
            <span class="n">topology_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">topology_name</span><span class="p">)</span>
            <span class="n">topology_obj</span><span class="o">.</span><span class="n">push_network_config</span><span class="p">()</span></div>

<div class="viewcode-block" id="NetworkHelper.topology_pre_settings"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.topology_pre_settings">[docs]</a>    <span class="k">def</span> <span class="nf">topology_pre_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client_list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Does pre-settings on the list of clients for verification purpose</span>

<span class="sd">                Args:</span>

<span class="sd">                    client_list     (list)      -- list of clients on which setting needs to be done</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">client</span> <span class="ow">in</span> <span class="n">client_list</span><span class="p">:</span>
            <span class="n">client_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
            <span class="n">client_obj</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">configure_network_settings</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">network_config</span><span class="p">[</span><span class="s1">&#39;remove_network_config&#39;</span><span class="p">][</span><span class="s1">&#39;entities&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                <span class="s1">&#39;clientName&#39;</span><span class="p">:</span> <span class="n">client</span><span class="p">})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Querying DB to get values for isTrivialConfig flag for all the clients&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pre_trivial_list</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">exec_commserv_query</span><span class="p">(</span><span class="s1">&#39;select isTrivialConfig from &#39;</span>
                                                                  <span class="s1">&#39;APP_FWTrivialConfig where &#39;</span>
                                                                  <span class="s1">&#39;clientId &gt; 0&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Querying DB to get values for APP_Firewall&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">app_firewall_value1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">exec_commserv_query</span><span class="p">(</span><span class="s1">&#39;select * from APP_Firewall &#39;</span>
                                                                    <span class="s1">&#39;where flag=0&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Querying DB to get values for App_FWOutGoingRoutes&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">app_fwoutgoing_routes1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">exec_commserv_query</span><span class="p">(</span><span class="s1">&#39;select * from &#39;</span>
                                                                       <span class="s1">&#39;App_FWOutGoingRoutes &#39;</span>
                                                                       <span class="s1">&#39;where flag=0&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pre_trivial_list</span><span class="p">)</span></div>

<div class="viewcode-block" id="NetworkHelper.topology_post_settings"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.topology_post_settings">[docs]</a>    <span class="k">def</span> <span class="nf">topology_post_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Verifies modification in topology does not affect existing settings on client level</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Querying DB to get values for isTrivialConfig flag for all the clients&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">post_trivial_list</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">exec_commserv_query</span><span class="p">(</span><span class="s1">&#39;select isTrivialConfig from &#39;</span>
                                                                   <span class="s1">&#39;APP_FWTrivialConfig &#39;</span>
                                                                   <span class="s1">&#39;where clientId &gt; 0&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">post_trivial_list</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pre_trivial_list</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">post_trivial_list</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Values are not modified with changes in topology&quot;</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Original values for client level network settings seems &quot;</span>
                            <span class="s2">&quot;to have been modified after configuring topology&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Querying DB to get values for APP_Firewall&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">app_firewall_value2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">exec_commserv_query</span><span class="p">(</span><span class="s1">&#39;select * from APP_Firewall &#39;</span>
                                                                    <span class="s1">&#39;where flag=0&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">app_firewall_value2</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">app_firewall_value1</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">app_firewall_value2</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Values are not modified with changes in topology&quot;</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Original values for app_firewall table seems &quot;</span>
                            <span class="s2">&quot;to have been modified after configuring topology&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Querying DB to get values for App_FWOutGoingRoutes&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">app_fwoutgoing_routes2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">exec_commserv_query</span><span class="p">(</span><span class="s1">&#39;select * from &#39;</span>
                                                                       <span class="s1">&#39;App_FWOutGoingRoutes &#39;</span>
                                                                       <span class="s1">&#39;where flag=0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">app_fwoutgoing_routes2</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">app_fwoutgoing_routes1</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">app_fwoutgoing_routes2</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Values are not modified with changes in topology&quot;</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Original values for App_FWOutGoingRoutes table seems &quot;</span>
                            <span class="s2">&quot;to have been modified after configuring topology&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="NetworkHelper.modify_topology"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.modify_topology">[docs]</a>    <span class="k">def</span> <span class="nf">modify_topology</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topology_name</span><span class="p">,</span> <span class="n">firewall_groups</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Modifies existing network topology properties</span>

<span class="sd">                Args:</span>

<span class="sd">                    topology_name     (str)      -- name of topology that needs to be modified</span>

<span class="sd">                    firewall_groups   (list of dict) -- client group names to modify</span>

<span class="sd">                    **kwargs             (dict)  -- Key value pairs for supported arguments</span>

<span class="sd">                Supported arguments:</span>

<span class="sd">                network_topology_name   (str)       --  new name of the network topology</span>

<span class="sd">                description             (str)       --  description for the network topology</span>

<span class="sd">                topology_type           (int)       -- network topology type</span>

<span class="sd">                wildcard_proxy          (boolean)   -- option to use wildcard proxy for</span>
<span class="sd">                                                     proxy type topology</span>

<span class="sd">                is_smart_topology       (boolean)   -- specified as true for smart topology</span>

<span class="sd">                Possible input values:</span>

<span class="sd">                topology_type :</span>
<span class="sd">                1 --- for proxy topology</span>
<span class="sd">                2 --- for one-way topology</span>
<span class="sd">                3 --- for two-way topology</span>

<span class="sd">                group_type for client_groups:</span>
<span class="sd">                2: first client group in GUI screen</span>
<span class="sd">                1: second client group in GUI screen</span>
<span class="sd">                3: third client group in GUI screen</span>

<span class="sd">                is_mnemonic for client_groups:</span>
<span class="sd">                True: if the specified group is a mnemonic</span>
<span class="sd">                False: if the specified group is a client group</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Modifying topology&quot;</span><span class="p">)</span>

        <span class="n">topology_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">topology_name</span><span class="p">)</span>

        <span class="n">topology_obj</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">firewall_groups</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="NetworkHelper.get_wildcard_proxy"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.get_wildcard_proxy">[docs]</a>    <span class="k">def</span> <span class="nf">get_wildcard_proxy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topology_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the value of wildcard proxy for a topology</span>

<span class="sd">                Args:</span>

<span class="sd">                    topology_name    (str)    -- network topology name</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">topology_name</span><span class="p">)</span><span class="o">.</span><span class="n">wildcard_proxy</span></div>

<div class="viewcode-block" id="NetworkHelper.set_network_throttle"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.set_network_throttle">[docs]</a>    <span class="k">def</span> <span class="nf">set_network_throttle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">remote_clients</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">remote_clientgroups</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                             <span class="n">throttle_rules</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Configures network throttling on a client or a client group</span>

<span class="sd">                Args:</span>


<span class="sd">                    entity                  (dict)      -- client/client group on which</span>
<span class="sd">                                                           throttling needs to be set</span>

<span class="sd">                    {&#39;clientName&#39;:val}  or {&#39;clientGroupName&#39;: val}</span>

<span class="sd">                    remote_clients          (list)     -- list of clients towards which throttling</span>
<span class="sd">                                                          will be set</span>

<span class="sd">                    remote_clientgroups     (list)     -- list of client groups towards which</span>
<span class="sd">                                                          throttling will be set</span>

<span class="sd">                    throttle_rules          (list of dict) --  list of throttle rules</span>

<span class="sd">                    Supported keys:</span>
<span class="sd">                    &quot;sendRate&quot;</span>
<span class="sd">                    &quot;sendEnabled&quot;</span>
<span class="sd">                    &quot;receiveEnabled&quot;</span>
<span class="sd">                    &quot;recvRate&quot;</span>
<span class="sd">                    &quot;days&quot;</span>
<span class="sd">                    &quot;isAbsolute&quot;</span>
<span class="sd">                    &quot;startTime&quot;</span>
<span class="sd">                    &quot;endTime&quot;</span>
<span class="sd">                    &quot;sendRatePercent&quot;</span>
<span class="sd">                    &quot;recvRatePercent&quot;</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_entity_object</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Setting network throttling on </span><span class="si">{0}</span><span class="s2">  </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">entity</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">remote_clients</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">obj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">network_throttle</span><span class="o">.</span><span class="n">remote_clients</span> <span class="o">=</span> <span class="n">remote_clients</span>

        <span class="k">if</span> <span class="n">remote_clientgroups</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">obj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">network_throttle</span><span class="o">.</span><span class="n">remote_client_groups</span> <span class="o">=</span> <span class="n">remote_clientgroups</span>

        <span class="n">obj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">network_throttle</span><span class="o">.</span><span class="n">share_bandwidth</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="n">throttle_rules</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">obj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">network_throttle</span><span class="o">.</span><span class="n">throttle_schedules</span> <span class="o">=</span> <span class="n">throttle_rules</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Network throttling set&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="NetworkHelper.validate_throttle_schedules"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.validate_throttle_schedules">[docs]</a>    <span class="k">def</span> <span class="nf">validate_throttle_schedules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Validates throttle schedules on the client</span>

<span class="sd">                Args:</span>

<span class="sd">                    client     (str)   -- client on which throttle is enabled</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">rules_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;[throttling]&#39;</span><span class="p">,</span> <span class="s1">&#39;group1_remote_clients=&#39;</span><span class="p">,</span> <span class="s1">&#39;group1_sun_00:00=&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;group1_mon_00:00=&#39;</span><span class="p">,</span> <span class="s1">&#39;group1_tue_00:00=&#39;</span><span class="p">,</span> <span class="s1">&#39;group1_wed_00:00=&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;group1_thu_00:00=&#39;</span><span class="p">,</span> <span class="s1">&#39;group1_fri_00:00=&#39;</span><span class="p">,</span> <span class="s1">&#39;group1_sat_00:00=&#39;</span><span class="p">]</span>

        <span class="n">client_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
        <span class="n">machine_obj</span> <span class="o">=</span> <span class="n">Machine</span><span class="p">(</span><span class="n">client_obj</span><span class="p">)</span>
        <span class="n">client_base_path</span> <span class="o">=</span> <span class="n">machine_obj</span><span class="o">.</span><span class="n">join_path</span><span class="p">(</span><span class="n">client_obj</span><span class="o">.</span><span class="n">install_directory</span><span class="p">,</span> <span class="s1">&#39;Base&#39;</span><span class="p">)</span>

        <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">client_base_path</span><span class="p">,</span> <span class="s2">&quot;FwConfig.txt&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;The file path is </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_path</span><span class="p">))</span>

        <span class="n">file</span> <span class="o">=</span> <span class="n">machine_obj</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Contents of FwConfig.txt file on client </span><span class="si">{0}</span><span class="s2"> are:</span><span class="se">\n</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span>
                      <span class="nb">format</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">file</span><span class="p">))</span>

        <span class="n">file_list</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">route</span> <span class="ow">in</span> <span class="n">rules_list</span><span class="p">:</span>

            <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_proxy_route</span><span class="p">(</span><span class="n">file_list</span><span class="p">,</span> <span class="n">route</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">success</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">True</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Validation of FwConfig.txt files Failed for &quot;</span>
                                <span class="s2">&quot;client </span><span class="si">{0}</span><span class="s2"> &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">client</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Validation of FwConfig.txt files completed successfully &quot;</span>
                      <span class="s2">&quot;for client </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">client</span><span class="p">))</span></div>

<div class="viewcode-block" id="NetworkHelper.remove_network_throttle"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.remove_network_throttle">[docs]</a>    <span class="k">def</span> <span class="nf">remove_network_throttle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entities</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Removes network throttle on a given client/client group</span>

<span class="sd">                Args:</span>
<span class="sd">                    entities(dict)  -- list of dict of entity name</span>
<span class="sd">                [{&#39;clientGroupName&#39;:val}, {&#39;clientName&#39;:val}]</span>

<span class="sd">                Note: pass the key name based on entity</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">entities</span><span class="p">:</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_entity_object</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Removing network throttle on </span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">entity</span><span class="p">))</span>
            <span class="n">obj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">network_throttle</span><span class="o">.</span><span class="n">enable_network_throttle</span> <span class="o">=</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="NetworkHelper.get_network_topology_id"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.get_network_topology_id">[docs]</a>    <span class="k">def</span> <span class="nf">get_network_topology_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topology_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the network topology id</span>

<span class="sd">        Args:</span>
<span class="sd">            topology_name(str)  -- Name of network topology</span>

<span class="sd">        Returns:</span>
<span class="sd">            Network topology id</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">topologies</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">topology_name</span><span class="p">)</span><span class="o">.</span><span class="n">network_topology_id</span></div>

<div class="viewcode-block" id="NetworkHelper.run_server"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.run_server">[docs]</a>    <span class="k">def</span> <span class="nf">run_server</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">server_bat_file_path</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Starts the server given with bat file path and command</span>

<span class="sd">        Args:</span>
<span class="sd">            server_bat_file_path(str):      Path of the bat file to be created</span>
<span class="sd">            command(str):                   server command to be run</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">commcell_machine_obj</span> <span class="o">=</span> <span class="n">Machine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">commserv_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="p">)</span>
        <span class="n">commcell_machine_obj</span><span class="o">.</span><span class="n">create_file</span><span class="p">(</span><span class="n">server_bat_file_path</span><span class="p">,</span> <span class="n">command</span><span class="p">)</span>
        <span class="n">commcell_machine_obj</span><span class="o">.</span><span class="n">execute_command</span><span class="p">(</span><span class="s1">&#39;start </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">server_bat_file_path</span><span class="p">))</span></div>

<div class="viewcode-block" id="NetworkHelper.server_client_connection"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.server_client_connection">[docs]</a>    <span class="k">def</span> <span class="nf">server_client_connection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client_hostname</span><span class="p">,</span>
                                 <span class="n">server_bat_file_path</span><span class="p">,</span>
                                 <span class="n">port_number</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                 <span class="n">inter_buffer_delay</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                 <span class="n">buffer_count</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                 <span class="n">buffer_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                 <span class="n">firewalled</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                 <span class="n">is_unix_client</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initiates server/client connection on CVNetworkTestTool with specified options</span>

<span class="sd">        Args:</span>
<span class="sd">            client_hostname(str):       Client ip address</span>
<span class="sd">            server_bat_file_path(str):  Path of the bat file to be created</span>
<span class="sd">            port_number(int):           port number to host on</span>
<span class="sd">            inter_buffer_delay(int):    inter buffer delay</span>
<span class="sd">            buffer_count(int):          buffer count to be sent between server/client</span>
<span class="sd">            buffer_size(int):           size of buffer</span>
<span class="sd">            firewalled(bool):           firewall option</span>
<span class="sd">            is_unix_client(bool):       if client is unix machine</span>

<span class="sd">        Returns:</span>
<span class="sd">            Output of command line on client</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">commcell_machine_obj</span> <span class="o">=</span> <span class="n">Machine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">commserv_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="p">)</span>
        <span class="c1"># server bindIP</span>
        <span class="n">server_command</span> <span class="o">=</span> <span class="s2">&quot;cvnetworktesttool&quot;</span>
        <span class="k">if</span> <span class="n">firewalled</span><span class="p">:</span>
            <span class="n">server_command</span> <span class="o">+=</span> <span class="s1">&#39; -server -BindIP 127.0.0.1&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">server_command</span> <span class="o">+=</span> <span class="s1">&#39; -server -bindip &#39;</span> <span class="o">+</span> <span class="n">commcell_machine_obj</span><span class="o">.</span><span class="n">ip_address</span>

        <span class="k">if</span> <span class="n">port_number</span><span class="p">:</span>
            <span class="n">server_command</span> <span class="o">+=</span> <span class="s1">&#39; -srvport &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">port_number</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">server_bat_file_path</span><span class="p">,</span> <span class="n">server_command</span><span class="p">)</span>

        <span class="c1"># target client object</span>
        <span class="n">commcell_machine_obj</span> <span class="o">=</span> <span class="n">Machine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">commserv_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="p">)</span>
        <span class="n">target_client_obj</span> <span class="o">=</span> <span class="n">Machine</span><span class="p">(</span><span class="n">client_hostname</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="p">)</span>
        <span class="n">client_command</span> <span class="o">=</span> <span class="s1">&#39;cvnetworktesttool&#39;</span>
        <span class="k">if</span> <span class="n">is_unix_client</span><span class="p">:</span>
            <span class="n">target_client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">client_hostname</span><span class="p">)</span>
            <span class="n">client_command</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">/Base/CvNetworkTestTool&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">target_client</span><span class="o">.</span><span class="n">install_directory</span><span class="p">)</span>

        <span class="n">client_command</span> <span class="o">+=</span> <span class="s1">&#39; -client -srvhostname </span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">commcell_machine_obj</span><span class="o">.</span><span class="n">ip_address</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">port_number</span><span class="p">:</span>
            <span class="n">client_command</span> <span class="o">+=</span> <span class="s1">&#39; -srvport &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">port_number</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">buffer_size</span><span class="p">:</span>
            <span class="n">client_command</span> <span class="o">+=</span> <span class="s1">&#39; -buffsizeclienttoserver&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">buffer_size</span><span class="p">)</span>
            <span class="n">client_command</span> <span class="o">+=</span> <span class="s1">&#39; -buffsizeservertoclient&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">buffer_size</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">firewalled</span><span class="p">:</span>
            <span class="n">client_command</span> <span class="o">+=</span> <span class="s1">&#39; -srvclientname &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">commcell</span><span class="o">.</span><span class="n">commserv_name</span>

        <span class="k">if</span> <span class="n">inter_buffer_delay</span><span class="p">:</span>
            <span class="n">client_command</span> <span class="o">+=</span> <span class="s1">&#39; -interbufferdelay &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">inter_buffer_delay</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">buffer_count</span><span class="p">:</span>
            <span class="n">client_command</span> <span class="o">+=</span> <span class="s1">&#39; -buffercount &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">buffer_count</span><span class="p">)</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">target_client_obj</span><span class="o">.</span><span class="n">execute_command</span><span class="p">(</span><span class="n">client_command</span><span class="p">)</span><span class="o">.</span><span class="n">output</span>

        <span class="k">return</span> <span class="n">output</span></div>

<div class="viewcode-block" id="NetworkHelper.get_dips_client"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.get_dips_client">[docs]</a>    <span class="k">def</span> <span class="nf">get_dips_client</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets Data interface pairs for a client</span>

<span class="sd">        Returns:</span>

<span class="sd">            list - list of interfaces with source and destination</span>

<span class="sd">        Raises:</span>
<span class="sd">                SDKException:</span>
<span class="sd">                    if response is not received</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backup_network_pairs</span><span class="o">.</span><span class="n">get_backup_interface_for_client</span><span class="p">(</span><span class="n">client_name</span><span class="p">)</span></div>

<div class="viewcode-block" id="NetworkHelper.add_dips"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.add_dips">[docs]</a>    <span class="k">def</span> <span class="nf">add_dips</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interface_pairs_list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds data(backup) interface pairs on clients/client groups</span>

<span class="sd">                    Args:</span>
<span class="sd">                        interface_pairs_list (list)  --  list of tuples containing dict of source and destination</span>

<span class="sd">                        Example:</span>
<span class="sd">                        [({&#39;client&#39;: &#39;featuretest&#39;, &#39;srcip&#39;: &#39;172.19.96.123&#39;},</span>
<span class="sd">                        {&#39;client&#39;: &#39;SP9client&#39;, &#39;destip&#39;: &#39;172.19.0.0&#39;}),</span>
<span class="sd">                        ({&#39;client&#39;: &#39;featuretest&#39;, &#39;srcip&#39;: &#39;172.19.96.123&#39;},</span>
<span class="sd">                        {&#39;clientgroup&#39;: &#39;G1&#39;, &#39;destip&#39;: &#39;No Default Interface&#39;}),</span>
<span class="sd">                        ({&#39;clientgroup&#39;: &#39;G2&#39;, &#39;srcip&#39;: &#39;172.19.0.0/16&#39;},</span>
<span class="sd">                        {&#39;clientgroup&#39;: &#39;G3&#39;, &#39;destip&#39;: &#39;172.19.0.*&#39;})]</span>

<span class="sd">                        Note: 0th index should be source with key &#39;srcip&#39; and 1st index</span>
<span class="sd">                        should be destination with key &#39;destip&#39;</span>

<span class="sd">                              entities should be passed with key client/clientgroup</span>

<span class="sd">                    Raises:</span>
<span class="sd">                        SDKException:</span>
<span class="sd">                            if input is not correct</span>

<span class="sd">                            if response is not received</span>

<span class="sd">                &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">backup_network_pairs</span><span class="o">.</span><span class="n">add_backup_interface_pairs</span><span class="p">(</span><span class="n">interface_pairs_list</span><span class="p">)</span></div>

<div class="viewcode-block" id="NetworkHelper.delete_dips"><a class="viewcode-back" href="../../../source/Server.Network.html#Server.Network.networkhelper.NetworkHelper.delete_dips">[docs]</a>    <span class="k">def</span> <span class="nf">delete_dips</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interface_pairs_list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Deletes data(backup) interface pairs on clients/client groups</span>

<span class="sd">                    Args:</span>
<span class="sd">                        interface_pairs_list (list)  --  list of tuples containing dict of source and destination</span>

<span class="sd">                        Example:</span>
<span class="sd">                        [({&#39;client&#39;: &#39;featuretest&#39;, &#39;srcip&#39;: &#39;172.19.96.123&#39;},</span>
<span class="sd">                        {&#39;client&#39;: &#39;SP9client&#39;, &#39;destip&#39;: &#39;172.19.0.0&#39;}),</span>
<span class="sd">                        ({&#39;client&#39;: &#39;featuretest&#39;, &#39;srcip&#39;: &#39;172.19.96.123&#39;},</span>
<span class="sd">                        {&#39;clientgroup&#39;: &#39;G1&#39;, &#39;destip&#39;: &#39;No Default Interface&#39;}),</span>
<span class="sd">                        ({&#39;clientgroup&#39;: &#39;G2&#39;, &#39;srcip&#39;: &#39;172.19.0.0/16&#39;},</span>
<span class="sd">                        {&#39;clientgroup&#39;: &#39;G3&#39;, &#39;destip&#39;: &#39;172.19.0.*&#39;})]</span>

<span class="sd">                        Note: 0th index should be source with key &#39;srcip&#39; and 1st index</span>
<span class="sd">                        should be destination with key &#39;destip&#39;</span>

<span class="sd">                              entities should be passed with key client/clientgroup</span>

<span class="sd">                    Raises:</span>
<span class="sd">                        SDKException:</span>
<span class="sd">                            if input is not correct</span>

<span class="sd">                            if response is not received</span>

<span class="sd">                &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">backup_network_pairs</span><span class="o">.</span><span class="n">delete_backup_interface_pairs</span><span class="p">(</span><span class="n">interface_pairs_list</span><span class="p">)</span></div></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Commvault Systems Inc. All Rights Reserved

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>