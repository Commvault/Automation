

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Server.Workflow package &mdash; Commvault Automation 11.18 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Commvault Automation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Server.Workflow package</a><ul>
<li><a class="reference internal" href="#subpackages">Subpackages</a></li>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-Server.Workflow.workflowconstants">Server.Workflow.workflowconstants module</a></li>
<li><a class="reference internal" href="#module-Server.Workflow.workflowhelper">Server.Workflow.workflowhelper module</a></li>
<li><a class="reference internal" href="#module-Server.Workflow">Module contents</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Commvault Automation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Server.Workflow package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/source/Server.Workflow.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="server-workflow-package">
<h1>Server.Workflow package<a class="headerlink" href="#server-workflow-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="Server.Workflow.Activities.html">Server.Workflow.Activities package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Server.Workflow.Activities.html#module-Server.Workflow.Activities">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Server.Workflow.Report.html">Server.Workflow.Report package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Server.Workflow.Report.html#module-Server.Workflow.Report">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Server.Workflow.Workflows.html">Server.Workflow.Workflows package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Server.Workflow.Workflows.html#module-Server.Workflow.Workflows">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-Server.Workflow.workflowconstants">
<span id="server-workflow-workflowconstants-module"></span><h2>Server.Workflow.workflowconstants module<a class="headerlink" href="#module-Server.Workflow.workflowconstants" title="Permalink to this headline">¶</a></h2>
<p>Helper file to maintain all the constants used by Workflow test cases</p>
<dl class="data">
<dt id="Server.Workflow.workflowconstants.ACTIVITIES">
<code class="sig-prename descclassname">Server.Workflow.workflowconstants.</code><code class="sig-name descname">ACTIVITIES</code><em class="property"> = 'D:\\SP18\\vaultcx\\Source\\tools\\Automation\\Server\\Workflow\\Activities'</em><a class="headerlink" href="#Server.Workflow.workflowconstants.ACTIVITIES" title="Permalink to this definition">¶</a></dt>
<dd><p>str:     Path for the location of the Workflow custom activities</p>
</dd></dl>

<dl class="data">
<dt id="Server.Workflow.workflowconstants.WORKFLOWS">
<code class="sig-prename descclassname">Server.Workflow.workflowconstants.</code><code class="sig-name descname">WORKFLOWS</code><em class="property"> = 'D:\\SP18\\vaultcx\\Source\\tools\\Automation\\Server\\Workflow\\Workflows'</em><a class="headerlink" href="#Server.Workflow.workflowconstants.WORKFLOWS" title="Permalink to this definition">¶</a></dt>
<dd><p>str:     Path for the location of the Workflows</p>
</dd></dl>

<dl class="data">
<dt id="Server.Workflow.workflowconstants.WORKFLOW_DEFAULT_USER_INPUTS">
<code class="sig-prename descclassname">Server.Workflow.workflowconstants.</code><code class="sig-name descname">WORKFLOW_DEFAULT_USER_INPUTS</code><em class="property"> = '&lt;inputs&gt;&lt;requestedBy&gt;%s&lt;/requestedBy&gt;&lt;objectName/&gt;&lt;CustomMessage/&gt;&lt;/inputs&gt;'</em><a class="headerlink" href="#Server.Workflow.workflowconstants.WORKFLOW_DEFAULT_USER_INPUTS" title="Permalink to this definition">¶</a></dt>
<dd><p>Default inputs to BL workflow test cases. Declared here as it’s used by multiple testcases</p>
</dd></dl>

<dl class="data">
<dt id="Server.Workflow.workflowconstants.WORKFLOW_DEPENDENCY_MAP">
<code class="sig-prename descclassname">Server.Workflow.workflowconstants.</code><code class="sig-name descname">WORKFLOW_DEPENDENCY_MAP</code><em class="property"> = {'WF_HashFile': None, 'common_workflows': ['wf_email', 'wf_pause'], 'wf_acquire_lock_parent': {'Child': ['wf_acquire_lock_child']}, 'wf_bl_delete_backupset': None, 'wf_client_operations': {'Activities': ['CreateClientGroup', 'DeleteClientGroup']}, 'wf_conditional_loop_test': None, 'wf_db_operations': None, 'wf_drive': {'Child': ['wf_log_event']}, 'wf_email_commserver': None, 'wf_file_upload_operations': None, 'wf_foreach_json': None, 'wf_foreachxml_switchtojob': None, 'wf_job_control': {'Child': ['wf_log_event', 'wf_qcommands_create']}, 'wf_library_operations': {'Child': ['wf_log_event', 'wf_qcommands_create']}, 'wf_logging': {'Child': ['wf_conditional_loop_test']}, 'wf_media': {'Child': ['wf_log_event']}, 'wf_miscellaneous': {'Child': ['wf_conditional_loop_test']}, 'wf_modify': {'Activities': ['ListGlobalFilters'], 'Child': ['wf_log_event', 'wf_qcommands_create']}, 'wf_qcommand_operations': {'Child': ['wf_qcommands_create']}, 'wf_qcommands_create': {'Activities': ['CreateBackupset']}, 'wf_replication': {'Child': ['wf_log_event']}, 'wf_respond_to_caller_parent': {'Child': ['wf_respond_to_caller_child']}, 'wf_result_sets': {'Child': ['wf_log_event']}, 'wf_user_administration': {'Activities': ['UserCreate_CMD', 'UserCreate_REST', 'UserCreate_XML', 'UserDelete', 'UserList'], 'Child': ['wf_log_event']}, 'wf_utilities': None, 'wf_web_services': None, 'wf_wizard_block': None}</em><a class="headerlink" href="#Server.Workflow.workflowconstants.WORKFLOW_DEPENDENCY_MAP" title="Permalink to this definition">¶</a></dt>
<dd><p>str:     Embedded workflows and workflow custom activities mapping
Common workflows will be deployed first followed by Child workflows
Child workflows will be deployed in the order they are defined</p>
</dd></dl>

</div>
<div class="section" id="module-Server.Workflow.workflowhelper">
<span id="server-workflow-workflowhelper-module"></span><h2>Server.Workflow.workflowhelper module<a class="headerlink" href="#module-Server.Workflow.workflowhelper" title="Permalink to this headline">¶</a></h2>
<p>Main file for performing workflow operations on Commcell</p>
<p>WorkflowHelper is the only class defined in this file</p>
<dl>
<dt>WorkflowHelper:    Provides functionality to deploy and execute workflows on</dt><dd><p>WorkflowEngine.</p>
</dd>
<dt>WorkflowHelper:</dt><dd><p>__init__()                  –  initialize instance of the WorkflowHelper class</p>
<dl class="simple">
<dt>__repr__()                  –  Representation string for the instance of the</dt><dd><p>WorkflowHelper class</p>
</dd>
</dl>
<p>has_workflow()              – Checks if a workflow exists in the commcell with the input workflow name</p>
<dl class="simple">
<dt>download_workflow_from_store()</dt><dd><p>– Downloads workflow from Software Store</p>
</dd>
<dt>execute()                   –  Deploy and execute the workflow on the WorkflowEngine</dt><dd><p>and wait for the workjflow job completion.
If workflow is not deployed or imported, it imports/deploys
the workflow.
Also deploys any dependent custom created activities</p>
</dd>
<dt>deploy()                    – Imports and deploys workflow and dependent(embedded)</dt><dd><p>workflows on WFEngine.
Also deploys custom activities which the workflow requires.</p>
</dd>
</dl>
<p>deploy_workflow()           – Deploy a workflow</p>
<p>import_workflow()           – Import a workflow</p>
<p>delete()                    – Deletes a workflow from the Commcell</p>
<p>user_interactions()         – Returns all the pending interactions from a specific user as a list</p>
<p>submit_interaction()        – Submit user interaction for user input activity</p>
<dl class="simple">
<dt>modify_workflow_configuration()</dt><dd><p>– Modify workflow configuration [ Under properties tab ]</p>
</dd>
</dl>
<p>process_user_requests()     – Approves user requests and wait for workflow job to complete.</p>
<p>bl_workflows_setup()        – Pre setup steps for Business logic workflow related test cases for softwarestore</p>
<p>is_deployed()               – Returns True if workflow is deployed</p>
<p>workflow_job_status()       – Validates the status of jobId for the workflow executed</p>
<dl class="simple">
<dt>get_client_name_and_hostname_based_on_configuration()</dt><dd><p>– To get clientname and hostname based on the workflow configuration</p>
</dd>
</dl>
<p>export_workflow()           – Export the workflow xml</p>
<p>clone()                     – Clones the workflow</p>
<p>enable_workflow()           – Enables the workflow</p>
<p>disable_workflow()          – Disables the workflow</p>
<p>hidden_workflow()           – Get Workflow object for specific workflows</p>
<p>cleanup()                   – Cleanup the testcase workflows</p>
</dd>
</dl>
<p>Attributes:</p>
<blockquote>
<div><p><strong>workflow_name</strong>   – Returns the name of the workflow</p>
</div></blockquote>
<dl class="class">
<dt id="Server.Workflow.workflowhelper.WorkflowHelper">
<em class="property">class </em><code class="sig-prename descclassname">Server.Workflow.workflowhelper.</code><code class="sig-name descname">WorkflowHelper</code><span class="sig-paren">(</span><em class="sig-param">testcase</em>, <em class="sig-param">wf_name</em>, <em class="sig-param">wf_dict=None</em>, <em class="sig-param">deploy=True</em>, <em class="sig-param">commcell=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/Workflow/workflowhelper.html#WorkflowHelper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.Workflow.workflowhelper.WorkflowHelper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Workflow helper class to perform workflow related operations</p>
<dl class="method">
<dt id="Server.Workflow.workflowhelper.WorkflowHelper.bl_workflows_setup">
<code class="sig-name descname">bl_workflows_setup</code><span class="sig-paren">(</span><em class="sig-param">workflows</em>, <em class="sig-param">username=None</em>, <em class="sig-param">password=None</em>, <em class="sig-param">usergroup=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/Workflow/workflowhelper.html#WorkflowHelper.bl_workflows_setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.Workflow.workflowhelper.WorkflowHelper.bl_workflows_setup" title="Permalink to this definition">¶</a></dt>
<dd><dl>
<dt>Pre setup steps for Business logic workflow related test cases for softwarestore</dt><dd><p>Create a non admin user in master user group
Check if the workflow is deployed</p>
</dd>
<dt>Args:</dt><dd><p>workflows (list)    : Workflow list which need to be checked if they are deployed. If not throw Exception</p>
<p>username  (str)     : Username for the user which will be created</p>
<p>password  (str)     : Password for the user</p>
<p>usergroup (str)     : User group to associate the user to</p>
</dd>
<dt>Returns:</dt><dd><p>Tuple - Created user name and Commcell object for the created user</p>
</dd>
<dt>Raises</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><ul class="simple">
<li><p>if workflows are not deployed.</p></li>
<li><p>if any failiure during Execution.</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Server.Workflow.workflowhelper.WorkflowHelper.cleanup">
<code class="sig-name descname">cleanup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/Workflow/workflowhelper.html#WorkflowHelper.cleanup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.Workflow.workflowhelper.WorkflowHelper.cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>Cleanup the testcase workflows</p>
<dl class="simple">
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>-If failed to cleanup(delete) workflow</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Server.Workflow.workflowhelper.WorkflowHelper.clone">
<code class="sig-name descname">clone</code><span class="sig-paren">(</span><em class="sig-param">clone_workflow_name</em>, <em class="sig-param">workflow=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/Workflow/workflowhelper.html#WorkflowHelper.clone"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.Workflow.workflowhelper.WorkflowHelper.clone" title="Permalink to this definition">¶</a></dt>
<dd><p>Clones the workflow</p>
<dl>
<dt>Args:</dt><dd><p>clone_workflow_name (str)   :   name to be set for clone workflow</p>
<p>workflow (str)  :   name of workflow to clone</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if module fails at any step during execution</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Server.Workflow.workflowhelper.WorkflowHelper.delete">
<code class="sig-name descname">delete</code><span class="sig-paren">(</span><em class="sig-param">workflow_name=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/Workflow/workflowhelper.html#WorkflowHelper.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.Workflow.workflowhelper.WorkflowHelper.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes a workflow from the Commcell.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>workflow_name   (str/list)   –  Workflow(s) to delete from commcell</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if module fails at any step during execution</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>True if workflow is successfully deleted</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Server.Workflow.workflowhelper.WorkflowHelper.deploy">
<code class="sig-name descname">deploy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/Workflow/workflowhelper.html#WorkflowHelper.deploy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.Workflow.workflowhelper.WorkflowHelper.deploy" title="Permalink to this definition">¶</a></dt>
<dd><p>Imports and deploys workflow and dependent(embedded) workflows on WFEngine.</p>
<blockquote>
<div><p>Also deploys custom activities which the workflow requires.</p>
<p>Dependent workflows and activities are fetched from the pre populated</p>
<p>workflow map defined in the WorkflowConstants module unless otherwise</p>
<p>provided by the user in the module arguments</p>
</div></blockquote>
<p>Args:
None</p>
<p>Returns:
None</p>
<p>Raises:
Exception - If module execution fails during any step.</p>
</dd></dl>

<dl class="method">
<dt id="Server.Workflow.workflowhelper.WorkflowHelper.deploy_workflow">
<code class="sig-name descname">deploy_workflow</code><span class="sig-paren">(</span><em class="sig-param">workflow_engine=None</em>, <em class="sig-param">workflow_xml=None</em>, <em class="sig-param">workflow=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/Workflow/workflowhelper.html#WorkflowHelper.deploy_workflow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.Workflow.workflowhelper.WorkflowHelper.deploy_workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Deploys workflow on the Commcell if not already Deployed
Args:</p>
<blockquote>
<div><p>workflow_engine (str)     : WorkflowEngine where workflow will be deployed</p>
<p>workflow_xml (str)        : Workflow xml path with complete path location</p>
<p>workflow (str)            : Workflow name</p>
</div></blockquote>
<dl class="simple">
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if module fails at any step during execution</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Server.Workflow.workflowhelper.WorkflowHelper.disable_workflow">
<code class="sig-name descname">disable_workflow</code><span class="sig-paren">(</span><em class="sig-param">workflow=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/Workflow/workflowhelper.html#WorkflowHelper.disable_workflow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.Workflow.workflowhelper.WorkflowHelper.disable_workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Disables the Workflow
Args:</p>
<blockquote>
<div><p>workflow            (Str)       – workflow Name</p>
</div></blockquote>
<dl class="simple">
<dt>Raises</dt><dd><dl class="simple">
<dt>Exception :</dt><dd><p>–If Enable workflow fails</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Server.Workflow.workflowhelper.WorkflowHelper.download_workflow_from_store">
<code class="sig-name descname">download_workflow_from_store</code><span class="sig-paren">(</span><em class="sig-param">workflow_name</em>, <em class="sig-param">download_location</em>, <em class="sig-param">cloud_username</em>, <em class="sig-param">cloud_password</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/Workflow/workflowhelper.html#WorkflowHelper.download_workflow_from_store"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.Workflow.workflowhelper.WorkflowHelper.download_workflow_from_store" title="Permalink to this definition">¶</a></dt>
<dd><p>Downloads workflow from Software Store</p>
<dl>
<dt>Args:</dt><dd><p>workflow_name       (str)   –  name of the workflow to download</p>
<p>download_location   (str)   –  location to download the workflow at</p>
<p>cloud_username      (str)   –  username for the cloud account</p>
<p>cloud_password      (str)   –  password for the above username</p>
</dd>
<dt>Returns:</dt><dd><p>str     -   full path of the workflow XML</p>
</dd>
<dt>Raises:</dt><dd><dl>
<dt>SDKException:</dt><dd><p>if type of the workflow name argument is not string</p>
<p>if HTTP Status Code is not SUCCESS / download workflow failed</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Server.Workflow.workflowhelper.WorkflowHelper.email">
<em class="property">property </em><code class="sig-name descname">email</code><a class="headerlink" href="#Server.Workflow.workflowhelper.WorkflowHelper.email" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the emailid from the config</p>
</dd></dl>

<dl class="method">
<dt id="Server.Workflow.workflowhelper.WorkflowHelper.enable_workflow">
<code class="sig-name descname">enable_workflow</code><span class="sig-paren">(</span><em class="sig-param">workflow=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/Workflow/workflowhelper.html#WorkflowHelper.enable_workflow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.Workflow.workflowhelper.WorkflowHelper.enable_workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Enables the workflow
Args:</p>
<blockquote>
<div><p>workflow            (Str)       – workflow Name</p>
</div></blockquote>
<dl class="simple">
<dt>Raises</dt><dd><dl class="simple">
<dt>Exception :</dt><dd><p>–If Enable workflow fails</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Server.Workflow.workflowhelper.WorkflowHelper.execute">
<code class="sig-name descname">execute</code><span class="sig-paren">(</span><em class="sig-param">workflow_json_input=None</em>, <em class="sig-param">wait_for_job=True</em>, <em class="sig-param">hidden=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/Workflow/workflowhelper.html#WorkflowHelper.execute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.Workflow.workflowhelper.WorkflowHelper.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes workflow on workflow engine.</p>
<p>If workflow is not deployed already, an attempt is made to deploy the
workflow.</p>
<p>Workflow is executed and waits for the job to complete</p>
<p>Args:</p>
<blockquote>
<div><p>workflow_json_input    (dict)  –  dictionary consisting of inputs for the workflow</p>
<dl class="simple">
<dt>wait_for_job           (bool)  –  If user has to wait for job to complete</dt><dd><p>default: True</p>
</dd>
</dl>
<p>inputs dict format:</p>
<blockquote>
<div><dl class="simple">
<dt>{</dt><dd><p>‘input1_name’: ‘input1_value’,
‘input2_name’: ‘input2_value’</p>
</dd>
</dl>
<p>}</p>
<p>e.g.:
for executing the Demo_CheckReadiness workflow, inputs dict would be:
{</p>
<blockquote>
<div><p>“ClientGroupName”: “client_group_value”</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
<p>hidden (bool) – Is workflow hidden True/False?</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>job object    (SDK Job class job object for the workflow job)</p>
</dd>
<dt>Raises:</dt><dd><p>Exception - If workflow job fails to execute</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Server.Workflow.workflowhelper.WorkflowHelper.export_workflow">
<code class="sig-name descname">export_workflow</code><span class="sig-paren">(</span><em class="sig-param">export_location=None</em>, <em class="sig-param">workflow=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/Workflow/workflowhelper.html#WorkflowHelper.export_workflow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.Workflow.workflowhelper.WorkflowHelper.export_workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Exports the workflow to the location specified</p>
<dl class="simple">
<dt>Args:</dt><dd><p>export_location         (Str)       – Directory path where the workflow need to be export</p>
</dd>
<dt>Returns:</dt><dd><p>str                     –              Absolute path of the exported workflow xml file</p>
</dd>
<dt>Raises</dt><dd><dl class="simple">
<dt>Exception :</dt><dd><p>–If workflow is not exists
–If export location does not exist
–If failed to write the export workflow definition in file</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Server.Workflow.workflowhelper.WorkflowHelper.get_client_name_and_hostname_based_on_configuration">
<code class="sig-name descname">get_client_name_and_hostname_based_on_configuration</code><span class="sig-paren">(</span><em class="sig-param">client_name=None</em>, <em class="sig-param">client_hostname=None</em>, <em class="sig-param">config_xml=None</em>, <em class="sig-param">organization_name=None</em>, <em class="sig-param">username='admin'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/Workflow/workflowhelper.html#WorkflowHelper.get_client_name_and_hostname_based_on_configuration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.Workflow.workflowhelper.WorkflowHelper.get_client_name_and_hostname_based_on_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the clientname and hostname based on the configuration of the pre install workflow</p>
<dl>
<dt>Args:</dt><dd><p>client_name     (str)   – Name of the client</p>
<p>client_hostname (str)   – Hostname of the client installed</p>
<p>config_xml      (str)   – dictionary consisting of inputs for the pre install workflow</p>
<blockquote>
<div><dl class="simple">
<dt>Example:</dt><dd><p>&lt;Append&gt;2&lt;/Append&gt;
&lt;Append_custom_string&gt;false&lt;/Append_custom_string&gt;
&lt;Custom_string&gt;&lt;/Custom_string&gt;
&lt;Append_username_to_client&gt;false&lt;/Append_username_to_client&gt;</p>
</dd>
</dl>
</div></blockquote>
<p>organization_name (str) – Name of the organization</p>
<dl class="simple">
<dt>username        (str)   – Commcell username used to install the client</dt><dd><p>default: admin</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>(str,str)   – Returns tuple of client name and client hostname</p>
</dd>
<dt>Raises:</dt><dd><p>Exception:</p>
<blockquote>
<div><p>– if arguments are missing</p>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Server.Workflow.workflowhelper.WorkflowHelper.has_workflow">
<code class="sig-name descname">has_workflow</code><span class="sig-paren">(</span><em class="sig-param">workflow_name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/Workflow/workflowhelper.html#WorkflowHelper.has_workflow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.Workflow.workflowhelper.WorkflowHelper.has_workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if a workflow exists in the commcell with the input workflow name</p>
<dl class="simple">
<dt>Args:</dt><dd><p>workflow_name   (str)   –  name of the workflow</p>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt>bool    -   boolean output whether the workflow exists in the</dt><dd><p>commcell or not</p>
</dd>
</dl>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>SDKException:</dt><dd><p>if type of the workflow name argument is not string</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Server.Workflow.workflowhelper.WorkflowHelper.hidden_workflow">
<code class="sig-name descname">hidden_workflow</code><span class="sig-paren">(</span><em class="sig-param">wf_name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/Workflow/workflowhelper.html#WorkflowHelper.hidden_workflow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.Workflow.workflowhelper.WorkflowHelper.hidden_workflow" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Get Workflow object for specific workflows</dt><dd><p>e.g: Hidden Workflows [ Fetch id from DB and create object ]</p>
</dd>
<dt>Args:</dt><dd><p>wf_name (str)       :   Workflow name</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>-If failed to create workflow object</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Server.Workflow.workflowhelper.WorkflowHelper.import_workflow">
<code class="sig-name descname">import_workflow</code><span class="sig-paren">(</span><em class="sig-param">workflow_xml=None</em>, <em class="sig-param">workflow=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/Workflow/workflowhelper.html#WorkflowHelper.import_workflow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.Workflow.workflowhelper.WorkflowHelper.import_workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Imports workflow on the Commcell.
Args:</p>
<blockquote>
<div><p>workflow_xml (str)    : Workflow xml path with complete path location</p>
<p>workflow (str)   : Workflow name</p>
</div></blockquote>
<dl class="simple">
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if module fails at any step during execution</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Server.Workflow.workflowhelper.WorkflowHelper.is_deployed">
<code class="sig-name descname">is_deployed</code><span class="sig-paren">(</span><em class="sig-param">workflow_name</em>, <em class="sig-param">hardcheck=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/Workflow/workflowhelper.html#WorkflowHelper.is_deployed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.Workflow.workflowhelper.WorkflowHelper.is_deployed" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if the workflow is deployed on WorkflowEngine or not</p>
<dl>
<dt>Args:</dt><dd><p>workflow_name   (str)   –  name of the workflow to check</p>
<dl>
<dt>hardcheck       (bool)  –  If set to True exception shall be raised if workflow is not deployed or</dt><dd><blockquote>
<div><p>imported on WorkflowEngine.</p>
</div></blockquote>
<p>If set to False, module will return false.
default: True</p>
</dd>
</dl>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>Workflow is not imported on Commcell [ hardcheck=True ]
Workflow [{0}] is imported but not deployed/installed. [ hardcheck=True ]
if module fails at any step during execution</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Server.Workflow.workflowhelper.WorkflowHelper.modify_workflow_configuration">
<code class="sig-name descname">modify_workflow_configuration</code><span class="sig-paren">(</span><em class="sig-param">config_xml</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/Workflow/workflowhelper.html#WorkflowHelper.modify_workflow_configuration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.Workflow.workflowhelper.WorkflowHelper.modify_workflow_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify workflow configuration</p>
<dl class="simple">
<dt>Args:</dt><dd><p>config_xml    (xml)    : Corresponding workflow configuration tags and their values</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if module fails at any step during execution</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Server.Workflow.workflowhelper.WorkflowHelper.process_user_requests">
<code class="sig-name descname">process_user_requests</code><span class="sig-paren">(</span><em class="sig-param">username</em>, <em class="sig-param">action='Accept'</em>, <em class="sig-param">input_xml='&lt;inputs&gt;&lt;/inputs&gt;'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/Workflow/workflowhelper.html#WorkflowHelper.process_user_requests"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.Workflow.workflowhelper.WorkflowHelper.process_user_requests" title="Permalink to this definition">¶</a></dt>
<dd><p>Common module mainly to proccess the interactive requests and wait for workflow job to complete
This module is mainly written for modularization and common code handling for multiple testcases.</p>
<dl>
<dt>Args:</dt><dd><p>username    (str)    : Unique username for which to approve the interaction request</p>
<dl>
<dt>action      (str)<span class="classifier">Action to take while taking user approval</span></dt><dd><p>Default: Accept</p>
</dd>
<dt>input_xml    (str)<span class="classifier">Input xml for the worklow’s user interactive request.</span></dt><dd><blockquote>
<div><p>Default: &lt;inputs&gt;&lt;/inputs&gt; (No user inputs to UserInput activity)</p>
</div></blockquote>
<p>e.g
&lt;inputs&gt;&lt;requestedBy&gt;a&lt;/requestedBy&gt;&lt;objectName/&gt;&lt;CustomMessage/&gt;&lt;/inputs&gt;</p>
</dd>
</dl>
</dd>
<dt>Raises</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>If failed at any given step in the module.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Server.Workflow.workflowhelper.WorkflowHelper.submit_interaction">
<code class="sig-name descname">submit_interaction</code><span class="sig-paren">(</span><em class="sig-param">interaction</em>, <em class="sig-param">input_xml</em>, <em class="sig-param">action</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/Workflow/workflowhelper.html#WorkflowHelper.submit_interaction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.Workflow.workflowhelper.WorkflowHelper.submit_interaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Submits a given interaction with specified action</p>
<dl>
<dt>Args:</dt><dd><p>interaction (dict)    –  Interaction dictionary
e.g:</p>
<blockquote>
<div><dl>
<dt>{</dt><dd><p>“interactionId”: 3871,
“created”: 1547524940,
“subject”: “Delete Backupset [  -&gt;  -&gt;  ] requested by [ 11111_Automation_45_651 ]”,
“activityName”: “Get Authorization”,
“flags”: 1,
“description”: “”,
“sessionId”: “a38b32dc-f505-45c5-9d61-3eaee226b50c”,
“processStepId”: 648993,
“jobId”: 2804488,
“status”: 0,
“workflow”: {</p>
<blockquote>
<div><p>“workflowName”: “GetAndProcessAuthorization”,
“workflowId”: 2095</p>
</div></blockquote>
<p>},
“commCell”: {</p>
<blockquote>
<div><p>“commCellName”: “WIN-K2DCEJR56MG”,
“commCellId”: 2</p>
</div></blockquote>
<p>},
“client”: {</p>
<blockquote>
<div><p>“clientId”: 2,
“clientName”: “WIN-K2DCEJR56MG”</p>
</div></blockquote>
<p>},
“user”: {</p>
<blockquote>
<div><p>“userName”: “11111_Automation_01-14-2019_23_01_45_651”,
“userId”: 1418</p>
</div></blockquote>
<p>}</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
<dl class="simple">
<dt>input_xml (str)       –  Input XML string for completing the interaction.</dt><dd><dl class="simple">
<dt>e.g<span class="classifier">This is very specific to the user input interaction.</span></dt><dd><p>Construct the input XML based on workflow being executed and send
to this module.</p>
</dd>
</dl>
</dd>
<dt>action   (str)        –  Interaction action</dt><dd><dl class="simple">
<dt>This is very specific to workflow being executed and the expected options</dt><dd><p>for the given interaction</p>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if module fails at any step during execution</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Server.Workflow.workflowhelper.WorkflowHelper.user_interactions">
<code class="sig-name descname">user_interactions</code><span class="sig-paren">(</span><em class="sig-param">username</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/Workflow/workflowhelper.html#WorkflowHelper.user_interactions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.Workflow.workflowhelper.WorkflowHelper.user_interactions" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns all the pending interactions from a specific user as a list</p>
<dl class="simple">
<dt>Args:</dt><dd><p>username   (str)   –  User name</p>
</dd>
<dt>Returns:</dt><dd><p>(list)    - Pending interactions for a specific user</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if module fails at any step during execution</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Server.Workflow.workflowhelper.WorkflowHelper.workflow_job_status">
<code class="sig-name descname">workflow_job_status</code><span class="sig-paren">(</span><em class="sig-param">wf_name</em>, <em class="sig-param">wait_for_job=True</em>, <em class="sig-param">expected_state='completed'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/Workflow/workflowhelper.html#WorkflowHelper.workflow_job_status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.Workflow.workflowhelper.WorkflowHelper.workflow_job_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the status of jobId for the workflow executed</p>
<dl>
<dt>Args:</dt><dd><p>wf_name (str)       :   Workflow name for which latest job status required</p>
<dl class="simple">
<dt>expected_state(str)<span class="classifier">Expected state for the workflow job to be validated</span></dt><dd><p>Default : “Completed”</p>
</dd>
</dl>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>-If no latest job available for the workflow
-Job status is not completed</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Server.Workflow.workflowhelper.WorkflowHelper.workflow_name">
<em class="property">property </em><code class="sig-name descname">workflow_name</code><a class="headerlink" href="#Server.Workflow.workflowhelper.WorkflowHelper.workflow_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the name of the workflow</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-Server.Workflow">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-Server.Workflow" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Commvault Systems Inc. All Rights Reserved

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>