

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Server.NFSObjectStore package &mdash; Commvault Automation 11.22 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Commvault Automation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Server.NFSObjectStore package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-Server.NFSObjectStore.NFSACLHelper">Server.NFSObjectStore.NFSACLHelper module</a></li>
<li><a class="reference internal" href="#module-Server.NFSObjectStore.NFSObjectStoreConstants">Server.NFSObjectStore.NFSObjectStoreConstants module</a></li>
<li><a class="reference internal" href="#module-Server.NFSObjectStore.NFSObjectStoreHelper">Server.NFSObjectStore.NFSObjectStoreHelper module</a></li>
<li><a class="reference internal" href="#module-Server.NFSObjectStore.nfs_data_aging_helper">Server.NFSObjectStore.nfs_data_aging_helper module</a></li>
<li><a class="reference internal" href="#module-Server.NFSObjectStore.nfs_pruning_helper">Server.NFSObjectStore.nfs_pruning_helper module</a></li>
<li><a class="reference internal" href="#module-Server.NFSObjectStore.nfs_solr_query">Server.NFSObjectStore.nfs_solr_query module</a></li>
<li><a class="reference internal" href="#module-Server.NFSObjectStore">Module contents</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Commvault Automation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Server.NFSObjectStore package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/source/Server.NFSObjectStore.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="server-nfsobjectstore-package">
<h1>Server.NFSObjectStore package<a class="headerlink" href="#server-nfsobjectstore-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-Server.NFSObjectStore.NFSACLHelper">
<span id="server-nfsobjectstore-nfsaclhelper-module"></span><h2>Server.NFSObjectStore.NFSACLHelper module<a class="headerlink" href="#module-Server.NFSObjectStore.NFSACLHelper" title="Permalink to this headline">¶</a></h2>
<p>File for performing ACL related operations for NFS objectstore</p>
<p>NfsAclHelper is the class defined in this file.</p>
<p>ObjectstoreClientUtils: Class for providing common functions for test clients</p>
<p>NFSServerHelper: Class for providing NFS server related operations</p>
<dl class="simple">
<dt>NfsAclHelper:</dt><dd><p>__init__()                    –  initialize instance of the NfsAclHelper class
by defining common test path</p>
</dd>
</dl>
<dl class="py class">
<dt id="Server.NFSObjectStore.NFSACLHelper.NfsAclHelper">
<em class="property">class </em><code class="sig-prename descclassname">Server.NFSObjectStore.NFSACLHelper.</code><code class="sig-name descname">NfsAclHelper</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">client_name</span></em>, <em class="sig-param"><span class="n">commcell</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">username</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">password</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSACLHelper.html#NfsAclHelper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSACLHelper.NfsAclHelper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>NFS objectstore utils class to perform common operations for test clients</p>
<dl class="py method">
<dt id="Server.NFSObjectStore.NFSACLHelper.NfsAclHelper.create_users_machine_objs">
<code class="sig-name descname">create_users_machine_objs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">users_list</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSACLHelper.html#NfsAclHelper.create_users_machine_objs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSACLHelper.NfsAclHelper.create_users_machine_objs" title="Permalink to this definition">¶</a></dt>
<dd><p>create required users and machine instance logged in as those users</p>
<dl class="simple">
<dt>Args:</dt><dd><p>users_list   (list)   –  list of username strings to be used to create user</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception(Exception_Code, Exception_Message):</dt><dd><p>if failed to create users or user machine objects</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="Server.NFSObjectStore.NFSACLHelper.NfsAclHelper.default_password">
<code class="sig-name descname">default_password</code><a class="headerlink" href="#Server.NFSObjectStore.NFSACLHelper.NfsAclHelper.default_password" title="Permalink to this definition">¶</a></dt>
<dd><p>TODO: crypt() is supported for unix platform only. but most of the time, controller
machines are windows. So using the encrypted password below for now until
we research on alternative solution</p>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.NFSACLHelper.NfsAclHelper.read_permissions_inputs">
<code class="sig-name descname">read_permissions_inputs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_operations</span></em>, <em class="sig-param"><span class="n">usage</span></em>, <em class="sig-param"><span class="n">test_type</span><span class="o">=</span><span class="default_value">'file'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSACLHelper.html#NfsAclHelper.read_permissions_inputs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSACLHelper.NfsAclHelper.read_permissions_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>read inputs required to verify file or folder ACL permissions.</p>
<dl>
<dt>Args:</dt><dd><dl>
<dt>file_operations  (list or dict or str)   –</dt><dd><dl class="simple">
<dt>if file_operations == str, input should be ‘all’ | supported file operations</dt><dd><p>example: file_operations=”read”, file_operations=”write”</p>
</dd>
<dt>if file_operations == str, input should be list of supported file operations</dt><dd><p>example: file_operations=[“read”, “write”, “append”]</p>
</dd>
</dl>
<p>if file_operations == dict, input should be dictionary containing key as file
operation and value as ACE to be used to verify the operation</p>
<blockquote>
<div><p>example: file_operations={“read”:’r’, “write”:w’}</p>
</div></blockquote>
<p>In case of dictionary user passed ACEs are used to verify the operations. In case
of others, default ACEs will be used for each operations</p>
</dd>
</dl>
<p>usage   (str)                            –  usage string to call the function</p>
<p>test_type (str)                          – used to get the default permissions</p>
</dd>
<dt>Returns:</dt><dd><p>tuple(file permissions, dict{file operation:ACEs})</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception(Exception_Message):</dt><dd><p>in case of any failures in the test</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.NFSACLHelper.NfsAclHelper.validate_user_file_permission">
<code class="sig-name descname">validate_user_file_permission</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">action</span></em>, <em class="sig-param"><span class="n">user_machine_obj</span></em>, <em class="sig-param"><span class="n">permission</span></em>, <em class="sig-param"><span class="n">test_path</span></em>, <em class="sig-param"><span class="n">valiadate_before_acl</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSACLHelper.html#NfsAclHelper.validate_user_file_permission"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSACLHelper.NfsAclHelper.validate_user_file_permission" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify the user operations for the given file operation permission</p>
<dl>
<dt>Args:</dt><dd><p>action               (str)   –  Ace type in test (allow/block)</p>
<p>user_machine_obj     (obj)   –  user machine object object</p>
<p>permission           (str)   –  valid file operation (read|write|execute|append)</p>
<p>test_path            (str)   –  path of file for which access to be verified</p>
<p>valiadate_before_acl (bool)  – is this function called before applying ACL</p>
</dd>
<dt>Returns:</dt><dd><p>True    -   user has permission to perform the operation
False   -   user doesn’t have permission to perform the operation</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception(Exception_Code, Exception_Message):</dt><dd><p>if invalid file operation is passed</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.NFSACLHelper.NfsAclHelper.validate_user_folder_permission">
<code class="sig-name descname">validate_user_folder_permission</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">action</span></em>, <em class="sig-param"><span class="n">user_machine_obj</span></em>, <em class="sig-param"><span class="n">permission</span></em>, <em class="sig-param"><span class="n">test_path</span></em>, <em class="sig-param"><span class="n">valiadate_before_acl</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSACLHelper.html#NfsAclHelper.validate_user_folder_permission"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSACLHelper.NfsAclHelper.validate_user_folder_permission" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify the user operation for the given directory permissions</p>
<dl>
<dt>Args:</dt><dd><p>action                 (str)   –  Ace type in test (allow/block)</p>
<p>user_machine_obj       (obj)   –  user machine object object</p>
<p>permission             (str)   –  valid file operation (read|write|execute|append)</p>
<p>test_path              (str)   –  path of file for which access to be verified</p>
<p>valiadate_before_acl   (bool)  – is this function called before applying ACL</p>
</dd>
<dt>Returns:</dt><dd><p>True    -   user has permission to perform the operation
False   -   user doesn’t have permission to perform the operation</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception(Exception_Code, Exception_Message):</dt><dd><p>if invalid file operation is passed</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.NFSACLHelper.NfsAclHelper.verify_ace_file_permissions">
<code class="sig-name descname">verify_ace_file_permissions</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">test_directory</span></em>, <em class="sig-param"><span class="n">file_operations</span><span class="o">=</span><span class="default_value">'all'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSACLHelper.html#NfsAclHelper.verify_ace_file_permissions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSACLHelper.NfsAclHelper.verify_ace_file_permissions" title="Permalink to this definition">¶</a></dt>
<dd><p>verify NFS v4 ACEs for file.</p>
<dl>
<dt>Args:</dt><dd><p>test_directory   (str)                   –  NFSv4 ACL supported mounted path</p>
<dl>
<dt>file_operations  (list or dict or str)   –</dt><dd><dl class="simple">
<dt>if file_operations == str, input should be ‘all’ | supported file operations</dt><dd><p>example: file_operations=”read”, file_operations=”write”</p>
</dd>
<dt>if file_operations == str, input should be list of supported file operations</dt><dd><p>example: file_operations=[“read”, “write”, “append”]</p>
</dd>
</dl>
<p>if file_operations == dict, input should be dictionary containing key as file
operation and value as ACE to be used to verify the operation</p>
<blockquote>
<div><p>example: file_operations={“read”:’r’, “write”:w’}</p>
</div></blockquote>
<p>In case of dictionary user passed ACEs are used to verify the operations. In case
of others, default ACEs will be used for each operations</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception(Exception_Message):</dt><dd><p>in case of any failures in the test</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.NFSACLHelper.NfsAclHelper.verify_ace_folder_permissions">
<code class="sig-name descname">verify_ace_folder_permissions</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">test_directory</span></em>, <em class="sig-param"><span class="n">file_operations</span><span class="o">=</span><span class="default_value">'all'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSACLHelper.html#NfsAclHelper.verify_ace_folder_permissions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSACLHelper.NfsAclHelper.verify_ace_folder_permissions" title="Permalink to this definition">¶</a></dt>
<dd><p>verify NFS v4 ACEs for directory.</p>
<dl>
<dt>Args:</dt><dd><p>test_directory   (str)                   –  NFSv4 ACL supported mounted path</p>
<dl>
<dt>file_operations  (list or dict or str)   –</dt><dd><dl class="simple">
<dt>if file_operations == str, input should be ‘all’ | supported file operations</dt><dd><p>example: file_operations=”read”, file_operations=”write”</p>
</dd>
<dt>if file_operations == str, input should be list of supported file operations</dt><dd><p>example: file_operations=[“read”, “write”, “append”]</p>
</dd>
</dl>
<p>if file_operations == dict, input should be dictionary containing key as file
operation and value as ACE to be used to verify the operation</p>
<blockquote>
<div><p>example: file_operations={“read”:’r’, “write”:w’}</p>
</div></blockquote>
<p>In case of dictionary user passed ACEs are used to verify the operations. In case
of others, default ACEs will be used for each operations</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception(Exception_Message):</dt><dd><p>in case of any failures in the test</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-Server.NFSObjectStore.NFSObjectStoreConstants">
<span id="server-nfsobjectstore-nfsobjectstoreconstants-module"></span><h2>Server.NFSObjectStore.NFSObjectStoreConstants module<a class="headerlink" href="#module-Server.NFSObjectStore.NFSObjectStoreConstants" title="Permalink to this headline">¶</a></h2>
<p>File which will contain NFS objectstore related constants</p>
<p>Any constant values related to NFS objectstore should go in this file.</p>
</div>
<div class="section" id="module-Server.NFSObjectStore.NFSObjectStoreHelper">
<span id="server-nfsobjectstore-nfsobjectstorehelper-module"></span><h2>Server.NFSObjectStore.NFSObjectStoreHelper module<a class="headerlink" href="#module-Server.NFSObjectStore.NFSObjectStoreHelper" title="Permalink to this headline">¶</a></h2>
<p>File for performing NFS server related operations in Commcell</p>
<p>ObjectstoreClientUtils and NFSServerHelper are 2 classes defined in this file.</p>
<p>ObjectstoreClientUtils: Class for providing common functions for test clients</p>
<p>NFSServerHelper: Class for providing NFS server related operations</p>
<dl>
<dt>ObjectstoreClientUtils:</dt><dd><p>__init__()                    –  initialize instance of the ObjectstoreClientUtils class
by defining common test paths</p>
<p>obj_store_cleanup()           –  performs basic cleanup operations for NFS objectstore</p>
<p>compare_snapshot_data()       – Performs common NFS objectstore snapshot comparison for
given two paths</p>
<p>compare_snapshot()            –  Performs common NFS objectstore snapshot comparsion for
given two paths</p>
<p>delete_files_in_path()        –  delete all the files (not directories) from the given path</p>
<p>validate_root_data_access()   –  validate squashing is successful</p>
<p>create_data_before_squash()   –  create data before squashing is applied to objectstore</p>
<p>data_access_after_squash()    –  verify data created with root user can be accessed from
user in question</p>
<p>create_data_after_squash()    –  create test data as squashed user and verify that user id is
squashed as expected</p>
<p>validate_squashed_user_perm() –  Validates all types of Unix Squashing for NFS objectstore shares</p>
<p>check_objectstore_backup_job()– check for objectstore active backup Job and wait
for its completion</p>
<p>create_test_data_objecstore() – create files on given objectstore and wait for
3dfs backup job to complete</p>
</dd>
<dt>NFSServerHelper:</dt><dd><p>__init__()                    –  initialize instance of the NFSServerHelper class</p>
<p>create_nfs_objectstore()      –  creates NFS objectstore</p>
<p>list_all_nfs_objectstore()    –  list currently available NFS objectstore shares</p>
<p>show_nfs_objectstore()        –  Shows details about given NFS objectstore</p>
<p>delete_nfs_objectstore()      –  Deletes given NFS objectstore</p>
<p>update_nfs_objectstore()      –  Update details for the given NFS objectstore</p>
<p>create_objectstore_snap()     –  creates NFS objectstore snap</p>
<p>show_objectstore_snap()       –  shows currently available Snaps for the given share</p>
<p>update_objectstore_snap()     –  pdate details for the given NFS objectstore snap</p>
<p>delete_objectstore_snap()     –  Deletes given NFS objectstore snap</p>
<p>get_objectstore_subclient_id()–  gets subclient ID for given objectstore name</p>
<p>parse_3dnfs_logs()            –  parse 3dnfs logs for given pattern raised
after given time stamp</p>
</dd>
</dl>
<dl class="py class">
<dt id="Server.NFSObjectStore.NFSObjectStoreHelper.NFSServerHelper">
<em class="property">class </em><code class="sig-prename descclassname">Server.NFSObjectStore.NFSObjectStoreHelper.</code><code class="sig-name descname">NFSServerHelper</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nfs_server_hostname</span></em>, <em class="sig-param"><span class="n">commcell</span></em>, <em class="sig-param"><span class="n">commcell_user</span></em>, <em class="sig-param"><span class="n">commcell_password</span></em>, <em class="sig-param"><span class="n">storage_policy</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSObjectStoreHelper.html#NFSServerHelper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSObjectStoreHelper.NFSServerHelper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>NFS objectstore class to perform NFS server related operations</p>
<dl class="py method">
<dt id="Server.NFSObjectStore.NFSObjectStoreHelper.NFSServerHelper.create_nfs_objectstore">
<code class="sig-name descname">create_nfs_objectstore</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj_store_name</span></em>, <em class="sig-param"><span class="n">storage_policy</span></em>, <em class="sig-param"><span class="n">index_server</span></em>, <em class="sig-param"><span class="n">media_agent</span></em>, <em class="sig-param"><span class="n">allowed_nfs_clients</span><span class="o">=</span><span class="default_value">'0.0.0.0'</span></em>, <em class="sig-param"><span class="n">versions_enabled</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">squashing_type</span><span class="o">=</span><span class="default_value">'root_squash'</span></em>, <em class="sig-param"><span class="n">anon_uid</span><span class="o">=</span><span class="default_value">- 2</span></em>, <em class="sig-param"><span class="n">anon_gid</span><span class="o">=</span><span class="default_value">- 2</span></em>, <em class="sig-param"><span class="n">copy_precedence</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">acl_flag</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">min_days_retain_deleted</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">min_versions_retain</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">min_days_retain_old_versions</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">delete_if_exists</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSObjectStoreHelper.html#NFSServerHelper.create_nfs_objectstore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSObjectStoreHelper.NFSServerHelper.create_nfs_objectstore" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates NFS object store</p>
<dl>
<dt>Args:</dt><dd><p>obj_store_name       (str) – name of the objectstore to be created</p>
<p>storage_policy       (str) – storage policy name</p>
<p>index_server         (str) – Index server hostname or IP address</p>
<dl class="simple">
<dt>media_agent          (str) – hostname or IP address of MA where NFS server</dt><dd><p>is configured</p>
</dd>
<dt>allowed_nfs_clients  (str) – list of comma separated IP address/hostnames to be</dt><dd><p>allowed to access the share. default is all clients</p>
</dd>
</dl>
<p>versions_enabled     (bool)– flag to enable File versioning. default is True</p>
<p>squashing_type       (str) – squashing type. default is “root_squash”</p>
<p>anon_uid             (int) – anonymous UID to be used for squashing</p>
<p>anon_gid             (int) – anonymous GID to be used for squashing</p>
<p>copy_precedence      (int) – copy precedence. default is zero</p>
<p>acl_flag             (bool)– flag to enable ACL feature. default is False</p>
<p>min_days_retain_deleted (int)  – Minimum Days to retain Deleted Items</p>
<p>min_versions_retain  (int) –  Minimum versions to retain</p>
<p>min_days_retain_old_versions (int) – Minimum days to retain the older versions</p>
<dl class="simple">
<dt>delete_if_exists    (bool) – checks if objectstore exists and deletes it before</dt><dd><p>creation.</p>
</dd>
</dl>
</dd>
<dt>Returns :</dt><dd><p>on success, mount path of the objectstore created</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if any error occurred while creating objectstore</p>
</dd>
</dl>
</dd>
<dt>Sample cmd<span class="classifier">ConfigureObjectStore -o create -n &lt;Object Store Name&gt; -s &lt;Storage Policy&gt;</span></dt><dd><p>-i &lt;Index Server Client Name&gt; -m &lt;Media Agent Client Name&gt;
-c &lt;Allowed clients&gt; [-V Versions enabled flag] [-S Squashing Type]
[-u anonuid] [-g anongid] [-C Copy Precedence] [-A ACL enable flag &lt;1|0&gt;] [-h]</p>
</dd>
<dt>Skip enter password<span class="classifier">“-y” option is used to disable need of entering password during</span></dt><dd><p>objectstore creation</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.NFSObjectStoreHelper.NFSServerHelper.create_objectstore_snap">
<code class="sig-name descname">create_objectstore_snap</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj_store_name</span></em>, <em class="sig-param"><span class="n">timestamp</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">allowed_nfs_clients</span><span class="o">=</span><span class="default_value">'0.0.0.0'</span></em>, <em class="sig-param"><span class="n">snap_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">copy_precedence</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">ma_client</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSObjectStoreHelper.html#NFSServerHelper.create_objectstore_snap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSObjectStoreHelper.NFSServerHelper.create_objectstore_snap" title="Permalink to this definition">¶</a></dt>
<dd><p>creates snapshot for the given objectstore for given time stamp</p>
<dl>
<dt>Args:</dt><dd><p>obj_store_name      (str)  – name of the objectstore</p>
<p>timestamp           (str) – timestamp in “MM-DD-YYYY HH:MM:SS” format</p>
<dl class="simple">
<dt>allowed_nfs_clients (str) – list of comma separated client IP</dt><dd><p>addresses or hostname to get access for snap</p>
</dd>
</dl>
<p>snap_name           (str) – snap name to be used while creating</p>
<p>copy_precedence     (int) – copy precedence</p>
<p>ma_client           (str) – NFS server client name</p>
</dd>
<dt>Returns :</dt><dd><p>on success, returns the mount path of PIT view created</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if any error occurred while creating PIT view</p>
</dd>
</dl>
</dd>
<dt>Sample command :</dt><dd><p>ConfigureObjectStore -o create_snap -n &lt;Object Store Name&gt;
-T “MM-DD-YYYY HH:MM:SS” [-c Allowed clients] [-N Snap Name]
[-C Copy Precedence]  [-m MediaAgent Client Name]</p>
</dd>
<dt>Sample output:</dt><dd><p>Create Snap for Object Store [share1] succeeded
mount path = /share1-snap1
CIFS Share Name (If Enabled) = /share1-snap1</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.NFSObjectStoreHelper.NFSServerHelper.delete_nfs_objectstore">
<code class="sig-name descname">delete_nfs_objectstore</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj_store_name</span></em>, <em class="sig-param"><span class="n">delete_user</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSObjectStoreHelper.html#NFSServerHelper.delete_nfs_objectstore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSObjectStoreHelper.NFSServerHelper.delete_nfs_objectstore" title="Permalink to this definition">¶</a></dt>
<dd><p>delete the given objectstore name</p>
<dl>
<dt>Args:</dt><dd><p>obj_store_name (str)  – name of the object store</p>
<p>delete_user    (bool) – delete objectstore user</p>
</dd>
<dt>Returns :</dt><dd><p>True –&gt; in case of successful delete</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if any error occurred while deleting objectstore</p>
</dd>
</dl>
</dd>
<dt>sample command :</dt><dd><p>ConfigureObjectStore -o delete -n &lt;Object Store Name&gt; [-U]</p>
</dd>
<dt>sample output:</dt><dd><p>Object Store [share1] deleted successfully</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.NFSObjectStoreHelper.NFSServerHelper.delete_objectstore_snap">
<code class="sig-name descname">delete_objectstore_snap</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj_store_name</span></em>, <em class="sig-param"><span class="n">mount_path</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">delete_all_snaps</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSObjectStoreHelper.html#NFSServerHelper.delete_objectstore_snap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSObjectStoreHelper.NFSServerHelper.delete_objectstore_snap" title="Permalink to this definition">¶</a></dt>
<dd><p>delete the given objectstore snap
Args:</p>
<blockquote>
<div><p>obj_store_name  (str) – name of the object store</p>
<p>mount_path      (str) – mount path of PIT view</p>
<p>delete_all_snaps(bool)– delete all snaps for given objectstore</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>On Success, deletes appropriate PIT views for the given objectstore</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if any error occurred while deleting PIT view</p>
</dd>
</dl>
</dd>
<dt>sample command :</dt><dd><p>ConfigureObjectStore -o delete_snap -n &lt;Object Store Name&gt; [ -A <a href="#id1"><span class="problematic" id="id2">|</span></a>-p Mount Path ]</p>
</dd>
<dt>sample output:</dt><dd><p>Object Store Snap deleted successfully</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.NFSObjectStoreHelper.NFSServerHelper.get_objectstore_subclient_id">
<code class="sig-name descname">get_objectstore_subclient_id</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj_store_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSObjectStoreHelper.html#NFSServerHelper.get_objectstore_subclient_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSObjectStoreHelper.NFSServerHelper.get_objectstore_subclient_id" title="Permalink to this definition">¶</a></dt>
<dd><p>gets subclient ID for given objectstore name
Args:</p>
<blockquote>
<div><p>obj_store_name (str)  – name of objectstore</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>subclient ID of objectstore</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if any error occurs in getting subclient ID</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.NFSObjectStoreHelper.NFSServerHelper.list_all_nfs_objectstore">
<code class="sig-name descname">list_all_nfs_objectstore</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSObjectStoreHelper.html#NFSServerHelper.list_all_nfs_objectstore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSObjectStoreHelper.NFSServerHelper.list_all_nfs_objectstore" title="Permalink to this definition">¶</a></dt>
<dd><p>List all available objectsotre names</p>
<p>Args: None</p>
<dl class="simple">
<dt>Returns :</dt><dd><p>list of available objectstore names. In case of no objectstore returns
empty list</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if any error occurred while listing objectstore</p>
</dd>
</dl>
</dd>
<dt>Sample command :</dt><dd><p>ConfigureObjectStore  -o list</p>
</dd>
<dt>Sample Output:</dt><dd><p>List of Object Store
Object Store Name             Client Name             NFS Server
1)    iozone_user             iozone_user             centostemp
2)    FS_oper                 FS_oper                 centostemp</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.NFSObjectStoreHelper.NFSServerHelper.parse_3dnfs_logs">
<code class="sig-name descname">parse_3dnfs_logs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">match_pattern</span></em>, <em class="sig-param"><span class="n">time_stamp</span></em>, <em class="sig-param"><span class="n">max_attempt</span><span class="o">=</span><span class="default_value">5</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSObjectStoreHelper.html#NFSServerHelper.parse_3dnfs_logs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSObjectStoreHelper.NFSServerHelper.parse_3dnfs_logs" title="Permalink to this definition">¶</a></dt>
<dd><p>parse 3dnfs logs for given pattern raised after given
time stamp
Args:</p>
<blockquote>
<div><p>match_pattern (str)  – grep match pattern</p>
<p>time_stamp   (datetime)  – timestamp used to match the expected
string in logs. Expected pattern: mm/yy HH:MM:SS</p>
<p>max_attempt  (int)  – maximum attempts used to match string
in logs</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>True – if pattern match later to given time stamp
False – if pattern is not matched later to given time stamp</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>None</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.NFSObjectStoreHelper.NFSServerHelper.show_nfs_objectstore">
<code class="sig-name descname">show_nfs_objectstore</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj_store_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSObjectStoreHelper.html#NFSServerHelper.show_nfs_objectstore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSObjectStoreHelper.NFSServerHelper.show_nfs_objectstore" title="Permalink to this definition">¶</a></dt>
<dd><p>shows properties set for the given objectstore name</p>
<dl class="simple">
<dt>Args:</dt><dd><p>obj_store_name (str) – name of the object store</p>
</dd>
<dt>Returns :</dt><dd><p>dictionary containing properties set for the given Object Store</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if any error occurred while getting objectstore details</p>
</dd>
</dl>
</dd>
<dt>Sample command :</dt><dd><p>ConfigureObjectStore -o show -n &lt;Object Store Name&gt;</p>
</dd>
<dt>Sample output :</dt><dd><p>ConfigureObjectStore -o show -n sample_NFS_share
ObjectStore Server                      :       centostemp
Index Server                            :       Index_server
Allowed clients                         :       172.16.197.116
Access Permission                       :       RW
Versions Enabled                        :       YES
Copy Precedence                         :       0
ACL     Enabled                         :       NO
Squash Type                             :       ROOT_SQUASH
Anonymous UID                           :       -2
Anonymous GID                           :       -2
Share path to mount                     :       172.16.197.116:/sample_NFS_share</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.NFSObjectStoreHelper.NFSServerHelper.show_objectstore_snap">
<code class="sig-name descname">show_objectstore_snap</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj_store_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSObjectStoreHelper.html#NFSServerHelper.show_objectstore_snap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSObjectStoreHelper.NFSServerHelper.show_objectstore_snap" title="Permalink to this definition">¶</a></dt>
<dd><p>shows properties of all PIT views for the given objectstore</p>
<dl>
<dt>Args:</dt><dd><p>obj_store_name        (str)  – name of the objectstore</p>
</dd>
<dt>Returns:</dt><dd><p>On Success, properties of all PIT views for the given objectstore</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if any error occurred while creating PIT view</p>
</dd>
</dl>
</dd>
<dt>sample command:</dt><dd><p>ConfigureObjectStore -o show_snap -n &lt;Object Store Name&gt; [-h]</p>
</dd>
<dt>sample output:</dt><dd><p>Object Store            :       share1
Snap Time               :       06-18-2018 15:10:15
Mount Path              :       /share1-snap1
NFS Clients             :       0.0.0.0
Snap Name               :       snap1
CopyPrecedence          :       0
ObjectStore Server      :       NFSserver</p>
<p>Object Store            :       share1
Snap Time               :       06-18-2018 15:10:17
Mount Path              :       /share1-snap2
NFS Clients             :       172.16.197.116,172.16.197.117
Snap Name               :       snap2
CopyPrecedence          :       0
ObjectStore Server      :       NFSserver</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.NFSObjectStoreHelper.NFSServerHelper.update_job_idle_timeout">
<code class="sig-name descname">update_job_idle_timeout</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">60</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSObjectStoreHelper.html#NFSServerHelper.update_job_idle_timeout"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSObjectStoreHelper.NFSServerHelper.update_job_idle_timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>set 3dfs backup Job idle timeout
Args:</p>
<blockquote>
<div><p>timeout (int)  – 3dfs backup idle time out</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if any error occurs in update</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.NFSObjectStoreHelper.NFSServerHelper.update_nfs_objectstore">
<code class="sig-name descname">update_nfs_objectstore</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj_store_name</span></em>, <em class="sig-param"><span class="n">allowed_nfs_clients</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">access</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">version_enabled</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">squash_type</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">anon_uid</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">anon_gid</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">copy_precedence</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">acl_flag</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSObjectStoreHelper.html#NFSServerHelper.update_nfs_objectstore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSObjectStoreHelper.NFSServerHelper.update_nfs_objectstore" title="Permalink to this definition">¶</a></dt>
<dd><p>update the property for the given objectstore name</p>
<p>Args:
allowed_nfs_clients  (str) – semicolon separated list of IP address/hostnames to be</p>
<blockquote>
<div><p>allowed to access the share.</p>
</div></blockquote>
<p>versions_enabled     (bool)– flag to enable File versioning. (True/False)</p>
<p>squashing_type       (str) – squashing type.</p>
<p>anon_uid             (int) – anonymous UID to be used for squashing</p>
<p>anon_gid             (int) – anonymous GID to be used for squashing</p>
<p>copy_precedence      (int) – copy precedence.</p>
<p>acl_flag             (bool)– flag to enable ACL feature. (True/False)</p>
<dl class="simple">
<dt>Returns :</dt><dd><p>None –&gt; in case of successful update</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if any error occurred while updating objectstore</p>
</dd>
</dl>
</dd>
<dt>sample command :</dt><dd><p>ConfigureObjectStore -o update -n &lt;Object Store Name&gt; [-c Allowed clients]
[-a Access Permission (RW/RO)] [-V Versions enabled flag] [-S Squashing Type]
[-u anonuid] [-g anongid] [-C Copy Precedence] [-A ACL enable flag &lt;1|0&gt;] [-h]</p>
</dd>
</dl>
<p>Sample cmd Output:
Update succeeded for Object Store  [Object Store Name]</p>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.NFSObjectStoreHelper.NFSServerHelper.update_objectstore_snap">
<code class="sig-name descname">update_objectstore_snap</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj_store_name</span></em>, <em class="sig-param"><span class="n">mount_path</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">allowed_clients</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">copy_precedence</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ma_client</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">access_permission</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSObjectStoreHelper.html#NFSServerHelper.update_objectstore_snap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSObjectStoreHelper.NFSServerHelper.update_objectstore_snap" title="Permalink to this definition">¶</a></dt>
<dd><p>update the properties for the given objectstore snap name</p>
<dl>
<dt>Args:</dt><dd><p>obj_store_name      (str) – name of the objectstore</p>
<p>mount_path          (str) – PIT view mount path</p>
<dl class="simple">
<dt>allowed_clients     (str) – list of comma separated client IP</dt><dd><p>addresses or hostname to get access for snap</p>
</dd>
</dl>
<p>copy_precedence     (int) – copy precedence</p>
<p>ma_client           (str) – NFS server client name</p>
<p>access_permission   (str) – Read-Only or Read-Write mode</p>
</dd>
<dt>Returns:</dt><dd><p>On Success, updates properties for given PIT view</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if any error occurred while updating PIT view</p>
</dd>
</dl>
</dd>
<dt>sample command:</dt><dd><p>ConfigureObjectStore -o update_snap -n &lt;Object Store Name&gt; -p &lt;Mount Path&gt;
&lt; -c Allowed Clients | -C Copy Precedence | -m MediaAgent Client Name &gt;</p>
</dd>
<dt>sample output:</dt><dd><p>Snap [/share1-snap1] updated successfully</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="Server.NFSObjectStore.NFSObjectStoreHelper.ObjectstoreClientUtils">
<em class="property">class </em><code class="sig-prename descclassname">Server.NFSObjectStore.NFSObjectStoreHelper.</code><code class="sig-name descname">ObjectstoreClientUtils</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">client_name</span></em>, <em class="sig-param"><span class="n">username</span></em>, <em class="sig-param"><span class="n">password</span></em>, <em class="sig-param"><span class="n">test_id</span></em>, <em class="sig-param"><span class="n">commcell</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSObjectStoreHelper.html#ObjectstoreClientUtils"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSObjectStoreHelper.ObjectstoreClientUtils" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>NFS objectstore utils class to perform common operations for test clients</p>
<dl class="py method">
<dt id="Server.NFSObjectStore.NFSObjectStoreHelper.ObjectstoreClientUtils.check_objectstore_backup_job">
<code class="sig-name descname">check_objectstore_backup_job</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">objectstore_client_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSObjectStoreHelper.html#ObjectstoreClientUtils.check_objectstore_backup_job"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSObjectStoreHelper.ObjectstoreClientUtils.check_objectstore_backup_job" title="Permalink to this definition">¶</a></dt>
<dd><p>check for objectstore active backup Job and wait for its completion
Args:</p>
<blockquote>
<div><p>objectstore_client_name (str)  – name of objectstore</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if backup job doesn’t complete successfully</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.NFSObjectStoreHelper.ObjectstoreClientUtils.compare_snapshot">
<code class="sig-name descname">compare_snapshot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path1</span></em>, <em class="sig-param"><span class="n">path2</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSObjectStoreHelper.html#ObjectstoreClientUtils.compare_snapshot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSObjectStoreHelper.ObjectstoreClientUtils.compare_snapshot" title="Permalink to this definition">¶</a></dt>
<dd><p>gets the snapshots of given directories and performs common NFS objectstore snapshot
comparison for given two paths</p>
<blockquote>
<div><dl>
<dt>Args:</dt><dd><p>path1 (string)    –  first path of the folder to compare the data</p>
<p>path2 (string)    –  second path of the folder to compare the data</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if any error occurs in the cleanup operations</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.NFSObjectStoreHelper.ObjectstoreClientUtils.compare_snapshot_data">
<code class="sig-name descname">compare_snapshot_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path1</span></em>, <em class="sig-param"><span class="n">path2</span></em>, <em class="sig-param"><span class="n">snap1</span></em>, <em class="sig-param"><span class="n">snap2</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSObjectStoreHelper.html#ObjectstoreClientUtils.compare_snapshot_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSObjectStoreHelper.ObjectstoreClientUtils.compare_snapshot_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs common NFS objectstore snapshot comparison for given two paths</p>
<dl>
<dt>Args:</dt><dd><p>path1 (string)    –  first path of the folder to compare the data</p>
<p>path2 (string)    –  second path of the folder to compare the data</p>
<p>snap1 (list)      – list containing details of path1. output of get_snapshot()</p>
<p>snap2 (list)      – list containing details of path2. output of get_snapshot()</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if any error occurs in the cleanup operations</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.NFSObjectStoreHelper.ObjectstoreClientUtils.create_data_after_squash">
<code class="sig-name descname">create_data_after_squash</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nfs_serv_obj</span></em>, <em class="sig-param"><span class="n">squash_type</span></em>, <em class="sig-param"><span class="n">share_path</span></em>, <em class="sig-param"><span class="n">user_machine_obj</span></em>, <em class="sig-param"><span class="n">username</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSObjectStoreHelper.html#ObjectstoreClientUtils.create_data_after_squash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSObjectStoreHelper.ObjectstoreClientUtils.create_data_after_squash" title="Permalink to this definition">¶</a></dt>
<dd><p>create test data as squashed user and verify that user id is squashed as expected</p>
<dl>
<dt>Args:</dt><dd><p>nfs_serv_obj (obj)    –  Instance of NFSServerHelper class</p>
<p>squash_type (string)    –  Unix Squash type</p>
<p>share_path (string)   –  objectstore share path to be used in mount command</p>
<p>user_machine_obj (obj) – machine object of user to be tested for squash</p>
<p>username         (str) – user name of the squsahed user (i.e. user_machine_obj)</p>
</dd>
<dt>Returns:</dt><dd><p>True - if all test cases passed
False - if any test case failed</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.NFSObjectStoreHelper.ObjectstoreClientUtils.create_data_before_squash">
<code class="sig-name descname">create_data_before_squash</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nfs_serv_obj</span></em>, <em class="sig-param"><span class="n">share_path</span></em>, <em class="sig-param"><span class="n">squash_type</span></em>, <em class="sig-param"><span class="n">username</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSObjectStoreHelper.html#ObjectstoreClientUtils.create_data_before_squash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSObjectStoreHelper.ObjectstoreClientUtils.create_data_before_squash" title="Permalink to this definition">¶</a></dt>
<dd><p>create data before squashing is applied to objectstore</p>
<dl>
<dt>Args:</dt><dd><p>nfs_serv_obj (obj)    –  Instance of NFSServerHelper class</p>
<p>share_path (string)   –  objectstore share path to be used in mount command</p>
<p>squash_type (string)  – squash type in test</p>
<p>username    (string)  – user name in test</p>
</dd>
<dt>Returns:</dt><dd><p>list [file path, directory path] created with root user</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.NFSObjectStoreHelper.ObjectstoreClientUtils.create_test_data_objecstore">
<code class="sig-name descname">create_test_data_objecstore</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">num_of_files_create</span></em>, <em class="sig-param"><span class="n">machine_obj</span></em>, <em class="sig-param"><span class="n">test_path</span></em>, <em class="sig-param"><span class="n">objectstore_client_name</span></em>, <em class="sig-param"><span class="n">file_size</span><span class="o">=</span><span class="default_value">1073741824</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSObjectStoreHelper.html#ObjectstoreClientUtils.create_test_data_objecstore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSObjectStoreHelper.ObjectstoreClientUtils.create_test_data_objecstore" title="Permalink to this definition">¶</a></dt>
<dd><p>create files on given objectstore and wait for 3dfs backup job to complete
Args:</p>
<blockquote>
<div><p>num_of_files_create (int)  – number of files to create</p>
<dl class="simple">
<dt>machine_obj (obj)    –  machine object of client where objectstore</dt><dd><p>is mounted</p>
</dd>
<dt>test_path   (str)    –  test path where files need to be created</dt><dd><p>(also where objectstore is mounted)</p>
</dd>
</dl>
<p>objectstore_client_name (str) – name of objectstore client</p>
<p>file_size  (int)     –  file size to be created</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if any error occurs in creating file</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.NFSObjectStoreHelper.ObjectstoreClientUtils.data_access_after_squash">
<code class="sig-name descname">data_access_after_squash</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nfs_serv_obj</span></em>, <em class="sig-param"><span class="n">squash_type</span></em>, <em class="sig-param"><span class="n">share_path</span></em>, <em class="sig-param"><span class="n">file_path</span></em>, <em class="sig-param"><span class="n">dir_path</span></em>, <em class="sig-param"><span class="n">user_machine_obj</span></em>, <em class="sig-param"><span class="n">username</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSObjectStoreHelper.html#ObjectstoreClientUtils.data_access_after_squash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSObjectStoreHelper.ObjectstoreClientUtils.data_access_after_squash" title="Permalink to this definition">¶</a></dt>
<dd><p>verify data created with root user can be accessed from user in question</p>
<dl>
<dt>Args:</dt><dd><p>nfs_serv_obj (obj)    –  Instance of NFSServerHelper class</p>
<p>squash_type (string)    –  Unix Squash type</p>
<p>share_path (string)   –  objectstore share path to be used in mount command</p>
<p>file_path  (string)   –  file path to be modified from given user</p>
<p>dir_path   (string)   – directory path in which file will be created with given user</p>
<p>user_machine_obj (obj) – machine object of user to be tested for squash</p>
<p>username   (string)   – username of the user to be tested for squash (i.e. user_machine_obj)</p>
</dd>
<dt>Returns:</dt><dd><p>True - if all test cases passed
False - if any test case failed</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.NFSObjectStoreHelper.ObjectstoreClientUtils.delete_files_in_path">
<code class="sig-name descname">delete_files_in_path</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dir_path</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSObjectStoreHelper.html#ObjectstoreClientUtils.delete_files_in_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSObjectStoreHelper.ObjectstoreClientUtils.delete_files_in_path" title="Permalink to this definition">¶</a></dt>
<dd><p>delete all the files (not directories) from the given path</p>
<dl class="simple">
<dt>Args:</dt><dd><p>dir_path (string)    –  path of the directory to delete the files</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if any error occurs in the cleanup operations</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.NFSObjectStoreHelper.ObjectstoreClientUtils.obj_store_cleanup">
<code class="sig-name descname">obj_store_cleanup</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mounted_paths</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">force_cleanup</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSObjectStoreHelper.html#ObjectstoreClientUtils.obj_store_cleanup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSObjectStoreHelper.ObjectstoreClientUtils.obj_store_cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs common NFS objectstore cleanup operations such has unmount local mount
paths and delete objectstore created in test</p>
<blockquote>
<div><dl>
<dt>Args:</dt><dd><p>mounted_paths (list)    – list of local mount directories to unmount</p>
<p>force_cleanup (bool)    –  forces unmount of stale file handles</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if any error occurs in the cleanup operations</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.NFSObjectStoreHelper.ObjectstoreClientUtils.validate_root_data_access">
<code class="sig-name descname">validate_root_data_access</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">squash_type</span></em>, <em class="sig-param"><span class="n">exception</span></em>, <em class="sig-param"><span class="n">username</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSObjectStoreHelper.html#ObjectstoreClientUtils.validate_root_data_access"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSObjectStoreHelper.ObjectstoreClientUtils.validate_root_data_access" title="Permalink to this definition">¶</a></dt>
<dd><p>validate squashing is successful</p>
<dl>
<dt>Args:</dt><dd><p>squash_type (string)    –  Unix Squash type</p>
<p>exception   (bool)      –  received exception with squashed user file operation</p>
<p>username (str)          –  username of the user attempting to access data</p>
</dd>
<dt>Returns:</dt><dd><p>Boolean (True - if test cases passed, False - if test case failed)</p>
</dd>
<dt>Raises:</dt><dd><p>True  - if test case is passed
False - if test case is failed</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.NFSObjectStoreHelper.ObjectstoreClientUtils.validate_squashed_user_perm">
<code class="sig-name descname">validate_squashed_user_perm</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nfs_serv_obj</span></em>, <em class="sig-param"><span class="n">squash_type</span></em>, <em class="sig-param"><span class="n">squash_username</span></em>, <em class="sig-param"><span class="n">squash_user_password</span></em>, <em class="sig-param"><span class="n">share_path</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/NFSObjectStoreHelper.html#ObjectstoreClientUtils.validate_squashed_user_perm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.NFSObjectStoreHelper.ObjectstoreClientUtils.validate_squashed_user_perm" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates all types of Unix Squashing for NFS objectstore shares</p>
<dl>
<dt>Args:</dt><dd><p>nfs_serv_obj (obj)    –  Instance of NFSServerHelper class</p>
<dl class="simple">
<dt>squash_type (string)    –  Unix Squash type.</dt><dd><p>expected values: [“ROOT_SQUASH”, “ALL_SQUASH”, “NO_ROOT_SQUASH”]</p>
</dd>
</dl>
<p>squash_username (string)   –  user name to be used for validation</p>
<p>squash_user_password (obj) – password for the above squash user</p>
<p>share_path         (str) – NFS objectstore share path which will be used in mounting the share</p>
</dd>
<dt>Returns:</dt><dd><p>False - if all test cases passed
True  - if any test case failed</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if any error occurs in the validation</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-Server.NFSObjectStore.nfs_data_aging_helper">
<span id="server-nfsobjectstore-nfs-data-aging-helper-module"></span><h2>Server.NFSObjectStore.nfs_data_aging_helper module<a class="headerlink" href="#module-Server.NFSObjectStore.nfs_data_aging_helper" title="Permalink to this headline">¶</a></h2>
<p>File for performing NFS server related operations in Commcell</p>
<p>NfsDataAgingHelper is the only class defined in this.</p>
<p>NfsDataAgingHelper: Provides methods which are relevant to NFS data aging tests</p>
<dl>
<dt>NfsDataAgingHelper:</dt><dd><p>__init__()                       –  initialize instance of the
NfsDataAgingHelper class</p>
<p>create_synthetic_full_schedule() – create synthetic full job for given client to
run immediately</p>
<p>run_synthetic_full()             – create synthetic full job for given client
to run immediately and wait for job to complete</p>
<p>create_files_wait_for_job_complete() – create files on given objectstore and wait
for 3dfs backup job to complete</p>
<p>delete_files_in_objectstore()    – deletes half of the files from the given
list randomly</p>
<p>add_consider_retention_days_as_mins() – Adds consider retention days reg
key on index server</p>
<p>remove_consider_retention_days_as_mins() – removes consider retention days
reg key on index server</p>
<p>update_archfile_space_reclamation() – updates commserve db to delete
pruned afiles immediately</p>
<p>validate_afiles_cleared()       – validates afiles are cleared after data aging</p>
<p>validate_nfs_pruner_thread()    – validates NFS pruner thread runs and update
index for delted items</p>
</dd>
</dl>
<dl class="py class">
<dt id="Server.NFSObjectStore.nfs_data_aging_helper.NfsDataAgingHelper">
<em class="property">class </em><code class="sig-prename descclassname">Server.NFSObjectStore.nfs_data_aging_helper.</code><code class="sig-name descname">NfsDataAgingHelper</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">commcell</span></em>, <em class="sig-param"><span class="n">index_server_client_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_data_aging_helper.html#NfsDataAgingHelper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_data_aging_helper.NfsDataAgingHelper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Base class to execute NFS data aging related operations</p>
<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_data_aging_helper.NfsDataAgingHelper.add_consider_retention_days_as_mins">
<code class="sig-name descname">add_consider_retention_days_as_mins</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_data_aging_helper.html#NfsDataAgingHelper.add_consider_retention_days_as_mins"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_data_aging_helper.NfsDataAgingHelper.add_consider_retention_days_as_mins" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds consider retention days reg key on index server
Args:</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if any error occurs in adding reg key</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_data_aging_helper.NfsDataAgingHelper.compare_checksum">
<code class="sig-name descname">compare_checksum</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">checksum_before_delete</span></em>, <em class="sig-param"><span class="n">checksum_after_delete</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_data_aging_helper.html#NfsDataAgingHelper.compare_checksum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_data_aging_helper.NfsDataAgingHelper.compare_checksum" title="Permalink to this definition">¶</a></dt>
<dd><p>compares checksum for given files before and after delete
Args:</p>
<blockquote>
<div><p>checksum_before_delete (dict)    –  dict with filename and checksum</p>
<p>checksum_after_delete (dict)    –  dict with filename and checksum</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>dictionary with filename as key and value as md5sum checksum of the file</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>when checksum of files doesn’t match</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_data_aging_helper.NfsDataAgingHelper.create_files_wait_for_job_complete">
<code class="sig-name descname">create_files_wait_for_job_complete</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">files_create</span></em>, <em class="sig-param"><span class="n">machine_obj</span></em>, <em class="sig-param"><span class="n">test_path</span></em>, <em class="sig-param"><span class="n">objectstore_client_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_data_aging_helper.html#NfsDataAgingHelper.create_files_wait_for_job_complete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_data_aging_helper.NfsDataAgingHelper.create_files_wait_for_job_complete" title="Permalink to this definition">¶</a></dt>
<dd><p>create files on given objectstore and wait for 3dfs backup job to complete
Args:</p>
<blockquote>
<div><p>files_create (list)  – List of file names to create files</p>
<dl class="simple">
<dt>machine_obj (obj)    –  machine object of client where objectstore</dt><dd><p>is mounted</p>
</dd>
<dt>test_path   (str)    –  test path where files need to be created</dt><dd><p>(also where objectstore is mounted)</p>
</dd>
</dl>
<p>objectstore_client_name (str) – name of objectstore client</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if any error occurs in creating file</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_data_aging_helper.NfsDataAgingHelper.create_synthetic_full_schedule">
<code class="sig-name descname">create_synthetic_full_schedule</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">client_name</span></em>, <em class="sig-param"><span class="n">policy_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_data_aging_helper.html#NfsDataAgingHelper.create_synthetic_full_schedule"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_data_aging_helper.NfsDataAgingHelper.create_synthetic_full_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>create synthetic full job for given client to run immediately
Args:</p>
<blockquote>
<div><p>client_name (str)    – client name to be associated with schedule</p>
<p>policy_name (str)    –  policy name to be used for schedule</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>Instance of Schedule_Policy</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if any error occurs in creating schedule policy</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_data_aging_helper.NfsDataAgingHelper.delete_files_in_objectstore">
<code class="sig-name descname">delete_files_in_objectstore</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">machine_obj</span></em>, <em class="sig-param"><span class="n">test_path</span></em>, <em class="sig-param"><span class="n">files_list</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_data_aging_helper.html#NfsDataAgingHelper.delete_files_in_objectstore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_data_aging_helper.NfsDataAgingHelper.delete_files_in_objectstore" title="Permalink to this definition">¶</a></dt>
<dd><p>deletes half of the files from the given list randomly
Args:</p>
<blockquote>
<div><dl class="simple">
<dt>machine_obj (obj)    –  machine object of client where objectstore</dt><dd><p>is mounted</p>
</dd>
<dt>test_path   (str)    –  test path where files need to be created</dt><dd><p>(also where objectstore is mounted)</p>
</dd>
</dl>
<p>files_list (list)    –    List of file names to present in test path</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if any error occurs in deleting files</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_data_aging_helper.NfsDataAgingHelper.get_files_checksum">
<code class="sig-name descname">get_files_checksum</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">machine_obj</span></em>, <em class="sig-param"><span class="n">test_path</span></em>, <em class="sig-param"><span class="n">file_names</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_data_aging_helper.html#NfsDataAgingHelper.get_files_checksum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_data_aging_helper.NfsDataAgingHelper.get_files_checksum" title="Permalink to this definition">¶</a></dt>
<dd><p>gets md5sum for the given list of files
Args:</p>
<blockquote>
<div><p>machine_obj (obj)    –  machine object for given test files</p>
<p>test_path (list)     –  directory where test files are present</p>
<p>file_names (int)    –  list of files in the directory to get the md5sum</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>dictionary with filename as key and value as md5sum checksum of the file</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if any error occurs in getting md5sum checksum</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_data_aging_helper.NfsDataAgingHelper.remove_consider_retention_days_as_mins">
<code class="sig-name descname">remove_consider_retention_days_as_mins</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_data_aging_helper.html#NfsDataAgingHelper.remove_consider_retention_days_as_mins"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_data_aging_helper.NfsDataAgingHelper.remove_consider_retention_days_as_mins" title="Permalink to this definition">¶</a></dt>
<dd><p>removes consider retention days reg key on index server
Args:</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if any error occurs in deleting reg key</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_data_aging_helper.NfsDataAgingHelper.run_synthetic_full">
<code class="sig-name descname">run_synthetic_full</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">client_name</span></em>, <em class="sig-param"><span class="n">policy_name</span><span class="o">=</span><span class="default_value">'synth_full_objectstore'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_data_aging_helper.html#NfsDataAgingHelper.run_synthetic_full"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_data_aging_helper.NfsDataAgingHelper.run_synthetic_full" title="Permalink to this definition">¶</a></dt>
<dd><p>create synthetic full job for given client to run immediately and wait for
job to complete</p>
<blockquote>
<div><dl>
<dt>Args:</dt><dd><p>client_name (str)    – client name to be associated with schedule</p>
<p>policy_name (str)    –  policy name to be used for schedule</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if any error occurs in running synthfull job</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_data_aging_helper.NfsDataAgingHelper.update_archfile_space_reclamation">
<code class="sig-name descname">update_archfile_space_reclamation</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_data_aging_helper.html#NfsDataAgingHelper.update_archfile_space_reclamation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_data_aging_helper.NfsDataAgingHelper.update_archfile_space_reclamation" title="Permalink to this definition">¶</a></dt>
<dd><p>updates commserve db to delete pruned afiles immediately
Args:</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if any error occurs in updating CS DB</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_data_aging_helper.NfsDataAgingHelper.validate_afiles_cleared">
<code class="sig-name descname">validate_afiles_cleared</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tc_obj</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_data_aging_helper.html#NfsDataAgingHelper.validate_afiles_cleared"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_data_aging_helper.NfsDataAgingHelper.validate_afiles_cleared" title="Permalink to this definition">¶</a></dt>
<dd><p>validates afiles are cleared after data aging
Args:</p>
<blockquote>
<div><p>tc_obj (obj)    –  testcase object which contain csdb instance</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if any error occurs in deleting files</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_data_aging_helper.NfsDataAgingHelper.validate_nfs_pruner_thread">
<code class="sig-name descname">validate_nfs_pruner_thread</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tc_obj</span></em>, <em class="sig-param"><span class="n">deleted_files</span></em>, <em class="sig-param"><span class="n">app_id</span></em>, <em class="sig-param"><span class="n">max_try</span><span class="o">=</span><span class="default_value">5</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_data_aging_helper.html#NfsDataAgingHelper.validate_nfs_pruner_thread"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_data_aging_helper.NfsDataAgingHelper.validate_nfs_pruner_thread" title="Permalink to this definition">¶</a></dt>
<dd><p>validates NFS pruner thread runs and update index for delted items
Args:</p>
<blockquote>
<div><p>tc_obj (obj)    –  testcase object which contain csdb instance</p>
<p>deleted_files (list) – list of filenames deleted</p>
<p>app_id (int)    – application id of test objectstore</p>
<p>max_try (int)   – max attempt to check for is_visible is set to false</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if any error occurs in validation</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-Server.NFSObjectStore.nfs_pruning_helper">
<span id="server-nfsobjectstore-nfs-pruning-helper-module"></span><h2>Server.NFSObjectStore.nfs_pruning_helper module<a class="headerlink" href="#module-Server.NFSObjectStore.nfs_pruning_helper" title="Permalink to this headline">¶</a></h2>
<p>File for performing NFS objectstore pruning related operations</p>
<p>NFSPrunerHelper is the class defined in this file.</p>
<p>NFSPrunerHelper: Class for providing common functions for pruning tests</p>
<dl>
<dt>NFSPrunerHelper:</dt><dd><p>__init__()                –  initialize instance of the NFSPrunerHelper</p>
<p>update_pruner_timeout()   – Update disk cache pruner timeout for
3dfns objectstore</p>
<p>remove_pruner_timeout_reg() – remove disk cache pruner timeout
for 3dfns objectstore</p>
<p>verify_pruner_completed()  –  verify disk cache pruner finished processing</p>
<p>get_high_watermark()    – get currently configured high level
watermark for NFS objectstore</p>
<p>update_high_watermark() – update high level watermark for NFS objectstore</p>
<p>calculate_test_data_size() – calculate the data to be written by
optimizing the high water mark</p>
<p>write_data_dev_zero() – write data using zero device to disk</p>
<p>verify_watermark_restored() – verify watermark is restored for nfs disk cache</p>
</dd>
</dl>
<dl class="py class">
<dt id="Server.NFSObjectStore.nfs_pruning_helper.NFSPrunerHelper">
<em class="property">class </em><code class="sig-prename descclassname">Server.NFSObjectStore.nfs_pruning_helper.</code><code class="sig-name descname">NFSPrunerHelper</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tc_obj</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_pruning_helper.html#NFSPrunerHelper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_pruning_helper.NFSPrunerHelper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>NFS objectstore pruner class to perform common operations for pruning testss</p>
<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_pruning_helper.NFSPrunerHelper.calculate_test_data_size">
<code class="sig-name descname">calculate_test_data_size</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">nfs_cache_disk_path</span></em>, <em class="sig-param"><span class="n">tc_obj</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_pruning_helper.html#NFSPrunerHelper.calculate_test_data_size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_pruning_helper.NFSPrunerHelper.calculate_test_data_size" title="Permalink to this definition">¶</a></dt>
<dd><p>calculate the data to be written with optimizing the high water mark</p>
<dl>
<dt>Args:</dt><dd><p>nfs_cache_disk_path   (str)  – NFS cache disk partition name</p>
<p>tc_obj                (obj)  – test case instances</p>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt>tuple - (data to be written to hit high watermark,</dt><dd><p>new optimized high watermark)</p>
</dd>
</dl>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if it is unable calculate the data to be written</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_pruning_helper.NFSPrunerHelper.get_high_watermark">
<code class="sig-name descname">get_high_watermark</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tc_obj</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_pruning_helper.html#NFSPrunerHelper.get_high_watermark"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_pruning_helper.NFSPrunerHelper.get_high_watermark" title="Permalink to this definition">¶</a></dt>
<dd><p>get currently configured high level watermark for NFS objectstore..</p>
<dl class="simple">
<dt>Args:</dt><dd><p>tc_obj   (instance)     – test case instance which should have
csdb initialized</p>
</dd>
<dt>Returns:</dt><dd><p>str - currently configured high level watermark</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if it is unable to find watermark</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_pruning_helper.NFSPrunerHelper.remove_pruner_timeout_reg">
<code class="sig-name descname">remove_pruner_timeout_reg</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">restart_services</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_pruning_helper.html#NFSPrunerHelper.remove_pruner_timeout_reg"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_pruning_helper.NFSPrunerHelper.remove_pruner_timeout_reg" title="Permalink to this definition">¶</a></dt>
<dd><p>remove disk cache pruner timeout for 3dfns objectstore..</p>
<dl class="simple">
<dt>Args:</dt><dd><p>restart_services (str) – restart CV services on NFS server</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_pruning_helper.NFSPrunerHelper.update_high_watermark">
<code class="sig-name descname">update_high_watermark</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">new_watermark</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_pruning_helper.html#NFSPrunerHelper.update_high_watermark"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_pruning_helper.NFSPrunerHelper.update_high_watermark" title="Permalink to this definition">¶</a></dt>
<dd><p>update high level watermark for NFS objectstore..</p>
<dl class="simple">
<dt>Args:</dt><dd><p>new_watermark   (int)     – new watermark to set in CSDB</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if it is unable set in CSDB</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_pruning_helper.NFSPrunerHelper.update_pruner_timeout">
<code class="sig-name descname">update_pruner_timeout</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">'2'</span></em>, <em class="sig-param"><span class="n">restart_services</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_pruning_helper.html#NFSPrunerHelper.update_pruner_timeout"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_pruning_helper.NFSPrunerHelper.update_pruner_timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Update disk cache pruner timeout for 3dfns objectstore..
Args:</p>
<blockquote>
<div><p>timeout   (str)     – value for disk cache pruner time out</p>
<p>restart_services (str) – restart CV services on NFS server</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_pruning_helper.NFSPrunerHelper.verify_pruner_completed">
<code class="sig-name descname">verify_pruner_completed</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">time_stamp</span></em>, <em class="sig-param"><span class="n">max_attempt</span><span class="o">=</span><span class="default_value">5</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_pruning_helper.html#NFSPrunerHelper.verify_pruner_completed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_pruning_helper.NFSPrunerHelper.verify_pruner_completed" title="Permalink to this definition">¶</a></dt>
<dd><p>verify disk cache pruner finished processing..</p>
<dl>
<dt>Args:</dt><dd><p>time_stamp   (datetime)  – timestamp used to match the expected
string in logs. Expected pattern: mm/yy HH:MM:SS</p>
<p>max_attempt  (int)  – maximum attempts used to match string
in logs</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_pruning_helper.NFSPrunerHelper.verify_watermark_crossed">
<code class="sig-name descname">verify_watermark_crossed</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">watermark_perc</span></em>, <em class="sig-param"><span class="n">nfs_cache_disk_path</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_pruning_helper.html#NFSPrunerHelper.verify_watermark_crossed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_pruning_helper.NFSPrunerHelper.verify_watermark_crossed" title="Permalink to this definition">¶</a></dt>
<dd><p>verify watermark is restored for nfs disk cache..</p>
<dl>
<dt>Args:</dt><dd><p>watermark_perc   (int)     – currently configured watermark</p>
<p>nfs_cache_disk_path (path) – nfs disk name where cache path
is mounted</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if disk used space above watermark</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_pruning_helper.NFSPrunerHelper.verify_watermark_restored">
<code class="sig-name descname">verify_watermark_restored</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">watermark_perc</span></em>, <em class="sig-param"><span class="n">nfs_cache_disk_path</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_pruning_helper.html#NFSPrunerHelper.verify_watermark_restored"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_pruning_helper.NFSPrunerHelper.verify_watermark_restored" title="Permalink to this definition">¶</a></dt>
<dd><p>verify watermark is restored for nfs disk cache..</p>
<dl>
<dt>Args:</dt><dd><p>watermark_perc   (int)     – currently configured watermark</p>
<p>nfs_cache_disk_path (path) – nfs disk name where cache path
is mounted</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if disk used space above watermark</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_pruning_helper.NFSPrunerHelper.write_data_dev_zero">
<code class="sig-name descname">write_data_dev_zero</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">write_path</span></em>, <em class="sig-param"><span class="n">data_size</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_pruning_helper.html#NFSPrunerHelper.write_data_dev_zero"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_pruning_helper.NFSPrunerHelper.write_data_dev_zero" title="Permalink to this definition">¶</a></dt>
<dd><p>writing unique data to objectstore are slower than writing to disk directly.
so in order to run test faster this method allows ‘zero’ data to be written
directly to nfs cache disk which is much faster.
It writes ‘data_size’ number of 1GB files to given test path..</p>
<blockquote>
<div><dl>
<dt>Args:</dt><dd><p>write_path   (str)     – mount path of nfs cache disk</p>
<p>data_size        (int)     – data size in GB to be written
to nfs cache directory</p>
</dd>
<dt>Returns:</dt><dd><p>(path) - directory path where data is created in nfs cache mount volume</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>Exception:</dt><dd><p>if it is unable create data</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-Server.NFSObjectStore.nfs_solr_query">
<span id="server-nfsobjectstore-nfs-solr-query-module"></span><h2>Server.NFSObjectStore.nfs_solr_query module<a class="headerlink" href="#module-Server.NFSObjectStore.nfs_solr_query" title="Permalink to this headline">¶</a></h2>
<p>File for performing NFS server related operations in Commcell</p>
<p>ObjectstoreSolrHelper is the only class defined in this.</p>
<dl>
<dt>ObjectstoreSolrHelper: Provides methods which are relevant to</dt><dd><p>NFS index related operations</p>
</dd>
<dt>ObjectstoreSolrHelper:</dt><dd><p>__init__()                       –  initialize instance of the
ObjectstoreSolrHelper class</p>
<p>create_solr_query()             –  creates solr query for given NFS index core</p>
<p>create_url_and_get_response()   –  Helper method to get results from a url</p>
<p>check_if_error_in_response()    –  Method to check if response has error</p>
<p>check_is_visisble()             –  check for is_visible flag set to given value for files</p>
<p>collect_index_details()         – collect_index_details</p>
<p>collect_archfile_details()      – collects archfile Ids for given list of files</p>
<p>validate_deleted_items_index()  – validates deleted files details are cleared in latest core</p>
<p>validate_is_pruned()            – validates is_pruned flag for given file names</p>
<p>validate_afiles_after_synthfull() – validates afiles are prunable and archfile Ids are carried
forward correctly</p>
</dd>
</dl>
<dl class="py class">
<dt id="Server.NFSObjectStore.nfs_solr_query.ObjectstoreSolrHelper">
<em class="property">class </em><code class="sig-prename descclassname">Server.NFSObjectStore.nfs_solr_query.</code><code class="sig-name descname">ObjectstoreSolrHelper</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tc_obj</span></em>, <em class="sig-param"><span class="n">index_server_cloud</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_solr_query.html#ObjectstoreSolrHelper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_solr_query.ObjectstoreSolrHelper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Base class to execute solr related operations</p>
<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_solr_query.ObjectstoreSolrHelper.check_if_error_in_response">
<code class="sig-name descname">check_if_error_in_response</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">response</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_solr_query.html#ObjectstoreSolrHelper.check_if_error_in_response"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_solr_query.ObjectstoreSolrHelper.check_if_error_in_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to check if response has error
Args:</p>
<blockquote>
<div><p>response(obj)         –  Response Object</p>
</div></blockquote>
<dl class="simple">
<dt>Raises:</dt><dd><p>Exception if response was error</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_solr_query.ObjectstoreSolrHelper.check_is_visisble">
<code class="sig-name descname">check_is_visisble</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">files_list</span></em>, <em class="sig-param"><span class="n">index_core</span></em>, <em class="sig-param"><span class="n">application_id</span></em>, <em class="sig-param"><span class="n">is_visible</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_solr_query.html#ObjectstoreSolrHelper.check_is_visisble"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_solr_query.ObjectstoreSolrHelper.check_is_visisble" title="Permalink to this definition">¶</a></dt>
<dd><p>check for is_visible flag set to given value for files
Args:</p>
<blockquote>
<div><dl class="simple">
<dt>files_list(list)   – list of file names for which is_visible flag need</dt><dd><p>to be check</p>
</dd>
</dl>
<p>index_core(str)     –  NFS index core to query the search</p>
<p>application_id(int)   –  application id of objectstore</p>
<p>is_visible (bool)   – is_visible flag value to be checked</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>True - Success
False - on failure</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_solr_query.ObjectstoreSolrHelper.collect_archfile_details">
<code class="sig-name descname">collect_archfile_details</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">application_id</span></em>, <em class="sig-param"><span class="n">req_files_list</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_solr_query.html#ObjectstoreSolrHelper.collect_archfile_details"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_solr_query.ObjectstoreSolrHelper.collect_archfile_details" title="Permalink to this definition">¶</a></dt>
<dd><p>collects archfile Ids for given list of files
Args:</p>
<blockquote>
<div><p>application_id(int)   –  application id of objectstore</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>dictionary of archfile details {‘filename’:[list of archfiles]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_solr_query.ObjectstoreSolrHelper.collect_index_details">
<code class="sig-name descname">collect_index_details</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">application_id</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_solr_query.html#ObjectstoreSolrHelper.collect_index_details"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_solr_query.ObjectstoreSolrHelper.collect_index_details" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper method to get results from a url
Args:</p>
<blockquote>
<div><p>application_id(int)   –  application id of objectstore</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>dictionaries of latest and extent core details with
filename and contentid as key respectively</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_solr_query.ObjectstoreSolrHelper.create_solr_query">
<code class="sig-name descname">create_solr_query</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">index_core</span></em>, <em class="sig-param"><span class="n">select_dict</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">attr_list</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">op_params</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_solr_query.html#ObjectstoreSolrHelper.create_solr_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_solr_query.ObjectstoreSolrHelper.create_solr_query" title="Permalink to this definition">¶</a></dt>
<dd><p>creates solr query for given NFS index core
Args:</p>
<blockquote>
<div><p>index_core(str)     –  NFS index core to query the search</p>
<p>select_dict(dict)   –  dictionary containing select query</p>
<blockquote>
<div><p>attr_list (list)   – attribute list</p>
</div></blockquote>
<dl class="simple">
<dt>op_params(dictionary)       –  Other params and values for solr query</dt><dd><p>(Ex: start, rows)</p>
</dd>
</dl>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>The solr url based on params</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_solr_query.ObjectstoreSolrHelper.create_url_and_get_response">
<code class="sig-name descname">create_url_and_get_response</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">index_core</span></em>, <em class="sig-param"><span class="n">select_dict</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">attr_list</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">op_params</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_solr_query.html#ObjectstoreSolrHelper.create_url_and_get_response"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_solr_query.ObjectstoreSolrHelper.create_url_and_get_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper method to get results from a url
Args:</p>
<blockquote>
<div><p>index_core(str)     –  NFS index core to query the search</p>
<p>select_dict(dict)   –  dictionary containing select query</p>
<p>attr_list (list)   – attribute list</p>
<dl class="simple">
<dt>op_params(dictionary)       –  Other params and values for solr query</dt><dd><p>(Ex: start, rows)</p>
</dd>
</dl>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>The solr url based on params</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_solr_query.ObjectstoreSolrHelper.validate_afiles_after_synthfull">
<code class="sig-name descname">validate_afiles_after_synthfull</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tc_obj</span></em>, <em class="sig-param"><span class="n">afiles_before_synthfull</span></em>, <em class="sig-param"><span class="n">afiles_after_synthfull</span></em>, <em class="sig-param"><span class="n">deleted_files</span></em>, <em class="sig-param"><span class="n">non_deleted_files</span></em>, <em class="sig-param"><span class="n">deleted_afiles</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_solr_query.html#ObjectstoreSolrHelper.validate_afiles_after_synthfull"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_solr_query.ObjectstoreSolrHelper.validate_afiles_after_synthfull" title="Permalink to this definition">¶</a></dt>
<dd><p>validates afiles are prunable and archfile Ids are carried forward correctly
Args:</p>
<blockquote>
<div><p>tc_obj (obj)    –  testcase object which contain csdb instance</p>
<dl class="simple">
<dt>afiles_before_synthfull (dict) – filename and archfile ID</dt><dd><p>details before running synthfull Job</p>
</dd>
<dt>afiles_after_synthfull (dict) – filename and archfile ID</dt><dd><p>details after running synthfull Job</p>
</dd>
</dl>
<p>deleted_files (list) – list of filenames deleted</p>
<p>non_deleted_files(list) – list of filenames not deleted</p>
<p>deleted_afiles (list)   – afiles which are part of delted files</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_solr_query.ObjectstoreSolrHelper.validate_deleted_items_index">
<code class="sig-name descname">validate_deleted_items_index</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">deleted_files_list</span></em>, <em class="sig-param"><span class="n">application_id</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_solr_query.html#ObjectstoreSolrHelper.validate_deleted_items_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_solr_query.ObjectstoreSolrHelper.validate_deleted_items_index" title="Permalink to this definition">¶</a></dt>
<dd><p>validates deleted files details are cleared in latest core
Args:</p>
<blockquote>
<div><dl class="simple">
<dt>deleted_files_list(list)   – list of file names for which</dt><dd><p>index details to be cleared</p>
</dd>
</dl>
<p>application_id(int)   –  application id of objectstore</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Server.NFSObjectStore.nfs_solr_query.ObjectstoreSolrHelper.validate_is_pruned">
<code class="sig-name descname">validate_is_pruned</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">deleted_files</span></em>, <em class="sig-param"><span class="n">app_id</span></em>, <em class="sig-param"><span class="n">is_pruned</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Server/NFSObjectStore/nfs_solr_query.html#ObjectstoreSolrHelper.validate_is_pruned"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Server.NFSObjectStore.nfs_solr_query.ObjectstoreSolrHelper.validate_is_pruned" title="Permalink to this definition">¶</a></dt>
<dd><p>validates is_pruned flag for given file names
Args:</p>
<blockquote>
<div><dl class="simple">
<dt>deleted_files(list)   – list of file names for which</dt><dd><p>index details to be cleared</p>
</dd>
</dl>
<p>app_id(int)   –  application id of objectstore</p>
<p>is_pruned(bool) – value of isPruned field</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-Server.NFSObjectStore">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-Server.NFSObjectStore" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Commvault Systems Inc. All Rights Reserved

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>